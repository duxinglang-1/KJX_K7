GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 1


   1              		.file	"ImageGetDimension.c"
   4              		.text
   5              	Ltext0:
 287              		.data
 288              	_Video_Ext:
 289 0000 41564900 		.ascii "AVI\0"
 290 0004 33475000 		.ascii "3GP\0"
 291 0008 4D503400 		.ascii "MP4\0"
 292 000c 00000000 		.align 32
 292      00000000 
 292      00000000 
 292      00000000 
 292      00000000 
 293              	_PNG_seq_to_ENFB_str:
 294 0020 53535F4D 		.ascii "SS_MAG\0"
 294      414700
 295 0027 00000000 		.space 249
 295      00000000 
 295      00000000 
 295      00000000 
 295      00000000 
 296 0120 53535F56 		.ascii "SS_VOMAL\0"
 296      4F4D414C 
 296      00
 297 0129 00000000 		.space 247
 297      00000000 
 297      00000000 
 297      00000000 
 297      00000000 
 298 0220 53535F53 		.ascii "SS_SEND\0"
 298      454E4400 
 299 0228 00000000 		.space 248
 299      00000000 
 299      00000000 
 299      00000000 
 299      00000000 
 300 0320 53535F57 		.ascii "SS_WARN\0"
 300      41524E00 
 301 0328 00000000 		.space 248
 301      00000000 
 301      00000000 
 301      00000000 
 301      00000000 
 302 0420 53535F53 		.ascii "SS_SUCES\0"
 302      55434553 
 302      00
 303 0429 00000000 		.space 247
 303      00000000 
 303      00000000 
 303      00000000 
 303      00000000 
 304 0520 454D5F43 		.ascii "EM_CON\0"
 304      4F4E00
 305 0527 00000000 		.space 249
 305      00000000 
 305      00000000 
 305      00000000 
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 2


 305      00000000 
 306 0620 454D5F53 		.ascii "EM_SEND\0"
 306      454E4400 
 307 0628 00000000 		.space 248
 307      00000000 
 307      00000000 
 307      00000000 
 307      00000000 
 308 0720 454D5F52 		.ascii "EM_REVEIVE\0"
 308      45564549 
 308      564500
 309 072b 00000000 		.space 245
 309      00000000 
 309      00000000 
 309      00000000 
 309      00000000 
 310 0820 454D5F53 		.ascii "EM_SUCCESS\0"
 310      55434345 
 310      535300
 311 082b 00000000 		.space 245
 311      00000000 
 311      00000000 
 311      00000000 
 311      00000000 
 312 0920 454D5F46 		.ascii "EM_FAIL\0"
 312      41494C00 
 313 0928 00000000 		.space 248
 313      00000000 
 313      00000000 
 313      00000000 
 313      00000000 
 314 0a20 434C5F45 		.ascii "CL_END\0"
 314      4E4400
 315 0a27 00000000 		.space 249
 315      00000000 
 315      00000000 
 315      00000000 
 315      00000000 
 316 0b20 53594E43 		.ascii "SYNCHRONZING\0"
 316      48524F4E 
 316      5A494E47 
 316      00
 317 0b2d 00000000 		.space 243
 317      00000000 
 317      00000000 
 317      00000000 
 317      00000000 
 318 0c20 414C4152 		.ascii "ALARM\0"
 318      4D00
 319 0c26 00000000 		.space 250
 319      00000000 
 319      00000000 
 319      00000000 
 319      00000000 
 320 0d20 4C4F4144 		.ascii "LOADING\0"
 320      494E4700 
 321 0d28 00000000 		.space 248
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 3


 321      00000000 
 321      00000000 
 321      00000000 
 321      00000000 
 322 0e20 50524F47 		.ascii "PROGRESS\0"
 322      52455353 
 322      00
 323 0e29 00000000 		.space 247
 323      00000000 
 323      00000000 
 323      00000000 
 323      00000000 
 324 0f20 53504541 		.ascii "SPEAKING\0"
 324      4B494E47 
 324      00
 325 0f29 00000000 		.space 247
 325      00000000 
 325      00000000 
 325      00000000 
 325      00000000 
 326 1020 5343414C 		.ascii "SCALING\0"
 326      494E4700 
 327 1028 00000000 		.space 248
 327      00000000 
 327      00000000 
 327      00000000 
 327      00000000 
 328 1120 53454152 		.ascii "SEARCH\0"
 328      434800
 329 1127 00000000 		.space 249
 329      00000000 
 329      00000000 
 329      00000000 
 329      00000000 
 330 1220 504F5055 		.ascii "POPUPPAGE\0"
 330      50504147 
 330      4500
 331 122a 00000000 		.space 246
 331      00000000 
 331      00000000 
 331      00000000 
 331      00000000 
 332              		.text
 333              	LC0:
 334 0000 726200   		.ascii "rb\0"
 335              	LC1:
 336 0003 4F70656E 		.ascii "Open file err:\11%s\12\0"
 336      2066696C 
 336      65206572 
 336      723A0925 
 336      730A00
 337              	LC2:
 338 0016 0925730A 		.ascii "\11%s\12\0"
 338      00
 339 001b 908D7426 		.align 32
 339      00
 340              	LC3:
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 4


 341 0020 696D6167 		.ascii "image_bmp_get_dimension: open file failed,\11 FILE:%s\0"
 341      655F626D 
 341      705F6765 
 341      745F6469 
 341      6D656E73 
 342              	LC4:
 343 0054 494D4147 		.ascii "IMAGEGETDIMENSION\0"
 343      45474554 
 343      44494D45 
 343      4E53494F 
 343      4E00
 344              	LC5:
 345 0066 454D5054 		.ascii "EMPTYIMAGE.BMP\0"
 345      59494D41 
 345      47452E42 
 345      4D5000
 346              	LC6:
 347 0075 52656164 		.ascii "Read file err:\11%s\12\0"
 347      2066696C 
 347      65206572 
 347      723A0925 
 347      730A00
 348 0088 90909090 		.align 32
 348      90909090 
 348      90909090 
 348      90909090 
 348      90909090 
 349              	LC7:
 350 00a0 696D6167 		.ascii "image_bmp_get_dimension: Read file failed, \11 FILE:%s\0"
 350      655F626D 
 350      705F6765 
 350      745F6469 
 350      6D656E73 
 351              	LC8:
 352 00d5 4E6F6E2D 		.ascii "Non-standard file err:\11%s\12\0"
 352      7374616E 
 352      64617264 
 352      2066696C 
 352      65206572 
 353 00f0 90909090 		.align 32
 353      90909090 
 353      90909090 
 353      90909090 
 354              	LC9:
 355 0100 696D6167 		.ascii "image_bmp_get_dimension: not standard file ( not BMP file) , FILE:\11%s\0"
 355      655F626D 
 355      705F6765 
 355      745F6469 
 355      6D656E73 
 356 0146 90909090 		.align 32
 356      90909090 
 356      90909090 
 356      90909090 
 356      90909090 
 357              	LC10:
 358 0160 696D6167 		.ascii "image_bmp_get_dimension: not standard file ( core info header, currently not support) , FI
 358      655F626D 
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 5


 358      705F6765 
 358      745F6469 
 358      6D656E73 
 364              	_image_bmp_get_dimension:
   1:../../MMI/Resource/ImageGetDimension.c **** /*****************************************************************************
   2:../../MMI/Resource/ImageGetDimension.c **** *  Copyright Statement:
   3:../../MMI/Resource/ImageGetDimension.c **** *  --------------------
   4:../../MMI/Resource/ImageGetDimension.c **** *  This software is protected by Copyright and the information contained
   5:../../MMI/Resource/ImageGetDimension.c **** *  herein is confidential. The software may not be copied and the information
   6:../../MMI/Resource/ImageGetDimension.c **** *  contained herein may not be used or disclosed except with the written
   7:../../MMI/Resource/ImageGetDimension.c **** *  permission of MediaTek Inc. (C) 2005
   8:../../MMI/Resource/ImageGetDimension.c **** *
   9:../../MMI/Resource/ImageGetDimension.c **** *  BY OPENING THIS FILE, BUYER HEREBY UNEQUIVOCALLY ACKNOWLEDGES AND AGREES
  10:../../MMI/Resource/ImageGetDimension.c **** *  THAT THE SOFTWARE/FIRMWARE AND ITS DOCUMENTATIONS ("MEDIATEK SOFTWARE")
  11:../../MMI/Resource/ImageGetDimension.c **** *  RECEIVED FROM MEDIATEK AND/OR ITS REPRESENTATIVES ARE PROVIDED TO BUYER ON
  12:../../MMI/Resource/ImageGetDimension.c **** *  AN "AS-IS" BASIS ONLY. MEDIATEK EXPRESSLY DISCLAIMS ANY AND ALL WARRANTIES,
  13:../../MMI/Resource/ImageGetDimension.c **** *  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE IMPLIED WARRANTIES OF
  14:../../MMI/Resource/ImageGetDimension.c **** *  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE OR NONINFRINGEMENT.
  15:../../MMI/Resource/ImageGetDimension.c **** *  NEITHER DOES MEDIATEK PROVIDE ANY WARRANTY WHATSOEVER WITH RESPECT TO THE
  16:../../MMI/Resource/ImageGetDimension.c **** *  SOFTWARE OF ANY THIRD PARTY WHICH MAY BE USED BY, INCORPORATED IN, OR
  17:../../MMI/Resource/ImageGetDimension.c **** *  SUPPLIED WITH THE MEDIATEK SOFTWARE, AND BUYER AGREES TO LOOK ONLY TO SUCH
  18:../../MMI/Resource/ImageGetDimension.c **** *  THIRD PARTY FOR ANY WARRANTY CLAIM RELATING THERETO. MEDIATEK SHALL ALSO
  19:../../MMI/Resource/ImageGetDimension.c **** *  NOT BE RESPONSIBLE FOR ANY MEDIATEK SOFTWARE RELEASES MADE TO BUYER'S
  20:../../MMI/Resource/ImageGetDimension.c **** *  SPECIFICATION OR TO CONFORM TO A PARTICULAR STANDARD OR OPEN FORUM.
  21:../../MMI/Resource/ImageGetDimension.c **** *
  22:../../MMI/Resource/ImageGetDimension.c **** *  BUYER'S SOLE AND EXCLUSIVE REMEDY AND MEDIATEK'S ENTIRE AND CUMULATIVE
  23:../../MMI/Resource/ImageGetDimension.c **** *  LIABILITY WITH RESPECT TO THE MEDIATEK SOFTWARE RELEASED HEREUNDER WILL BE,
  24:../../MMI/Resource/ImageGetDimension.c **** *  AT MEDIATEK'S OPTION, TO REVISE OR REPLACE THE MEDIATEK SOFTWARE AT ISSUE,
  25:../../MMI/Resource/ImageGetDimension.c **** *  OR REFUND ANY SOFTWARE LICENSE FEES OR SERVICE CHARGE PAID BY BUYER TO
  26:../../MMI/Resource/ImageGetDimension.c **** *  MEDIATEK FOR SUCH MEDIATEK SOFTWARE AT ISSUE. 
  27:../../MMI/Resource/ImageGetDimension.c **** *
  28:../../MMI/Resource/ImageGetDimension.c **** *  THE TRANSACTION CONTEMPLATED HEREUNDER SHALL BE CONSTRUED IN ACCORDANCE
  29:../../MMI/Resource/ImageGetDimension.c **** *  WITH THE LAWS OF THE STATE OF CALIFORNIA, USA, EXCLUDING ITS CONFLICT OF
  30:../../MMI/Resource/ImageGetDimension.c **** *  LAWS PRINCIPLES.  ANY DISPUTES, CONTROVERSIES OR CLAIMS ARISING THEREOF AND
  31:../../MMI/Resource/ImageGetDimension.c **** *  RELATED THERETO SHALL BE SETTLED BY ARBITRATION IN SAN FRANCISCO, CA, UNDER
  32:../../MMI/Resource/ImageGetDimension.c **** *  THE RULES OF THE INTERNATIONAL CHAMBER OF COMMERCE (ICC).
  33:../../MMI/Resource/ImageGetDimension.c **** *
  34:../../MMI/Resource/ImageGetDimension.c **** *****************************************************************************/
  35:../../MMI/Resource/ImageGetDimension.c **** /*****************************************************************************
  36:../../MMI/Resource/ImageGetDimension.c ****  *
  37:../../MMI/Resource/ImageGetDimension.c ****  * Filename:
  38:../../MMI/Resource/ImageGetDimension.c ****  * ---------
  39:../../MMI/Resource/ImageGetDimension.c ****  *  ImageGetDimension.c
  40:../../MMI/Resource/ImageGetDimension.c ****  *
  41:../../MMI/Resource/ImageGetDimension.c ****  * Project:
  42:../../MMI/Resource/ImageGetDimension.c ****  * -------- 
  43:../../MMI/Resource/ImageGetDimension.c ****  *  MAUI
  44:../../MMI/Resource/ImageGetDimension.c ****  *
  45:../../MMI/Resource/ImageGetDimension.c ****  * Description:
  46:../../MMI/Resource/ImageGetDimension.c ****  * ------------
  47:../../MMI/Resource/ImageGetDimension.c ****  *  get image dimension
  48:../../MMI/Resource/ImageGetDimension.c ****  *
  49:../../MMI/Resource/ImageGetDimension.c ****  * Author:
  50:../../MMI/Resource/ImageGetDimension.c ****  * -------
  51:../../MMI/Resource/ImageGetDimension.c ****  * -------
  52:../../MMI/Resource/ImageGetDimension.c ****  *
  53:../../MMI/Resource/ImageGetDimension.c ****  *============================================================================
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 6


  54:../../MMI/Resource/ImageGetDimension.c ****  *             HISTORY
  55:../../MMI/Resource/ImageGetDimension.c ****  * Below this line, this part is controlled by PVCS VM. DO NOT MODIFY!!
  56:../../MMI/Resource/ImageGetDimension.c ****  *------------------------------------------------------------------------------
  57:../../MMI/Resource/ImageGetDimension.c ****  * removed!
  58:../../MMI/Resource/ImageGetDimension.c ****  *
  59:../../MMI/Resource/ImageGetDimension.c ****  * removed!
  60:../../MMI/Resource/ImageGetDimension.c ****  * removed!
  61:../../MMI/Resource/ImageGetDimension.c ****  * removed!
  62:../../MMI/Resource/ImageGetDimension.c ****  *
  63:../../MMI/Resource/ImageGetDimension.c ****  * removed!
  64:../../MMI/Resource/ImageGetDimension.c ****  * removed!
  65:../../MMI/Resource/ImageGetDimension.c ****  * removed!
  66:../../MMI/Resource/ImageGetDimension.c ****  *
  67:../../MMI/Resource/ImageGetDimension.c ****  * removed!
  68:../../MMI/Resource/ImageGetDimension.c ****  * removed!
  69:../../MMI/Resource/ImageGetDimension.c ****  * removed!
  70:../../MMI/Resource/ImageGetDimension.c ****  *
  71:../../MMI/Resource/ImageGetDimension.c ****  * removed!
  72:../../MMI/Resource/ImageGetDimension.c ****  * removed!
  73:../../MMI/Resource/ImageGetDimension.c ****  * removed!
  74:../../MMI/Resource/ImageGetDimension.c ****  *
  75:../../MMI/Resource/ImageGetDimension.c ****  * removed!
  76:../../MMI/Resource/ImageGetDimension.c ****  * removed!
  77:../../MMI/Resource/ImageGetDimension.c ****  * removed!
  78:../../MMI/Resource/ImageGetDimension.c ****  *
  79:../../MMI/Resource/ImageGetDimension.c ****  * removed!
  80:../../MMI/Resource/ImageGetDimension.c ****  * removed!
  81:../../MMI/Resource/ImageGetDimension.c ****  * removed!
  82:../../MMI/Resource/ImageGetDimension.c ****  *
  83:../../MMI/Resource/ImageGetDimension.c ****  * removed!
  84:../../MMI/Resource/ImageGetDimension.c ****  * removed!
  85:../../MMI/Resource/ImageGetDimension.c ****  * removed!
  86:../../MMI/Resource/ImageGetDimension.c ****  *
  87:../../MMI/Resource/ImageGetDimension.c ****  * removed!
  88:../../MMI/Resource/ImageGetDimension.c ****  * removed!
  89:../../MMI/Resource/ImageGetDimension.c ****  * removed!
  90:../../MMI/Resource/ImageGetDimension.c ****  *
  91:../../MMI/Resource/ImageGetDimension.c ****  * removed!
  92:../../MMI/Resource/ImageGetDimension.c ****  * removed!
  93:../../MMI/Resource/ImageGetDimension.c ****  * removed!
  94:../../MMI/Resource/ImageGetDimension.c ****  *
  95:../../MMI/Resource/ImageGetDimension.c ****  * removed!
  96:../../MMI/Resource/ImageGetDimension.c ****  * removed!
  97:../../MMI/Resource/ImageGetDimension.c ****  * removed!
  98:../../MMI/Resource/ImageGetDimension.c ****  *
  99:../../MMI/Resource/ImageGetDimension.c ****  * removed!
 100:../../MMI/Resource/ImageGetDimension.c ****  * removed!
 101:../../MMI/Resource/ImageGetDimension.c ****  * removed!
 102:../../MMI/Resource/ImageGetDimension.c ****  *
 103:../../MMI/Resource/ImageGetDimension.c ****  * removed!
 104:../../MMI/Resource/ImageGetDimension.c ****  * removed!
 105:../../MMI/Resource/ImageGetDimension.c ****  * removed!
 106:../../MMI/Resource/ImageGetDimension.c ****  *
 107:../../MMI/Resource/ImageGetDimension.c ****  * removed!
 108:../../MMI/Resource/ImageGetDimension.c ****  * removed!
 109:../../MMI/Resource/ImageGetDimension.c ****  * removed!
 110:../../MMI/Resource/ImageGetDimension.c ****  *
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 7


 111:../../MMI/Resource/ImageGetDimension.c ****  * removed!
 112:../../MMI/Resource/ImageGetDimension.c ****  * removed!
 113:../../MMI/Resource/ImageGetDimension.c ****  * removed!
 114:../../MMI/Resource/ImageGetDimension.c ****  *
 115:../../MMI/Resource/ImageGetDimension.c ****  * removed!
 116:../../MMI/Resource/ImageGetDimension.c ****  * removed!
 117:../../MMI/Resource/ImageGetDimension.c ****  * removed!
 118:../../MMI/Resource/ImageGetDimension.c ****  *
 119:../../MMI/Resource/ImageGetDimension.c ****  * removed!
 120:../../MMI/Resource/ImageGetDimension.c ****  * removed!
 121:../../MMI/Resource/ImageGetDimension.c ****  * removed!
 122:../../MMI/Resource/ImageGetDimension.c ****  *
 123:../../MMI/Resource/ImageGetDimension.c ****  * removed!
 124:../../MMI/Resource/ImageGetDimension.c ****  * removed!
 125:../../MMI/Resource/ImageGetDimension.c ****  * removed!
 126:../../MMI/Resource/ImageGetDimension.c ****  *
 127:../../MMI/Resource/ImageGetDimension.c ****  * removed!
 128:../../MMI/Resource/ImageGetDimension.c ****  * removed!
 129:../../MMI/Resource/ImageGetDimension.c ****  * removed!
 130:../../MMI/Resource/ImageGetDimension.c ****  *
 131:../../MMI/Resource/ImageGetDimension.c ****  * removed!
 132:../../MMI/Resource/ImageGetDimension.c ****  * removed!
 133:../../MMI/Resource/ImageGetDimension.c ****  * removed!
 134:../../MMI/Resource/ImageGetDimension.c ****  *
 135:../../MMI/Resource/ImageGetDimension.c ****  * removed!
 136:../../MMI/Resource/ImageGetDimension.c ****  * removed!
 137:../../MMI/Resource/ImageGetDimension.c ****  * removed!
 138:../../MMI/Resource/ImageGetDimension.c ****  *
 139:../../MMI/Resource/ImageGetDimension.c ****  * removed!
 140:../../MMI/Resource/ImageGetDimension.c ****  * removed!
 141:../../MMI/Resource/ImageGetDimension.c ****  * removed!
 142:../../MMI/Resource/ImageGetDimension.c ****  *
 143:../../MMI/Resource/ImageGetDimension.c ****  *
 144:../../MMI/Resource/ImageGetDimension.c ****  *------------------------------------------------------------------------------
 145:../../MMI/Resource/ImageGetDimension.c ****  * Upper this line, this part is controlled by PVCS VM. DO NOT MODIFY!!
 146:../../MMI/Resource/ImageGetDimension.c ****  *============================================================================
 147:../../MMI/Resource/ImageGetDimension.c ****  ****************************************************************************/
 148:../../MMI/Resource/ImageGetDimension.c **** #include <stdio.h>
 149:../../MMI/Resource/ImageGetDimension.c **** #include <stdlib.h>
 150:../../MMI/Resource/ImageGetDimension.c **** #include <string.h>
 151:../../MMI/Resource/ImageGetDimension.c **** 
 152:../../MMI/Resource/ImageGetDimension.c **** #include "mmi_features.h"
 153:../../MMI/Resource/ImageGetDimension.c **** #include "CustDataRes.h"
 154:../../MMI/Resource/ImageGetDimension.c **** #include "ImageGetDimension.h"
 155:../../MMI/Resource/ImageGetDimension.c **** #include "CustDataProts.h"
 156:../../MMI/Resource/ImageGetDimension.c **** 
 157:../../MMI/Resource/ImageGetDimension.c **** /*RHR*/
 158:../../MMI/Resource/ImageGetDimension.c **** #include "MMIDataType.h"
 159:../../MMI/Resource/ImageGetDimension.c **** 
 160:../../MMI/Resource/ImageGetDimension.c **** #ifdef __RESOURCE_GEN_
 161:../../MMI/Resource/ImageGetDimension.c **** #include "ResgenLogCAPI.h"   // Resgen Log APIs
 162:../../MMI/Resource/ImageGetDimension.c **** #include "OfflineResPopCAPI.h"
 163:../../MMI/Resource/ImageGetDimension.c **** #endif //__RESOURCE_GEN_
 164:../../MMI/Resource/ImageGetDimension.c **** 
 165:../../MMI/Resource/ImageGetDimension.c **** /***************************************************************************** 
 166:../../MMI/Resource/ImageGetDimension.c **** * Define
 167:../../MMI/Resource/ImageGetDimension.c **** *****************************************************************************/
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 8


 168:../../MMI/Resource/ImageGetDimension.c **** #ifdef __RESOURCE_GEN_ 
 169:../../MMI/Resource/ImageGetDimension.c **** #define IMGDIM_TAG       "IMAGEGETDIMENSION"
 170:../../MMI/Resource/ImageGetDimension.c **** #define IMGDIM_LOG_D(format, args...) RES_LOG_D((IMGDIM_TAG), (format) , ##args)
 171:../../MMI/Resource/ImageGetDimension.c **** #define IMGDIM_LOG_V(format, args...) RES_LOG_V((IMGDIM_TAG), (format) , ##args)
 172:../../MMI/Resource/ImageGetDimension.c **** #define IMGDIM_LOG_W(format, args...) RES_LOG_W((IMGDIM_TAG), (format) , ##args)
 173:../../MMI/Resource/ImageGetDimension.c **** #define IMGDIM_LOG_E(format, args...) RES_LOG_E((IMGDIM_TAG), (format) , ##args)
 174:../../MMI/Resource/ImageGetDimension.c **** #else
 175:../../MMI/Resource/ImageGetDimension.c **** #define IMGDIM_LOG_D(format, ...) printf((format), ##__VA_ARGS__)
 176:../../MMI/Resource/ImageGetDimension.c **** #define IMGDIM_LOG_V(format, ...) printf((format), ##__VA_ARGS__)
 177:../../MMI/Resource/ImageGetDimension.c **** #define IMGDIM_LOG_W(format, ...) printf((format), ##__VA_ARGS__)
 178:../../MMI/Resource/ImageGetDimension.c **** #define IMGDIM_LOG_E(format, ...) printf((format), ##__VA_ARGS__)
 179:../../MMI/Resource/ImageGetDimension.c **** #endif  //__RESOURCE_GEN_
 180:../../MMI/Resource/ImageGetDimension.c **** 
 181:../../MMI/Resource/ImageGetDimension.c **** 
 182:../../MMI/Resource/ImageGetDimension.c **** /* header info size */
 183:../../MMI/Resource/ImageGetDimension.c **** #define BMP_INFO_SIZE	26
 184:../../MMI/Resource/ImageGetDimension.c **** #define GIF_INFO_SIZE	10
 185:../../MMI/Resource/ImageGetDimension.c **** #define PNG_INFO_SIZE	24
 186:../../MMI/Resource/ImageGetDimension.c **** 
 187:../../MMI/Resource/ImageGetDimension.c **** /* markers of JPEG standard */
 188:../../MMI/Resource/ImageGetDimension.c **** #define JPEG_MARKER_SOF0	0xC0
 189:../../MMI/Resource/ImageGetDimension.c **** #define JPEG_MARKER_SOF1	0xC1
 190:../../MMI/Resource/ImageGetDimension.c **** #define JPEG_MARKER_SOF2	0xC2
 191:../../MMI/Resource/ImageGetDimension.c **** #define JPEG_MARKER_SOF3	0xC3
 192:../../MMI/Resource/ImageGetDimension.c **** #define JPEG_MARKER_SOF15	0xCF
 193:../../MMI/Resource/ImageGetDimension.c **** #define JPEG_MARKER_SOS		0xDA
 194:../../MMI/Resource/ImageGetDimension.c **** #define JPEG_MARKER_DQT		0xDB
 195:../../MMI/Resource/ImageGetDimension.c **** #define JPEG_MARKER_DNL		0xDC
 196:../../MMI/Resource/ImageGetDimension.c **** #define JPEG_MARKER_DRI		0xDD
 197:../../MMI/Resource/ImageGetDimension.c **** #define JPEG_MARKER_DHP		0xDE
 198:../../MMI/Resource/ImageGetDimension.c **** #define JPEG_MARKER_EXP		0xDF
 199:../../MMI/Resource/ImageGetDimension.c **** #define JPEG_MARKER_COM		0xFE
 200:../../MMI/Resource/ImageGetDimension.c **** #define JPEG_MARKER_APP0	0xE0
 201:../../MMI/Resource/ImageGetDimension.c **** #define JPEG_MARKER_APP15	0xEF
 202:../../MMI/Resource/ImageGetDimension.c **** 
 203:../../MMI/Resource/ImageGetDimension.c **** /* macros to get data (X) from buffer (SRC) */
 204:../../MMI/Resource/ImageGetDimension.c **** #define GET_U8(SRC,X)           \
 205:../../MMI/Resource/ImageGetDimension.c ****     do                          \
 206:../../MMI/Resource/ImageGetDimension.c ****     {                           \
 207:../../MMI/Resource/ImageGetDimension.c ****     X = ((U8) *(SRC)++);    \
 208:../../MMI/Resource/ImageGetDimension.c ****     } while(0)
 209:../../MMI/Resource/ImageGetDimension.c **** 
 210:../../MMI/Resource/ImageGetDimension.c **** #define GET_U16(SRC,X)              \
 211:../../MMI/Resource/ImageGetDimension.c ****     do                              \
 212:../../MMI/Resource/ImageGetDimension.c ****     {                               \
 213:../../MMI/Resource/ImageGetDimension.c ****     X = ((U16) (U8)*(SRC)++);   \
 214:../../MMI/Resource/ImageGetDimension.c ****     X |= ((U16) *(SRC)++)<<8;   \
 215:../../MMI/Resource/ImageGetDimension.c ****     } while(0)
 216:../../MMI/Resource/ImageGetDimension.c **** 
 217:../../MMI/Resource/ImageGetDimension.c **** #define GET_U24(SRC,X)                  \
 218:../../MMI/Resource/ImageGetDimension.c ****     do                                  \
 219:../../MMI/Resource/ImageGetDimension.c ****     {                                   \
 220:../../MMI/Resource/ImageGetDimension.c ****     X = ((U32) (U8)*(SRC)++);       \
 221:../../MMI/Resource/ImageGetDimension.c ****     X |= ((U32) (U8)*(SRC)++)<<8;   \
 222:../../MMI/Resource/ImageGetDimension.c ****     X |= ((U32) (U8)*(SRC)++)<<16;  \
 223:../../MMI/Resource/ImageGetDimension.c ****     } while(0)
 224:../../MMI/Resource/ImageGetDimension.c **** 
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 9


 225:../../MMI/Resource/ImageGetDimension.c **** #define GET_U32(SRC,X)                  \
 226:../../MMI/Resource/ImageGetDimension.c ****     do                                  \
 227:../../MMI/Resource/ImageGetDimension.c ****     {                                   \
 228:../../MMI/Resource/ImageGetDimension.c ****     (X) = ((U32) (U8)*(SRC)++);     \
 229:../../MMI/Resource/ImageGetDimension.c ****     (X) |= ((U32) (U8)*(SRC)++)<<8; \
 230:../../MMI/Resource/ImageGetDimension.c ****     (X) |= ((U32) (U8)*(SRC)++)<<16;\
 231:../../MMI/Resource/ImageGetDimension.c ****     (X) |= ((U32) (U8)*(SRC)++)<<24;\
 232:../../MMI/Resource/ImageGetDimension.c ****     } while(0)
 233:../../MMI/Resource/ImageGetDimension.c **** 
 234:../../MMI/Resource/ImageGetDimension.c **** #define PEEK_U8(SRC,X)      \
 235:../../MMI/Resource/ImageGetDimension.c ****     do                      \
 236:../../MMI/Resource/ImageGetDimension.c ****     {                       \
 237:../../MMI/Resource/ImageGetDimension.c ****     (X) = (U8) *(SRC);  \
 238:../../MMI/Resource/ImageGetDimension.c ****     } while(0)
 239:../../MMI/Resource/ImageGetDimension.c **** 
 240:../../MMI/Resource/ImageGetDimension.c **** #define PEEK_U8_N(SRC,X,N)      \
 241:../../MMI/Resource/ImageGetDimension.c ****     do                          \
 242:../../MMI/Resource/ImageGetDimension.c ****     {                           \
 243:../../MMI/Resource/ImageGetDimension.c ****     (X) = (U8) *(SRC + N);  \
 244:../../MMI/Resource/ImageGetDimension.c ****     } while(0)
 245:../../MMI/Resource/ImageGetDimension.c **** 
 246:../../MMI/Resource/ImageGetDimension.c **** #define FLUSH(SRC,X)    \
 247:../../MMI/Resource/ImageGetDimension.c ****     do                  \
 248:../../MMI/Resource/ImageGetDimension.c ****     {                   \
 249:../../MMI/Resource/ImageGetDimension.c ****     (SRC) += (X);   \
 250:../../MMI/Resource/ImageGetDimension.c ****     } while(0)
 251:../../MMI/Resource/ImageGetDimension.c **** 
 252:../../MMI/Resource/ImageGetDimension.c **** #define MYFCLOSE(fp)    \
 253:../../MMI/Resource/ImageGetDimension.c ****     do                  \
 254:../../MMI/Resource/ImageGetDimension.c ****     {                   \
 255:../../MMI/Resource/ImageGetDimension.c ****     if (fp != NULL) \
 256:../../MMI/Resource/ImageGetDimension.c ****         {               \
 257:../../MMI/Resource/ImageGetDimension.c ****         fclose(fp); \
 258:../../MMI/Resource/ImageGetDimension.c ****         fp = NULL;  \
 259:../../MMI/Resource/ImageGetDimension.c ****         }               \
 260:../../MMI/Resource/ImageGetDimension.c ****     } while(0)
 261:../../MMI/Resource/ImageGetDimension.c **** 
 262:../../MMI/Resource/ImageGetDimension.c **** #define GDI_GIF_STACK_SIZE  (0x1000 + 4)
 263:../../MMI/Resource/ImageGetDimension.c **** #define GDI_GIF_TREE_SIZE   (0x4000 + 4)
 264:../../MMI/Resource/ImageGetDimension.c **** 
 265:../../MMI/Resource/ImageGetDimension.c **** #define STR_SIZE    256
 266:../../MMI/Resource/ImageGetDimension.c **** 
 267:../../MMI/Resource/ImageGetDimension.c **** static char Video_Ext[][4] = {"AVI", "3GP", "MP4"};
 268:../../MMI/Resource/ImageGetDimension.c **** static char PNG_seq_to_ENFB_str[][STR_SIZE] =
 269:../../MMI/Resource/ImageGetDimension.c **** { "SS_MAG",
 270:../../MMI/Resource/ImageGetDimension.c **** "SS_VOMAL",
 271:../../MMI/Resource/ImageGetDimension.c **** "SS_SEND",
 272:../../MMI/Resource/ImageGetDimension.c **** "SS_WARN",
 273:../../MMI/Resource/ImageGetDimension.c **** "SS_SUCES",
 274:../../MMI/Resource/ImageGetDimension.c **** "EM_CON",
 275:../../MMI/Resource/ImageGetDimension.c **** "EM_SEND",
 276:../../MMI/Resource/ImageGetDimension.c **** "EM_REVEIVE",
 277:../../MMI/Resource/ImageGetDimension.c **** "EM_SUCCESS",
 278:../../MMI/Resource/ImageGetDimension.c **** "EM_FAIL",
 279:../../MMI/Resource/ImageGetDimension.c **** "CL_END",
 280:../../MMI/Resource/ImageGetDimension.c **** "SYNCHRONZING",
 281:../../MMI/Resource/ImageGetDimension.c **** "ALARM",
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 10


 282:../../MMI/Resource/ImageGetDimension.c **** "LOADING",
 283:../../MMI/Resource/ImageGetDimension.c **** "PROGRESS",
 284:../../MMI/Resource/ImageGetDimension.c **** "SPEAKING",
 285:../../MMI/Resource/ImageGetDimension.c **** "SCALING",
 286:../../MMI/Resource/ImageGetDimension.c **** "SEARCH",
 287:../../MMI/Resource/ImageGetDimension.c **** "POPUPPAGE"
 288:../../MMI/Resource/ImageGetDimension.c **** };
 289:../../MMI/Resource/ImageGetDimension.c **** 
 290:../../MMI/Resource/ImageGetDimension.c **** extern MMI_BOOL ENFBAssociatedIDFlag;
 291:../../MMI/Resource/ImageGetDimension.c **** extern MMI_BOOL ENFBAssociatedIDAdded;	
 292:../../MMI/Resource/ImageGetDimension.c **** 
 293:../../MMI/Resource/ImageGetDimension.c **** 
 294:../../MMI/Resource/ImageGetDimension.c **** /*****************************************************************************
 295:../../MMI/Resource/ImageGetDimension.c **** * FUNCTION
 296:../../MMI/Resource/ImageGetDimension.c **** *  image_bmp_get_dimension
 297:../../MMI/Resource/ImageGetDimension.c **** * DESCRIPTION
 298:../../MMI/Resource/ImageGetDimension.c **** *  get dimension of a bmp from file
 299:../../MMI/Resource/ImageGetDimension.c **** * PARAMETERS
 300:../../MMI/Resource/ImageGetDimension.c **** *  filename    [IN]
 301:../../MMI/Resource/ImageGetDimension.c **** *  width       [OUT]
 302:../../MMI/Resource/ImageGetDimension.c **** *  height      [OUT]
 303:../../MMI/Resource/ImageGetDimension.c **** * RETURNS
 304:../../MMI/Resource/ImageGetDimension.c **** *  MMI_BOOL	MMI_TRUE or MMI_FALSE
 305:../../MMI/Resource/ImageGetDimension.c **** *****************************************************************************/
 306:../../MMI/Resource/ImageGetDimension.c **** static MMI_BOOL image_bmp_get_dimension(S8 *filename, U32 *width, U32 *height)
 307:../../MMI/Resource/ImageGetDimension.c **** {
 366              	LM1:
 367 01c1 55       		pushl	%ebp
 368 01c2 89E5     		movl	%esp, %ebp
 369 01c4 83EC68   		subl	$104, %esp
 308:../../MMI/Resource/ImageGetDimension.c ****     /*----------------------------------------------------------------*/
 309:../../MMI/Resource/ImageGetDimension.c ****     /* Local Variables                                                */
 310:../../MMI/Resource/ImageGetDimension.c ****     /*----------------------------------------------------------------*/
 311:../../MMI/Resource/ImageGetDimension.c ****     FILE *fp;
 312:../../MMI/Resource/ImageGetDimension.c ****     U8 buf[BMP_INFO_SIZE];
 313:../../MMI/Resource/ImageGetDimension.c ****     U8 *src;
 314:../../MMI/Resource/ImageGetDimension.c ****     U16 bfType;
 315:../../MMI/Resource/ImageGetDimension.c ****     U32 bfSize;
 316:../../MMI/Resource/ImageGetDimension.c ****     U32 biWidth;
 317:../../MMI/Resource/ImageGetDimension.c ****     U32 biHeight;
 318:../../MMI/Resource/ImageGetDimension.c ****     U32 biSize;
 319:../../MMI/Resource/ImageGetDimension.c **** 
 320:../../MMI/Resource/ImageGetDimension.c ****     /*----------------------------------------------------------------*/
 321:../../MMI/Resource/ImageGetDimension.c ****     /* Code Body                                                      */
 322:../../MMI/Resource/ImageGetDimension.c ****     /*----------------------------------------------------------------*/
 323:../../MMI/Resource/ImageGetDimension.c ****     /* open file and read header to buffer */
 324:../../MMI/Resource/ImageGetDimension.c ****     fp = fopen((char *)filename, "rb");
 371              	LM2:
 372              	LBB2:
 373 01c7 C7442404 		movl	$LC0, 4(%esp)
 373      00000000 
 374 01cf 8B4508   		movl	8(%ebp), %eax
 375 01d2 890424   		movl	%eax, (%esp)
 376 01d5 E8000000 		call	_fopen
 376      00
 377 01da 8945F4   		movl	%eax, -12(%ebp)
 325:../../MMI/Resource/ImageGetDimension.c ****     if (fp == NULL)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 11


 379              	LM3:
 380 01dd 837DF400 		cmpl	$0, -12(%ebp)
 381 01e1 7579     		jne	L18
 326:../../MMI/Resource/ImageGetDimension.c ****     {
 327:../../MMI/Resource/ImageGetDimension.c ****         fprintf(stderr, "Open file err:\t%s\n", filename);
 383              	LM4:
 384 01e3 8B4508   		movl	8(%ebp), %eax
 385 01e6 89442408 		movl	%eax, 8(%esp)
 386 01ea C7442404 		movl	$LC1, 4(%esp)
 386      03000000 
 387 01f2 A1000000 		movl	__imp___iob, %eax
 387      00
 388 01f7 83C040   		addl	$64, %eax
 389 01fa 890424   		movl	%eax, (%esp)
 390 01fd E8000000 		call	_fprintf
 390      00
 328:../../MMI/Resource/ImageGetDimension.c ****         fprintf(stderr, "\t%s\n", strerror(errno));
 392              	LM5:
 393 0202 E8000000 		call	__errno
 393      00
 394 0207 8B00     		movl	(%eax), %eax
 395 0209 890424   		movl	%eax, (%esp)
 396 020c E8000000 		call	_strerror
 396      00
 397 0211 89442408 		movl	%eax, 8(%esp)
 398 0215 C7442404 		movl	$LC2, 4(%esp)
 398      16000000 
 399 021d A1000000 		movl	__imp___iob, %eax
 399      00
 400 0222 83C040   		addl	$64, %eax
 401 0225 890424   		movl	%eax, (%esp)
 402 0228 E8000000 		call	_fprintf
 402      00
 329:../../MMI/Resource/ImageGetDimension.c ****         IMGDIM_LOG_W("image_bmp_get_dimension: open file failed,\t FILE:%s", filename);
 404              	LM6:
 405 022d 8B4508   		movl	8(%ebp), %eax
 406 0230 8944240C 		movl	%eax, 12(%esp)
 407 0234 C7442408 		movl	$LC3, 8(%esp)
 407      20000000 
 408 023c C7442404 		movl	$LC4, 4(%esp)
 408      54000000 
 409 0244 C7042402 		movl	$2, (%esp)
 409      000000
 410 024b E8000000 		call	_reslog_adaptor_log
 410      00
 330:../../MMI/Resource/ImageGetDimension.c **** 
 331:../../MMI/Resource/ImageGetDimension.c ****         return MMI_FALSE;
 412              	LM7:
 413 0250 C745AC00 		movl	$0, -84(%ebp)
 413      000000
 414 0257 E9300300 		jmp	L17
 414      00
 415              	L18:
 332:../../MMI/Resource/ImageGetDimension.c ****     }
 333:../../MMI/Resource/ImageGetDimension.c ****     if (fread(buf, sizeof(char), BMP_INFO_SIZE, fp) != BMP_INFO_SIZE)
 417              	LM8:
 418 025c 8B45F4   		movl	-12(%ebp), %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 12


 419 025f 8944240C 		movl	%eax, 12(%esp)
 420 0263 C7442408 		movl	$26, 8(%esp)
 420      1A000000 
 421 026b C7442404 		movl	$1, 4(%esp)
 421      01000000 
 422 0273 8D45C8   		leal	-56(%ebp), %eax
 423 0276 890424   		movl	%eax, (%esp)
 424 0279 E8000000 		call	_fread
 424      00
 425 027e 83F81A   		cmpl	$26, %eax
 426 0281 747D     		je	L19
 334:../../MMI/Resource/ImageGetDimension.c ****     {
 335:../../MMI/Resource/ImageGetDimension.c ****         if (strstr(filename, "EMPTYIMAGE.BMP") == NULL)
 428              	LM9:
 429 0283 C7442404 		movl	$LC5, 4(%esp)
 429      66000000 
 430 028b 8B4508   		movl	8(%ebp), %eax
 431 028e 890424   		movl	%eax, (%esp)
 432 0291 E8000000 		call	_strstr
 432      00
 433 0296 85C0     		testl	%eax, %eax
 434 0298 751F     		jne	L20
 336:../../MMI/Resource/ImageGetDimension.c ****         {
 337:../../MMI/Resource/ImageGetDimension.c ****             fprintf(stderr, "Read file err:\t%s\n", filename);
 436              	LM10:
 437 029a 8B4508   		movl	8(%ebp), %eax
 438 029d 89442408 		movl	%eax, 8(%esp)
 439 02a1 C7442404 		movl	$LC6, 4(%esp)
 439      75000000 
 440 02a9 A1000000 		movl	__imp___iob, %eax
 440      00
 441 02ae 83C040   		addl	$64, %eax
 442 02b1 890424   		movl	%eax, (%esp)
 443 02b4 E8000000 		call	_fprintf
 443      00
 444              	L20:
 338:../../MMI/Resource/ImageGetDimension.c ****         }
 339:../../MMI/Resource/ImageGetDimension.c ****         IMGDIM_LOG_W("image_bmp_get_dimension: Read file failed, \t FILE:%s", filename);
 446              	LM11:
 447 02b9 8B4508   		movl	8(%ebp), %eax
 448 02bc 8944240C 		movl	%eax, 12(%esp)
 449 02c0 C7442408 		movl	$LC7, 8(%esp)
 449      A0000000 
 450 02c8 C7442404 		movl	$LC4, 4(%esp)
 450      54000000 
 451 02d0 C7042402 		movl	$2, (%esp)
 451      000000
 452 02d7 E8000000 		call	_reslog_adaptor_log
 452      00
 340:../../MMI/Resource/ImageGetDimension.c ****         MYFCLOSE(fp);
 454              	LM12:
 455 02dc 837DF400 		cmpl	$0, -12(%ebp)
 456 02e0 7412     		je	L21
 457 02e2 8B45F4   		movl	-12(%ebp), %eax
 458 02e5 890424   		movl	%eax, (%esp)
 459 02e8 E8000000 		call	_fclose
 459      00
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 13


 460 02ed C745F400 		movl	$0, -12(%ebp)
 460      000000
 461              	L21:
 341:../../MMI/Resource/ImageGetDimension.c ****         return MMI_FALSE;
 463              	LM13:
 464 02f4 C745AC00 		movl	$0, -84(%ebp)
 464      000000
 465 02fb E98C0200 		jmp	L17
 465      00
 466              	L19:
 342:../../MMI/Resource/ImageGetDimension.c ****     }
 343:../../MMI/Resource/ImageGetDimension.c ****     src = buf;
 468              	LM14:
 469 0300 8D45C8   		leal	-56(%ebp), %eax
 470 0303 8945C4   		movl	%eax, -60(%ebp)
 344:../../MMI/Resource/ImageGetDimension.c ****     MYFCLOSE(fp);
 472              	LM15:
 473 0306 837DF400 		cmpl	$0, -12(%ebp)
 474 030a 7412     		je	L23
 475 030c 8B45F4   		movl	-12(%ebp), %eax
 476 030f 890424   		movl	%eax, (%esp)
 477 0312 E8000000 		call	_fclose
 477      00
 478 0317 C745F400 		movl	$0, -12(%ebp)
 478      000000
 479              	L23:
 345:../../MMI/Resource/ImageGetDimension.c **** 
 346:../../MMI/Resource/ImageGetDimension.c ****     /* read file header */
 347:../../MMI/Resource/ImageGetDimension.c ****     GET_U16(src, bfType);
 481              	LM16:
 482 031e 8B45C4   		movl	-60(%ebp), %eax
 483 0321 660FB600 		movzbw	(%eax), %ax
 484 0325 668945C2 		movw	%ax, -62(%ebp)
 485 0329 8D45C4   		leal	-60(%ebp), %eax
 486 032c FF00     		incl	(%eax)
 487 032e 8B45C4   		movl	-60(%ebp), %eax
 488 0331 0FB600   		movzbl	(%eax), %eax
 489 0334 C1E008   		sall	$8, %eax
 490 0337 0FB755C2 		movzwl	-62(%ebp), %edx
 491 033b 09D0     		orl	%edx, %eax
 492 033d 668945C2 		movw	%ax, -62(%ebp)
 493 0341 8D45C4   		leal	-60(%ebp), %eax
 494 0344 FF00     		incl	(%eax)
 348:../../MMI/Resource/ImageGetDimension.c ****     GET_U32(src, bfSize);
 496              	LM17:
 497 0346 8B45C4   		movl	-60(%ebp), %eax
 498 0349 0FB600   		movzbl	(%eax), %eax
 499 034c 8945BC   		movl	%eax, -68(%ebp)
 500 034f 8D45C4   		leal	-60(%ebp), %eax
 501 0352 FF00     		incl	(%eax)
 502 0354 8B45C4   		movl	-60(%ebp), %eax
 503 0357 0FB600   		movzbl	(%eax), %eax
 504 035a 89C2     		movl	%eax, %edx
 505 035c C1E208   		sall	$8, %edx
 506 035f 8D45BC   		leal	-68(%ebp), %eax
 507 0362 0910     		orl	%edx, (%eax)
 508 0364 8D45C4   		leal	-60(%ebp), %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 14


 509 0367 FF00     		incl	(%eax)
 510 0369 8B45C4   		movl	-60(%ebp), %eax
 511 036c 0FB600   		movzbl	(%eax), %eax
 512 036f 89C2     		movl	%eax, %edx
 513 0371 C1E210   		sall	$16, %edx
 514 0374 8D45BC   		leal	-68(%ebp), %eax
 515 0377 0910     		orl	%edx, (%eax)
 516 0379 8D45C4   		leal	-60(%ebp), %eax
 517 037c FF00     		incl	(%eax)
 518 037e 8B45C4   		movl	-60(%ebp), %eax
 519 0381 0FB600   		movzbl	(%eax), %eax
 520 0384 89C2     		movl	%eax, %edx
 521 0386 C1E218   		sall	$24, %edx
 522 0389 8D45BC   		leal	-68(%ebp), %eax
 523 038c 0910     		orl	%edx, (%eax)
 524 038e 8D45C4   		leal	-60(%ebp), %eax
 525 0391 FF00     		incl	(%eax)
 349:../../MMI/Resource/ImageGetDimension.c ****     FLUSH(src, 8);
 527              	LM18:
 528 0393 8D45C4   		leal	-60(%ebp), %eax
 529 0396 830008   		addl	$8, (%eax)
 350:../../MMI/Resource/ImageGetDimension.c **** 
 351:../../MMI/Resource/ImageGetDimension.c ****     /* read info header */
 352:../../MMI/Resource/ImageGetDimension.c ****     GET_U32(src, biSize);
 531              	LM19:
 532 0399 8B45C4   		movl	-60(%ebp), %eax
 533 039c 0FB600   		movzbl	(%eax), %eax
 534 039f 8945B0   		movl	%eax, -80(%ebp)
 535 03a2 8D45C4   		leal	-60(%ebp), %eax
 536 03a5 FF00     		incl	(%eax)
 537 03a7 8B45C4   		movl	-60(%ebp), %eax
 538 03aa 0FB600   		movzbl	(%eax), %eax
 539 03ad 89C2     		movl	%eax, %edx
 540 03af C1E208   		sall	$8, %edx
 541 03b2 8D45B0   		leal	-80(%ebp), %eax
 542 03b5 0910     		orl	%edx, (%eax)
 543 03b7 8D45C4   		leal	-60(%ebp), %eax
 544 03ba FF00     		incl	(%eax)
 545 03bc 8B45C4   		movl	-60(%ebp), %eax
 546 03bf 0FB600   		movzbl	(%eax), %eax
 547 03c2 89C2     		movl	%eax, %edx
 548 03c4 C1E210   		sall	$16, %edx
 549 03c7 8D45B0   		leal	-80(%ebp), %eax
 550 03ca 0910     		orl	%edx, (%eax)
 551 03cc 8D45C4   		leal	-60(%ebp), %eax
 552 03cf FF00     		incl	(%eax)
 553 03d1 8B45C4   		movl	-60(%ebp), %eax
 554 03d4 0FB600   		movzbl	(%eax), %eax
 555 03d7 89C2     		movl	%eax, %edx
 556 03d9 C1E218   		sall	$24, %edx
 557 03dc 8D45B0   		leal	-80(%ebp), %eax
 558 03df 0910     		orl	%edx, (%eax)
 559 03e1 8D45C4   		leal	-60(%ebp), %eax
 560 03e4 FF00     		incl	(%eax)
 353:../../MMI/Resource/ImageGetDimension.c ****     if (biSize == 12)
 562              	LM20:
 563 03e6 837DB00C 		cmpl	$12, -80(%ebp)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 15


 564 03ea 754B     		jne	L29
 354:../../MMI/Resource/ImageGetDimension.c ****     {
 355:../../MMI/Resource/ImageGetDimension.c ****         GET_U16(src, biWidth);
 566              	LM21:
 567 03ec 8B45C4   		movl	-60(%ebp), %eax
 568 03ef 0FB600   		movzbl	(%eax), %eax
 569 03f2 8945B8   		movl	%eax, -72(%ebp)
 570 03f5 8D45C4   		leal	-60(%ebp), %eax
 571 03f8 FF00     		incl	(%eax)
 572 03fa 8B45C4   		movl	-60(%ebp), %eax
 573 03fd 0FB600   		movzbl	(%eax), %eax
 574 0400 89C2     		movl	%eax, %edx
 575 0402 C1E208   		sall	$8, %edx
 576 0405 8D45B8   		leal	-72(%ebp), %eax
 577 0408 0910     		orl	%edx, (%eax)
 578 040a 8D45C4   		leal	-60(%ebp), %eax
 579 040d FF00     		incl	(%eax)
 356:../../MMI/Resource/ImageGetDimension.c ****         GET_U16(src, biHeight);
 581              	LM22:
 582 040f 8B45C4   		movl	-60(%ebp), %eax
 583 0412 0FB600   		movzbl	(%eax), %eax
 584 0415 8945B4   		movl	%eax, -76(%ebp)
 585 0418 8D45C4   		leal	-60(%ebp), %eax
 586 041b FF00     		incl	(%eax)
 587 041d 8B45C4   		movl	-60(%ebp), %eax
 588 0420 0FB600   		movzbl	(%eax), %eax
 589 0423 89C2     		movl	%eax, %edx
 590 0425 C1E208   		sall	$8, %edx
 591 0428 8D45B4   		leal	-76(%ebp), %eax
 592 042b 0910     		orl	%edx, (%eax)
 593 042d 8D45C4   		leal	-60(%ebp), %eax
 594 0430 FF00     		incl	(%eax)
 595 0432 E99A0000 		jmp	L32
 595      00
 596              	L29:
 357:../../MMI/Resource/ImageGetDimension.c ****     }
 358:../../MMI/Resource/ImageGetDimension.c ****     else
 359:../../MMI/Resource/ImageGetDimension.c ****     {
 360:../../MMI/Resource/ImageGetDimension.c ****         GET_U32(src, biWidth);
 598              	LM23:
 599 0437 8B45C4   		movl	-60(%ebp), %eax
 600 043a 0FB600   		movzbl	(%eax), %eax
 601 043d 8945B8   		movl	%eax, -72(%ebp)
 602 0440 8D45C4   		leal	-60(%ebp), %eax
 603 0443 FF00     		incl	(%eax)
 604 0445 8B45C4   		movl	-60(%ebp), %eax
 605 0448 0FB600   		movzbl	(%eax), %eax
 606 044b 89C2     		movl	%eax, %edx
 607 044d C1E208   		sall	$8, %edx
 608 0450 8D45B8   		leal	-72(%ebp), %eax
 609 0453 0910     		orl	%edx, (%eax)
 610 0455 8D45C4   		leal	-60(%ebp), %eax
 611 0458 FF00     		incl	(%eax)
 612 045a 8B45C4   		movl	-60(%ebp), %eax
 613 045d 0FB600   		movzbl	(%eax), %eax
 614 0460 89C2     		movl	%eax, %edx
 615 0462 C1E210   		sall	$16, %edx
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 16


 616 0465 8D45B8   		leal	-72(%ebp), %eax
 617 0468 0910     		orl	%edx, (%eax)
 618 046a 8D45C4   		leal	-60(%ebp), %eax
 619 046d FF00     		incl	(%eax)
 620 046f 8B45C4   		movl	-60(%ebp), %eax
 621 0472 0FB600   		movzbl	(%eax), %eax
 622 0475 89C2     		movl	%eax, %edx
 623 0477 C1E218   		sall	$24, %edx
 624 047a 8D45B8   		leal	-72(%ebp), %eax
 625 047d 0910     		orl	%edx, (%eax)
 626 047f 8D45C4   		leal	-60(%ebp), %eax
 627 0482 FF00     		incl	(%eax)
 361:../../MMI/Resource/ImageGetDimension.c ****         GET_U32(src, biHeight);
 629              	LM24:
 630 0484 8B45C4   		movl	-60(%ebp), %eax
 631 0487 0FB600   		movzbl	(%eax), %eax
 632 048a 8945B4   		movl	%eax, -76(%ebp)
 633 048d 8D45C4   		leal	-60(%ebp), %eax
 634 0490 FF00     		incl	(%eax)
 635 0492 8B45C4   		movl	-60(%ebp), %eax
 636 0495 0FB600   		movzbl	(%eax), %eax
 637 0498 89C2     		movl	%eax, %edx
 638 049a C1E208   		sall	$8, %edx
 639 049d 8D45B4   		leal	-76(%ebp), %eax
 640 04a0 0910     		orl	%edx, (%eax)
 641 04a2 8D45C4   		leal	-60(%ebp), %eax
 642 04a5 FF00     		incl	(%eax)
 643 04a7 8B45C4   		movl	-60(%ebp), %eax
 644 04aa 0FB600   		movzbl	(%eax), %eax
 645 04ad 89C2     		movl	%eax, %edx
 646 04af C1E210   		sall	$16, %edx
 647 04b2 8D45B4   		leal	-76(%ebp), %eax
 648 04b5 0910     		orl	%edx, (%eax)
 649 04b7 8D45C4   		leal	-60(%ebp), %eax
 650 04ba FF00     		incl	(%eax)
 651 04bc 8B45C4   		movl	-60(%ebp), %eax
 652 04bf 0FB600   		movzbl	(%eax), %eax
 653 04c2 89C2     		movl	%eax, %edx
 654 04c4 C1E218   		sall	$24, %edx
 655 04c7 8D45B4   		leal	-76(%ebp), %eax
 656 04ca 0910     		orl	%edx, (%eax)
 657 04cc 8D45C4   		leal	-60(%ebp), %eax
 658 04cf FF00     		incl	(%eax)
 659              	L32:
 362:../../MMI/Resource/ImageGetDimension.c ****     }
 363:../../MMI/Resource/ImageGetDimension.c **** 
 364:../../MMI/Resource/ImageGetDimension.c ****     *width = biWidth;
 661              	LM25:
 662 04d1 8B550C   		movl	12(%ebp), %edx
 663 04d4 8B45B8   		movl	-72(%ebp), %eax
 664 04d7 8902     		movl	%eax, (%edx)
 365:../../MMI/Resource/ImageGetDimension.c ****     *height = biHeight;
 666              	LM26:
 667 04d9 8B5510   		movl	16(%ebp), %edx
 668 04dc 8B45B4   		movl	-76(%ebp), %eax
 669 04df 8902     		movl	%eax, (%edx)
 366:../../MMI/Resource/ImageGetDimension.c **** 
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 17


 367:../../MMI/Resource/ImageGetDimension.c ****     /* test if it is BMP file */
 368:../../MMI/Resource/ImageGetDimension.c ****     if (bfType != 0x4d42)	/* BM */
 671              	LM27:
 672 04e1 66817DC2 		cmpw	$19778, -62(%ebp)
 672      424D
 673 04e7 744B     		je	L35
 369:../../MMI/Resource/ImageGetDimension.c ****     {
 370:../../MMI/Resource/ImageGetDimension.c ****         fprintf(stderr, "Non-standard file err:\t%s\n", filename);
 675              	LM28:
 676 04e9 8B4508   		movl	8(%ebp), %eax
 677 04ec 89442408 		movl	%eax, 8(%esp)
 678 04f0 C7442404 		movl	$LC8, 4(%esp)
 678      D5000000 
 679 04f8 A1000000 		movl	__imp___iob, %eax
 679      00
 680 04fd 83C040   		addl	$64, %eax
 681 0500 890424   		movl	%eax, (%esp)
 682 0503 E8000000 		call	_fprintf
 682      00
 371:../../MMI/Resource/ImageGetDimension.c ****         IMGDIM_LOG_W("image_bmp_get_dimension: not standard file ( not BMP file) , FILE:\t%s", file
 684              	LM29:
 685 0508 8B4508   		movl	8(%ebp), %eax
 686 050b 8944240C 		movl	%eax, 12(%esp)
 687 050f C7442408 		movl	$LC9, 8(%esp)
 687      00010000 
 688 0517 C7442404 		movl	$LC4, 4(%esp)
 688      54000000 
 689 051f C7042402 		movl	$2, (%esp)
 689      000000
 690 0526 E8000000 		call	_reslog_adaptor_log
 690      00
 372:../../MMI/Resource/ImageGetDimension.c ****         return MMI_FALSE;
 692              	LM30:
 693 052b C745AC00 		movl	$0, -84(%ebp)
 693      000000
 694 0532 EB58     		jmp	L17
 695              	L35:
 373:../../MMI/Resource/ImageGetDimension.c ****     }
 374:../../MMI/Resource/ImageGetDimension.c ****     /* core info header, currently not support */
 375:../../MMI/Resource/ImageGetDimension.c ****     if (bfSize == BMP_INFO_SIZE)
 697              	LM31:
 698 0534 837DBC1A 		cmpl	$26, -68(%ebp)
 699 0538 754B     		jne	L36
 376:../../MMI/Resource/ImageGetDimension.c ****     {
 377:../../MMI/Resource/ImageGetDimension.c ****         fprintf(stderr, "Non-standard file err:\t%s\n", filename);
 701              	LM32:
 702 053a 8B4508   		movl	8(%ebp), %eax
 703 053d 89442408 		movl	%eax, 8(%esp)
 704 0541 C7442404 		movl	$LC8, 4(%esp)
 704      D5000000 
 705 0549 A1000000 		movl	__imp___iob, %eax
 705      00
 706 054e 83C040   		addl	$64, %eax
 707 0551 890424   		movl	%eax, (%esp)
 708 0554 E8000000 		call	_fprintf
 708      00
 378:../../MMI/Resource/ImageGetDimension.c ****         IMGDIM_LOG_W("image_bmp_get_dimension: not standard file ( core info header, currently not 
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 18


 710              	LM33:
 711 0559 8B4508   		movl	8(%ebp), %eax
 712 055c 8944240C 		movl	%eax, 12(%esp)
 713 0560 C7442408 		movl	$LC10, 8(%esp)
 713      60010000 
 714 0568 C7442404 		movl	$LC4, 4(%esp)
 714      54000000 
 715 0570 C7042402 		movl	$2, (%esp)
 715      000000
 716 0577 E8000000 		call	_reslog_adaptor_log
 716      00
 379:../../MMI/Resource/ImageGetDimension.c ****         return MMI_FALSE;
 718              	LM34:
 719 057c C745AC00 		movl	$0, -84(%ebp)
 719      000000
 720 0583 EB07     		jmp	L17
 721              	L36:
 380:../../MMI/Resource/ImageGetDimension.c ****     }
 381:../../MMI/Resource/ImageGetDimension.c **** 
 382:../../MMI/Resource/ImageGetDimension.c ****     return MMI_TRUE;
 723              	LM35:
 724 0585 C745AC01 		movl	$1, -84(%ebp)
 724      000000
 383:../../MMI/Resource/ImageGetDimension.c **** }
 726              	LM36:
 727              	L17:
 728              	LBE2:
 729 058c 8B45AC   		movl	-84(%ebp), %eax
 730 058f C9       		leave
 731 0590 C3       		ret
 742              	Lscope0:
 744 0591 EB0D9090 		.align 32
 744      90909090 
 744      90909090 
 744      909090
 745              	LC11:
 746 05a0 696D6167 		.ascii "image_gif_get_dimension:open file failed,\11 FILE: %s\0"
 746      655F6769 
 746      665F6765 
 746      745F6469 
 746      6D656E73 
 747 05d4 8DB60000 		.align 32
 747      00008DBF 
 747      00000000 
 748              	LC12:
 749 05e0 696D6167 		.ascii "image_gif_get_dimension: Read file failed, \11 FILE:%s\0"
 749      655F6769 
 749      665F6765 
 749      745F6469 
 749      6D656E73 
 750 0615 8D742600 		.align 32
 750      8DBC2700 
 750      000000
 751              	LC13:
 752 0620 696D6167 		.ascii "image_gif_get_dimension: Not GIF File, \11 FILE:%s\0"
 752      655F6769 
 752      665F6765 
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 19


 752      745F6469 
 752      6D656E73 
 758              	_image_gif_get_dimension:
 384:../../MMI/Resource/ImageGetDimension.c **** 
 385:../../MMI/Resource/ImageGetDimension.c **** 
 386:../../MMI/Resource/ImageGetDimension.c **** /*****************************************************************************
 387:../../MMI/Resource/ImageGetDimension.c **** * FUNCTION
 388:../../MMI/Resource/ImageGetDimension.c **** *  image_gif_get_dimension
 389:../../MMI/Resource/ImageGetDimension.c **** * DESCRIPTION
 390:../../MMI/Resource/ImageGetDimension.c **** *  get dimension of a gif from file
 391:../../MMI/Resource/ImageGetDimension.c **** * PARAMETERS
 392:../../MMI/Resource/ImageGetDimension.c **** *  filename    [IN]
 393:../../MMI/Resource/ImageGetDimension.c **** *  width       [OUT]
 394:../../MMI/Resource/ImageGetDimension.c **** *  height      [OUT]
 395:../../MMI/Resource/ImageGetDimension.c **** * RETURNS
 396:../../MMI/Resource/ImageGetDimension.c **** *  MMI_BOOL	MMI_TRUE or MMI_FALSE
 397:../../MMI/Resource/ImageGetDimension.c **** *****************************************************************************/
 398:../../MMI/Resource/ImageGetDimension.c **** static MMI_BOOL image_gif_get_dimension(S8 *filename, U32 *width, U32 *height)
 399:../../MMI/Resource/ImageGetDimension.c **** {
 760              	LM37:
 761 0651 55       		pushl	%ebp
 762 0652 89E5     		movl	%esp, %ebp
 763 0654 83EC48   		subl	$72, %esp
 400:../../MMI/Resource/ImageGetDimension.c ****     /*----------------------------------------------------------------*/
 401:../../MMI/Resource/ImageGetDimension.c ****     /* Local Variables                                                */
 402:../../MMI/Resource/ImageGetDimension.c ****     /*----------------------------------------------------------------*/
 403:../../MMI/Resource/ImageGetDimension.c ****     FILE *fp;
 404:../../MMI/Resource/ImageGetDimension.c ****     U8 buf[GIF_INFO_SIZE];
 405:../../MMI/Resource/ImageGetDimension.c ****     U8 *src;
 406:../../MMI/Resource/ImageGetDimension.c ****     U32 header;
 407:../../MMI/Resource/ImageGetDimension.c **** 
 408:../../MMI/Resource/ImageGetDimension.c ****     /*----------------------------------------------------------------*/
 409:../../MMI/Resource/ImageGetDimension.c ****     /* Code Body                                                      */
 410:../../MMI/Resource/ImageGetDimension.c ****     /*----------------------------------------------------------------*/
 411:../../MMI/Resource/ImageGetDimension.c ****     /* open file and read header to buffer */
 412:../../MMI/Resource/ImageGetDimension.c ****     fp = fopen((char *)filename, "rb");
 765              	LM38:
 766              	LBB3:
 767 0657 C7442404 		movl	$LC0, 4(%esp)
 767      00000000 
 768 065f 8B4508   		movl	8(%ebp), %eax
 769 0662 890424   		movl	%eax, (%esp)
 770 0665 E8000000 		call	_fopen
 770      00
 771 066a 8945F4   		movl	%eax, -12(%ebp)
 413:../../MMI/Resource/ImageGetDimension.c ****     if (fp == NULL)
 773              	LM39:
 774 066d 837DF400 		cmpl	$0, -12(%ebp)
 775 0671 754E     		jne	L38
 414:../../MMI/Resource/ImageGetDimension.c ****     {
 415:../../MMI/Resource/ImageGetDimension.c ****         fprintf(stderr, "Open file err:\t%s\n", filename);
 777              	LM40:
 778 0673 8B4508   		movl	8(%ebp), %eax
 779 0676 89442408 		movl	%eax, 8(%esp)
 780 067a C7442404 		movl	$LC1, 4(%esp)
 780      03000000 
 781 0682 A1000000 		movl	__imp___iob, %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 20


 781      00
 782 0687 83C040   		addl	$64, %eax
 783 068a 890424   		movl	%eax, (%esp)
 784 068d E8000000 		call	_fprintf
 784      00
 416:../../MMI/Resource/ImageGetDimension.c ****         //fprintf(stderr, "\t%s\n", strerror(errno));
 417:../../MMI/Resource/ImageGetDimension.c ****         IMGDIM_LOG_W("image_gif_get_dimension:open file failed,\t FILE: %s", filename);
 786              	LM41:
 787 0692 8B4508   		movl	8(%ebp), %eax
 788 0695 8944240C 		movl	%eax, 12(%esp)
 789 0699 C7442408 		movl	$LC11, 8(%esp)
 789      A0050000 
 790 06a1 C7442404 		movl	$LC4, 4(%esp)
 790      54000000 
 791 06a9 C7042402 		movl	$2, (%esp)
 791      000000
 792 06b0 E8000000 		call	_reslog_adaptor_log
 792      00
 418:../../MMI/Resource/ImageGetDimension.c ****         return MMI_FALSE;
 794              	LM42:
 795 06b5 C745CC00 		movl	$0, -52(%ebp)
 795      000000
 796 06bc E99E0100 		jmp	L37
 796      00
 797              	L38:
 419:../../MMI/Resource/ImageGetDimension.c ****     }
 420:../../MMI/Resource/ImageGetDimension.c ****     if (fread(buf, sizeof(char), GIF_INFO_SIZE, fp) != GIF_INFO_SIZE)
 799              	LM43:
 800 06c1 8B45F4   		movl	-12(%ebp), %eax
 801 06c4 8944240C 		movl	%eax, 12(%esp)
 802 06c8 C7442408 		movl	$10, 8(%esp)
 802      0A000000 
 803 06d0 C7442404 		movl	$1, 4(%esp)
 803      01000000 
 804 06d8 8D45D8   		leal	-40(%ebp), %eax
 805 06db 890424   		movl	%eax, (%esp)
 806 06de E8000000 		call	_fread
 806      00
 807 06e3 83F80A   		cmpl	$10, %eax
 808 06e6 747D     		je	L39
 421:../../MMI/Resource/ImageGetDimension.c ****     {
 422:../../MMI/Resource/ImageGetDimension.c ****         if (strstr(filename, "EMPTYIMAGE.BMP") == NULL)
 810              	LM44:
 811 06e8 C7442404 		movl	$LC5, 4(%esp)
 811      66000000 
 812 06f0 8B4508   		movl	8(%ebp), %eax
 813 06f3 890424   		movl	%eax, (%esp)
 814 06f6 E8000000 		call	_strstr
 814      00
 815 06fb 85C0     		testl	%eax, %eax
 816 06fd 751F     		jne	L40
 423:../../MMI/Resource/ImageGetDimension.c ****         {
 424:../../MMI/Resource/ImageGetDimension.c ****             fprintf(stderr, "Read file err:\t%s\n", filename);
 818              	LM45:
 819 06ff 8B4508   		movl	8(%ebp), %eax
 820 0702 89442408 		movl	%eax, 8(%esp)
 821 0706 C7442404 		movl	$LC6, 4(%esp)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 21


 821      75000000 
 822 070e A1000000 		movl	__imp___iob, %eax
 822      00
 823 0713 83C040   		addl	$64, %eax
 824 0716 890424   		movl	%eax, (%esp)
 825 0719 E8000000 		call	_fprintf
 825      00
 826              	L40:
 425:../../MMI/Resource/ImageGetDimension.c ****         }
 426:../../MMI/Resource/ImageGetDimension.c ****         IMGDIM_LOG_W("image_gif_get_dimension: Read file failed, \t FILE:%s", filename);
 828              	LM46:
 829 071e 8B4508   		movl	8(%ebp), %eax
 830 0721 8944240C 		movl	%eax, 12(%esp)
 831 0725 C7442408 		movl	$LC12, 8(%esp)
 831      E0050000 
 832 072d C7442404 		movl	$LC4, 4(%esp)
 832      54000000 
 833 0735 C7042402 		movl	$2, (%esp)
 833      000000
 834 073c E8000000 		call	_reslog_adaptor_log
 834      00
 427:../../MMI/Resource/ImageGetDimension.c ****         MYFCLOSE(fp);
 836              	LM47:
 837 0741 837DF400 		cmpl	$0, -12(%ebp)
 838 0745 7412     		je	L41
 839 0747 8B45F4   		movl	-12(%ebp), %eax
 840 074a 890424   		movl	%eax, (%esp)
 841 074d E8000000 		call	_fclose
 841      00
 842 0752 C745F400 		movl	$0, -12(%ebp)
 842      000000
 843              	L41:
 428:../../MMI/Resource/ImageGetDimension.c ****         return MMI_FALSE;
 845              	LM48:
 846 0759 C745CC00 		movl	$0, -52(%ebp)
 846      000000
 847 0760 E9FA0000 		jmp	L37
 847      00
 848              	L39:
 429:../../MMI/Resource/ImageGetDimension.c ****     }
 430:../../MMI/Resource/ImageGetDimension.c ****     src = buf;
 850              	LM49:
 851 0765 8D45D8   		leal	-40(%ebp), %eax
 852 0768 8945D4   		movl	%eax, -44(%ebp)
 431:../../MMI/Resource/ImageGetDimension.c ****     MYFCLOSE(fp);
 854              	LM50:
 855 076b 837DF400 		cmpl	$0, -12(%ebp)
 856 076f 7412     		je	L43
 857 0771 8B45F4   		movl	-12(%ebp), %eax
 858 0774 890424   		movl	%eax, (%esp)
 859 0777 E8000000 		call	_fclose
 859      00
 860 077c C745F400 		movl	$0, -12(%ebp)
 860      000000
 861              	L43:
 432:../../MMI/Resource/ImageGetDimension.c **** 
 433:../../MMI/Resource/ImageGetDimension.c ****     /* test if it is BMP file */
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 22


 434:../../MMI/Resource/ImageGetDimension.c ****     GET_U24(src, header);
 863              	LM51:
 864 0783 8B45D4   		movl	-44(%ebp), %eax
 865 0786 0FB600   		movzbl	(%eax), %eax
 866 0789 8945D0   		movl	%eax, -48(%ebp)
 867 078c 8D45D4   		leal	-44(%ebp), %eax
 868 078f FF00     		incl	(%eax)
 869 0791 8B45D4   		movl	-44(%ebp), %eax
 870 0794 0FB600   		movzbl	(%eax), %eax
 871 0797 89C2     		movl	%eax, %edx
 872 0799 C1E208   		sall	$8, %edx
 873 079c 8D45D0   		leal	-48(%ebp), %eax
 874 079f 0910     		orl	%edx, (%eax)
 875 07a1 8D45D4   		leal	-44(%ebp), %eax
 876 07a4 FF00     		incl	(%eax)
 877 07a6 8B45D4   		movl	-44(%ebp), %eax
 878 07a9 0FB600   		movzbl	(%eax), %eax
 879 07ac 89C2     		movl	%eax, %edx
 880 07ae C1E210   		sall	$16, %edx
 881 07b1 8D45D0   		leal	-48(%ebp), %eax
 882 07b4 0910     		orl	%edx, (%eax)
 883 07b6 8D45D4   		leal	-44(%ebp), %eax
 884 07b9 FF00     		incl	(%eax)
 435:../../MMI/Resource/ImageGetDimension.c ****     if (header != 0x464947) /* 'GIF' */
 886              	LM52:
 887 07bb 817DD047 		cmpl	$4606279, -48(%ebp)
 887      494600
 888 07c2 743E     		je	L46
 436:../../MMI/Resource/ImageGetDimension.c ****     {
 437:../../MMI/Resource/ImageGetDimension.c ****         *width = 0;
 890              	LM53:
 891 07c4 8B450C   		movl	12(%ebp), %eax
 892 07c7 C7000000 		movl	$0, (%eax)
 892      0000
 438:../../MMI/Resource/ImageGetDimension.c ****         *height = 0;
 894              	LM54:
 895 07cd 8B4510   		movl	16(%ebp), %eax
 896 07d0 C7000000 		movl	$0, (%eax)
 896      0000
 439:../../MMI/Resource/ImageGetDimension.c ****         IMGDIM_LOG_W("image_gif_get_dimension: Not GIF File, \t FILE:%s", filename);
 898              	LM55:
 899 07d6 8B4508   		movl	8(%ebp), %eax
 900 07d9 8944240C 		movl	%eax, 12(%esp)
 901 07dd C7442408 		movl	$LC13, 8(%esp)
 901      20060000 
 902 07e5 C7442404 		movl	$LC4, 4(%esp)
 902      54000000 
 903 07ed C7042402 		movl	$2, (%esp)
 903      000000
 904 07f4 E8000000 		call	_reslog_adaptor_log
 904      00
 440:../../MMI/Resource/ImageGetDimension.c ****         return MMI_FALSE;
 906              	LM56:
 907 07f9 C745CC00 		movl	$0, -52(%ebp)
 907      000000
 908 0800 EB5D     		jmp	L37
 909              	L46:
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 23


 441:../../MMI/Resource/ImageGetDimension.c ****     }
 442:../../MMI/Resource/ImageGetDimension.c **** 
 443:../../MMI/Resource/ImageGetDimension.c ****     /* read GIF dimention */
 444:../../MMI/Resource/ImageGetDimension.c ****     FLUSH(src, 3);
 911              	LM57:
 912 0802 8D45D4   		leal	-44(%ebp), %eax
 913 0805 830003   		addl	$3, (%eax)
 445:../../MMI/Resource/ImageGetDimension.c ****     GET_U16(src, *width);
 915              	LM58:
 916 0808 8B550C   		movl	12(%ebp), %edx
 917 080b 8B45D4   		movl	-44(%ebp), %eax
 918 080e 0FB600   		movzbl	(%eax), %eax
 919 0811 8902     		movl	%eax, (%edx)
 920 0813 8D45D4   		leal	-44(%ebp), %eax
 921 0816 FF00     		incl	(%eax)
 922 0818 8B4D0C   		movl	12(%ebp), %ecx
 923 081b 8B550C   		movl	12(%ebp), %edx
 924 081e 8B45D4   		movl	-44(%ebp), %eax
 925 0821 0FB600   		movzbl	(%eax), %eax
 926 0824 C1E008   		sall	$8, %eax
 927 0827 0B02     		orl	(%edx), %eax
 928 0829 8901     		movl	%eax, (%ecx)
 929 082b 8D45D4   		leal	-44(%ebp), %eax
 930 082e FF00     		incl	(%eax)
 446:../../MMI/Resource/ImageGetDimension.c ****     GET_U16(src, *height);
 932              	LM59:
 933 0830 8B5510   		movl	16(%ebp), %edx
 934 0833 8B45D4   		movl	-44(%ebp), %eax
 935 0836 0FB600   		movzbl	(%eax), %eax
 936 0839 8902     		movl	%eax, (%edx)
 937 083b 8D45D4   		leal	-44(%ebp), %eax
 938 083e FF00     		incl	(%eax)
 939 0840 8B4D10   		movl	16(%ebp), %ecx
 940 0843 8B5510   		movl	16(%ebp), %edx
 941 0846 8B45D4   		movl	-44(%ebp), %eax
 942 0849 0FB600   		movzbl	(%eax), %eax
 943 084c C1E008   		sall	$8, %eax
 944 084f 0B02     		orl	(%edx), %eax
 945 0851 8901     		movl	%eax, (%ecx)
 946 0853 8D45D4   		leal	-44(%ebp), %eax
 947 0856 FF00     		incl	(%eax)
 447:../../MMI/Resource/ImageGetDimension.c **** 
 448:../../MMI/Resource/ImageGetDimension.c ****     return MMI_TRUE;
 949              	LM60:
 950 0858 C745CC01 		movl	$1, -52(%ebp)
 950      000000
 449:../../MMI/Resource/ImageGetDimension.c **** }
 952              	LM61:
 953              	L37:
 954              	LBE3:
 955 085f 8B45CC   		movl	-52(%ebp), %eax
 956 0862 C9       		leave
 957 0863 C3       		ret
 964              	Lscope1:
 966 0864 90909090 		.align 32
 966      90909090 
 966      90909090 
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 24


 966      90909090 
 966      90909090 
 967              	LC14:
 968 0880 696D6167 		.ascii "image_gif_get_frame_count: open file failed,\11 FILE: %s\0"
 968      655F6769 
 968      665F6765 
 968      745F6672 
 968      616D655F 
 969              	LC15:
 970 08b7 4D656D6F 		.ascii "Memory allocation failed:\11%s\12\0"
 970      72792061 
 970      6C6C6F63 
 970      6174696F 
 970      6E206661 
 971 08d5 8D742600 		.align 32
 971      8DBC2700 
 971      000000
 972              	LC16:
 973 08e0 696D6167 		.ascii "image_gif_get_frame_count: Memory allocation failed,\11 FILE: %s, Request %d bytes\0"
 973      655F6769 
 973      665F6765 
 973      745F6672 
 973      616D655F 
 974 0931 EB0D9090 		.align 32
 974      90909090 
 974      90909090 
 974      909090
 975              	LC17:
 976 0940 696D6167 		.ascii "image_gif_get_frame_count: Read file failed, \11 FILE:%s\0"
 976      655F6769 
 976      665F6765 
 976      745F6672 
 976      616D655F 
 977 0977 89F68DBC 		.align 32
 977      27000000 
 977      00
 978              	LC18:
 979 0980 696D6167 		.ascii "image_gif_get_frame_count: GIF file signature check failed, \11 FILE:%s\0"
 979      655F6769 
 979      665F6765 
 979      745F6672 
 979      616D655F 
 980 09c6 90909090 		.align 32
 980      90909090 
 980      90909090 
 980      90909090 
 980      90909090 
 981              	LC19:
 982 09e0 696D6167 		.ascii "image_gif_get_frame_count: dimension value is not valid: (%d, %d, %d, %d ), \11FILE:%s\0"
 982      655F6769 
 982      665F6765 
 982      745F6672 
 982      616D655F 
 983 0a35 8D742600 		.align 32
 983      8DBC2700 
 983      000000
 984              	LC20:
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 25


 985 0a40 696D6167 		.ascii "image_gif_get_frame_count: buffer overflow caused by src, \11FILE:%s\0"
 985      655F6769 
 985      665F6765 
 985      745F6672 
 985      616D655F 
 986 0a83 90909090 		.align 32
 986      90909090 
 986      90909090 
 986      90909090 
 986      90909090 
 987              	LC21:
 988 0aa0 696D6167 		.ascii "image_gif_get_frame_count: stack_pointer overflow\11FILE:%s\0"
 988      655F6769 
 988      665F6765 
 988      745F6672 
 988      616D655F 
 993              	_image_gif_get_frame_count:
 450:../../MMI/Resource/ImageGetDimension.c **** 
 451:../../MMI/Resource/ImageGetDimension.c **** 
 452:../../MMI/Resource/ImageGetDimension.c **** /*****************************************************************************
 453:../../MMI/Resource/ImageGetDimension.c **** * FUNCTION
 454:../../MMI/Resource/ImageGetDimension.c **** *  image_gif_get_frame_count
 455:../../MMI/Resource/ImageGetDimension.c **** * DESCRIPTION
 456:../../MMI/Resource/ImageGetDimension.c **** *  get frame count of a gif from file
 457:../../MMI/Resource/ImageGetDimension.c **** * PARAMETERS
 458:../../MMI/Resource/ImageGetDimension.c **** *  filename    [IN]
 459:../../MMI/Resource/ImageGetDimension.c **** *  framecount  [OUT]
 460:../../MMI/Resource/ImageGetDimension.c **** * RETURNS
 461:../../MMI/Resource/ImageGetDimension.c **** *  MMI_BOOL	MMI_TRUE or MMI_FALSE
 462:../../MMI/Resource/ImageGetDimension.c **** *****************************************************************************/
 463:../../MMI/Resource/ImageGetDimension.c **** static MMI_BOOL image_gif_get_frame_count(S8 *filename, U32 *framecount)
 464:../../MMI/Resource/ImageGetDimension.c **** {
 995              	LM62:
 996 0ada 55       		pushl	%ebp
 997 0adb 89E5     		movl	%esp, %ebp
 998 0add B8E85000 		movl	$20712, %eax
 998      00
 999 0ae2 E8000000 		call	__alloca
 999      00
 465:../../MMI/Resource/ImageGetDimension.c ****     /*----------------------------------------------------------------*/
 466:../../MMI/Resource/ImageGetDimension.c ****     /* Local Variables                                                */
 467:../../MMI/Resource/ImageGetDimension.c ****     /*----------------------------------------------------------------*/
 468:../../MMI/Resource/ImageGetDimension.c ****     FILE *fp;
 469:../../MMI/Resource/ImageGetDimension.c ****     U8 *buf, *src;
 470:../../MMI/Resource/ImageGetDimension.c ****     U32 header;
 471:../../MMI/Resource/ImageGetDimension.c ****     U32 file_size;
 472:../../MMI/Resource/ImageGetDimension.c **** 
 473:../../MMI/Resource/ImageGetDimension.c ****     /*----------------------------------------------------------------*/
 474:../../MMI/Resource/ImageGetDimension.c ****     /* Code Body                                                      */
 475:../../MMI/Resource/ImageGetDimension.c ****     /*----------------------------------------------------------------*/
 476:../../MMI/Resource/ImageGetDimension.c ****     /* open file and read header to buffer */
 477:../../MMI/Resource/ImageGetDimension.c ****     fp = fopen((char *)filename, "rb");
 1001              	LM63:
 1002              	LBB4:
 1003 0ae7 C7442404 		movl	$LC0, 4(%esp)
 1003      00000000 
 1004 0aef 8B4508   		movl	8(%ebp), %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 26


 1005 0af2 890424   		movl	%eax, (%esp)
 1006 0af5 E8000000 		call	_fopen
 1006      00
 1007 0afa 8945F4   		movl	%eax, -12(%ebp)
 478:../../MMI/Resource/ImageGetDimension.c ****     if (fp == NULL)
 1009              	LM64:
 1010 0afd 837DF400 		cmpl	$0, -12(%ebp)
 1011 0b01 757C     		jne	L51
 479:../../MMI/Resource/ImageGetDimension.c ****     {
 480:../../MMI/Resource/ImageGetDimension.c ****         fprintf(stderr, "Open file err:\t%s\n", filename);
 1013              	LM65:
 1014 0b03 8B4508   		movl	8(%ebp), %eax
 1015 0b06 89442408 		movl	%eax, 8(%esp)
 1016 0b0a C7442404 		movl	$LC1, 4(%esp)
 1016      03000000 
 1017 0b12 A1000000 		movl	__imp___iob, %eax
 1017      00
 1018 0b17 83C040   		addl	$64, %eax
 1019 0b1a 890424   		movl	%eax, (%esp)
 1020 0b1d E8000000 		call	_fprintf
 1020      00
 481:../../MMI/Resource/ImageGetDimension.c ****         fprintf(stderr, "\t%s\n", strerror(errno));
 1022              	LM66:
 1023 0b22 E8000000 		call	__errno
 1023      00
 1024 0b27 8B00     		movl	(%eax), %eax
 1025 0b29 890424   		movl	%eax, (%esp)
 1026 0b2c E8000000 		call	_strerror
 1026      00
 1027 0b31 89442408 		movl	%eax, 8(%esp)
 1028 0b35 C7442404 		movl	$LC2, 4(%esp)
 1028      16000000 
 1029 0b3d A1000000 		movl	__imp___iob, %eax
 1029      00
 1030 0b42 83C040   		addl	$64, %eax
 1031 0b45 890424   		movl	%eax, (%esp)
 1032 0b48 E8000000 		call	_fprintf
 1032      00
 482:../../MMI/Resource/ImageGetDimension.c ****         IMGDIM_LOG_W("image_gif_get_frame_count: open file failed,\t FILE: %s", filename);        
 1034              	LM67:
 1035 0b4d 8B4508   		movl	8(%ebp), %eax
 1036 0b50 8944240C 		movl	%eax, 12(%esp)
 1037 0b54 C7442408 		movl	$LC14, 8(%esp)
 1037      80080000 
 1038 0b5c C7442404 		movl	$LC4, 4(%esp)
 1038      54000000 
 1039 0b64 C7042402 		movl	$2, (%esp)
 1039      000000
 1040 0b6b E8000000 		call	_reslog_adaptor_log
 1040      00
 483:../../MMI/Resource/ImageGetDimension.c ****         return MMI_FALSE;
 1042              	LM68:
 1043 0b70 C78548AF 		movl	$0, -20664(%ebp)
 1043      FFFF0000 
 1043      0000
 1044 0b7a E9950A00 		jmp	L50
 1044      00
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 27


 1045              	L51:
 484:../../MMI/Resource/ImageGetDimension.c ****     }
 485:../../MMI/Resource/ImageGetDimension.c **** 
 486:../../MMI/Resource/ImageGetDimension.c ****     fseek(fp, 0, SEEK_END);
 1047              	LM69:
 1048 0b7f C7442408 		movl	$2, 8(%esp)
 1048      02000000 
 1049 0b87 C7442404 		movl	$0, 4(%esp)
 1049      00000000 
 1050 0b8f 8B45F4   		movl	-12(%ebp), %eax
 1051 0b92 890424   		movl	%eax, (%esp)
 1052 0b95 E8000000 		call	_fseek
 1052      00
 487:../../MMI/Resource/ImageGetDimension.c ****     file_size = (U32)ftell(fp);
 1054              	LM70:
 1055 0b9a 8B45F4   		movl	-12(%ebp), %eax
 1056 0b9d 890424   		movl	%eax, (%esp)
 1057 0ba0 E8000000 		call	_ftell
 1057      00
 1058 0ba5 8945E4   		movl	%eax, -28(%ebp)
 488:../../MMI/Resource/ImageGetDimension.c ****     fseek(fp, 0, SEEK_SET);
 1060              	LM71:
 1061 0ba8 C7442408 		movl	$0, 8(%esp)
 1061      00000000 
 1062 0bb0 C7442404 		movl	$0, 4(%esp)
 1062      00000000 
 1063 0bb8 8B45F4   		movl	-12(%ebp), %eax
 1064 0bbb 890424   		movl	%eax, (%esp)
 1065 0bbe E8000000 		call	_fseek
 1065      00
 489:../../MMI/Resource/ImageGetDimension.c **** 
 490:../../MMI/Resource/ImageGetDimension.c ****     buf = (U8*)malloc(file_size*sizeof(U8));
 1067              	LM72:
 1068 0bc3 8B45E4   		movl	-28(%ebp), %eax
 1069 0bc6 890424   		movl	%eax, (%esp)
 1070 0bc9 E8000000 		call	_malloc
 1070      00
 1071 0bce 8945F0   		movl	%eax, -16(%ebp)
 491:../../MMI/Resource/ImageGetDimension.c ****     if (buf == NULL)
 1073              	LM73:
 1074 0bd1 837DF000 		cmpl	$0, -16(%ebp)
 1075 0bd5 7570     		jne	L52
 492:../../MMI/Resource/ImageGetDimension.c ****     {
 493:../../MMI/Resource/ImageGetDimension.c ****         fprintf(stderr, "Memory allocation failed:\t%s\n", filename);
 1077              	LM74:
 1078 0bd7 8B4508   		movl	8(%ebp), %eax
 1079 0bda 89442408 		movl	%eax, 8(%esp)
 1080 0bde C7442404 		movl	$LC15, 4(%esp)
 1080      B7080000 
 1081 0be6 A1000000 		movl	__imp___iob, %eax
 1081      00
 1082 0beb 83C040   		addl	$64, %eax
 1083 0bee 890424   		movl	%eax, (%esp)
 1084 0bf1 E8000000 		call	_fprintf
 1084      00
 494:../../MMI/Resource/ImageGetDimension.c ****         IMGDIM_LOG_W("image_gif_get_frame_count: Memory allocation failed,\t FILE: %s, Request %d b
 1086              	LM75:
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 28


 1087 0bf6 8B45E4   		movl	-28(%ebp), %eax
 1088 0bf9 89442410 		movl	%eax, 16(%esp)
 1089 0bfd 8B4508   		movl	8(%ebp), %eax
 1090 0c00 8944240C 		movl	%eax, 12(%esp)
 1091 0c04 C7442408 		movl	$LC16, 8(%esp)
 1091      E0080000 
 1092 0c0c C7442404 		movl	$LC4, 4(%esp)
 1092      54000000 
 1093 0c14 C7042402 		movl	$2, (%esp)
 1093      000000
 1094 0c1b E8000000 		call	_reslog_adaptor_log
 1094      00
 495:../../MMI/Resource/ImageGetDimension.c ****         MYFCLOSE(fp);
 1096              	LM76:
 1097 0c20 837DF400 		cmpl	$0, -12(%ebp)
 1098 0c24 7412     		je	L53
 1099 0c26 8B45F4   		movl	-12(%ebp), %eax
 1100 0c29 890424   		movl	%eax, (%esp)
 1101 0c2c E8000000 		call	_fclose
 1101      00
 1102 0c31 C745F400 		movl	$0, -12(%ebp)
 1102      000000
 1103              	L53:
 496:../../MMI/Resource/ImageGetDimension.c ****         return MMI_FALSE;
 1105              	LM77:
 1106 0c38 C78548AF 		movl	$0, -20664(%ebp)
 1106      FFFF0000 
 1106      0000
 1107 0c42 E9CD0900 		jmp	L50
 1107      00
 1108              	L52:
 497:../../MMI/Resource/ImageGetDimension.c ****     }
 498:../../MMI/Resource/ImageGetDimension.c ****     if (fread(buf, sizeof(char), file_size, fp) != file_size)
 1110              	LM78:
 1111 0c47 8B45F4   		movl	-12(%ebp), %eax
 1112 0c4a 8944240C 		movl	%eax, 12(%esp)
 1113 0c4e 8B45E4   		movl	-28(%ebp), %eax
 1114 0c51 89442408 		movl	%eax, 8(%esp)
 1115 0c55 C7442404 		movl	$1, 4(%esp)
 1115      01000000 
 1116 0c5d 8B45F0   		movl	-16(%ebp), %eax
 1117 0c60 890424   		movl	%eax, (%esp)
 1118 0c63 E8000000 		call	_fread
 1118      00
 1119 0c68 3B45E4   		cmpl	-28(%ebp), %eax
 1120 0c6b 0F848000 		je	L55
 1120      0000
 499:../../MMI/Resource/ImageGetDimension.c ****     {
 500:../../MMI/Resource/ImageGetDimension.c ****         if (strstr(filename, "EMPTYIMAGE.BMP") == NULL)
 1122              	LM79:
 1123 0c71 C7442404 		movl	$LC5, 4(%esp)
 1123      66000000 
 1124 0c79 8B4508   		movl	8(%ebp), %eax
 1125 0c7c 890424   		movl	%eax, (%esp)
 1126 0c7f E8000000 		call	_strstr
 1126      00
 1127 0c84 85C0     		testl	%eax, %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 29


 1128 0c86 751F     		jne	L56
 501:../../MMI/Resource/ImageGetDimension.c ****         {
 502:../../MMI/Resource/ImageGetDimension.c ****             fprintf(stderr, "Read file err:\t%s\n", filename);
 1130              	LM80:
 1131 0c88 8B4508   		movl	8(%ebp), %eax
 1132 0c8b 89442408 		movl	%eax, 8(%esp)
 1133 0c8f C7442404 		movl	$LC6, 4(%esp)
 1133      75000000 
 1134 0c97 A1000000 		movl	__imp___iob, %eax
 1134      00
 1135 0c9c 83C040   		addl	$64, %eax
 1136 0c9f 890424   		movl	%eax, (%esp)
 1137 0ca2 E8000000 		call	_fprintf
 1137      00
 1138              	L56:
 503:../../MMI/Resource/ImageGetDimension.c **** 
 504:../../MMI/Resource/ImageGetDimension.c ****         }
 505:../../MMI/Resource/ImageGetDimension.c ****         IMGDIM_LOG_W("image_gif_get_frame_count: Read file failed, \t FILE:%s", filename);
 1140              	LM81:
 1141 0ca7 8B4508   		movl	8(%ebp), %eax
 1142 0caa 8944240C 		movl	%eax, 12(%esp)
 1143 0cae C7442408 		movl	$LC17, 8(%esp)
 1143      40090000 
 1144 0cb6 C7442404 		movl	$LC4, 4(%esp)
 1144      54000000 
 1145 0cbe C7042402 		movl	$2, (%esp)
 1145      000000
 1146 0cc5 E8000000 		call	_reslog_adaptor_log
 1146      00
 506:../../MMI/Resource/ImageGetDimension.c ****         MYFCLOSE(fp);
 1148              	LM82:
 1149 0cca 837DF400 		cmpl	$0, -12(%ebp)
 1150 0cce 7412     		je	L57
 1151 0cd0 8B45F4   		movl	-12(%ebp), %eax
 1152 0cd3 890424   		movl	%eax, (%esp)
 1153 0cd6 E8000000 		call	_fclose
 1153      00
 1154 0cdb C745F400 		movl	$0, -12(%ebp)
 1154      000000
 1155              	L57:
 507:../../MMI/Resource/ImageGetDimension.c ****         return MMI_FALSE;
 1157              	LM83:
 1158 0ce2 C78548AF 		movl	$0, -20664(%ebp)
 1158      FFFF0000 
 1158      0000
 1159 0cec E9230900 		jmp	L50
 1159      00
 1160              	L55:
 508:../../MMI/Resource/ImageGetDimension.c ****     }
 509:../../MMI/Resource/ImageGetDimension.c ****     src = buf;
 1162              	LM84:
 1163 0cf1 8B45F0   		movl	-16(%ebp), %eax
 1164 0cf4 8945EC   		movl	%eax, -20(%ebp)
 510:../../MMI/Resource/ImageGetDimension.c ****     MYFCLOSE(fp);
 1166              	LM85:
 1167 0cf7 837DF400 		cmpl	$0, -12(%ebp)
 1168 0cfb 7412     		je	L59
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 30


 1169 0cfd 8B45F4   		movl	-12(%ebp), %eax
 1170 0d00 890424   		movl	%eax, (%esp)
 1171 0d03 E8000000 		call	_fclose
 1171      00
 1172 0d08 C745F400 		movl	$0, -12(%ebp)
 1172      000000
 1173              	L59:
 511:../../MMI/Resource/ImageGetDimension.c **** 
 512:../../MMI/Resource/ImageGetDimension.c ****     /* init the return frame_count value */
 513:../../MMI/Resource/ImageGetDimension.c ****     *framecount = 0;
 1175              	LM86:
 1176 0d0f 8B450C   		movl	12(%ebp), %eax
 1177 0d12 C7000000 		movl	$0, (%eax)
 1177      0000
 514:../../MMI/Resource/ImageGetDimension.c **** 
 515:../../MMI/Resource/ImageGetDimension.c ****     /* read the GIF file signature */
 516:../../MMI/Resource/ImageGetDimension.c ****     {
 517:../../MMI/Resource/ImageGetDimension.c ****         U8 sig[3];
 518:../../MMI/Resource/ImageGetDimension.c **** 
 519:../../MMI/Resource/ImageGetDimension.c ****         GET_U8(src, sig[0]);
 1179              	LM87:
 1180              	LBB5:
 1181 0d18 8B45EC   		movl	-20(%ebp), %eax
 1182 0d1b 0FB600   		movzbl	(%eax), %eax
 1183 0d1e 8845C8   		movb	%al, -56(%ebp)
 1184 0d21 8D45EC   		leal	-20(%ebp), %eax
 1185 0d24 FF00     		incl	(%eax)
 520:../../MMI/Resource/ImageGetDimension.c ****         GET_U8(src, sig[1]);
 1187              	LM88:
 1188 0d26 8B45EC   		movl	-20(%ebp), %eax
 1189 0d29 0FB600   		movzbl	(%eax), %eax
 1190 0d2c 8845C9   		movb	%al, -55(%ebp)
 1191 0d2f 8D45EC   		leal	-20(%ebp), %eax
 1192 0d32 FF00     		incl	(%eax)
 521:../../MMI/Resource/ImageGetDimension.c ****         GET_U8(src, sig[2]);
 1194              	LM89:
 1195 0d34 8B45EC   		movl	-20(%ebp), %eax
 1196 0d37 0FB600   		movzbl	(%eax), %eax
 1197 0d3a 8845CA   		movb	%al, -54(%ebp)
 1198 0d3d 8D45EC   		leal	-20(%ebp), %eax
 1199 0d40 FF00     		incl	(%eax)
 522:../../MMI/Resource/ImageGetDimension.c **** 
 523:../../MMI/Resource/ImageGetDimension.c ****         if (sig[0] != 'G' || sig[1] != 'I' || sig[2] != 'F')
 1201              	LM90:
 1202 0d42 807DC847 		cmpb	$71, -56(%ebp)
 1203 0d46 750E     		jne	L65
 1204 0d48 807DC949 		cmpb	$73, -55(%ebp)
 1205 0d4c 7508     		jne	L65
 1206 0d4e 807DCA46 		cmpb	$70, -54(%ebp)
 1207 0d52 7502     		jne	L65
 1208 0d54 EB32     		jmp	L64
 1209              	L65:
 524:../../MMI/Resource/ImageGetDimension.c ****         {
 525:../../MMI/Resource/ImageGetDimension.c ****             IMGDIM_LOG_W("image_gif_get_frame_count: GIF file signature check failed, \t FILE:%s", 
 1211              	LM91:
 1212 0d56 8B4508   		movl	8(%ebp), %eax
 1213 0d59 8944240C 		movl	%eax, 12(%esp)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 31


 1214 0d5d C7442408 		movl	$LC18, 8(%esp)
 1214      80090000 
 1215 0d65 C7442404 		movl	$LC4, 4(%esp)
 1215      54000000 
 1216 0d6d C7042402 		movl	$2, (%esp)
 1216      000000
 1217 0d74 E8000000 		call	_reslog_adaptor_log
 1217      00
 526:../../MMI/Resource/ImageGetDimension.c ****             return MMI_FALSE;
 1219              	LM92:
 1220 0d79 C78548AF 		movl	$0, -20664(%ebp)
 1220      FFFF0000 
 1220      0000
 1221 0d83 E98C0800 		jmp	L50
 1221      00
 1222              	L64:
 527:../../MMI/Resource/ImageGetDimension.c ****         }
 528:../../MMI/Resource/ImageGetDimension.c ****     }
 529:../../MMI/Resource/ImageGetDimension.c **** 
 530:../../MMI/Resource/ImageGetDimension.c ****     /* skip dimension value */
 531:../../MMI/Resource/ImageGetDimension.c ****     {
 532:../../MMI/Resource/ImageGetDimension.c ****         S16 img_w, img_h;
 533:../../MMI/Resource/ImageGetDimension.c **** 
 534:../../MMI/Resource/ImageGetDimension.c ****         FLUSH(src, 3);
 1224              	LM93:
 1225 0d88 8D45EC   		leal	-20(%ebp), %eax
 1226              	LBE5:
 1227              	LBB6:
 1228 0d8b 830003   		addl	$3, (%eax)
 535:../../MMI/Resource/ImageGetDimension.c ****         GET_U16(src, img_w);
 1230              	LM94:
 1231 0d8e 8B45EC   		movl	-20(%ebp), %eax
 1232 0d91 660FB600 		movzbw	(%eax), %ax
 1233 0d95 668945C6 		movw	%ax, -58(%ebp)
 1234 0d99 8D45EC   		leal	-20(%ebp), %eax
 1235 0d9c FF00     		incl	(%eax)
 1236 0d9e 8B45EC   		movl	-20(%ebp), %eax
 1237 0da1 0FB600   		movzbl	(%eax), %eax
 1238 0da4 C1E008   		sall	$8, %eax
 1239 0da7 0FB755C6 		movzwl	-58(%ebp), %edx
 1240 0dab 09D0     		orl	%edx, %eax
 1241 0dad 668945C6 		movw	%ax, -58(%ebp)
 1242 0db1 8D45EC   		leal	-20(%ebp), %eax
 1243 0db4 FF00     		incl	(%eax)
 536:../../MMI/Resource/ImageGetDimension.c ****         GET_U16(src, img_h);
 1245              	LM95:
 1246 0db6 8B45EC   		movl	-20(%ebp), %eax
 1247 0db9 660FB600 		movzbw	(%eax), %ax
 1248 0dbd 668945C4 		movw	%ax, -60(%ebp)
 1249 0dc1 8D45EC   		leal	-20(%ebp), %eax
 1250 0dc4 FF00     		incl	(%eax)
 1251 0dc6 8B45EC   		movl	-20(%ebp), %eax
 1252 0dc9 0FB600   		movzbl	(%eax), %eax
 1253 0dcc C1E008   		sall	$8, %eax
 1254 0dcf 8B55C4   		movl	-60(%ebp), %edx
 1255 0dd2 09D0     		orl	%edx, %eax
 1256 0dd4 668945C4 		movw	%ax, -60(%ebp)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 32


 1257 0dd8 8D45EC   		leal	-20(%ebp), %eax
 1258 0ddb FF00     		incl	(%eax)
 537:../../MMI/Resource/ImageGetDimension.c ****         if(img_w < 0 || img_h < 0 || img_w >= 10240 || img_h >= 10240)
 1260              	LM96:
 1261 0ddd 66837DC6 		cmpw	$0, -58(%ebp)
 1261      00
 1262 0de2 7819     		js	L70
 1263 0de4 66837DC4 		cmpw	$0, -60(%ebp)
 1263      00
 1264 0de9 7812     		js	L70
 1265 0deb 66817DC6 		cmpw	$10239, -58(%ebp)
 1265      FF27
 1266 0df1 7F0A     		jg	L70
 1267 0df3 66817DC4 		cmpw	$10239, -60(%ebp)
 1267      FF27
 1268 0df9 7F02     		jg	L70
 1269 0dfb EB52     		jmp	L69
 1270              	L70:
 538:../../MMI/Resource/ImageGetDimension.c ****         {
 539:../../MMI/Resource/ImageGetDimension.c ****             IMGDIM_LOG_W("image_gif_get_frame_count: dimension value is not valid: (%d, %d, %d, %d 
 1272              	LM97:
 1273 0dfd 8B4508   		movl	8(%ebp), %eax
 1274 0e00 8944241C 		movl	%eax, 28(%esp)
 1275 0e04 0FBF45C4 		movswl	-60(%ebp),%eax
 1276 0e08 89442418 		movl	%eax, 24(%esp)
 1277 0e0c 0FBF45C6 		movswl	-58(%ebp),%eax
 1278 0e10 89442414 		movl	%eax, 20(%esp)
 1279 0e14 0FBF45C4 		movswl	-60(%ebp),%eax
 1280 0e18 89442410 		movl	%eax, 16(%esp)
 1281 0e1c 0FBF45C6 		movswl	-58(%ebp),%eax
 1282 0e20 8944240C 		movl	%eax, 12(%esp)
 1283 0e24 C7442408 		movl	$LC19, 8(%esp)
 1283      E0090000 
 1284 0e2c C7442404 		movl	$LC4, 4(%esp)
 1284      54000000 
 1285 0e34 C7042402 		movl	$2, (%esp)
 1285      000000
 1286 0e3b E8000000 		call	_reslog_adaptor_log
 1286      00
 540:../../MMI/Resource/ImageGetDimension.c ****             return MMI_FALSE;
 1288              	LM98:
 1289 0e40 C78548AF 		movl	$0, -20664(%ebp)
 1289      FFFF0000 
 1289      0000
 1290 0e4a E9C50700 		jmp	L50
 1290      00
 1291              	L69:
 541:../../MMI/Resource/ImageGetDimension.c ****         }
 542:../../MMI/Resource/ImageGetDimension.c ****     }
 543:../../MMI/Resource/ImageGetDimension.c **** 
 544:../../MMI/Resource/ImageGetDimension.c ****     /* read the global color palette */
 545:../../MMI/Resource/ImageGetDimension.c ****     {
 546:../../MMI/Resource/ImageGetDimension.c ****         S32 palette_count;
 547:../../MMI/Resource/ImageGetDimension.c **** 
 548:../../MMI/Resource/ImageGetDimension.c ****         GET_U8(src, palette_count);
 1293              	LM99:
 1294              	LBE6:
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 33


 1295              	LBB7:
 1296 0e4f 8B45EC   		movl	-20(%ebp), %eax
 1297 0e52 0FB600   		movzbl	(%eax), %eax
 1298 0e55 8945C0   		movl	%eax, -64(%ebp)
 1299 0e58 8D45EC   		leal	-20(%ebp), %eax
 1300 0e5b FF00     		incl	(%eax)
 549:../../MMI/Resource/ImageGetDimension.c ****         FLUSH(src, 2);
 1302              	LM100:
 1303 0e5d 8D45EC   		leal	-20(%ebp), %eax
 1304 0e60 830002   		addl	$2, (%eax)
 550:../../MMI/Resource/ImageGetDimension.c **** 
 551:../../MMI/Resource/ImageGetDimension.c **** 
 552:../../MMI/Resource/ImageGetDimension.c ****         if (palette_count & 0x80)
 1306              	LM101:
 1307 0e63 B080     		movb	$-128, %al
 1308 0e65 2245C0   		andb	-64(%ebp), %al
 1309 0e68 84C0     		testb	%al, %al
 1310 0e6a 7421     		je	L75
 553:../../MMI/Resource/ImageGetDimension.c ****         {
 554:../../MMI/Resource/ImageGetDimension.c ****             palette_count = 1 << ((palette_count & 0x7) + 1);
 1312              	LM102:
 1313 0e6c 8B45C0   		movl	-64(%ebp), %eax
 1314 0e6f 83E007   		andl	$7, %eax
 1315 0e72 8D4801   		leal	1(%eax), %ecx
 1316 0e75 B8010000 		movl	$1, %eax
 1316      00
 1317 0e7a D3E0     		sall	%cl, %eax
 1318 0e7c 8945C0   		movl	%eax, -64(%ebp)
 555:../../MMI/Resource/ImageGetDimension.c ****             FLUSH(src, (palette_count * 3));
 1320              	LM103:
 1321 0e7f 8B55C0   		movl	-64(%ebp), %edx
 1322 0e82 89D0     		movl	%edx, %eax
 1323 0e84 01C0     		addl	%eax, %eax
 1324 0e86 01D0     		addl	%edx, %eax
 1325 0e88 8D55EC   		leal	-20(%ebp), %edx
 1326 0e8b 0102     		addl	%eax, (%edx)
 1327              	L75:
 556:../../MMI/Resource/ImageGetDimension.c ****         }
 557:../../MMI/Resource/ImageGetDimension.c ****     }
 558:../../MMI/Resource/ImageGetDimension.c **** 
 559:../../MMI/Resource/ImageGetDimension.c ****     /* start decoding */
 560:../../MMI/Resource/ImageGetDimension.c ****     do
 561:../../MMI/Resource/ImageGetDimension.c ****     {
 562:../../MMI/Resource/ImageGetDimension.c ****         U8 symbol;
 563:../../MMI/Resource/ImageGetDimension.c **** 
 564:../../MMI/Resource/ImageGetDimension.c ****         GET_U8(src, symbol);
 1329              	LM104:
 1330              	LBE7:
 1331              	LBB8:
 1332 0e8d 8B45EC   		movl	-20(%ebp), %eax
 1333 0e90 0FB600   		movzbl	(%eax), %eax
 1334 0e93 8845BF   		movb	%al, -65(%ebp)
 1335 0e96 8D45EC   		leal	-20(%ebp), %eax
 1336 0e99 FF00     		incl	(%eax)
 565:../../MMI/Resource/ImageGetDimension.c ****         switch(symbol)
 1338              	LM105:
 1339 0e9b 0FB645BF 		movzbl	-65(%ebp), %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 34


 1340 0e9f 898544AF 		movl	%eax, -20668(%ebp)
 1340      FFFF
 1341 0ea5 83BD44AF 		cmpl	$44, -20668(%ebp)
 1341      FFFF2C
 1342 0eac 747F     		je	L91
 1343 0eae 83BD44AF 		cmpl	$44, -20668(%ebp)
 1343      FFFF2C
 1344 0eb5 7F1B     		jg	L144
 1345 0eb7 83BD44AF 		cmpl	$0, -20668(%ebp)
 1345      FFFF00
 1346 0ebe 0F841407 		je	L139
 1346      0000
 1347 0ec4 83BD44AF 		cmpl	$33, -20668(%ebp)
 1347      FFFF21
 1348 0ecb 7417     		je	L80
 1349 0ecd E9290700 		jmp	L77
 1349      00
 1350              	L144:
 1351 0ed2 83BD44AF 		cmpl	$59, -20668(%ebp)
 1351      FFFF3B
 1352 0ed9 0F841007 		je	L141
 1352      0000
 1353 0edf E9170700 		jmp	L77
 1353      00
 1354              	L80:
 566:../../MMI/Resource/ImageGetDimension.c ****         {
 567:../../MMI/Resource/ImageGetDimension.c ****             /* Process the GIF extension block */
 568:../../MMI/Resource/ImageGetDimension.c ****         case '!':
 569:../../MMI/Resource/ImageGetDimension.c ****             {
 570:../../MMI/Resource/ImageGetDimension.c ****                 U8 ext;
 571:../../MMI/Resource/ImageGetDimension.c **** 
 572:../../MMI/Resource/ImageGetDimension.c ****                 GET_U8(src, ext);
 1356              	LM106:
 1357              	LBB9:
 1358 0ee4 8B45EC   		movl	-20(%ebp), %eax
 1359 0ee7 0FB600   		movzbl	(%eax), %eax
 1360 0eea 8845BE   		movb	%al, -66(%ebp)
 1361 0eed 8D45EC   		leal	-20(%ebp), %eax
 1362 0ef0 FF00     		incl	(%eax)
 573:../../MMI/Resource/ImageGetDimension.c **** 
 574:../../MMI/Resource/ImageGetDimension.c ****                 if (ext == 0xf9)
 1364              	LM107:
 1365 0ef2 807DBEF9 		cmpb	$-7, -66(%ebp)
 1366 0ef6 750B     		jne	L87
 575:../../MMI/Resource/ImageGetDimension.c ****                 {
 576:../../MMI/Resource/ImageGetDimension.c ****                     FLUSH(src, 6);
 1368              	LM108:
 1369 0ef8 8D45EC   		leal	-20(%ebp), %eax
 1370 0efb 830006   		addl	$6, (%eax)
 1371 0efe E9F80600 		jmp	L77
 1371      00
 1372              	L87:
 577:../../MMI/Resource/ImageGetDimension.c ****                 }
 578:../../MMI/Resource/ImageGetDimension.c ****                 else
 579:../../MMI/Resource/ImageGetDimension.c ****                 {
 580:../../MMI/Resource/ImageGetDimension.c ****                     U8 boffset;
 581:../../MMI/Resource/ImageGetDimension.c ****                     S32 offset;
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 35


 582:../../MMI/Resource/ImageGetDimension.c **** 
 583:../../MMI/Resource/ImageGetDimension.c ****                     while (1)
 584:../../MMI/Resource/ImageGetDimension.c ****                     {
 585:../../MMI/Resource/ImageGetDimension.c ****                         GET_U8(src, boffset);
 1374              	LM109:
 1375              	LBB10:
 1376 0f03 8B45EC   		movl	-20(%ebp), %eax
 1377 0f06 0FB600   		movzbl	(%eax), %eax
 1378 0f09 8845BD   		movb	%al, -67(%ebp)
 1379 0f0c 8D45EC   		leal	-20(%ebp), %eax
 1380 0f0f FF00     		incl	(%eax)
 586:../../MMI/Resource/ImageGetDimension.c ****                         offset = (S32)boffset;
 1382              	LM110:
 1383 0f11 0FB645BD 		movzbl	-67(%ebp), %eax
 1384 0f15 8945C0   		movl	%eax, -64(%ebp)
 587:../../MMI/Resource/ImageGetDimension.c ****                         if (offset == 0)
 1386              	LM111:
 1387 0f18 837DC000 		cmpl	$0, -64(%ebp)
 1388 0f1c 7505     		jne	L89
 588:../../MMI/Resource/ImageGetDimension.c ****                         {
 589:../../MMI/Resource/ImageGetDimension.c ****                             break;
 1390              	LM112:
 1391 0f1e E9D80600 		jmp	L77
 1391      00
 1392              	L89:
 590:../../MMI/Resource/ImageGetDimension.c ****                         }
 591:../../MMI/Resource/ImageGetDimension.c ****                         FLUSH(src, offset);
 1394              	LM113:
 1395 0f23 8B55C0   		movl	-64(%ebp), %edx
 1396 0f26 8D45EC   		leal	-20(%ebp), %eax
 1397 0f29 0110     		addl	%edx, (%eax)
 1398 0f2b EBD6     		jmp	L87
 1399              	L91:
 592:../../MMI/Resource/ImageGetDimension.c ****                     }
 593:../../MMI/Resource/ImageGetDimension.c ****                 }
 594:../../MMI/Resource/ImageGetDimension.c ****             }
 595:../../MMI/Resource/ImageGetDimension.c ****             break;
 596:../../MMI/Resource/ImageGetDimension.c **** 
 597:../../MMI/Resource/ImageGetDimension.c ****         case ',':
 598:../../MMI/Resource/ImageGetDimension.c ****             /* gdi_image_gif_dummy_decoder(); */
 599:../../MMI/Resource/ImageGetDimension.c ****             {
 600:../../MMI/Resource/ImageGetDimension.c ****                 S32 want_pixels;
 601:../../MMI/Resource/ImageGetDimension.c ****                 S32 bitstream_available_bits, bytestream_available;
 602:../../MMI/Resource/ImageGetDimension.c ****                 S32 GDI_TREE_BUFFER[GDI_GIF_TREE_SIZE / sizeof(S32)];
 603:../../MMI/Resource/ImageGetDimension.c ****                 U32 bitstream;
 604:../../MMI/Resource/ImageGetDimension.c ****                 S16 GIF_current_code_size, GIF_clear_code, GIF_end_code, GIF_new_codes, GIF_top_slo
 605:../../MMI/Resource/ImageGetDimension.c ****                 S16 size, c, oc, fc, code;
 606:../../MMI/Resource/ImageGetDimension.c ****                 S16 *stack_pointer;
 607:../../MMI/Resource/ImageGetDimension.c ****                 S16 GIF_mtk_stack[GDI_GIF_STACK_SIZE / sizeof(S16)];
 608:../../MMI/Resource/ImageGetDimension.c ****                 S16 *GIF_mtk_suffix = (S16 *) GDI_TREE_BUFFER;
 1401              	LM114:
 1402              	LBE10:
 1403              	LBE9:
 1404              	LBB11:
 1405 0f2d 8D8598BF 		leal	-16488(%ebp), %eax
 1405      FFFF
 1406 0f33 898564AF 		movl	%eax, -20636(%ebp)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 36


 1406      FFFF
 609:../../MMI/Resource/ImageGetDimension.c ****                 S16 *GIF_mtk_prefix = (S16 *) (((U8 *) GDI_TREE_BUFFER) + sizeof(GDI_TREE_BUFFER) /
 1408              	LM115:
 1409 0f39 8D8598BF 		leal	-16488(%ebp), %eax
 1409      FFFF
 1410 0f3f 05022000 		addl	$8194, %eax
 1410      00
 1411 0f44 898560AF 		movl	%eax, -20640(%ebp)
 1411      FFFF
 610:../../MMI/Resource/ImageGetDimension.c ****                 U16 temp;
 611:../../MMI/Resource/ImageGetDimension.c ****                 U8 finished_decoding = 0;
 1413              	LM116:
 1414 0f4a C645BD00 		movb	$0, -67(%ebp)
 612:../../MMI/Resource/ImageGetDimension.c **** 
 613:../../MMI/Resource/ImageGetDimension.c ****                 {
 614:../../MMI/Resource/ImageGetDimension.c ****                     S32 x, y, xsize, ysize;
 615:../../MMI/Resource/ImageGetDimension.c **** 
 616:../../MMI/Resource/ImageGetDimension.c ****                     GET_U16(src, temp);     x = (S32)temp;
 1416              	LM117:
 1417              	LBB12:
 1418 0f4e 8B45EC   		movl	-20(%ebp), %eax
 1419 0f51 660FB600 		movzbw	(%eax), %ax
 1420 0f55 6689855E 		movw	%ax, -20642(%ebp)
 1420      AFFFFF
 1421 0f5c 8D45EC   		leal	-20(%ebp), %eax
 1422 0f5f FF00     		incl	(%eax)
 1423 0f61 8B45EC   		movl	-20(%ebp), %eax
 1424 0f64 0FB600   		movzbl	(%eax), %eax
 1425 0f67 C1E008   		sall	$8, %eax
 1426 0f6a 0FB7955E 		movzwl	-20642(%ebp), %edx
 1426      AFFFFF
 1427 0f71 09D0     		orl	%edx, %eax
 1428 0f73 6689855E 		movw	%ax, -20642(%ebp)
 1428      AFFFFF
 1429 0f7a 8D45EC   		leal	-20(%ebp), %eax
 1430 0f7d FF00     		incl	(%eax)
 1431 0f7f 0FB7855E 		movzwl	-20642(%ebp), %eax
 1431      AFFFFF
 1432 0f86 898558AF 		movl	%eax, -20648(%ebp)
 1432      FFFF
 617:../../MMI/Resource/ImageGetDimension.c ****                     GET_U16(src, temp);     y = (S32)temp;
 1434              	LM118:
 1435 0f8c 8B45EC   		movl	-20(%ebp), %eax
 1436 0f8f 660FB600 		movzbw	(%eax), %ax
 1437 0f93 6689855E 		movw	%ax, -20642(%ebp)
 1437      AFFFFF
 1438 0f9a 8D45EC   		leal	-20(%ebp), %eax
 1439 0f9d FF00     		incl	(%eax)
 1440 0f9f 8B45EC   		movl	-20(%ebp), %eax
 1441 0fa2 0FB600   		movzbl	(%eax), %eax
 1442 0fa5 C1E008   		sall	$8, %eax
 1443 0fa8 0FB7955E 		movzwl	-20642(%ebp), %edx
 1443      AFFFFF
 1444 0faf 09D0     		orl	%edx, %eax
 1445 0fb1 6689855E 		movw	%ax, -20642(%ebp)
 1445      AFFFFF
 1446 0fb8 8D45EC   		leal	-20(%ebp), %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 37


 1447 0fbb FF00     		incl	(%eax)
 1448 0fbd 0FB7855E 		movzwl	-20642(%ebp), %eax
 1448      AFFFFF
 1449 0fc4 898554AF 		movl	%eax, -20652(%ebp)
 1449      FFFF
 618:../../MMI/Resource/ImageGetDimension.c ****                     GET_U16(src, temp);     xsize = (S32)temp;
 1451              	LM119:
 1452 0fca 8B45EC   		movl	-20(%ebp), %eax
 1453 0fcd 660FB600 		movzbw	(%eax), %ax
 1454 0fd1 6689855E 		movw	%ax, -20642(%ebp)
 1454      AFFFFF
 1455 0fd8 8D45EC   		leal	-20(%ebp), %eax
 1456 0fdb FF00     		incl	(%eax)
 1457 0fdd 8B45EC   		movl	-20(%ebp), %eax
 1458 0fe0 0FB600   		movzbl	(%eax), %eax
 1459 0fe3 C1E008   		sall	$8, %eax
 1460 0fe6 0FB7955E 		movzwl	-20642(%ebp), %edx
 1460      AFFFFF
 1461 0fed 09D0     		orl	%edx, %eax
 1462 0fef 6689855E 		movw	%ax, -20642(%ebp)
 1462      AFFFFF
 1463 0ff6 8D45EC   		leal	-20(%ebp), %eax
 1464 0ff9 FF00     		incl	(%eax)
 1465 0ffb 0FB7855E 		movzwl	-20642(%ebp), %eax
 1465      AFFFFF
 1466 1002 898550AF 		movl	%eax, -20656(%ebp)
 1466      FFFF
 619:../../MMI/Resource/ImageGetDimension.c ****                     GET_U16(src, temp);     ysize = (S32)temp;
 1468              	LM120:
 1469 1008 8B45EC   		movl	-20(%ebp), %eax
 1470 100b 660FB600 		movzbw	(%eax), %ax
 1471 100f 6689855E 		movw	%ax, -20642(%ebp)
 1471      AFFFFF
 1472 1016 8D45EC   		leal	-20(%ebp), %eax
 1473 1019 FF00     		incl	(%eax)
 1474 101b 8B45EC   		movl	-20(%ebp), %eax
 1475 101e 0FB600   		movzbl	(%eax), %eax
 1476 1021 C1E008   		sall	$8, %eax
 1477 1024 0FB7955E 		movzwl	-20642(%ebp), %edx
 1477      AFFFFF
 1478 102b 09D0     		orl	%edx, %eax
 1479 102d 6689855E 		movw	%ax, -20642(%ebp)
 1479      AFFFFF
 1480 1034 8D45EC   		leal	-20(%ebp), %eax
 1481 1037 FF00     		incl	(%eax)
 1482 1039 0FB7855E 		movzwl	-20642(%ebp), %eax
 1482      AFFFFF
 1483 1040 89854CAF 		movl	%eax, -20660(%ebp)
 1483      FFFF
 620:../../MMI/Resource/ImageGetDimension.c **** 
 621:../../MMI/Resource/ImageGetDimension.c ****                     want_pixels = xsize * ysize;
 1485              	LM121:
 1486 1046 8B8550AF 		movl	-20656(%ebp), %eax
 1486      FFFF
 1487 104c 0FAF854C 		imull	-20660(%ebp), %eax
 1487      AFFFFF
 1488 1053 8945C0   		movl	%eax, -64(%ebp)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 38


 622:../../MMI/Resource/ImageGetDimension.c ****                 }
 623:../../MMI/Resource/ImageGetDimension.c **** 
 624:../../MMI/Resource/ImageGetDimension.c ****                 {
 625:../../MMI/Resource/ImageGetDimension.c ****                     S32 n;
 626:../../MMI/Resource/ImageGetDimension.c **** 
 627:../../MMI/Resource/ImageGetDimension.c ****                     GET_U8(src, n);
 1490              	LM122:
 1491              	LBE12:
 1492              	LBB13:
 1493 1056 8B45EC   		movl	-20(%ebp), %eax
 1494 1059 0FB600   		movzbl	(%eax), %eax
 1495 105c 89854CAF 		movl	%eax, -20660(%ebp)
 1495      FFFF
 1496 1062 8D45EC   		leal	-20(%ebp), %eax
 1497 1065 FF00     		incl	(%eax)
 628:../../MMI/Resource/ImageGetDimension.c **** 
 629:../../MMI/Resource/ImageGetDimension.c ****                     if (src >= buf + file_size)
 1499              	LM123:
 1500 1067 8B45E4   		movl	-28(%ebp), %eax
 1501 106a 0345F0   		addl	-16(%ebp), %eax
 1502 106d 3945EC   		cmpl	%eax, -20(%ebp)
 1503 1070 7232     		jb	L97
 630:../../MMI/Resource/ImageGetDimension.c ****                     {
 631:../../MMI/Resource/ImageGetDimension.c ****                         IMGDIM_LOG_W("image_gif_get_frame_count: buffer overflow caused by src, \tF
 1505              	LM124:
 1506 1072 8B4508   		movl	8(%ebp), %eax
 1507 1075 8944240C 		movl	%eax, 12(%esp)
 1508 1079 C7442408 		movl	$LC20, 8(%esp)
 1508      400A0000 
 1509 1081 C7442404 		movl	$LC4, 4(%esp)
 1509      54000000 
 1510 1089 C7042402 		movl	$2, (%esp)
 1510      000000
 1511 1090 E8000000 		call	_reslog_adaptor_log
 1511      00
 632:../../MMI/Resource/ImageGetDimension.c ****                         return MMI_FALSE;
 1513              	LM125:
 1514 1095 C78548AF 		movl	$0, -20664(%ebp)
 1514      FFFF0000 
 1514      0000
 1515 109f E9700500 		jmp	L50
 1515      00
 1516              	L97:
 633:../../MMI/Resource/ImageGetDimension.c ****                     }
 634:../../MMI/Resource/ImageGetDimension.c **** 
 635:../../MMI/Resource/ImageGetDimension.c ****                     if (n & 0x80)
 1518              	LM126:
 1519 10a4 B080     		movb	$-128, %al
 1520 10a6 22854CAF 		andb	-20660(%ebp), %al
 1520      FFFF
 1521 10ac 84C0     		testb	%al, %al
 1522 10ae 742A     		je	L98
 636:../../MMI/Resource/ImageGetDimension.c ****                     {
 637:../../MMI/Resource/ImageGetDimension.c ****                         n = 1 << ((n & 0x7) + 1);
 1524              	LM127:
 1525 10b0 8B854CAF 		movl	-20660(%ebp), %eax
 1525      FFFF
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 39


 1526 10b6 83E007   		andl	$7, %eax
 1527 10b9 8D4801   		leal	1(%eax), %ecx
 1528 10bc B8010000 		movl	$1, %eax
 1528      00
 1529 10c1 D3E0     		sall	%cl, %eax
 1530 10c3 89854CAF 		movl	%eax, -20660(%ebp)
 1530      FFFF
 638:../../MMI/Resource/ImageGetDimension.c **** 
 639:../../MMI/Resource/ImageGetDimension.c ****                         /* skip reading palette */
 640:../../MMI/Resource/ImageGetDimension.c ****                         FLUSH(src, n * 3);
 1532              	LM128:
 1533 10c9 8B954CAF 		movl	-20660(%ebp), %edx
 1533      FFFF
 1534 10cf 89D0     		movl	%edx, %eax
 1535 10d1 01C0     		addl	%eax, %eax
 1536 10d3 01D0     		addl	%edx, %eax
 1537 10d5 8D55EC   		leal	-20(%ebp), %edx
 1538 10d8 0102     		addl	%eax, (%edx)
 1539              	L98:
 641:../../MMI/Resource/ImageGetDimension.c ****                     }
 642:../../MMI/Resource/ImageGetDimension.c ****                 }
 643:../../MMI/Resource/ImageGetDimension.c **** 
 644:../../MMI/Resource/ImageGetDimension.c ****                 GET_U8(src, temp);  size = (S16)temp;
 1541              	LM129:
 1542              	LBE13:
 1543 10da 8B45EC   		movl	-20(%ebp), %eax
 1544 10dd 660FB600 		movzbw	(%eax), %ax
 1545 10e1 6689855E 		movw	%ax, -20642(%ebp)
 1545      AFFFFF
 1546 10e8 8D45EC   		leal	-20(%ebp), %eax
 1547 10eb FF00     		incl	(%eax)
 1548 10ed 0FB7855E 		movzwl	-20642(%ebp), %eax
 1548      AFFFFF
 1549 10f4 6689858A 		movw	%ax, -16502(%ebp)
 1549      BFFFFF
 645:../../MMI/Resource/ImageGetDimension.c **** 
 646:../../MMI/Resource/ImageGetDimension.c ****                 /* GIF_INITIALIZE_DECODER(size);*/
 647:../../MMI/Resource/ImageGetDimension.c ****                 GIF_current_code_size = (S16)(size + 1);
 1551              	LM130:
 1552 10fb 0FB7858A 		movzwl	-16502(%ebp), %eax
 1552      BFFFFF
 1553 1102 40       		incl	%eax
 1554 1103 668945C4 		movw	%ax, -60(%ebp)
 648:../../MMI/Resource/ImageGetDimension.c ****                 GIF_top_slot = (S16)(1 << GIF_current_code_size);
 1556              	LM131:
 1557 1107 0FBF4DC4 		movswl	-60(%ebp),%ecx
 1558 110b B8010000 		movl	$1, %eax
 1558      00
 1559 1110 D3E0     		sall	%cl, %eax
 1560 1112 6689858E 		movw	%ax, -16498(%ebp)
 1560      BFFFFF
 649:../../MMI/Resource/ImageGetDimension.c ****                 GIF_clear_code = (S16)(1 << size);
 1562              	LM132:
 1563 1119 0FBF8D8A 		movswl	-16502(%ebp),%ecx
 1563      BFFFFF
 1564 1120 B8010000 		movl	$1, %eax
 1564      00
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 40


 1565 1125 D3E0     		sall	%cl, %eax
 1566 1127 668945C6 		movw	%ax, -58(%ebp)
 650:../../MMI/Resource/ImageGetDimension.c ****                 GIF_end_code = (S16)(GIF_clear_code + 1);
 1568              	LM133:
 1569 112b 0FB745C6 		movzwl	-58(%ebp), %eax
 1570 112f 40       		incl	%eax
 1571 1130 66898592 		movw	%ax, -16494(%ebp)
 1571      BFFFFF
 651:../../MMI/Resource/ImageGetDimension.c ****                 GIF_slot = (GIF_new_codes) = (S16)(GIF_end_code + 1);
 1573              	LM134:
 1574 1137 0FB78592 		movzwl	-16494(%ebp), %eax
 1574      BFFFFF
 1575 113e 40       		incl	%eax
 1576 113f 66898590 		movw	%ax, -16496(%ebp)
 1576      BFFFFF
 1577 1146 6689858C 		movw	%ax, -16500(%ebp)
 1577      BFFFFF
 652:../../MMI/Resource/ImageGetDimension.c ****                 bitstream_available_bits = 0;
 1579              	LM135:
 1580 114d C745B800 		movl	$0, -72(%ebp)
 1580      000000
 653:../../MMI/Resource/ImageGetDimension.c ****                 bytestream_available = 0;
 1582              	LM136:
 1583 1154 C745B400 		movl	$0, -76(%ebp)
 1583      000000
 654:../../MMI/Resource/ImageGetDimension.c ****                 bitstream = 0;
 1585              	LM137:
 1586 115b C78594BF 		movl	$0, -16492(%ebp)
 1586      FFFF0000 
 1586      0000
 655:../../MMI/Resource/ImageGetDimension.c **** 
 656:../../MMI/Resource/ImageGetDimension.c ****                 oc = fc = 0;
 1588              	LM138:
 1589 1165 66C78584 		movw	$0, -16508(%ebp)
 1589      BFFFFF00 
 1589      00
 1590 116e 66C78586 		movw	$0, -16506(%ebp)
 1590      BFFFFF00 
 1590      00
 657:../../MMI/Resource/ImageGetDimension.c ****                 stack_pointer = GIF_mtk_stack;
 1592              	LM139:
 1593 1177 8D8568AF 		leal	-20632(%ebp), %eax
 1593      FFFF
 1594 117d 89857CBF 		movl	%eax, -16516(%ebp)
 1594      FFFF
 658:../../MMI/Resource/ImageGetDimension.c **** 
 659:../../MMI/Resource/ImageGetDimension.c ****                 /* begin decoding */
 660:../../MMI/Resource/ImageGetDimension.c ****                 while (!finished_decoding)
 1596              	LM140:
 1597              	L101:
 1598 1183 807DBD00 		cmpb	$0, -67(%ebp)
 1599 1187 7405     		je	L104
 1600 1189 E9140400 		jmp	L102
 1600      00
 661:../../MMI/Resource/ImageGetDimension.c ****                 {
 662:../../MMI/Resource/ImageGetDimension.c ****                     /* GIF_GET_NEXT_CODE(c); */
 663:../../MMI/Resource/ImageGetDimension.c ****                     while(GIF_current_code_size > bitstream_available_bits)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 41


 1602              	LM141:
 1603              	L104:
 1604 118e 0FBF45C4 		movswl	-60(%ebp),%eax
 1605 1192 3B45B8   		cmpl	-72(%ebp), %eax
 1606 1195 7F02     		jg	L106
 1607 1197 EB5A     		jmp	L105
 1608              	L106:
 664:../../MMI/Resource/ImageGetDimension.c ****                     {
 665:../../MMI/Resource/ImageGetDimension.c ****                         if(bytestream_available == 0)
 1610              	LM142:
 1611 1199 837DB400 		cmpl	$0, -76(%ebp)
 1612 119d 751D     		jne	L107
 666:../../MMI/Resource/ImageGetDimension.c ****                         {
 667:../../MMI/Resource/ImageGetDimension.c ****                             GET_U8(src, temp);  bytestream_available = (S32)temp;
 1614              	LM143:
 1615 119f 8B45EC   		movl	-20(%ebp), %eax
 1616 11a2 660FB600 		movzbw	(%eax), %ax
 1617 11a6 6689855E 		movw	%ax, -20642(%ebp)
 1617      AFFFFF
 1618 11ad 8D45EC   		leal	-20(%ebp), %eax
 1619 11b0 FF00     		incl	(%eax)
 1620 11b2 0FB7855E 		movzwl	-20642(%ebp), %eax
 1620      AFFFFF
 1621 11b9 8945B4   		movl	%eax, -76(%ebp)
 1622              	L107:
 668:../../MMI/Resource/ImageGetDimension.c ****                         }
 669:../../MMI/Resource/ImageGetDimension.c ****                         GET_U8(src, temp);
 1624              	LM144:
 1625 11bc 8B45EC   		movl	-20(%ebp), %eax
 1626 11bf 660FB600 		movzbw	(%eax), %ax
 1627 11c3 6689855E 		movw	%ax, -20642(%ebp)
 1627      AFFFFF
 1628 11ca 8D45EC   		leal	-20(%ebp), %eax
 1629 11cd FF00     		incl	(%eax)
 670:../../MMI/Resource/ImageGetDimension.c ****                         bitstream |= temp << bitstream_available_bits;
 1631              	LM145:
 1632 11cf 0FB7855E 		movzwl	-20642(%ebp), %eax
 1632      AFFFFF
 1633 11d6 0FB64DB8 		movzbl	-72(%ebp), %ecx
 1634 11da 89C2     		movl	%eax, %edx
 1635 11dc D3E2     		sall	%cl, %edx
 1636 11de 8D8594BF 		leal	-16492(%ebp), %eax
 1636      FFFF
 1637 11e4 0910     		orl	%edx, (%eax)
 671:../../MMI/Resource/ImageGetDimension.c ****                         bitstream_available_bits +=8;
 1639              	LM146:
 1640 11e6 8D45B8   		leal	-72(%ebp), %eax
 1641 11e9 830008   		addl	$8, (%eax)
 672:../../MMI/Resource/ImageGetDimension.c ****                         bytestream_available--;
 1643              	LM147:
 1644 11ec 8D45B4   		leal	-76(%ebp), %eax
 1645 11ef FF08     		decl	(%eax)
 1646 11f1 EB9B     		jmp	L104
 1647              	L105:
 673:../../MMI/Resource/ImageGetDimension.c ****                     }
 674:../../MMI/Resource/ImageGetDimension.c ****                     bitstream_available_bits -= GIF_current_code_size;
 1649              	LM148:
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 42


 1650 11f3 0FBF55C4 		movswl	-60(%ebp),%edx
 1651 11f7 8D45B8   		leal	-72(%ebp), %eax
 1652 11fa 2910     		subl	%edx, (%eax)
 675:../../MMI/Resource/ImageGetDimension.c ****                     c = (S16) bitstream & ((1 << GIF_current_code_size) - 1);
 1654              	LM149:
 1655 11fc 0FBF4DC4 		movswl	-60(%ebp),%ecx
 1656 1200 B8010000 		movl	$1, %eax
 1656      00
 1657 1205 D3E0     		sall	%cl, %eax
 1658 1207 48       		decl	%eax
 1659 1208 8B9594BF 		movl	-16492(%ebp), %edx
 1659      FFFF
 1660 120e 21D0     		andl	%edx, %eax
 1661 1210 66898588 		movw	%ax, -16504(%ebp)
 1661      BFFFFF
 676:../../MMI/Resource/ImageGetDimension.c ****                     bitstream >>= GIF_current_code_size;
 1663              	LM150:
 1664 1217 0FBF4DC4 		movswl	-60(%ebp),%ecx
 1665 121b 8D8594BF 		leal	-16492(%ebp), %eax
 1665      FFFF
 1666 1221 D328     		shrl	%cl, (%eax)
 677:../../MMI/Resource/ImageGetDimension.c **** 
 678:../../MMI/Resource/ImageGetDimension.c ****                     if (c == GIF_end_code)
 1668              	LM151:
 1669 1223 8B8588BF 		movl	-16504(%ebp), %eax
 1669      FFFF
 1670 1229 663B8592 		cmpw	-16494(%ebp), %ax
 1670      BFFFFF
 1671 1230 7505     		jne	L110
 679:../../MMI/Resource/ImageGetDimension.c ****                     {
 680:../../MMI/Resource/ImageGetDimension.c ****                         break;
 1673              	LM152:
 1674 1232 E96B0300 		jmp	L102
 1674      00
 1675              	L110:
 681:../../MMI/Resource/ImageGetDimension.c ****                     }
 682:../../MMI/Resource/ImageGetDimension.c **** 
 683:../../MMI/Resource/ImageGetDimension.c ****                     if (src >= buf + file_size)
 1677              	LM153:
 1678 1237 8B45E4   		movl	-28(%ebp), %eax
 1679 123a 0345F0   		addl	-16(%ebp), %eax
 1680 123d 3945EC   		cmpl	%eax, -20(%ebp)
 1681 1240 7232     		jb	L111
 684:../../MMI/Resource/ImageGetDimension.c ****                     {
 685:../../MMI/Resource/ImageGetDimension.c ****                         IMGDIM_LOG_W("image_gif_get_frame_count: buffer overflow caused by src, \tF
 1683              	LM154:
 1684 1242 8B4508   		movl	8(%ebp), %eax
 1685 1245 8944240C 		movl	%eax, 12(%esp)
 1686 1249 C7442408 		movl	$LC20, 8(%esp)
 1686      400A0000 
 1687 1251 C7442404 		movl	$LC4, 4(%esp)
 1687      54000000 
 1688 1259 C7042402 		movl	$2, (%esp)
 1688      000000
 1689 1260 E8000000 		call	_reslog_adaptor_log
 1689      00
 686:../../MMI/Resource/ImageGetDimension.c ****                         return MMI_FALSE;
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 43


 1691              	LM155:
 1692 1265 C78548AF 		movl	$0, -20664(%ebp)
 1692      FFFF0000 
 1692      0000
 1693 126f E9A00300 		jmp	L50
 1693      00
 1694              	L111:
 687:../../MMI/Resource/ImageGetDimension.c ****                     }
 688:../../MMI/Resource/ImageGetDimension.c **** 
 689:../../MMI/Resource/ImageGetDimension.c ****                     if (c == GIF_clear_code)
 1696              	LM156:
 1697 1274 8B8588BF 		movl	-16504(%ebp), %eax
 1697      FFFF
 1698 127a 663B45C6 		cmpw	-58(%ebp), %ax
 1699 127e 0F855501 		jne	L112
 1699      0000
 690:../../MMI/Resource/ImageGetDimension.c ****                     {
 691:../../MMI/Resource/ImageGetDimension.c ****                         GIF_current_code_size = (S16) (size + 1);
 1701              	LM157:
 1702 1284 0FB7858A 		movzwl	-16502(%ebp), %eax
 1702      BFFFFF
 1703 128b 40       		incl	%eax
 1704 128c 668945C4 		movw	%ax, -60(%ebp)
 692:../../MMI/Resource/ImageGetDimension.c ****                         GIF_slot = GIF_new_codes;
 1706              	LM158:
 1707 1290 8B8590BF 		movl	-16496(%ebp), %eax
 1707      FFFF
 1708 1296 6689858C 		movw	%ax, -16500(%ebp)
 1708      BFFFFF
 693:../../MMI/Resource/ImageGetDimension.c ****                         GIF_top_slot = (S16) (1 << GIF_current_code_size);
 1710              	LM159:
 1711 129d 0FBF4DC4 		movswl	-60(%ebp),%ecx
 1712 12a1 B8010000 		movl	$1, %eax
 1712      00
 1713 12a6 D3E0     		sall	%cl, %eax
 1714 12a8 6689858E 		movw	%ax, -16498(%ebp)
 1714      BFFFFF
 694:../../MMI/Resource/ImageGetDimension.c **** 
 695:../../MMI/Resource/ImageGetDimension.c ****                         /* GIF_GET_NEXT_CODE(c); */
 696:../../MMI/Resource/ImageGetDimension.c ****                         while(GIF_current_code_size > bitstream_available_bits)
 1716              	LM160:
 1717              	L113:
 1718 12af 0FBF45C4 		movswl	-60(%ebp),%eax
 1719 12b3 3B45B8   		cmpl	-72(%ebp), %eax
 1720 12b6 7F02     		jg	L115
 1721 12b8 EB5A     		jmp	L114
 1722              	L115:
 697:../../MMI/Resource/ImageGetDimension.c ****                         {
 698:../../MMI/Resource/ImageGetDimension.c ****                             if(bytestream_available == 0)
 1724              	LM161:
 1725 12ba 837DB400 		cmpl	$0, -76(%ebp)
 1726 12be 751D     		jne	L116
 699:../../MMI/Resource/ImageGetDimension.c ****                             {
 700:../../MMI/Resource/ImageGetDimension.c ****                                 GET_U8(src, temp);  bytestream_available = (S32)temp;
 1728              	LM162:
 1729 12c0 8B45EC   		movl	-20(%ebp), %eax
 1730 12c3 660FB600 		movzbw	(%eax), %ax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 44


 1731 12c7 6689855E 		movw	%ax, -20642(%ebp)
 1731      AFFFFF
 1732 12ce 8D45EC   		leal	-20(%ebp), %eax
 1733 12d1 FF00     		incl	(%eax)
 1734 12d3 0FB7855E 		movzwl	-20642(%ebp), %eax
 1734      AFFFFF
 1735 12da 8945B4   		movl	%eax, -76(%ebp)
 1736              	L116:
 701:../../MMI/Resource/ImageGetDimension.c ****                             }
 702:../../MMI/Resource/ImageGetDimension.c ****                             GET_U8(src, temp);
 1738              	LM163:
 1739 12dd 8B45EC   		movl	-20(%ebp), %eax
 1740 12e0 660FB600 		movzbw	(%eax), %ax
 1741 12e4 6689855E 		movw	%ax, -20642(%ebp)
 1741      AFFFFF
 1742 12eb 8D45EC   		leal	-20(%ebp), %eax
 1743 12ee FF00     		incl	(%eax)
 703:../../MMI/Resource/ImageGetDimension.c ****                             bitstream |= temp << bitstream_available_bits;
 1745              	LM164:
 1746 12f0 0FB7855E 		movzwl	-20642(%ebp), %eax
 1746      AFFFFF
 1747 12f7 0FB64DB8 		movzbl	-72(%ebp), %ecx
 1748 12fb 89C2     		movl	%eax, %edx
 1749 12fd D3E2     		sall	%cl, %edx
 1750 12ff 8D8594BF 		leal	-16492(%ebp), %eax
 1750      FFFF
 1751 1305 0910     		orl	%edx, (%eax)
 704:../../MMI/Resource/ImageGetDimension.c ****                             bitstream_available_bits +=8;
 1753              	LM165:
 1754 1307 8D45B8   		leal	-72(%ebp), %eax
 1755 130a 830008   		addl	$8, (%eax)
 705:../../MMI/Resource/ImageGetDimension.c ****                             bytestream_available--;
 1757              	LM166:
 1758 130d 8D45B4   		leal	-76(%ebp), %eax
 1759 1310 FF08     		decl	(%eax)
 1760 1312 EB9B     		jmp	L113
 1761              	L114:
 706:../../MMI/Resource/ImageGetDimension.c ****                         }
 707:../../MMI/Resource/ImageGetDimension.c ****                         bitstream_available_bits -= GIF_current_code_size;
 1763              	LM167:
 1764 1314 0FBF55C4 		movswl	-60(%ebp),%edx
 1765 1318 8D45B8   		leal	-72(%ebp), %eax
 1766 131b 2910     		subl	%edx, (%eax)
 708:../../MMI/Resource/ImageGetDimension.c ****                         c = (S16) bitstream & ((1 << GIF_current_code_size) - 1);
 1768              	LM168:
 1769 131d 0FBF4DC4 		movswl	-60(%ebp),%ecx
 1770 1321 B8010000 		movl	$1, %eax
 1770      00
 1771 1326 D3E0     		sall	%cl, %eax
 1772 1328 48       		decl	%eax
 1773 1329 8B9594BF 		movl	-16492(%ebp), %edx
 1773      FFFF
 1774 132f 21D0     		andl	%edx, %eax
 1775 1331 66898588 		movw	%ax, -16504(%ebp)
 1775      BFFFFF
 709:../../MMI/Resource/ImageGetDimension.c ****                         bitstream >>= GIF_current_code_size;
 1777              	LM169:
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 45


 1778 1338 0FBF4DC4 		movswl	-60(%ebp),%ecx
 1779 133c 8D8594BF 		leal	-16492(%ebp), %eax
 1779      FFFF
 1780 1342 D328     		shrl	%cl, (%eax)
 710:../../MMI/Resource/ImageGetDimension.c **** 
 711:../../MMI/Resource/ImageGetDimension.c ****                         if (c == GIF_end_code)
 1782              	LM170:
 1783 1344 8B8588BF 		movl	-16504(%ebp), %eax
 1783      FFFF
 1784 134a 663B8592 		cmpw	-16494(%ebp), %ax
 1784      BFFFFF
 1785 1351 7505     		jne	L119
 712:../../MMI/Resource/ImageGetDimension.c ****                         {
 713:../../MMI/Resource/ImageGetDimension.c ****                             break;
 1787              	LM171:
 1788 1353 E94A0200 		jmp	L102
 1788      00
 1789              	L119:
 714:../../MMI/Resource/ImageGetDimension.c ****                         }
 715:../../MMI/Resource/ImageGetDimension.c **** 
 716:../../MMI/Resource/ImageGetDimension.c ****                         if (src >= buf + file_size)
 1791              	LM172:
 1792 1358 8B45E4   		movl	-28(%ebp), %eax
 1793 135b 0345F0   		addl	-16(%ebp), %eax
 1794 135e 3945EC   		cmpl	%eax, -20(%ebp)
 1795 1361 7232     		jb	L120
 717:../../MMI/Resource/ImageGetDimension.c ****                         {
 718:../../MMI/Resource/ImageGetDimension.c ****                             IMGDIM_LOG_W("image_gif_get_frame_count: buffer overflow caused by src,
 1797              	LM173:
 1798 1363 8B4508   		movl	8(%ebp), %eax
 1799 1366 8944240C 		movl	%eax, 12(%esp)
 1800 136a C7442408 		movl	$LC20, 8(%esp)
 1800      400A0000 
 1801 1372 C7442404 		movl	$LC4, 4(%esp)
 1801      54000000 
 1802 137a C7042402 		movl	$2, (%esp)
 1802      000000
 1803 1381 E8000000 		call	_reslog_adaptor_log
 1803      00
 719:../../MMI/Resource/ImageGetDimension.c ****                             return MMI_FALSE;
 1805              	LM174:
 1806 1386 C78548AF 		movl	$0, -20664(%ebp)
 1806      FFFF0000 
 1806      0000
 1807 1390 E97F0200 		jmp	L50
 1807      00
 1808              	L120:
 720:../../MMI/Resource/ImageGetDimension.c ****                         }
 721:../../MMI/Resource/ImageGetDimension.c **** 
 722:../../MMI/Resource/ImageGetDimension.c ****                         if (c >= GIF_slot)
 1810              	LM175:
 1811 1395 8B8588BF 		movl	-16504(%ebp), %eax
 1811      FFFF
 1812 139b 663B858C 		cmpw	-16500(%ebp), %ax
 1812      BFFFFF
 1813 13a2 7C09     		jl	L121
 723:../../MMI/Resource/ImageGetDimension.c ****                         {
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 46


 724:../../MMI/Resource/ImageGetDimension.c ****                             c = 0;
 1815              	LM176:
 1816 13a4 66C78588 		movw	$0, -16504(%ebp)
 1816      BFFFFF00 
 1816      00
 1817              	L121:
 725:../../MMI/Resource/ImageGetDimension.c ****                         }
 726:../../MMI/Resource/ImageGetDimension.c **** 
 727:../../MMI/Resource/ImageGetDimension.c ****                         oc = fc = c;
 1819              	LM177:
 1820 13ad 8B8588BF 		movl	-16504(%ebp), %eax
 1820      FFFF
 1821 13b3 66898584 		movw	%ax, -16508(%ebp)
 1821      BFFFFF
 1822 13ba 66898586 		movw	%ax, -16506(%ebp)
 1822      BFFFFF
 728:../../MMI/Resource/ImageGetDimension.c ****                         if ((--want_pixels) < 0)
 1824              	LM178:
 1825 13c1 8D45C0   		leal	-64(%ebp), %eax
 1826 13c4 FF08     		decl	(%eax)
 1827 13c6 837DC000 		cmpl	$0, -64(%ebp)
 1828 13ca 0F89B3FD 		jns	L101
 1828      FFFF
 729:../../MMI/Resource/ImageGetDimension.c ****                         {
 730:../../MMI/Resource/ImageGetDimension.c ****                             finished_decoding = 1;
 1830              	LM179:
 1831 13d0 C645BD01 		movb	$1, -67(%ebp)
 1832 13d4 E9AAFDFF 		jmp	L101
 1832      FF
 1833              	L112:
 731:../../MMI/Resource/ImageGetDimension.c ****                         }
 732:../../MMI/Resource/ImageGetDimension.c ****                     }
 733:../../MMI/Resource/ImageGetDimension.c ****                     else
 734:../../MMI/Resource/ImageGetDimension.c ****                     {
 735:../../MMI/Resource/ImageGetDimension.c ****                         code = c;
 1835              	LM180:
 1836 13d9 8B8588BF 		movl	-16504(%ebp), %eax
 1836      FFFF
 1837 13df 66898582 		movw	%ax, -16510(%ebp)
 1837      BFFFFF
 736:../../MMI/Resource/ImageGetDimension.c ****                         if (code >= GIF_slot)
 1839              	LM181:
 1840 13e6 0FB78582 		movzwl	-16510(%ebp), %eax
 1840      BFFFFF
 1841 13ed 663B858C 		cmpw	-16500(%ebp), %ax
 1841      BFFFFF
 1842 13f4 7C28     		jl	L124
 737:../../MMI/Resource/ImageGetDimension.c ****                         {
 738:../../MMI/Resource/ImageGetDimension.c ****                             code = oc;
 1844              	LM182:
 1845 13f6 0FB78586 		movzwl	-16506(%ebp), %eax
 1845      BFFFFF
 1846 13fd 66898582 		movw	%ax, -16510(%ebp)
 1846      BFFFFF
 739:../../MMI/Resource/ImageGetDimension.c ****                             *stack_pointer++ = fc;
 1848              	LM183:
 1849 1404 8B857CBF 		movl	-16516(%ebp), %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 47


 1849      FFFF
 1850 140a 89C2     		movl	%eax, %edx
 1851 140c 8B8584BF 		movl	-16508(%ebp), %eax
 1851      FFFF
 1852 1412 668902   		movw	%ax, (%edx)
 1853 1415 8D857CBF 		leal	-16516(%ebp), %eax
 1853      FFFF
 1854 141b 830002   		addl	$2, (%eax)
 1855              	L124:
 1856 141e 90       		nop
 740:../../MMI/Resource/ImageGetDimension.c ****                         }
 741:../../MMI/Resource/ImageGetDimension.c **** 
 742:../../MMI/Resource/ImageGetDimension.c ****                         while (code >= GIF_new_codes)
 1858              	LM184:
 1859              	L125:
 1860 141f 0FB78582 		movzwl	-16510(%ebp), %eax
 1860      BFFFFF
 1861 1426 663B8590 		cmpw	-16496(%ebp), %ax
 1861      BFFFFF
 1862 142d 7D05     		jge	L127
 1863 142f E98D0000 		jmp	L126
 1863      00
 1864              	L127:
 743:../../MMI/Resource/ImageGetDimension.c ****                         {
 744:../../MMI/Resource/ImageGetDimension.c ****                             if(stack_pointer >= (S16*)(((U8*)GIF_mtk_stack) + sizeof(GIF_mtk_stack)
 1866              	LM185:
 1867 1434 8D8568AF 		leal	-20632(%ebp), %eax
 1867      FFFF
 1868 143a 05041000 		addl	$4100, %eax
 1868      00
 1869 143f 39857CBF 		cmpl	%eax, -16516(%ebp)
 1869      FFFF
 1870 1445 7232     		jb	L128
 745:../../MMI/Resource/ImageGetDimension.c ****                             {
 746:../../MMI/Resource/ImageGetDimension.c ****                                 IMGDIM_LOG_W("image_gif_get_frame_count: stack_pointer overflow\tFI
 1872              	LM186:
 1873 1447 8B4508   		movl	8(%ebp), %eax
 1874 144a 8944240C 		movl	%eax, 12(%esp)
 1875 144e C7442408 		movl	$LC21, 8(%esp)
 1875      A00A0000 
 1876 1456 C7442404 		movl	$LC4, 4(%esp)
 1876      54000000 
 1877 145e C7042402 		movl	$2, (%esp)
 1877      000000
 1878 1465 E8000000 		call	_reslog_adaptor_log
 1878      00
 747:../../MMI/Resource/ImageGetDimension.c ****                                 return MMI_FALSE;
 1880              	LM187:
 1881 146a C78548AF 		movl	$0, -20664(%ebp)
 1881      FFFF0000 
 1881      0000
 1882 1474 E99B0100 		jmp	L50
 1882      00
 1883              	L128:
 748:../../MMI/Resource/ImageGetDimension.c ****                             }
 749:../../MMI/Resource/ImageGetDimension.c **** 
 750:../../MMI/Resource/ImageGetDimension.c ****                             *stack_pointer++ = GIF_mtk_suffix[code];
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 48


 1885              	LM188:
 1886 1479 8B857CBF 		movl	-16516(%ebp), %eax
 1886      FFFF
 1887 147f 89C1     		movl	%eax, %ecx
 1888 1481 0FBF8582 		movswl	-16510(%ebp),%eax
 1888      BFFFFF
 1889 1488 8D1400   		leal	(%eax,%eax), %edx
 1890 148b 8B8564AF 		movl	-20636(%ebp), %eax
 1890      FFFF
 1891 1491 0FB70410 		movzwl	(%eax,%edx), %eax
 1892 1495 668901   		movw	%ax, (%ecx)
 1893 1498 8D857CBF 		leal	-16516(%ebp), %eax
 1893      FFFF
 1894 149e 830002   		addl	$2, (%eax)
 751:../../MMI/Resource/ImageGetDimension.c ****                             code = GIF_mtk_prefix[code];
 1896              	LM189:
 1897 14a1 0FBF8582 		movswl	-16510(%ebp),%eax
 1897      BFFFFF
 1898 14a8 8D1400   		leal	(%eax,%eax), %edx
 1899 14ab 8B8560AF 		movl	-20640(%ebp), %eax
 1899      FFFF
 1900 14b1 0FB70410 		movzwl	(%eax,%edx), %eax
 1901 14b5 66898582 		movw	%ax, -16510(%ebp)
 1901      BFFFFF
 1902 14bc E95EFFFF 		jmp	L125
 1902      FF
 1903              	L126:
 752:../../MMI/Resource/ImageGetDimension.c ****                         }
 753:../../MMI/Resource/ImageGetDimension.c **** 
 754:../../MMI/Resource/ImageGetDimension.c ****                         *stack_pointer++ = code;
 1905              	LM190:
 1906 14c1 8B857CBF 		movl	-16516(%ebp), %eax
 1906      FFFF
 1907 14c7 89C2     		movl	%eax, %edx
 1908 14c9 0FB78582 		movzwl	-16510(%ebp), %eax
 1908      BFFFFF
 1909 14d0 668902   		movw	%ax, (%edx)
 1910 14d3 8D857CBF 		leal	-16516(%ebp), %eax
 1910      FFFF
 1911 14d9 830002   		addl	$2, (%eax)
 755:../../MMI/Resource/ImageGetDimension.c ****                         if (GIF_slot < GIF_top_slot)
 1913              	LM191:
 1914 14dc 8B858CBF 		movl	-16500(%ebp), %eax
 1914      FFFF
 1915 14e2 663B858E 		cmpw	-16498(%ebp), %ax
 1915      BFFFFF
 1916 14e9 7D56     		jge	L129
 756:../../MMI/Resource/ImageGetDimension.c ****                         {
 757:../../MMI/Resource/ImageGetDimension.c ****                             GIF_mtk_suffix[GIF_slot] = fc = code;
 1918              	LM192:
 1919 14eb 0FBF858C 		movswl	-16500(%ebp),%eax
 1919      BFFFFF
 1920 14f2 8D0C00   		leal	(%eax,%eax), %ecx
 1921 14f5 8B9564AF 		movl	-20636(%ebp), %edx
 1921      FFFF
 1922 14fb 0FB78582 		movzwl	-16510(%ebp), %eax
 1922      BFFFFF
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 49


 1923 1502 66898584 		movw	%ax, -16508(%ebp)
 1923      BFFFFF
 1924 1509 6689040A 		movw	%ax, (%edx,%ecx)
 758:../../MMI/Resource/ImageGetDimension.c ****                             GIF_mtk_prefix[GIF_slot++] = oc;
 1926              	LM193:
 1927 150d 8B958CBF 		movl	-16500(%ebp), %edx
 1927      FFFF
 1928 1513 8D4201   		leal	1(%edx), %eax
 1929 1516 6689858C 		movw	%ax, -16500(%ebp)
 1929      BFFFFF
 1930 151d 0FBFC2   		movswl	%dx,%eax
 1931 1520 8D0C00   		leal	(%eax,%eax), %ecx
 1932 1523 8B9560AF 		movl	-20640(%ebp), %edx
 1932      FFFF
 1933 1529 0FB78586 		movzwl	-16506(%ebp), %eax
 1933      BFFFFF
 1934 1530 6689040A 		movw	%ax, (%edx,%ecx)
 759:../../MMI/Resource/ImageGetDimension.c ****                             oc = c;
 1936              	LM194:
 1937 1534 8B8588BF 		movl	-16504(%ebp), %eax
 1937      FFFF
 1938 153a 66898586 		movw	%ax, -16506(%ebp)
 1938      BFFFFF
 1939              	L129:
 760:../../MMI/Resource/ImageGetDimension.c ****                         }
 761:../../MMI/Resource/ImageGetDimension.c **** 
 762:../../MMI/Resource/ImageGetDimension.c ****                         if (GIF_slot >= GIF_top_slot)
 1941              	LM195:
 1942 1541 8B858CBF 		movl	-16500(%ebp), %eax
 1942      FFFF
 1943 1547 663B858E 		cmpw	-16498(%ebp), %ax
 1943      BFFFFF
 1944 154e 7C1F     		jl	L130
 763:../../MMI/Resource/ImageGetDimension.c ****                         {
 764:../../MMI/Resource/ImageGetDimension.c ****                             if (GIF_current_code_size < 12)
 1946              	LM196:
 1947 1550 66837DC4 		cmpw	$11, -60(%ebp)
 1947      0B
 1948 1555 7F18     		jg	L130
 765:../../MMI/Resource/ImageGetDimension.c ****                             {
 766:../../MMI/Resource/ImageGetDimension.c ****                                 GIF_top_slot <<= 1;
 1950              	LM197:
 1951 1557 0FBF858E 		movswl	-16498(%ebp),%eax
 1951      BFFFFF
 1952 155e 01C0     		addl	%eax, %eax
 1953 1560 6689858E 		movw	%ax, -16498(%ebp)
 1953      BFFFFF
 767:../../MMI/Resource/ImageGetDimension.c ****                                 GIF_current_code_size++;
 1955              	LM198:
 1956 1567 8B45C4   		movl	-60(%ebp), %eax
 1957 156a 40       		incl	%eax
 1958 156b 668945C4 		movw	%ax, -60(%ebp)
 1959              	L130:
 1960 156f 90       		nop
 768:../../MMI/Resource/ImageGetDimension.c ****                             }
 769:../../MMI/Resource/ImageGetDimension.c ****                         }
 770:../../MMI/Resource/ImageGetDimension.c **** 
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 50


 771:../../MMI/Resource/ImageGetDimension.c ****                         while (stack_pointer > GIF_mtk_stack)
 1962              	LM199:
 1963              	L132:
 1964 1570 8D8568AF 		leal	-20632(%ebp), %eax
 1964      FFFF
 1965 1576 39857CBF 		cmpl	%eax, -16516(%ebp)
 1965      FFFF
 1966 157c 7705     		ja	L134
 1967 157e E900FCFF 		jmp	L101
 1967      FF
 1968              	L134:
 772:../../MMI/Resource/ImageGetDimension.c ****                         {
 773:../../MMI/Resource/ImageGetDimension.c ****                             if ((--want_pixels) < 0)
 1970              	LM200:
 1971 1583 8D45C0   		leal	-64(%ebp), %eax
 1972 1586 FF08     		decl	(%eax)
 1973 1588 837DC000 		cmpl	$0, -64(%ebp)
 1974 158c 7909     		jns	L135
 774:../../MMI/Resource/ImageGetDimension.c ****                             {
 775:../../MMI/Resource/ImageGetDimension.c ****                                 finished_decoding = 1;
 1976              	LM201:
 1977 158e C645BD01 		movb	$1, -67(%ebp)
 776:../../MMI/Resource/ImageGetDimension.c ****                                 break;
 1979              	LM202:
 1980 1592 E9ECFBFF 		jmp	L101
 1980      FF
 1981              	L135:
 777:../../MMI/Resource/ImageGetDimension.c ****                             }
 778:../../MMI/Resource/ImageGetDimension.c ****                             --stack_pointer;
 1983              	LM203:
 1984 1597 8D857CBF 		leal	-16516(%ebp), %eax
 1984      FFFF
 1985 159d 832802   		subl	$2, (%eax)
 1986 15a0 EBCE     		jmp	L132
 1987              	L102:
 779:../../MMI/Resource/ImageGetDimension.c ****                         }
 780:../../MMI/Resource/ImageGetDimension.c ****                     }
 781:../../MMI/Resource/ImageGetDimension.c ****                 }
 782:../../MMI/Resource/ImageGetDimension.c ****             }
 783:../../MMI/Resource/ImageGetDimension.c **** 
 784:../../MMI/Resource/ImageGetDimension.c ****             (*framecount) += 1;
 1989              	LM204:
 1990              	LBE11:
 1991 15a2 8B550C   		movl	12(%ebp), %edx
 1992 15a5 8B450C   		movl	12(%ebp), %eax
 1993 15a8 8B00     		movl	(%eax), %eax
 1994 15aa 40       		incl	%eax
 1995 15ab 8902     		movl	%eax, (%edx)
 785:../../MMI/Resource/ImageGetDimension.c **** 
 786:../../MMI/Resource/ImageGetDimension.c ****             /* peek if is last frame */
 787:../../MMI/Resource/ImageGetDimension.c ****             {
 788:../../MMI/Resource/ImageGetDimension.c ****                 U8 test1, test2;
 789:../../MMI/Resource/ImageGetDimension.c **** 
 790:../../MMI/Resource/ImageGetDimension.c ****                 PEEK_U8(src, test1);
 1997              	LM205:
 1998              	LBB14:
 1999 15ad 8B45EC   		movl	-20(%ebp), %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 51


 2000 15b0 0FB600   		movzbl	(%eax), %eax
 2001 15b3 8845BD   		movb	%al, -67(%ebp)
 791:../../MMI/Resource/ImageGetDimension.c ****                 PEEK_U8_N(src, test2, 1);
 2003              	LM206:
 2004 15b6 8B45EC   		movl	-20(%ebp), %eax
 2005 15b9 40       		incl	%eax
 2006 15ba 0FB600   		movzbl	(%eax), %eax
 2007 15bd 8845BE   		movb	%al, -66(%ebp)
 792:../../MMI/Resource/ImageGetDimension.c ****                 if ((test1 == '\0') && (test2 == ';'))
 2009              	LM207:
 2010 15c0 807DBD00 		cmpb	$0, -67(%ebp)
 2011 15c4 7535     		jne	L77
 2012 15c6 807DBE3B 		cmpb	$59, -66(%ebp)
 2013 15ca 752F     		jne	L77
 793:../../MMI/Resource/ImageGetDimension.c ****                 {
 794:../../MMI/Resource/ImageGetDimension.c ****                     /* GDI_GIF_LAST_FRAME;; */
 795:../../MMI/Resource/ImageGetDimension.c ****                     return MMI_TRUE;
 2015              	LM208:
 2016 15cc C78548AF 		movl	$1, -20664(%ebp)
 2016      FFFF0100 
 2016      0000
 2017 15d6 EB3C     		jmp	L50
 2018              	L139:
 796:../../MMI/Resource/ImageGetDimension.c ****                 }
 797:../../MMI/Resource/ImageGetDimension.c ****             }
 798:../../MMI/Resource/ImageGetDimension.c ****             break;
 799:../../MMI/Resource/ImageGetDimension.c **** 
 800:../../MMI/Resource/ImageGetDimension.c ****         case '\0':
 801:../../MMI/Resource/ImageGetDimension.c ****             if (src >= buf + file_size)
 2020              	LM209:
 2021              	LBE14:
 2022 15d8 8B45E4   		movl	-28(%ebp), %eax
 2023 15db 0345F0   		addl	-16(%ebp), %eax
 2024 15de 3945EC   		cmpl	%eax, -20(%ebp)
 2025 15e1 7218     		jb	L77
 802:../../MMI/Resource/ImageGetDimension.c ****             {
 803:../../MMI/Resource/ImageGetDimension.c ****                 /* GDI_GIF_LAST_FRAME */
 804:../../MMI/Resource/ImageGetDimension.c ****                 return MMI_TRUE;
 2027              	LM210:
 2028 15e3 C78548AF 		movl	$1, -20664(%ebp)
 2028      FFFF0100 
 2028      0000
 2029 15ed EB25     		jmp	L50
 2030              	L141:
 805:../../MMI/Resource/ImageGetDimension.c ****             }
 806:../../MMI/Resource/ImageGetDimension.c ****             break;
 807:../../MMI/Resource/ImageGetDimension.c **** 
 808:../../MMI/Resource/ImageGetDimension.c ****         case ';':
 809:../../MMI/Resource/ImageGetDimension.c ****             /* GDI_GIF_LAST_FRAME;; */
 810:../../MMI/Resource/ImageGetDimension.c ****             return MMI_TRUE;
 2032              	LM211:
 2033 15ef C78548AF 		movl	$1, -20664(%ebp)
 2033      FFFF0100 
 2033      0000
 2034 15f9 EB19     		jmp	L50
 2035              	L77:
 811:../../MMI/Resource/ImageGetDimension.c ****             break;
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 52


 812:../../MMI/Resource/ImageGetDimension.c ****         }
 813:../../MMI/Resource/ImageGetDimension.c ****     } while (src < buf + file_size);
 2037              	LM212:
 2038              	LBE8:
 2039 15fb 8B45E4   		movl	-28(%ebp), %eax
 2040 15fe 0345F0   		addl	-16(%ebp), %eax
 2041 1601 3945EC   		cmpl	%eax, -20(%ebp)
 2042 1604 0F8283F8 		jb	L75
 2042      FFFF
 814:../../MMI/Resource/ImageGetDimension.c **** 
 815:../../MMI/Resource/ImageGetDimension.c ****     return MMI_TRUE;
 2044              	LM213:
 2045 160a C78548AF 		movl	$1, -20664(%ebp)
 2045      FFFF0100 
 2045      0000
 816:../../MMI/Resource/ImageGetDimension.c **** }
 2047              	LM214:
 2048              	L50:
 2049              	LBE4:
 2050 1614 8B8548AF 		movl	-20664(%ebp), %eax
 2050      FFFF
 2051 161a C9       		leave
 2052 161b C3       		ret
 2117              	Lscope2:
 2119 161c 8D742600 		.align 32
 2120              	LC22:
 2121 1620 696D6167 		.ascii "image_png_get_dimension: open file failed,\11 FILE: %s\0"
 2121      655F706E 
 2121      675F6765 
 2121      745F6469 
 2121      6D656E73 
 2122 1655 8D742600 		.align 32
 2122      8DBC2700 
 2122      000000
 2123              	LC23:
 2124 1660 696D6167 		.ascii "image_png_get_dimension: Read file failed, \11 FILE:%s\0"
 2124      655F706E 
 2124      675F6765 
 2124      745F6469 
 2124      6D656E73 
 2125              	LC24:
 2126 1695 89504E47 		.ascii "\211PNG\15\12\32\12\0"
 2126      0D0A1A0A 
 2126      00
 2127              	LC25:
 2128 169e 49484452 		.ascii "IHDR\0"
 2128      00
 2129 16a3 90909090 		.align 32
 2129      90909090 
 2129      90909090 
 2129      90909090 
 2129      90909090 
 2130              	LC26:
 2131 16c0 696D6167 		.ascii "image_png_get_dimension: get dimension failed, \11 FILE:%s\0"
 2131      655F706E 
 2131      675F6765 
 2131      745F6469 
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 53


 2131      6D656E73 
 2137              	_image_png_get_dimension:
 817:../../MMI/Resource/ImageGetDimension.c **** 
 818:../../MMI/Resource/ImageGetDimension.c **** 
 819:../../MMI/Resource/ImageGetDimension.c **** /*****************************************************************************
 820:../../MMI/Resource/ImageGetDimension.c **** * FUNCTION
 821:../../MMI/Resource/ImageGetDimension.c **** *  image_png_get_dimension
 822:../../MMI/Resource/ImageGetDimension.c **** * DESCRIPTION
 823:../../MMI/Resource/ImageGetDimension.c **** *  get dimension of a png from file
 824:../../MMI/Resource/ImageGetDimension.c **** * PARAMETERS
 825:../../MMI/Resource/ImageGetDimension.c **** *  filename    [IN]
 826:../../MMI/Resource/ImageGetDimension.c **** *  width       [OUT]
 827:../../MMI/Resource/ImageGetDimension.c **** *  height      [OUT]
 828:../../MMI/Resource/ImageGetDimension.c **** * RETURNS
 829:../../MMI/Resource/ImageGetDimension.c **** *  MMI_BOOL	MMI_TRUE or MMI_FALSE
 830:../../MMI/Resource/ImageGetDimension.c **** *****************************************************************************/
 831:../../MMI/Resource/ImageGetDimension.c **** static MMI_BOOL image_png_get_dimension(S8 *filename, U32 *width, U32 *height)
 832:../../MMI/Resource/ImageGetDimension.c **** {
 2139              	LM215:
 2140 16f9 55       		pushl	%ebp
 2141 16fa 89E5     		movl	%esp, %ebp
 2142 16fc 83EC58   		subl	$88, %esp
 833:../../MMI/Resource/ImageGetDimension.c ****     /*----------------------------------------------------------------*/
 834:../../MMI/Resource/ImageGetDimension.c ****     /* Local Variables                                                */
 835:../../MMI/Resource/ImageGetDimension.c ****     /*----------------------------------------------------------------*/
 836:../../MMI/Resource/ImageGetDimension.c ****     FILE *fp;
 837:../../MMI/Resource/ImageGetDimension.c ****     U8 buf[PNG_INFO_SIZE];
 838:../../MMI/Resource/ImageGetDimension.c ****     U8 *src;
 839:../../MMI/Resource/ImageGetDimension.c **** 
 840:../../MMI/Resource/ImageGetDimension.c ****     /*----------------------------------------------------------------*/
 841:../../MMI/Resource/ImageGetDimension.c ****     /* Code Body                                                      */
 842:../../MMI/Resource/ImageGetDimension.c ****     /*----------------------------------------------------------------*/
 843:../../MMI/Resource/ImageGetDimension.c ****     /* open file and read header to buffer */
 844:../../MMI/Resource/ImageGetDimension.c ****     fp = fopen((char *)filename, "rb");
 2144              	LM216:
 2145              	LBB15:
 2146 16ff C7442404 		movl	$LC0, 4(%esp)
 2146      00000000 
 2147 1707 8B4508   		movl	8(%ebp), %eax
 2148 170a 890424   		movl	%eax, (%esp)
 2149 170d E8000000 		call	_fopen
 2149      00
 2150 1712 8945F4   		movl	%eax, -12(%ebp)
 845:../../MMI/Resource/ImageGetDimension.c ****     if (fp == NULL)
 2152              	LM217:
 2153 1715 837DF400 		cmpl	$0, -12(%ebp)
 2154 1719 7579     		jne	L147
 846:../../MMI/Resource/ImageGetDimension.c ****     {
 847:../../MMI/Resource/ImageGetDimension.c ****         fprintf(stderr, "Open file err:\t%s\n", filename);
 2156              	LM218:
 2157 171b 8B4508   		movl	8(%ebp), %eax
 2158 171e 89442408 		movl	%eax, 8(%esp)
 2159 1722 C7442404 		movl	$LC1, 4(%esp)
 2159      03000000 
 2160 172a A1000000 		movl	__imp___iob, %eax
 2160      00
 2161 172f 83C040   		addl	$64, %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 54


 2162 1732 890424   		movl	%eax, (%esp)
 2163 1735 E8000000 		call	_fprintf
 2163      00
 848:../../MMI/Resource/ImageGetDimension.c ****         fprintf(stderr, "\t%s\n", strerror(errno));
 2165              	LM219:
 2166 173a E8000000 		call	__errno
 2166      00
 2167 173f 8B00     		movl	(%eax), %eax
 2168 1741 890424   		movl	%eax, (%esp)
 2169 1744 E8000000 		call	_strerror
 2169      00
 2170 1749 89442408 		movl	%eax, 8(%esp)
 2171 174d C7442404 		movl	$LC2, 4(%esp)
 2171      16000000 
 2172 1755 A1000000 		movl	__imp___iob, %eax
 2172      00
 2173 175a 83C040   		addl	$64, %eax
 2174 175d 890424   		movl	%eax, (%esp)
 2175 1760 E8000000 		call	_fprintf
 2175      00
 849:../../MMI/Resource/ImageGetDimension.c ****         IMGDIM_LOG_W("image_png_get_dimension: open file failed,\t FILE: %s", filename);
 2177              	LM220:
 2178 1765 8B4508   		movl	8(%ebp), %eax
 2179 1768 8944240C 		movl	%eax, 12(%esp)
 2180 176c C7442408 		movl	$LC22, 8(%esp)
 2180      20160000 
 2181 1774 C7442404 		movl	$LC4, 4(%esp)
 2181      54000000 
 2182 177c C7042402 		movl	$2, (%esp)
 2182      000000
 2183 1783 E8000000 		call	_reslog_adaptor_log
 2183      00
 850:../../MMI/Resource/ImageGetDimension.c **** 
 851:../../MMI/Resource/ImageGetDimension.c ****         return MMI_FALSE;
 2185              	LM221:
 2186 1788 C745C000 		movl	$0, -64(%ebp)
 2186      000000
 2187 178f E9C20100 		jmp	L146
 2187      00
 2188              	L147:
 852:../../MMI/Resource/ImageGetDimension.c ****     }
 853:../../MMI/Resource/ImageGetDimension.c ****     if (fread(buf, sizeof(char), PNG_INFO_SIZE, fp) != PNG_INFO_SIZE)
 2190              	LM222:
 2191 1794 8B45F4   		movl	-12(%ebp), %eax
 2192 1797 8944240C 		movl	%eax, 12(%esp)
 2193 179b C7442408 		movl	$24, 8(%esp)
 2193      18000000 
 2194 17a3 C7442404 		movl	$1, 4(%esp)
 2194      01000000 
 2195 17ab 8D45C8   		leal	-56(%ebp), %eax
 2196 17ae 890424   		movl	%eax, (%esp)
 2197 17b1 E8000000 		call	_fread
 2197      00
 2198 17b6 83F818   		cmpl	$24, %eax
 2199 17b9 747D     		je	L148
 854:../../MMI/Resource/ImageGetDimension.c ****     {
 855:../../MMI/Resource/ImageGetDimension.c ****         if (strstr(filename, "EMPTYIMAGE.BMP") == NULL)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 55


 2201              	LM223:
 2202 17bb C7442404 		movl	$LC5, 4(%esp)
 2202      66000000 
 2203 17c3 8B4508   		movl	8(%ebp), %eax
 2204 17c6 890424   		movl	%eax, (%esp)
 2205 17c9 E8000000 		call	_strstr
 2205      00
 2206 17ce 85C0     		testl	%eax, %eax
 2207 17d0 751F     		jne	L149
 856:../../MMI/Resource/ImageGetDimension.c ****         {
 857:../../MMI/Resource/ImageGetDimension.c ****             fprintf(stderr, "Read file err:\t%s\n", filename);
 2209              	LM224:
 2210 17d2 8B4508   		movl	8(%ebp), %eax
 2211 17d5 89442408 		movl	%eax, 8(%esp)
 2212 17d9 C7442404 		movl	$LC6, 4(%esp)
 2212      75000000 
 2213 17e1 A1000000 		movl	__imp___iob, %eax
 2213      00
 2214 17e6 83C040   		addl	$64, %eax
 2215 17e9 890424   		movl	%eax, (%esp)
 2216 17ec E8000000 		call	_fprintf
 2216      00
 2217              	L149:
 858:../../MMI/Resource/ImageGetDimension.c ****         }
 859:../../MMI/Resource/ImageGetDimension.c ****         IMGDIM_LOG_W("image_png_get_dimension: Read file failed, \t FILE:%s", filename);
 2219              	LM225:
 2220 17f1 8B4508   		movl	8(%ebp), %eax
 2221 17f4 8944240C 		movl	%eax, 12(%esp)
 2222 17f8 C7442408 		movl	$LC23, 8(%esp)
 2222      60160000 
 2223 1800 C7442404 		movl	$LC4, 4(%esp)
 2223      54000000 
 2224 1808 C7042402 		movl	$2, (%esp)
 2224      000000
 2225 180f E8000000 		call	_reslog_adaptor_log
 2225      00
 860:../../MMI/Resource/ImageGetDimension.c **** 
 861:../../MMI/Resource/ImageGetDimension.c ****         MYFCLOSE(fp);
 2227              	LM226:
 2228 1814 837DF400 		cmpl	$0, -12(%ebp)
 2229 1818 7412     		je	L150
 2230 181a 8B45F4   		movl	-12(%ebp), %eax
 2231 181d 890424   		movl	%eax, (%esp)
 2232 1820 E8000000 		call	_fclose
 2232      00
 2233 1825 C745F400 		movl	$0, -12(%ebp)
 2233      000000
 2234              	L150:
 862:../../MMI/Resource/ImageGetDimension.c ****         return MMI_FALSE;
 2236              	LM227:
 2237 182c C745C000 		movl	$0, -64(%ebp)
 2237      000000
 2238 1833 E91E0100 		jmp	L146
 2238      00
 2239              	L148:
 863:../../MMI/Resource/ImageGetDimension.c ****     }
 864:../../MMI/Resource/ImageGetDimension.c ****     src = buf;
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 56


 2241              	LM228:
 2242 1838 8D45C8   		leal	-56(%ebp), %eax
 2243 183b 8945C4   		movl	%eax, -60(%ebp)
 865:../../MMI/Resource/ImageGetDimension.c ****     MYFCLOSE(fp);
 2245              	LM229:
 2246 183e 837DF400 		cmpl	$0, -12(%ebp)
 2247 1842 7412     		je	L152
 2248 1844 8B45F4   		movl	-12(%ebp), %eax
 2249 1847 890424   		movl	%eax, (%esp)
 2250 184a E8000000 		call	_fclose
 2250      00
 2251 184f C745F400 		movl	$0, -12(%ebp)
 2251      000000
 2252              	L152:
 866:../../MMI/Resource/ImageGetDimension.c **** 
 867:../../MMI/Resource/ImageGetDimension.c ****     /* test if it is BMP file and get PNG dimension */
 868:../../MMI/Resource/ImageGetDimension.c ****     if (memcmp(src, "\x89PNG\x0d\x0a\x1a\x0a", 8) == 0)  /* PNG signature */
 2254              	LM230:
 2255 1856 C7442408 		movl	$8, 8(%esp)
 2255      08000000 
 2256 185e C7442404 		movl	$LC24, 4(%esp)
 2256      95160000 
 2257 1866 8B45C4   		movl	-60(%ebp), %eax
 2258 1869 890424   		movl	%eax, (%esp)
 2259 186c E8000000 		call	_memcmp
 2259      00
 2260 1871 85C0     		testl	%eax, %eax
 2261 1873 0F85B300 		jne	L154
 2261      0000
 869:../../MMI/Resource/ImageGetDimension.c ****     {
 870:../../MMI/Resource/ImageGetDimension.c ****         if (*((U32*) (src + 8)) == 13 << 24)             /* must be IHDR, length = 13,but LSB */
 2263              	LM231:
 2264 1879 8B45C4   		movl	-60(%ebp), %eax
 2265 187c 83C008   		addl	$8, %eax
 2266 187f 81380000 		cmpl	$218103808, (%eax)
 2266      000D
 2267 1885 0F85A100 		jne	L154
 2267      0000
 871:../../MMI/Resource/ImageGetDimension.c ****         {
 872:../../MMI/Resource/ImageGetDimension.c ****             if (memcmp(src + 12, "IHDR", 4) == 0)        /* must be 'IHDR' */
 2269              	LM232:
 2270 188b C7442408 		movl	$4, 8(%esp)
 2270      04000000 
 2271 1893 C7442404 		movl	$LC25, 4(%esp)
 2271      9E160000 
 2272 189b 8B45C4   		movl	-60(%ebp), %eax
 2273 189e 83C00C   		addl	$12, %eax
 2274 18a1 890424   		movl	%eax, (%esp)
 2275 18a4 E8000000 		call	_memcmp
 2275      00
 2276 18a9 85C0     		testl	%eax, %eax
 2277 18ab 757F     		jne	L154
 873:../../MMI/Resource/ImageGetDimension.c ****             {
 874:../../MMI/Resource/ImageGetDimension.c ****                 src += 16;
 2279              	LM233:
 2280 18ad 8D45C4   		leal	-60(%ebp), %eax
 2281 18b0 830010   		addl	$16, (%eax)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 57


 875:../../MMI/Resource/ImageGetDimension.c ****                 *width = (src[0] << 24) | (src[1] << 16) | (src[2] << 8) | (src[3]);
 2283              	LM234:
 2284 18b3 8B4D0C   		movl	12(%ebp), %ecx
 2285 18b6 8B45C4   		movl	-60(%ebp), %eax
 2286 18b9 0FB600   		movzbl	(%eax), %eax
 2287 18bc 89C2     		movl	%eax, %edx
 2288 18be C1E218   		sall	$24, %edx
 2289 18c1 8B45C4   		movl	-60(%ebp), %eax
 2290 18c4 40       		incl	%eax
 2291 18c5 0FB600   		movzbl	(%eax), %eax
 2292 18c8 C1E010   		sall	$16, %eax
 2293 18cb 09C2     		orl	%eax, %edx
 2294 18cd 8B45C4   		movl	-60(%ebp), %eax
 2295 18d0 83C002   		addl	$2, %eax
 2296 18d3 0FB600   		movzbl	(%eax), %eax
 2297 18d6 C1E008   		sall	$8, %eax
 2298 18d9 09C2     		orl	%eax, %edx
 2299 18db 8B45C4   		movl	-60(%ebp), %eax
 2300 18de 83C003   		addl	$3, %eax
 2301 18e1 0FB600   		movzbl	(%eax), %eax
 2302 18e4 09D0     		orl	%edx, %eax
 2303 18e6 8901     		movl	%eax, (%ecx)
 876:../../MMI/Resource/ImageGetDimension.c ****                 src += 4;
 2305              	LM235:
 2306 18e8 8D45C4   		leal	-60(%ebp), %eax
 2307 18eb 830004   		addl	$4, (%eax)
 877:../../MMI/Resource/ImageGetDimension.c ****                 *height = (src[0] << 24) | (src[1] << 16) | (src[2] << 8) | (src[3]);
 2309              	LM236:
 2310 18ee 8B4D10   		movl	16(%ebp), %ecx
 2311 18f1 8B45C4   		movl	-60(%ebp), %eax
 2312 18f4 0FB600   		movzbl	(%eax), %eax
 2313 18f7 89C2     		movl	%eax, %edx
 2314 18f9 C1E218   		sall	$24, %edx
 2315 18fc 8B45C4   		movl	-60(%ebp), %eax
 2316 18ff 40       		incl	%eax
 2317 1900 0FB600   		movzbl	(%eax), %eax
 2318 1903 C1E010   		sall	$16, %eax
 2319 1906 09C2     		orl	%eax, %edx
 2320 1908 8B45C4   		movl	-60(%ebp), %eax
 2321 190b 83C002   		addl	$2, %eax
 2322 190e 0FB600   		movzbl	(%eax), %eax
 2323 1911 C1E008   		sall	$8, %eax
 2324 1914 09C2     		orl	%eax, %edx
 2325 1916 8B45C4   		movl	-60(%ebp), %eax
 2326 1919 83C003   		addl	$3, %eax
 2327 191c 0FB600   		movzbl	(%eax), %eax
 2328 191f 09D0     		orl	%edx, %eax
 2329 1921 8901     		movl	%eax, (%ecx)
 878:../../MMI/Resource/ImageGetDimension.c ****                 return MMI_TRUE;
 2331              	LM237:
 2332 1923 C745C001 		movl	$1, -64(%ebp)
 2332      000000
 2333 192a EB2A     		jmp	L146
 2334              	L154:
 879:../../MMI/Resource/ImageGetDimension.c ****             }
 880:../../MMI/Resource/ImageGetDimension.c ****         }
 881:../../MMI/Resource/ImageGetDimension.c ****     }
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 58


 882:../../MMI/Resource/ImageGetDimension.c ****     IMGDIM_LOG_W("image_png_get_dimension: get dimension failed, \t FILE:%s", filename);
 2336              	LM238:
 2337 192c 8B4508   		movl	8(%ebp), %eax
 2338 192f 8944240C 		movl	%eax, 12(%esp)
 2339 1933 C7442408 		movl	$LC26, 8(%esp)
 2339      C0160000 
 2340 193b C7442404 		movl	$LC4, 4(%esp)
 2340      54000000 
 2341 1943 C7042402 		movl	$2, (%esp)
 2341      000000
 2342 194a E8000000 		call	_reslog_adaptor_log
 2342      00
 883:../../MMI/Resource/ImageGetDimension.c ****     return MMI_FALSE;
 2344              	LM239:
 2345 194f C745C000 		movl	$0, -64(%ebp)
 2345      000000
 884:../../MMI/Resource/ImageGetDimension.c **** }
 2347              	LM240:
 2348              	L146:
 2349              	LBE15:
 2350 1956 8B45C0   		movl	-64(%ebp), %eax
 2351 1959 C9       		leave
 2352 195a C3       		ret
 2358              	Lscope3:
 2360 195b 908D7426 		.align 32
 2360      00
 2361              	LC27:
 2362 1960 696D6167 		.ascii "image_jpg_get_dimension: open file failed,\11 FILE: %s\0"
 2362      655F6A70 
 2362      675F6765 
 2362      745F6469 
 2362      6D656E73 
 2363 1995 8D742600 		.align 32
 2363      8DBC2700 
 2363      000000
 2364              	LC28:
 2365 19a0 696D6167 		.ascii "image_jpg_get_dimension: Not Valid JPEG, Header Bytes: (0X%2x, 0X%2x),\11 FILE; \0"
 2365      655F6A70 
 2365      675F6765 
 2365      745F6469 
 2365      6D656E73 
 2371              	_image_jpg_get_dimension:
 885:../../MMI/Resource/ImageGetDimension.c **** 
 886:../../MMI/Resource/ImageGetDimension.c **** 
 887:../../MMI/Resource/ImageGetDimension.c **** /*****************************************************************************
 888:../../MMI/Resource/ImageGetDimension.c **** * FUNCTION
 889:../../MMI/Resource/ImageGetDimension.c **** *  image_jpg_get_dimension
 890:../../MMI/Resource/ImageGetDimension.c **** * DESCRIPTION
 891:../../MMI/Resource/ImageGetDimension.c **** *  get dimension of a jpg from file
 892:../../MMI/Resource/ImageGetDimension.c **** * PARAMETERS
 893:../../MMI/Resource/ImageGetDimension.c **** *  filename    [IN]
 894:../../MMI/Resource/ImageGetDimension.c **** *  width       [OUT]
 895:../../MMI/Resource/ImageGetDimension.c **** *  height      [OUT]
 896:../../MMI/Resource/ImageGetDimension.c **** * RETURNS
 897:../../MMI/Resource/ImageGetDimension.c **** *  MMI_BOOL	MMI_TRUE or MMI_FALSE
 898:../../MMI/Resource/ImageGetDimension.c **** *****************************************************************************/
 899:../../MMI/Resource/ImageGetDimension.c **** static MMI_BOOL image_jpg_get_dimension(S8 *filename, U32 *width, U32 *height)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 59


 900:../../MMI/Resource/ImageGetDimension.c **** {
 2373              	LM241:
 2374 19ef 55       		pushl	%ebp
 2375 19f0 89E5     		movl	%esp, %ebp
 2376 19f2 56       		pushl	%esi
 2377 19f3 53       		pushl	%ebx
 2378 19f4 83EC40   		subl	$64, %esp
 901:../../MMI/Resource/ImageGetDimension.c ****     /*----------------------------------------------------------------*/
 902:../../MMI/Resource/ImageGetDimension.c ****     /* Local Variables                                                */
 903:../../MMI/Resource/ImageGetDimension.c ****     /*----------------------------------------------------------------*/
 904:../../MMI/Resource/ImageGetDimension.c ****     FILE *fp;
 905:../../MMI/Resource/ImageGetDimension.c **** 
 906:../../MMI/Resource/ImageGetDimension.c ****     U32 index, index_offset;
 907:../../MMI/Resource/ImageGetDimension.c ****     U16 marker_length;
 908:../../MMI/Resource/ImageGetDimension.c ****     U8 jpg_byte1, jpg_byte2, tmp_byte;
 909:../../MMI/Resource/ImageGetDimension.c **** 
 910:../../MMI/Resource/ImageGetDimension.c ****     /*----------------------------------------------------------------*/
 911:../../MMI/Resource/ImageGetDimension.c ****     /* Code Body                                                      */
 912:../../MMI/Resource/ImageGetDimension.c ****     /*----------------------------------------------------------------*/
 913:../../MMI/Resource/ImageGetDimension.c ****     /* open file and read header to buffer */
 914:../../MMI/Resource/ImageGetDimension.c ****     fp = fopen(filename, "rb");
 2380              	LM242:
 2381              	LBB16:
 2382 19f7 C7442404 		movl	$LC0, 4(%esp)
 2382      00000000 
 2383 19ff 8B4508   		movl	8(%ebp), %eax
 2384 1a02 890424   		movl	%eax, (%esp)
 2385 1a05 E8000000 		call	_fopen
 2385      00
 2386 1a0a 8945F4   		movl	%eax, -12(%ebp)
 915:../../MMI/Resource/ImageGetDimension.c ****     if (fp == NULL)
 2388              	LM243:
 2389 1a0d 837DF400 		cmpl	$0, -12(%ebp)
 2390 1a11 7579     		jne	L158
 916:../../MMI/Resource/ImageGetDimension.c ****     {
 917:../../MMI/Resource/ImageGetDimension.c ****         fprintf(stderr, "Open file err:\t%s\n", filename);
 2392              	LM244:
 2393 1a13 8B4508   		movl	8(%ebp), %eax
 2394 1a16 89442408 		movl	%eax, 8(%esp)
 2395 1a1a C7442404 		movl	$LC1, 4(%esp)
 2395      03000000 
 2396 1a22 A1000000 		movl	__imp___iob, %eax
 2396      00
 2397 1a27 83C040   		addl	$64, %eax
 2398 1a2a 890424   		movl	%eax, (%esp)
 2399 1a2d E8000000 		call	_fprintf
 2399      00
 918:../../MMI/Resource/ImageGetDimension.c ****         fprintf(stderr, "\t%s\n", strerror(errno));
 2401              	LM245:
 2402 1a32 E8000000 		call	__errno
 2402      00
 2403 1a37 8B00     		movl	(%eax), %eax
 2404 1a39 890424   		movl	%eax, (%esp)
 2405 1a3c E8000000 		call	_strerror
 2405      00
 2406 1a41 89442408 		movl	%eax, 8(%esp)
 2407 1a45 C7442404 		movl	$LC2, 4(%esp)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 60


 2407      16000000 
 2408 1a4d A1000000 		movl	__imp___iob, %eax
 2408      00
 2409 1a52 83C040   		addl	$64, %eax
 2410 1a55 890424   		movl	%eax, (%esp)
 2411 1a58 E8000000 		call	_fprintf
 2411      00
 919:../../MMI/Resource/ImageGetDimension.c ****         IMGDIM_LOG_W("image_jpg_get_dimension: open file failed,\t FILE: %s", filename);   
 2413              	LM246:
 2414 1a5d 8B4508   		movl	8(%ebp), %eax
 2415 1a60 8944240C 		movl	%eax, 12(%esp)
 2416 1a64 C7442408 		movl	$LC27, 8(%esp)
 2416      60190000 
 2417 1a6c C7442404 		movl	$LC4, 4(%esp)
 2417      54000000 
 2418 1a74 C7042402 		movl	$2, (%esp)
 2418      000000
 2419 1a7b E8000000 		call	_reslog_adaptor_log
 2419      00
 920:../../MMI/Resource/ImageGetDimension.c ****         return MMI_FALSE;
 2421              	LM247:
 2422 1a80 C745DC00 		movl	$0, -36(%ebp)
 2422      000000
 2423 1a87 E9950200 		jmp	L157
 2423      00
 2424              	L158:
 921:../../MMI/Resource/ImageGetDimension.c ****     }
 922:../../MMI/Resource/ImageGetDimension.c **** 
 923:../../MMI/Resource/ImageGetDimension.c ****     index = 0;
 2426              	LM248:
 2427 1a8c C745F000 		movl	$0, -16(%ebp)
 2427      000000
 924:../../MMI/Resource/ImageGetDimension.c **** 
 925:../../MMI/Resource/ImageGetDimension.c ****     jpg_byte1 = fgetc(fp);
 2429              	LM249:
 2430 1a93 8B45F4   		movl	-12(%ebp), %eax
 2431 1a96 890424   		movl	%eax, (%esp)
 2432 1a99 E8000000 		call	_fgetc
 2432      00
 2433 1a9e 8845E9   		movb	%al, -23(%ebp)
 926:../../MMI/Resource/ImageGetDimension.c ****     jpg_byte2 = fgetc(fp);
 2435              	LM250:
 2436 1aa1 8B45F4   		movl	-12(%ebp), %eax
 2437 1aa4 890424   		movl	%eax, (%esp)
 2438 1aa7 E8000000 		call	_fgetc
 2438      00
 2439 1aac 8845E8   		movb	%al, -24(%ebp)
 927:../../MMI/Resource/ImageGetDimension.c **** 
 928:../../MMI/Resource/ImageGetDimension.c ****     /* check first two byte to see if is valid jpeg file */
 929:../../MMI/Resource/ImageGetDimension.c ****     if ((jpg_byte1 != 0xFF) || (jpg_byte2 != 0xD8))
 2441              	LM251:
 2442 1aaf 807DE9FF 		cmpb	$-1, -23(%ebp)
 2443 1ab3 7508     		jne	L160
 2444 1ab5 807DE8D8 		cmpb	$-40, -24(%ebp)
 2445 1ab9 7502     		jne	L160
 2446 1abb EB57     		jmp	L159
 2447              	L160:
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 61


 930:../../MMI/Resource/ImageGetDimension.c ****     {
 931:../../MMI/Resource/ImageGetDimension.c ****         IMGDIM_LOG_W("image_jpg_get_dimension: Not Valid JPEG, Header Bytes: (0X%2x, 0X%2x),\t FILE
 2449              	LM252:
 2450 1abd 8B4508   		movl	8(%ebp), %eax
 2451 1ac0 89442414 		movl	%eax, 20(%esp)
 2452 1ac4 0FB645E8 		movzbl	-24(%ebp), %eax
 2453 1ac8 89442410 		movl	%eax, 16(%esp)
 2454 1acc 0FB645E9 		movzbl	-23(%ebp), %eax
 2455 1ad0 8944240C 		movl	%eax, 12(%esp)
 2456 1ad4 C7442408 		movl	$LC28, 8(%esp)
 2456      A0190000 
 2457 1adc C7442404 		movl	$LC4, 4(%esp)
 2457      54000000 
 2458 1ae4 C7042402 		movl	$2, (%esp)
 2458      000000
 2459 1aeb E8000000 		call	_reslog_adaptor_log
 2459      00
 932:../../MMI/Resource/ImageGetDimension.c ****         MYFCLOSE(fp);
 2461              	LM253:
 2462 1af0 837DF400 		cmpl	$0, -12(%ebp)
 2463 1af4 7412     		je	L161
 2464 1af6 8B45F4   		movl	-12(%ebp), %eax
 2465 1af9 890424   		movl	%eax, (%esp)
 2466 1afc E8000000 		call	_fclose
 2466      00
 2467 1b01 C745F400 		movl	$0, -12(%ebp)
 2467      000000
 2468              	L161:
 933:../../MMI/Resource/ImageGetDimension.c ****         return MMI_FALSE;
 2470              	LM254:
 2471 1b08 C745DC00 		movl	$0, -36(%ebp)
 2471      000000
 2472 1b0f E90D0200 		jmp	L157
 2472      00
 2473              	L159:
 934:../../MMI/Resource/ImageGetDimension.c ****     }
 935:../../MMI/Resource/ImageGetDimension.c **** 
 936:../../MMI/Resource/ImageGetDimension.c ****     *width = *height = 0;
 2475              	LM255:
 2476 1b14 8B550C   		movl	12(%ebp), %edx
 2477 1b17 8B4510   		movl	16(%ebp), %eax
 2478 1b1a C7000000 		movl	$0, (%eax)
 2478      0000
 2479 1b20 C7020000 		movl	$0, (%edx)
 2479      0000
 2480              	L163:
 937:../../MMI/Resource/ImageGetDimension.c **** 
 938:../../MMI/Resource/ImageGetDimension.c ****     /* parse bytestream */
 939:../../MMI/Resource/ImageGetDimension.c ****     do
 940:../../MMI/Resource/ImageGetDimension.c ****     {
 941:../../MMI/Resource/ImageGetDimension.c ****         if (feof(fp))
 2482              	LM256:
 2483 1b26 8B45F4   		movl	-12(%ebp), %eax
 2484 1b29 890424   		movl	%eax, (%esp)
 2485 1b2c E8000000 		call	_feof
 2485      00
 2486 1b31 85C0     		testl	%eax, %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 62


 2487 1b33 7405     		je	L166
 942:../../MMI/Resource/ImageGetDimension.c ****         {
 943:../../MMI/Resource/ImageGetDimension.c ****             break;
 2489              	LM257:
 2490 1b35 E9C80100 		jmp	L164
 2490      00
 2491              	L166:
 2492 1b3a 90       		nop
 2493              	L167:
 944:../../MMI/Resource/ImageGetDimension.c ****         }
 945:../../MMI/Resource/ImageGetDimension.c **** 
 946:../../MMI/Resource/ImageGetDimension.c ****         do
 947:../../MMI/Resource/ImageGetDimension.c ****         {
 948:../../MMI/Resource/ImageGetDimension.c ****             tmp_byte = fgetc(fp);
 2495              	LM258:
 2496 1b3b 8B45F4   		movl	-12(%ebp), %eax
 2497 1b3e 890424   		movl	%eax, (%esp)
 2498 1b41 E8000000 		call	_fgetc
 2498      00
 2499 1b46 8845E7   		movb	%al, -25(%ebp)
 949:../../MMI/Resource/ImageGetDimension.c ****         } while (tmp_byte != 0xFF);
 2501              	LM259:
 2502 1b49 807DE7FF 		cmpb	$-1, -25(%ebp)
 2503 1b4d 75EC     		jne	L167
 950:../../MMI/Resource/ImageGetDimension.c **** 
 951:../../MMI/Resource/ImageGetDimension.c ****         jpg_byte1 = 0xFF;
 2505              	LM260:
 2506 1b4f C645E9FF 		movb	$-1, -23(%ebp)
 952:../../MMI/Resource/ImageGetDimension.c ****         jpg_byte2 = fgetc(fp);
 2508              	LM261:
 2509 1b53 8B45F4   		movl	-12(%ebp), %eax
 2510 1b56 890424   		movl	%eax, (%esp)
 2511 1b59 E8000000 		call	_fgetc
 2511      00
 2512 1b5e 8845E8   		movb	%al, -24(%ebp)
 953:../../MMI/Resource/ImageGetDimension.c **** 
 954:../../MMI/Resource/ImageGetDimension.c ****         switch (jpg_byte2)
 2514              	LM262:
 2515 1b61 0FB645E8 		movzbl	-24(%ebp), %eax
 2516 1b65 8945D8   		movl	%eax, -40(%ebp)
 2517 1b68 817DD8C2 		cmpl	$194, -40(%ebp)
 2517      000000
 2518 1b6f 7440     		je	L173
 2519 1b71 817DD8C2 		cmpl	$194, -40(%ebp)
 2519      000000
 2520 1b78 7F18     		jg	L182
 2521 1b7a 837DD800 		cmpl	$0, -40(%ebp)
 2522 1b7e 0F846A01 		je	L165
 2522      0000
 2523 1b84 817DD8C0 		cmpl	$192, -40(%ebp)
 2523      000000
 2524 1b8b 7424     		je	L173
 2525 1b8d E9B50000 		jmp	L177
 2525      00
 2526              	L182:
 2527 1b92 817DD8C8 		cmpl	$200, -40(%ebp)
 2527      000000
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 63


 2528 1b99 0F844F01 		je	L165
 2528      0000
 2529 1b9f 817DD8DA 		cmpl	$218, -40(%ebp)
 2529      000000
 2530 1ba6 0F844201 		je	L165
 2530      0000
 2531 1bac E9960000 		jmp	L177
 2531      00
 2532              	L173:
 955:../../MMI/Resource/ImageGetDimension.c ****         {
 956:../../MMI/Resource/ImageGetDimension.c ****         case JPEG_MARKER_SOF0:
 957:../../MMI/Resource/ImageGetDimension.c ****         case JPEG_MARKER_SOF2:
 958:../../MMI/Resource/ImageGetDimension.c ****             marker_length = fgetc(fp) << 8;
 2534              	LM263:
 2535 1bb1 8B45F4   		movl	-12(%ebp), %eax
 2536 1bb4 890424   		movl	%eax, (%esp)
 2537 1bb7 E8000000 		call	_fgetc
 2537      00
 2538 1bbc C1E008   		sall	$8, %eax
 2539 1bbf 668945EA 		movw	%ax, -22(%ebp)
 959:../../MMI/Resource/ImageGetDimension.c ****             marker_length |= fgetc(fp);
 2541              	LM264:
 2542 1bc3 8B45F4   		movl	-12(%ebp), %eax
 2543 1bc6 890424   		movl	%eax, (%esp)
 2544 1bc9 E8000000 		call	_fgetc
 2544      00
 2545 1bce 0FB755EA 		movzwl	-22(%ebp), %edx
 2546 1bd2 09D0     		orl	%edx, %eax
 2547 1bd4 668945EA 		movw	%ax, -22(%ebp)
 960:../../MMI/Resource/ImageGetDimension.c ****             marker_length -= 2;
 2549              	LM265:
 2550 1bd8 0FB745EA 		movzwl	-22(%ebp), %eax
 2551 1bdc 83E802   		subl	$2, %eax
 2552 1bdf 668945EA 		movw	%ax, -22(%ebp)
 961:../../MMI/Resource/ImageGetDimension.c **** 
 962:../../MMI/Resource/ImageGetDimension.c ****             fgetc(fp);  /* precision */
 2554              	LM266:
 2555 1be3 8B45F4   		movl	-12(%ebp), %eax
 2556 1be6 890424   		movl	%eax, (%esp)
 2557 1be9 E8000000 		call	_fgetc
 2557      00
 963:../../MMI/Resource/ImageGetDimension.c ****             *height = fgetc(fp) << 8;
 2559              	LM267:
 2560 1bee 8B5D10   		movl	16(%ebp), %ebx
 2561 1bf1 8B45F4   		movl	-12(%ebp), %eax
 2562 1bf4 890424   		movl	%eax, (%esp)
 2563 1bf7 E8000000 		call	_fgetc
 2563      00
 2564 1bfc C1E008   		sall	$8, %eax
 2565 1bff 8903     		movl	%eax, (%ebx)
 964:../../MMI/Resource/ImageGetDimension.c ****             *height |= fgetc(fp);
 2567              	LM268:
 2568 1c01 8B7510   		movl	16(%ebp), %esi
 2569 1c04 8B5D10   		movl	16(%ebp), %ebx
 2570 1c07 8B45F4   		movl	-12(%ebp), %eax
 2571 1c0a 890424   		movl	%eax, (%esp)
 2572 1c0d E8000000 		call	_fgetc
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 64


 2572      00
 2573 1c12 0B03     		orl	(%ebx), %eax
 2574 1c14 8906     		movl	%eax, (%esi)
 965:../../MMI/Resource/ImageGetDimension.c ****             *width = fgetc(fp) << 8;
 2576              	LM269:
 2577 1c16 8B5D0C   		movl	12(%ebp), %ebx
 2578 1c19 8B45F4   		movl	-12(%ebp), %eax
 2579 1c1c 890424   		movl	%eax, (%esp)
 2580 1c1f E8000000 		call	_fgetc
 2580      00
 2581 1c24 C1E008   		sall	$8, %eax
 2582 1c27 8903     		movl	%eax, (%ebx)
 966:../../MMI/Resource/ImageGetDimension.c ****             *width |= fgetc(fp);
 2584              	LM270:
 2585 1c29 8B750C   		movl	12(%ebp), %esi
 2586 1c2c 8B5D0C   		movl	12(%ebp), %ebx
 2587 1c2f 8B45F4   		movl	-12(%ebp), %eax
 2588 1c32 890424   		movl	%eax, (%esp)
 2589 1c35 E8000000 		call	_fgetc
 2589      00
 2590 1c3a 0B03     		orl	(%ebx), %eax
 2591 1c3c 8906     		movl	%eax, (%esi)
 967:../../MMI/Resource/ImageGetDimension.c **** 
 968:../../MMI/Resource/ImageGetDimension.c ****             /* set terminate byte */
 969:../../MMI/Resource/ImageGetDimension.c ****             jpg_byte2 = 0xD9;
 2593              	LM271:
 2594 1c3e C645E8D9 		movb	$-39, -24(%ebp)
 970:../../MMI/Resource/ImageGetDimension.c ****             break;
 2596              	LM272:
 2597 1c42 E9A70000 		jmp	L165
 2597      00
 2598              	L177:
 971:../../MMI/Resource/ImageGetDimension.c **** 
 972:../../MMI/Resource/ImageGetDimension.c ****         case JPEG_MARKER_SOS:
 973:../../MMI/Resource/ImageGetDimension.c ****             break;
 974:../../MMI/Resource/ImageGetDimension.c **** 
 975:../../MMI/Resource/ImageGetDimension.c ****         case 0xC8:
 976:../../MMI/Resource/ImageGetDimension.c ****         case 0x00:
 977:../../MMI/Resource/ImageGetDimension.c ****             break;
 978:../../MMI/Resource/ImageGetDimension.c **** 
 979:../../MMI/Resource/ImageGetDimension.c ****         default:
 980:../../MMI/Resource/ImageGetDimension.c ****             if ((jpg_byte2 == JPEG_MARKER_SOF1) ||
 2600              	LM273:
 2601 1c47 807DE8C1 		cmpb	$-63, -24(%ebp)
 2602 1c4b 743E     		je	L179
 2603 1c4d 807DE8C2 		cmpb	$-62, -24(%ebp)
 2604 1c51 7606     		jbe	L180
 2605 1c53 807DE8CF 		cmpb	$-49, -24(%ebp)
 2606 1c57 7632     		jbe	L179
 2607              	L180:
 2608 1c59 807DE8DB 		cmpb	$-37, -24(%ebp)
 2609 1c5d 742C     		je	L179
 2610 1c5f 807DE8DC 		cmpb	$-36, -24(%ebp)
 2611 1c63 7426     		je	L179
 2612 1c65 807DE8DD 		cmpb	$-35, -24(%ebp)
 2613 1c69 7420     		je	L179
 2614 1c6b 807DE8DE 		cmpb	$-34, -24(%ebp)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 65


 2615 1c6f 741A     		je	L179
 2616 1c71 807DE8DF 		cmpb	$-33, -24(%ebp)
 2617 1c75 7414     		je	L179
 2618 1c77 807DE8FE 		cmpb	$-2, -24(%ebp)
 2619 1c7b 740E     		je	L179
 2620 1c7d 807DE8DF 		cmpb	$-33, -24(%ebp)
 2621 1c81 766B     		jbe	L165
 2622 1c83 807DE8EF 		cmpb	$-17, -24(%ebp)
 2623 1c87 7602     		jbe	L179
 2624 1c89 EB63     		jmp	L165
 2625              	L179:
 981:../../MMI/Resource/ImageGetDimension.c ****                 ((jpg_byte2 >= JPEG_MARKER_SOF3) && (jpg_byte2 <= JPEG_MARKER_SOF15)) ||
 982:../../MMI/Resource/ImageGetDimension.c ****                 (jpg_byte2 == JPEG_MARKER_DQT) || (jpg_byte2 == JPEG_MARKER_DNL) ||
 983:../../MMI/Resource/ImageGetDimension.c ****                 (jpg_byte2 == JPEG_MARKER_DRI) || (jpg_byte2 == JPEG_MARKER_DHP) ||
 984:../../MMI/Resource/ImageGetDimension.c ****                 (jpg_byte2 == JPEG_MARKER_EXP) || (jpg_byte2 == JPEG_MARKER_COM) ||
 985:../../MMI/Resource/ImageGetDimension.c ****                 ((jpg_byte2 >= JPEG_MARKER_APP0) && (jpg_byte2 <= JPEG_MARKER_APP15)))
 986:../../MMI/Resource/ImageGetDimension.c ****             {
 987:../../MMI/Resource/ImageGetDimension.c ****                 U8 *dummy;
 988:../../MMI/Resource/ImageGetDimension.c **** 
 989:../../MMI/Resource/ImageGetDimension.c ****                 index_offset = fgetc(fp) << 8;
 2627              	LM274:
 2628              	LBB17:
 2629 1c8b 8B45F4   		movl	-12(%ebp), %eax
 2630 1c8e 890424   		movl	%eax, (%esp)
 2631 1c91 E8000000 		call	_fgetc
 2631      00
 2632 1c96 C1E008   		sall	$8, %eax
 2633 1c99 8945EC   		movl	%eax, -20(%ebp)
 990:../../MMI/Resource/ImageGetDimension.c ****                 index_offset |= fgetc(fp);
 2635              	LM275:
 2636 1c9c 8B45F4   		movl	-12(%ebp), %eax
 2637 1c9f 890424   		movl	%eax, (%esp)
 2638 1ca2 E8000000 		call	_fgetc
 2638      00
 2639 1ca7 89C2     		movl	%eax, %edx
 2640 1ca9 8D45EC   		leal	-20(%ebp), %eax
 2641 1cac 0910     		orl	%edx, (%eax)
 991:../../MMI/Resource/ImageGetDimension.c ****                 index_offset -= 2;
 2643              	LM276:
 2644 1cae 8D45EC   		leal	-20(%ebp), %eax
 2645 1cb1 832802   		subl	$2, (%eax)
 992:../../MMI/Resource/ImageGetDimension.c **** 
 993:../../MMI/Resource/ImageGetDimension.c ****                 dummy = (U8 *)malloc(index_offset*sizeof(U8));
 2647              	LM277:
 2648 1cb4 8B45EC   		movl	-20(%ebp), %eax
 2649 1cb7 890424   		movl	%eax, (%esp)
 2650 1cba E8000000 		call	_malloc
 2650      00
 2651 1cbf 8945E0   		movl	%eax, -32(%ebp)
 994:../../MMI/Resource/ImageGetDimension.c ****                 fread(dummy, sizeof(U8), index_offset, fp);
 2653              	LM278:
 2654 1cc2 8B45F4   		movl	-12(%ebp), %eax
 2655 1cc5 8944240C 		movl	%eax, 12(%esp)
 2656 1cc9 8B45EC   		movl	-20(%ebp), %eax
 2657 1ccc 89442408 		movl	%eax, 8(%esp)
 2658 1cd0 C7442404 		movl	$1, 4(%esp)
 2658      01000000 
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 66


 2659 1cd8 8B45E0   		movl	-32(%ebp), %eax
 2660 1cdb 890424   		movl	%eax, (%esp)
 2661 1cde E8000000 		call	_fread
 2661      00
 995:../../MMI/Resource/ImageGetDimension.c ****                 free(dummy);
 2663              	LM279:
 2664 1ce3 8B45E0   		movl	-32(%ebp), %eax
 2665 1ce6 890424   		movl	%eax, (%esp)
 2666 1ce9 E8000000 		call	_free
 2666      00
 2667              	L165:
 996:../../MMI/Resource/ImageGetDimension.c ****             }
 997:../../MMI/Resource/ImageGetDimension.c ****             break;
 998:../../MMI/Resource/ImageGetDimension.c ****         }
 999:../../MMI/Resource/ImageGetDimension.c ****     } while (!((jpg_byte1 == 0xFF) && (jpg_byte2 == 0xD9)));
 2669              	LM280:
 2670              	LBE17:
 2671 1cee 807DE9FF 		cmpb	$-1, -23(%ebp)
 2672 1cf2 0F852EFE 		jne	L163
 2672      FFFF
 2673 1cf8 807DE8D9 		cmpb	$-39, -24(%ebp)
 2674 1cfc 0F8524FE 		jne	L163
 2674      FFFF
 2675              	L164:
1000:../../MMI/Resource/ImageGetDimension.c **** 
1001:../../MMI/Resource/ImageGetDimension.c ****     MYFCLOSE(fp);
 2677              	LM281:
 2678 1d02 837DF400 		cmpl	$0, -12(%ebp)
 2679 1d06 7412     		je	L184
 2680 1d08 8B45F4   		movl	-12(%ebp), %eax
 2681 1d0b 890424   		movl	%eax, (%esp)
 2682 1d0e E8000000 		call	_fclose
 2682      00
 2683 1d13 C745F400 		movl	$0, -12(%ebp)
 2683      000000
 2684              	L184:
1002:../../MMI/Resource/ImageGetDimension.c **** 
1003:../../MMI/Resource/ImageGetDimension.c ****     return MMI_TRUE;
 2686              	LM282:
 2687 1d1a C745DC01 		movl	$1, -36(%ebp)
 2687      000000
1004:../../MMI/Resource/ImageGetDimension.c **** }
 2689              	LM283:
 2690              	L157:
 2691              	LBE16:
 2692 1d21 8B45DC   		movl	-36(%ebp), %eax
 2693 1d24 83C440   		addl	$64, %esp
 2694 1d27 5B       		popl	%ebx
 2695 1d28 5E       		popl	%esi
 2696 1d29 5D       		popl	%ebp
 2697 1d2a C3       		ret
 2710              	Lscope4:
 2712              	LC29:
 2713 1d2b 424D5000 		.ascii "BMP\0"
 2714              	LC30:
 2715 1d2f 50424D00 		.ascii "PBM\0"
 2716              	LC31:
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 67


 2717 1d33 47494600 		.ascii "GIF\0"
 2718              	LC32:
 2719 1d37 504E4700 		.ascii "PNG\0"
 2720              	LC33:
 2721 1d3b 50504E00 		.ascii "PPN\0"
 2722              	LC34:
 2723 1d3f 4A504700 		.ascii "JPG\0"
 2724 1d43 90909090 		.align 32
 2724      90909090 
 2724      90909090 
 2724      90909090 
 2724      90909090 
 2725              	LC35:
 2726 1d60 496D6167 		.ascii "Image_Get_Dimensions: file types not support\11 FILE: %s\0"
 2726      655F4765 
 2726      745F4469 
 2726      6D656E73 
 2726      696F6E73 
 2727              	LC36:
 2728 1d97 46696C65 		.ascii "File err:\11\11%s\12\0"
 2728      20657272 
 2728      3A090925 
 2728      730A00
 2733              	.globl _Image_Get_Dimensions
 2735              	_Image_Get_Dimensions:
1005:../../MMI/Resource/ImageGetDimension.c **** 
1006:../../MMI/Resource/ImageGetDimension.c **** 
1007:../../MMI/Resource/ImageGetDimension.c **** /*****************************************************************************
1008:../../MMI/Resource/ImageGetDimension.c **** * FUNCTION
1009:../../MMI/Resource/ImageGetDimension.c **** *  Image_Get_Dimensions
1010:../../MMI/Resource/ImageGetDimension.c **** * DESCRIPTION
1011:../../MMI/Resource/ImageGetDimension.c **** *  Get the dimensions of the image resource
1012:../../MMI/Resource/ImageGetDimension.c **** * PARAMETERS
1013:../../MMI/Resource/ImageGetDimension.c **** *  filename    [IN]
1014:../../MMI/Resource/ImageGetDimension.c **** *  width       [OUT]
1015:../../MMI/Resource/ImageGetDimension.c **** *  height      [OUT]
1016:../../MMI/Resource/ImageGetDimension.c **** * RETURNS
1017:../../MMI/Resource/ImageGetDimension.c **** *  int			>=0: frame count, <0: failed
1018:../../MMI/Resource/ImageGetDimension.c **** *****************************************************************************/
1019:../../MMI/Resource/ImageGetDimension.c **** S32 Image_Get_Dimensions(S8 *filename, U32 *width, U32 *height)
1020:../../MMI/Resource/ImageGetDimension.c **** {
 2737              	LM284:
 2738 1da6 55       		pushl	%ebp
 2739 1da7 89E5     		movl	%esp, %ebp
 2740 1da9 53       		pushl	%ebx
 2741 1daa 83EC24   		subl	$36, %esp
1021:../../MMI/Resource/ImageGetDimension.c ****     /*----------------------------------------------------------------*/
1022:../../MMI/Resource/ImageGetDimension.c ****     /* Local Variables                                                */
1023:../../MMI/Resource/ImageGetDimension.c ****     /*----------------------------------------------------------------*/
1024:../../MMI/Resource/ImageGetDimension.c ****     S8 ext[4] = {0};	/* filename extension */
 2743              	LM285:
 2744              	LBB18:
 2745 1dad C745F800 		movl	$0, -8(%ebp)
 2745      000000
1025:../../MMI/Resource/ImageGetDimension.c ****     U32 i = 0;
 2747              	LM286:
 2748 1db4 C745F400 		movl	$0, -12(%ebp)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 68


 2748      000000
1026:../../MMI/Resource/ImageGetDimension.c ****     MMI_BOOL ret = 0;
 2750              	LM287:
 2751 1dbb C745F000 		movl	$0, -16(%ebp)
 2751      000000
1027:../../MMI/Resource/ImageGetDimension.c ****     S32 framecount = 1;
 2753              	LM288:
 2754 1dc2 C745EC01 		movl	$1, -20(%ebp)
 2754      000000
1028:../../MMI/Resource/ImageGetDimension.c **** 
1029:../../MMI/Resource/ImageGetDimension.c ****     /*----------------------------------------------------------------*/
1030:../../MMI/Resource/ImageGetDimension.c ****     /* Code Body                                                      */
1031:../../MMI/Resource/ImageGetDimension.c ****     /*----------------------------------------------------------------*/
1032:../../MMI/Resource/ImageGetDimension.c ****     /* get filename extension and convert it to upper case */
1033:../../MMI/Resource/ImageGetDimension.c ****     for(i = 0; i < 3; i++)
 2756              	LM289:
 2757 1dc9 C745F400 		movl	$0, -12(%ebp)
 2757      000000
 2758              	L187:
 2759 1dd0 837DF402 		cmpl	$2, -12(%ebp)
 2760 1dd4 7602     		jbe	L190
 2761 1dd6 EB31     		jmp	L188
 2762              	L190:
1034:../../MMI/Resource/ImageGetDimension.c ****     {
1035:../../MMI/Resource/ImageGetDimension.c ****         ext[i] = toupper(filename[strlen(filename) - 3 + i]);
 2764              	LM290:
 2765 1dd8 8D45FC   		leal	-4(%ebp), %eax
 2766              	LBB19:
 2767 1ddb 0345F4   		addl	-12(%ebp), %eax
 2768 1dde 8D58FC   		leal	-4(%eax), %ebx
 2769 1de1 8B4508   		movl	8(%ebp), %eax
 2770 1de4 890424   		movl	%eax, (%esp)
 2771 1de7 E8000000 		call	_strlen
 2771      00
 2772 1dec 0345F4   		addl	-12(%ebp), %eax
 2773 1def 034508   		addl	8(%ebp), %eax
 2774 1df2 83E803   		subl	$3, %eax
 2775 1df5 0FBE00   		movsbl	(%eax),%eax
 2776 1df8 890424   		movl	%eax, (%esp)
 2777 1dfb E8000000 		call	_toupper
 2777      00
 2778 1e00 8803     		movb	%al, (%ebx)
 2780              	LM291:
 2781 1e02 8D45F4   		leal	-12(%ebp), %eax
 2782              	LBE19:
 2783 1e05 FF00     		incl	(%eax)
 2784 1e07 EBC7     		jmp	L187
 2785              	L188:
1036:../../MMI/Resource/ImageGetDimension.c ****     }
1037:../../MMI/Resource/ImageGetDimension.c ****     ext[3] = '\0';
 2787              	LM292:
 2788 1e09 C645FB00 		movb	$0, -5(%ebp)
1038:../../MMI/Resource/ImageGetDimension.c **** 
1039:../../MMI/Resource/ImageGetDimension.c ****     *width = *height = 0;
 2790              	LM293:
 2791 1e0d 8B550C   		movl	12(%ebp), %edx
 2792 1e10 8B4510   		movl	16(%ebp), %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 69


 2793 1e13 C7000000 		movl	$0, (%eax)
 2793      0000
 2794 1e19 C7020000 		movl	$0, (%edx)
 2794      0000
1040:../../MMI/Resource/ImageGetDimension.c **** 
1041:../../MMI/Resource/ImageGetDimension.c ****     /* get dimension of BMP or PBM file */
1042:../../MMI/Resource/ImageGetDimension.c ****     if ((strncmp(ext, "BMP", 3) == 0) ||
 2796              	LM294:
 2797 1e1f C7442408 		movl	$3, 8(%esp)
 2797      03000000 
 2798 1e27 C7442404 		movl	$LC29, 4(%esp)
 2798      2B1D0000 
 2799 1e2f 8D45F8   		leal	-8(%ebp), %eax
 2800 1e32 890424   		movl	%eax, (%esp)
 2801 1e35 E8000000 		call	_strncmp
 2801      00
 2802 1e3a 85C0     		testl	%eax, %eax
 2803 1e3c 741F     		je	L192
 2804 1e3e C7442408 		movl	$3, 8(%esp)
 2804      03000000 
 2805 1e46 C7442404 		movl	$LC30, 4(%esp)
 2805      2F1D0000 
 2806 1e4e 8D45F8   		leal	-8(%ebp), %eax
 2807 1e51 890424   		movl	%eax, (%esp)
 2808 1e54 E8000000 		call	_strncmp
 2808      00
 2809 1e59 85C0     		testl	%eax, %eax
 2810 1e5b 7521     		jne	L191
 2811              	L192:
1043:../../MMI/Resource/ImageGetDimension.c ****         (strncmp(ext, "PBM", 3) == 0))
1044:../../MMI/Resource/ImageGetDimension.c ****     {
1045:../../MMI/Resource/ImageGetDimension.c ****         ret = image_bmp_get_dimension(filename, width, height);
 2813              	LM295:
 2814 1e5d 8B4510   		movl	16(%ebp), %eax
 2815 1e60 89442408 		movl	%eax, 8(%esp)
 2816 1e64 8B450C   		movl	12(%ebp), %eax
 2817 1e67 89442404 		movl	%eax, 4(%esp)
 2818 1e6b 8B4508   		movl	8(%ebp), %eax
 2819 1e6e 890424   		movl	%eax, (%esp)
 2820 1e71 E84BE3FF 		call	_image_bmp_get_dimension
 2820      FF
 2821 1e76 8945F0   		movl	%eax, -16(%ebp)
 2822 1e79 E9220100 		jmp	L193
 2822      00
 2823              	L191:
1046:../../MMI/Resource/ImageGetDimension.c ****     }
1047:../../MMI/Resource/ImageGetDimension.c ****     /* get dimension of GIF file */
1048:../../MMI/Resource/ImageGetDimension.c ****     else if ((strncmp(ext, "GIF", 3) == 0))
 2825              	LM296:
 2826 1e7e C7442408 		movl	$3, 8(%esp)
 2826      03000000 
 2827 1e86 C7442404 		movl	$LC31, 4(%esp)
 2827      331D0000 
 2828 1e8e 8D45F8   		leal	-8(%ebp), %eax
 2829 1e91 890424   		movl	%eax, (%esp)
 2830 1e94 E8000000 		call	_strncmp
 2830      00
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 70


 2831 1e99 85C0     		testl	%eax, %eax
 2832 1e9b 7540     		jne	L194
1049:../../MMI/Resource/ImageGetDimension.c ****     {
1050:../../MMI/Resource/ImageGetDimension.c ****         ret = image_gif_get_dimension(filename, width, height);
 2834              	LM297:
 2835 1e9d 8B4510   		movl	16(%ebp), %eax
 2836 1ea0 89442408 		movl	%eax, 8(%esp)
 2837 1ea4 8B450C   		movl	12(%ebp), %eax
 2838 1ea7 89442404 		movl	%eax, 4(%esp)
 2839 1eab 8B4508   		movl	8(%ebp), %eax
 2840 1eae 890424   		movl	%eax, (%esp)
 2841 1eb1 E89BE7FF 		call	_image_gif_get_dimension
 2841      FF
 2842 1eb6 8945F0   		movl	%eax, -16(%ebp)
1051:../../MMI/Resource/ImageGetDimension.c ****         if (ret == MMI_TRUE)
 2844              	LM298:
 2845 1eb9 837DF001 		cmpl	$1, -16(%ebp)
 2846 1ebd 0F85DD00 		jne	L193
 2846      0000
1052:../../MMI/Resource/ImageGetDimension.c ****         {
1053:../../MMI/Resource/ImageGetDimension.c ****             ret = image_gif_get_frame_count(filename, &framecount);
 2848              	LM299:
 2849 1ec3 8D45EC   		leal	-20(%ebp), %eax
 2850 1ec6 89442404 		movl	%eax, 4(%esp)
 2851 1eca 8B4508   		movl	8(%ebp), %eax
 2852 1ecd 890424   		movl	%eax, (%esp)
 2853 1ed0 E805ECFF 		call	_image_gif_get_frame_count
 2853      FF
 2854 1ed5 8945F0   		movl	%eax, -16(%ebp)
 2855 1ed8 E9C30000 		jmp	L193
 2855      00
 2856              	L194:
1054:../../MMI/Resource/ImageGetDimension.c **** #if 0
1055:../../MMI/Resource/ImageGetDimension.c **** /* under construction !*/
1056:../../MMI/Resource/ImageGetDimension.c **** /* under construction !*/
1057:../../MMI/Resource/ImageGetDimension.c **** /* under construction !*/
1058:../../MMI/Resource/ImageGetDimension.c **** /* under construction !*/
1059:../../MMI/Resource/ImageGetDimension.c **** /* under construction !*/
1060:../../MMI/Resource/ImageGetDimension.c **** /* under construction !*/
1061:../../MMI/Resource/ImageGetDimension.c **** /* under construction !*/
1062:../../MMI/Resource/ImageGetDimension.c **** /* under construction !*/
1063:../../MMI/Resource/ImageGetDimension.c **** #endif
1064:../../MMI/Resource/ImageGetDimension.c ****         }
1065:../../MMI/Resource/ImageGetDimension.c ****     }
1066:../../MMI/Resource/ImageGetDimension.c ****     /* get dimension of PNG file */
1067:../../MMI/Resource/ImageGetDimension.c ****     else if ((strncmp(ext, "PNG", 3) == 0) ||
 2858              	LM300:
 2859 1edd C7442408 		movl	$3, 8(%esp)
 2859      03000000 
 2860 1ee5 C7442404 		movl	$LC32, 4(%esp)
 2860      371D0000 
 2861 1eed 8D45F8   		leal	-8(%ebp), %eax
 2862 1ef0 890424   		movl	%eax, (%esp)
 2863 1ef3 E8000000 		call	_strncmp
 2863      00
 2864 1ef8 85C0     		testl	%eax, %eax
 2865 1efa 741F     		je	L198
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 71


 2866 1efc C7442408 		movl	$3, 8(%esp)
 2866      03000000 
 2867 1f04 C7442404 		movl	$LC33, 4(%esp)
 2867      3B1D0000 
 2868 1f0c 8D45F8   		leal	-8(%ebp), %eax
 2869 1f0f 890424   		movl	%eax, (%esp)
 2870 1f12 E8000000 		call	_strncmp
 2870      00
 2871 1f17 85C0     		testl	%eax, %eax
 2872 1f19 751E     		jne	L197
 2873              	L198:
1068:../../MMI/Resource/ImageGetDimension.c ****         (strncmp(ext, "PPN", 3) == 0))
1069:../../MMI/Resource/ImageGetDimension.c ****     {
1070:../../MMI/Resource/ImageGetDimension.c ****         ret = image_png_get_dimension(filename, width, height);
 2875              	LM301:
 2876 1f1b 8B4510   		movl	16(%ebp), %eax
 2877 1f1e 89442408 		movl	%eax, 8(%esp)
 2878 1f22 8B450C   		movl	12(%ebp), %eax
 2879 1f25 89442404 		movl	%eax, 4(%esp)
 2880 1f29 8B4508   		movl	8(%ebp), %eax
 2881 1f2c 890424   		movl	%eax, (%esp)
 2882 1f2f E8C5F7FF 		call	_image_png_get_dimension
 2882      FF
 2883 1f34 8945F0   		movl	%eax, -16(%ebp)
 2884 1f37 EB67     		jmp	L193
 2885              	L197:
1071:../../MMI/Resource/ImageGetDimension.c ****     }
1072:../../MMI/Resource/ImageGetDimension.c ****     /* get dimension of JPG file */
1073:../../MMI/Resource/ImageGetDimension.c ****     else if ((strncmp(ext, "JPG", 3) == 0))
 2887              	LM302:
 2888 1f39 C7442408 		movl	$3, 8(%esp)
 2888      03000000 
 2889 1f41 C7442404 		movl	$LC34, 4(%esp)
 2889      3F1D0000 
 2890 1f49 8D45F8   		leal	-8(%ebp), %eax
 2891 1f4c 890424   		movl	%eax, (%esp)
 2892 1f4f E8000000 		call	_strncmp
 2892      00
 2893 1f54 85C0     		testl	%eax, %eax
 2894 1f56 751E     		jne	L200
1074:../../MMI/Resource/ImageGetDimension.c ****     {
1075:../../MMI/Resource/ImageGetDimension.c ****         ret = image_jpg_get_dimension(filename, width, height);
 2896              	LM303:
 2897 1f58 8B4510   		movl	16(%ebp), %eax
 2898 1f5b 89442408 		movl	%eax, 8(%esp)
 2899 1f5f 8B450C   		movl	12(%ebp), %eax
 2900 1f62 89442404 		movl	%eax, 4(%esp)
 2901 1f66 8B4508   		movl	8(%ebp), %eax
 2902 1f69 890424   		movl	%eax, (%esp)
 2903 1f6c E87EFAFF 		call	_image_jpg_get_dimension
 2903      FF
 2904 1f71 8945F0   		movl	%eax, -16(%ebp)
 2905 1f74 EB2A     		jmp	L193
 2906              	L200:
1076:../../MMI/Resource/ImageGetDimension.c ****     }
1077:../../MMI/Resource/ImageGetDimension.c ****     /* other files will return false directly */
1078:../../MMI/Resource/ImageGetDimension.c ****     else
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 72


1079:../../MMI/Resource/ImageGetDimension.c ****     {
1080:../../MMI/Resource/ImageGetDimension.c ****         IMGDIM_LOG_W("Image_Get_Dimensions: file types not support\t FILE: %s", filename);   
 2908              	LM304:
 2909 1f76 8B4508   		movl	8(%ebp), %eax
 2910 1f79 8944240C 		movl	%eax, 12(%esp)
 2911 1f7d C7442408 		movl	$LC35, 8(%esp)
 2911      601D0000 
 2912 1f85 C7442404 		movl	$LC4, 4(%esp)
 2912      54000000 
 2913 1f8d C7042402 		movl	$2, (%esp)
 2913      000000
 2914 1f94 E8000000 		call	_reslog_adaptor_log
 2914      00
1081:../../MMI/Resource/ImageGetDimension.c **** 
1082:../../MMI/Resource/ImageGetDimension.c ****         ret = MMI_FALSE;
 2916              	LM305:
 2917 1f99 C745F000 		movl	$0, -16(%ebp)
 2917      000000
 2918              	L193:
1083:../../MMI/Resource/ImageGetDimension.c ****     }
1084:../../MMI/Resource/ImageGetDimension.c **** 
1085:../../MMI/Resource/ImageGetDimension.c ****     if (ret == MMI_FALSE)
 2920              	LM306:
 2921 1fa0 837DF000 		cmpl	$0, -16(%ebp)
 2922 1fa4 7528     		jne	L202
1086:../../MMI/Resource/ImageGetDimension.c ****     {
1087:../../MMI/Resource/ImageGetDimension.c ****         fprintf(stderr, "File err:\t\t%s\n", filename);
 2924              	LM307:
 2925 1fa6 8B4508   		movl	8(%ebp), %eax
 2926 1fa9 89442408 		movl	%eax, 8(%esp)
 2927 1fad C7442404 		movl	$LC36, 4(%esp)
 2927      971D0000 
 2928 1fb5 A1000000 		movl	__imp___iob, %eax
 2928      00
 2929 1fba 83C040   		addl	$64, %eax
 2930 1fbd 890424   		movl	%eax, (%esp)
 2931 1fc0 E8000000 		call	_fprintf
 2931      00
1088:../../MMI/Resource/ImageGetDimension.c ****         return 0;
 2933              	LM308:
 2934 1fc5 C745E800 		movl	$0, -24(%ebp)
 2934      000000
 2935 1fcc EB06     		jmp	L186
 2936              	L202:
1089:../../MMI/Resource/ImageGetDimension.c ****     }
1090:../../MMI/Resource/ImageGetDimension.c ****     else
1091:../../MMI/Resource/ImageGetDimension.c ****     {
1092:../../MMI/Resource/ImageGetDimension.c ****         return framecount;
 2938              	LM309:
 2939 1fce 8B45EC   		movl	-20(%ebp), %eax
 2940 1fd1 8945E8   		movl	%eax, -24(%ebp)
1093:../../MMI/Resource/ImageGetDimension.c ****     }
1094:../../MMI/Resource/ImageGetDimension.c **** }
 2942              	LM310:
 2943              	L186:
 2944              	LBE18:
 2945 1fd4 8B45E8   		movl	-24(%ebp), %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 73


 2946 1fd7 83C424   		addl	$36, %esp
 2947 1fda 5B       		popl	%ebx
 2948 1fdb 5D       		popl	%ebp
 2949 1fdc C3       		ret
 2956              	Lscope5:
 2963              	.globl _Image_Test
 2965              	_Image_Test:
1095:../../MMI/Resource/ImageGetDimension.c **** 
1096:../../MMI/Resource/ImageGetDimension.c **** 
1097:../../MMI/Resource/ImageGetDimension.c **** /*****************************************************************************
1098:../../MMI/Resource/ImageGetDimension.c **** * FUNCTION
1099:../../MMI/Resource/ImageGetDimension.c **** *  Image_Test
1100:../../MMI/Resource/ImageGetDimension.c **** * DESCRIPTION
1101:../../MMI/Resource/ImageGetDimension.c **** *  test the resource is video, over-half-size image, or others
1102:../../MMI/Resource/ImageGetDimension.c **** * PARAMETERS
1103:../../MMI/Resource/ImageGetDimension.c **** *  filename    [IN]
1104:../../MMI/Resource/ImageGetDimension.c **** *  width       [OUT]
1105:../../MMI/Resource/ImageGetDimension.c **** *  height      [OUT]
1106:../../MMI/Resource/ImageGetDimension.c **** * RETURNS
1107:../../MMI/Resource/ImageGetDimension.c **** *  int			>0: video or over-half-size image, =0: others
1108:../../MMI/Resource/ImageGetDimension.c **** *****************************************************************************/
1109:../../MMI/Resource/ImageGetDimension.c **** S32 Image_Test(S8 *filename, U32 *width, U32 *height, int disable_enfb)
1110:../../MMI/Resource/ImageGetDimension.c **** {
 2967              	LM311:
 2968 1fdd 55       		pushl	%ebp
 2969 1fde 89E5     		movl	%esp, %ebp
1111:../../MMI/Resource/ImageGetDimension.c **** #ifdef __MMI_RESOURCE_ENFB_SUPPORT__
1112:../../MMI/Resource/ImageGetDimension.c ****     /*----------------------------------------------------------------*/
1113:../../MMI/Resource/ImageGetDimension.c ****     /* Local Variables                                                */
1114:../../MMI/Resource/ImageGetDimension.c ****     /*----------------------------------------------------------------*/
1115:../../MMI/Resource/ImageGetDimension.c ****     S8 ext[4];	/* filename extension */
1116:../../MMI/Resource/ImageGetDimension.c ****     U32 lw, lh;		/* resolution of LCD size */
1117:../../MMI/Resource/ImageGetDimension.c ****     U32 i;
1118:../../MMI/Resource/ImageGetDimension.c **** 
1119:../../MMI/Resource/ImageGetDimension.c ****     /*----------------------------------------------------------------*/
1120:../../MMI/Resource/ImageGetDimension.c ****     /* Code Body                                                      */
1121:../../MMI/Resource/ImageGetDimension.c ****     /*----------------------------------------------------------------*/
1122:../../MMI/Resource/ImageGetDimension.c ****     if (disable_enfb)
1123:../../MMI/Resource/ImageGetDimension.c ****     {
1124:../../MMI/Resource/ImageGetDimension.c ****         return ENFB_IMAGE_NONE;
1125:../../MMI/Resource/ImageGetDimension.c ****     }
1126:../../MMI/Resource/ImageGetDimension.c ****     else if (ENFBAssociatedIDFlag == MMI_TRUE)
1127:../../MMI/Resource/ImageGetDimension.c ****     {
1128:../../MMI/Resource/ImageGetDimension.c ****         //ENFBAssociatedIDAdded = MMI_TRUE;
1129:../../MMI/Resource/ImageGetDimension.c ****         return ENFB_IMAGE_ASSOCIATE;
1130:../../MMI/Resource/ImageGetDimension.c ****     }
1131:../../MMI/Resource/ImageGetDimension.c **** 
1132:../../MMI/Resource/ImageGetDimension.c ****     /* get filename extension and convert it to upper case */
1133:../../MMI/Resource/ImageGetDimension.c ****     for(i = 0; i < 3; i++)
1134:../../MMI/Resource/ImageGetDimension.c ****     {
1135:../../MMI/Resource/ImageGetDimension.c ****         ext[i] = toupper(filename[strlen(filename) - 3 + i]);
1136:../../MMI/Resource/ImageGetDimension.c ****     }
1137:../../MMI/Resource/ImageGetDimension.c ****     ext[3] = '\0';
1138:../../MMI/Resource/ImageGetDimension.c **** 
1139:../../MMI/Resource/ImageGetDimension.c ****     *width = *height = 0;
1140:../../MMI/Resource/ImageGetDimension.c **** 
1141:../../MMI/Resource/ImageGetDimension.c ****     /* if video file, return true */
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 74


1142:../../MMI/Resource/ImageGetDimension.c ****     for (i = 0; i < (sizeof(Video_Ext) / 4); i++)
1143:../../MMI/Resource/ImageGetDimension.c ****     {
1144:../../MMI/Resource/ImageGetDimension.c ****         if (strncmp(ext, Video_Ext[i], 3) == 0)
1145:../../MMI/Resource/ImageGetDimension.c ****         {
1146:../../MMI/Resource/ImageGetDimension.c ****             return ENFB_IMAGE_VIDEO;
1147:../../MMI/Resource/ImageGetDimension.c ****         }
1148:../../MMI/Resource/ImageGetDimension.c ****     }
1149:../../MMI/Resource/ImageGetDimension.c **** 
1150:../../MMI/Resource/ImageGetDimension.c ****     /* if vector font, return true */
1151:../../MMI/Resource/ImageGetDimension.c ****     if (strncmp(ext, "TTF", 3) == 0)
1152:../../MMI/Resource/ImageGetDimension.c ****     {
1153:../../MMI/Resource/ImageGetDimension.c ****         extern S32 g_mmi_res_font_flags;
1154:../../MMI/Resource/ImageGetDimension.c **** 
1155:../../MMI/Resource/ImageGetDimension.c ****         if (g_mmi_res_font_flags & MMI_RES_FLAG_FONT_IS_ENFB)
1156:../../MMI/Resource/ImageGetDimension.c ****         {
1157:../../MMI/Resource/ImageGetDimension.c ****             return ENFB_IMAGE_FONT;
1158:../../MMI/Resource/ImageGetDimension.c ****         }
1159:../../MMI/Resource/ImageGetDimension.c ****         else
1160:../../MMI/Resource/ImageGetDimension.c ****         {
1161:../../MMI/Resource/ImageGetDimension.c ****             return ENFB_IMAGE_NONE;
1162:../../MMI/Resource/ImageGetDimension.c ****         }
1163:../../MMI/Resource/ImageGetDimension.c ****     }
1164:../../MMI/Resource/ImageGetDimension.c **** 
1165:../../MMI/Resource/ImageGetDimension.c ****     /* get dimension of BMP or PBM file */
1166:../../MMI/Resource/ImageGetDimension.c ****     if ((strncmp(ext, "BMP", 3) == 0) ||
1167:../../MMI/Resource/ImageGetDimension.c ****         (strncmp(ext, "PBM", 3) == 0))
1168:../../MMI/Resource/ImageGetDimension.c ****     {
1169:../../MMI/Resource/ImageGetDimension.c ****         if(image_bmp_get_dimension(filename, width, height) == MMI_FALSE)
1170:../../MMI/Resource/ImageGetDimension.c ****         {
1171:../../MMI/Resource/ImageGetDimension.c ****             return ENFB_IMAGE_NONE;
1172:../../MMI/Resource/ImageGetDimension.c ****         }
1173:../../MMI/Resource/ImageGetDimension.c ****     }
1174:../../MMI/Resource/ImageGetDimension.c ****     /* get dimension of GIF file */
1175:../../MMI/Resource/ImageGetDimension.c ****     else if ((strncmp(ext, "GIF", 3) == 0))
1176:../../MMI/Resource/ImageGetDimension.c ****     {
1177:../../MMI/Resource/ImageGetDimension.c ****         if(image_gif_get_dimension(filename, width, height) == MMI_FALSE)
1178:../../MMI/Resource/ImageGetDimension.c ****         {
1179:../../MMI/Resource/ImageGetDimension.c ****             return ENFB_IMAGE_NONE;
1180:../../MMI/Resource/ImageGetDimension.c ****         }
1181:../../MMI/Resource/ImageGetDimension.c ****     }
1182:../../MMI/Resource/ImageGetDimension.c ****     /* get dimension of PNG file */
1183:../../MMI/Resource/ImageGetDimension.c ****     else if ((strncmp(ext, "PNG", 3) == 0) ||
1184:../../MMI/Resource/ImageGetDimension.c ****         (strncmp(ext, "PPN", 3) == 0))
1185:../../MMI/Resource/ImageGetDimension.c ****     {
1186:../../MMI/Resource/ImageGetDimension.c ****         /* if PNG pop-up, force to be E-NFB */
1187:../../MMI/Resource/ImageGetDimension.c ****         for (i = 0; i < (sizeof(PNG_seq_to_ENFB_str) / STR_SIZE); i++)
1188:../../MMI/Resource/ImageGetDimension.c ****         {   
1189:../../MMI/Resource/ImageGetDimension.c ****             if (strstr(filename, PNG_seq_to_ENFB_str[i]) != NULL)
1190:../../MMI/Resource/ImageGetDimension.c ****             {
1191:../../MMI/Resource/ImageGetDimension.c ****                 return ENFB_IMAGE_DIMENSION;
1192:../../MMI/Resource/ImageGetDimension.c ****             }
1193:../../MMI/Resource/ImageGetDimension.c ****         }
1194:../../MMI/Resource/ImageGetDimension.c **** 
1195:../../MMI/Resource/ImageGetDimension.c ****         if(image_png_get_dimension(filename, width, height) == MMI_FALSE)
1196:../../MMI/Resource/ImageGetDimension.c ****         {
1197:../../MMI/Resource/ImageGetDimension.c ****             return ENFB_IMAGE_NONE;
1198:../../MMI/Resource/ImageGetDimension.c ****         }
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 75


1199:../../MMI/Resource/ImageGetDimension.c ****     }
1200:../../MMI/Resource/ImageGetDimension.c ****     /* get dimension of JPG file */
1201:../../MMI/Resource/ImageGetDimension.c ****     else if ((strncmp(ext, "JPG", 3) == 0))
1202:../../MMI/Resource/ImageGetDimension.c ****     {
1203:../../MMI/Resource/ImageGetDimension.c ****         if(image_jpg_get_dimension(filename, width, height) == MMI_FALSE)
1204:../../MMI/Resource/ImageGetDimension.c ****         {
1205:../../MMI/Resource/ImageGetDimension.c ****             return ENFB_IMAGE_NONE;
1206:../../MMI/Resource/ImageGetDimension.c ****         }
1207:../../MMI/Resource/ImageGetDimension.c ****     }
1208:../../MMI/Resource/ImageGetDimension.c ****     /* other files will return false directly */
1209:../../MMI/Resource/ImageGetDimension.c ****     else
1210:../../MMI/Resource/ImageGetDimension.c ****     {
1211:../../MMI/Resource/ImageGetDimension.c ****         return ENFB_IMAGE_NONE;
1212:../../MMI/Resource/ImageGetDimension.c ****     }
1213:../../MMI/Resource/ImageGetDimension.c **** 
1214:../../MMI/Resource/ImageGetDimension.c ****     /* set main LCD size */
1215:../../MMI/Resource/ImageGetDimension.c ****     lw = lh = 0;
1216:../../MMI/Resource/ImageGetDimension.c **** #ifdef __MMI_MAINLCD_96X64__
1217:../../MMI/Resource/ImageGetDimension.c ****     lw = 96;
1218:../../MMI/Resource/ImageGetDimension.c ****     lh = 64;	
1219:../../MMI/Resource/ImageGetDimension.c **** #elif __MMI_MAINLCD_128X128__
1220:../../MMI/Resource/ImageGetDimension.c ****     lw = 128;
1221:../../MMI/Resource/ImageGetDimension.c ****     lh = 128;
1222:../../MMI/Resource/ImageGetDimension.c **** #elif __MMI_MAINLCD_128X160__
1223:../../MMI/Resource/ImageGetDimension.c ****     lw = 128;
1224:../../MMI/Resource/ImageGetDimension.c ****     lh = 160;
1225:../../MMI/Resource/ImageGetDimension.c **** #elif __MMI_MAINLCD_176X220__
1226:../../MMI/Resource/ImageGetDimension.c ****     lw = 176;
1227:../../MMI/Resource/ImageGetDimension.c ****     lh = 220;
1228:../../MMI/Resource/ImageGetDimension.c **** #elif __MMI_MAINLCD_240X320__
1229:../../MMI/Resource/ImageGetDimension.c ****     lw = 240;
1230:../../MMI/Resource/ImageGetDimension.c ****     lh = 320;
1231:../../MMI/Resource/ImageGetDimension.c **** #elif __MMI_MAINLCD_320X240__
1232:../../MMI/Resource/ImageGetDimension.c ****     lw = 320;
1233:../../MMI/Resource/ImageGetDimension.c ****     lh = 240;
1234:../../MMI/Resource/ImageGetDimension.c **** #elif __MMI_MAINLCD_240X400__
1235:../../MMI/Resource/ImageGetDimension.c ****     lw = 240;
1236:../../MMI/Resource/ImageGetDimension.c ****     lh = 400;
1237:../../MMI/Resource/ImageGetDimension.c **** #elif __MMI_MAINLCD_320X480__
1238:../../MMI/Resource/ImageGetDimension.c ****     lw = 320;
1239:../../MMI/Resource/ImageGetDimension.c ****     lh = 480;
1240:../../MMI/Resource/ImageGetDimension.c **** #elif __MMI_MAINLCD_480X800__
1241:../../MMI/Resource/ImageGetDimension.c ****     lw = 480;
1242:../../MMI/Resource/ImageGetDimension.c ****     lh = 800;
1243:../../MMI/Resource/ImageGetDimension.c **** #else
1244:../../MMI/Resource/ImageGetDimension.c **** #error "No specific resolution in ImageGetDimension.c"
1245:../../MMI/Resource/ImageGetDimension.c **** #endif
1246:../../MMI/Resource/ImageGetDimension.c **** 
1247:../../MMI/Resource/ImageGetDimension.c ****     //printf("\nPBM --> %s --> %d x %d\n", filename, *width, *height);
1248:../../MMI/Resource/ImageGetDimension.c **** 
1249:../../MMI/Resource/ImageGetDimension.c ****     /* test whether the image file is over half of the LCD size */
1250:../../MMI/Resource/ImageGetDimension.c ****     if ((*width) * (*height) >= 0.5 * lw * lh)
1251:../../MMI/Resource/ImageGetDimension.c ****     {
1252:../../MMI/Resource/ImageGetDimension.c ****         printf("enfb file = %s\n", filename);
1253:../../MMI/Resource/ImageGetDimension.c ****         return ENFB_IMAGE_DIMENSION;
1254:../../MMI/Resource/ImageGetDimension.c ****     }
1255:../../MMI/Resource/ImageGetDimension.c **** 
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 76


1256:../../MMI/Resource/ImageGetDimension.c ****     return ENFB_IMAGE_NONE;
1257:../../MMI/Resource/ImageGetDimension.c **** #else
1258:../../MMI/Resource/ImageGetDimension.c ****     return 0;   // ENFB_IMAGE_NONE;
 2971              	LM312:
 2972 1fe0 B8000000 		movl	$0, %eax
 2972      00
1259:../../MMI/Resource/ImageGetDimension.c **** #endif
1260:../../MMI/Resource/ImageGetDimension.c **** }
 2974              	LM313:
 2975 1fe5 5D       		popl	%ebp
 2976 1fe6 C3       		ret
 2977              	Lscope6:
 2981              		.text
 2983              	Letext:
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s 			page 77


DEFINED SYMBOLS
                            *ABS*:00000000 ImageGetDimension.c
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s:288    .data:00000000 _Video_Ext
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s:293    .data:00000020 _PNG_seq_to_ENFB_str
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s:364    .text:000001c1 _image_bmp_get_dimension
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s:758    .text:00000651 _image_gif_get_dimension
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s:993    .text:00000ada _image_gif_get_frame_count
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s:2137   .text:000016f9 _image_png_get_dimension
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s:2371   .text:000019ef _image_jpg_get_dimension
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s:2735   .text:00001da6 _Image_Get_Dimensions
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/cce6baaa.s:2965   .text:00001fdd _Image_Test

UNDEFINED SYMBOLS
__imp___iob
__alloca
_strncmp
_strlen
_toupper
_free
_feof
_fgetc
_memcmp
_malloc
_ftell
_fseek
_fclose
_strstr
_fread
_reslog_adaptor_log
__errno
_strerror
_fprintf
_fopen
