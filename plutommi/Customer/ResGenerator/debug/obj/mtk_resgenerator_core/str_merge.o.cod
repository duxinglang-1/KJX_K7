GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 1


   1              		.file	"str_merge.c"
   4              		.text
   5              	Ltext0:
 368              	.globl _CurrMaxTransStrId
 369              		.bss
 370              		.align 2
 371              	_CurrMaxTransStrId:
 372 0000 0000     		.space 2
 373              	.lcomm _str_merge_err_code,16
 374              		.data
 375              		.align 32
 376              	_str_merge_err_msg:
 377 0000 0000     		.ascii "\0\0"
 378 0002 00000000 		.space 400
 378      00000000 
 378      00000000 
 378      00000000 
 378      00000000 
 379              		.text
 383              	.globl _str_merge_set_err
 385              	_str_merge_set_err:
   1:str_merge.c   **** /*****************************************************************************
   2:str_merge.c   **** *  Copyright Statement:
   3:str_merge.c   **** *  --------------------
   4:str_merge.c   **** *  This software is protected by Copyright and the information contained
   5:str_merge.c   **** *  herein is confidential. The software may not be copied and the information
   6:str_merge.c   **** *  contained herein may not be used or disclosed except with the written
   7:str_merge.c   **** *  permission of MediaTek Inc. (C) 2005
   8:str_merge.c   **** *
   9:str_merge.c   **** *  BY OPENING THIS FILE, BUYER HEREBY UNEQUIVOCALLY ACKNOWLEDGES AND AGREES
  10:str_merge.c   **** *  THAT THE SOFTWARE/FIRMWARE AND ITS DOCUMENTATIONS ("MEDIATEK SOFTWARE")
  11:str_merge.c   **** *  RECEIVED FROM MEDIATEK AND/OR ITS REPRESENTATIVES ARE PROVIDED TO BUYER ON
  12:str_merge.c   **** *  AN "AS-IS" BASIS ONLY. MEDIATEK EXPRESSLY DISCLAIMS ANY AND ALL WARRANTIES,
  13:str_merge.c   **** *  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE IMPLIED WARRANTIES OF
  14:str_merge.c   **** *  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE OR NONINFRINGEMENT.
  15:str_merge.c   **** *  NEITHER DOES MEDIATEK PROVIDE ANY WARRANTY WHATSOEVER WITH RESPECT TO THE
  16:str_merge.c   **** *  SOFTWARE OF ANY THIRD PARTY WHICH MAY BE USED BY, INCORPORATED IN, OR
  17:str_merge.c   **** *  SUPPLIED WITH THE MEDIATEK SOFTWARE, AND BUYER AGREES TO LOOK ONLY TO SUCH
  18:str_merge.c   **** *  THIRD PARTY FOR ANY WARRANTY CLAIM RELATING THERETO. MEDIATEK SHALL ALSO
  19:str_merge.c   **** *  NOT BE RESPONSIBLE FOR ANY MEDIATEK SOFTWARE RELEASES MADE TO BUYER'S
  20:str_merge.c   **** *  SPECIFICATION OR TO CONFORM TO A PARTICULAR STANDARD OR OPEN FORUM.
  21:str_merge.c   **** *
  22:str_merge.c   **** *  BUYER'S SOLE AND EXCLUSIVE REMEDY AND MEDIATEK'S ENTIRE AND CUMULATIVE
  23:str_merge.c   **** *  LIABILITY WITH RESPECT TO THE MEDIATEK SOFTWARE RELEASED HEREUNDER WILL BE,
  24:str_merge.c   **** *  AT MEDIATEK'S OPTION, TO REVISE OR REPLACE THE MEDIATEK SOFTWARE AT ISSUE,
  25:str_merge.c   **** *  OR REFUND ANY SOFTWARE LICENSE FEES OR SERVICE CHARGE PAID BY BUYER TO
  26:str_merge.c   **** *  MEDIATEK FOR SUCH MEDIATEK SOFTWARE AT ISSUE. 
  27:str_merge.c   **** *
  28:str_merge.c   **** *  THE TRANSACTION CONTEMPLATED HEREUNDER SHALL BE CONSTRUED IN ACCORDANCE
  29:str_merge.c   **** *  WITH THE LAWS OF THE STATE OF CALIFORNIA, USA, EXCLUDING ITS CONFLICT OF
  30:str_merge.c   **** *  LAWS PRINCIPLES.  ANY DISPUTES, CONTROVERSIES OR CLAIMS ARISING THEREOF AND
  31:str_merge.c   **** *  RELATED THERETO SHALL BE SETTLED BY ARBITRATION IN SAN FRANCISCO, CA, UNDER
  32:str_merge.c   **** *  THE RULES OF THE INTERNATIONAL CHAMBER OF COMMERCE (ICC).
  33:str_merge.c   **** *
  34:str_merge.c   **** *****************************************************************************/
  35:str_merge.c   **** 
  36:str_merge.c   **** /*******************************************************************************
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 2


  37:str_merge.c   ****  * Filename:
  38:str_merge.c   ****  * ---------
  39:str_merge.c   ****  * str_merge.c
  40:str_merge.c   ****  *
  41:str_merge.c   ****  * Project:
  42:str_merge.c   ****  * --------
  43:str_merge.c   ****  *   MAUI
  44:str_merge.c   ****  *
  45:str_merge.c   ****  * Description:
  46:str_merge.c   ****  * ------------
  47:str_merge.c   ****  *   Merge multi-language string table, and generate string resource files.
  48:str_merge.c   ****  *
  49:str_merge.c   ****  * Author:
  50:str_merge.c   ****  * -------
  51:str_merge.c   ****  *  
  52:str_merge.c   ****  *
  53:str_merge.c   ****  *==============================================================================
  54:str_merge.c   ****  *             HISTORY
  55:str_merge.c   ****  * Below this line, this part is controlled by PVCS VM. DO NOT MODIFY!! 
  56:str_merge.c   ****  *------------------------------------------------------------------------------
  57:str_merge.c   ****  * removed!
  58:str_merge.c   ****  *
  59:str_merge.c   ****  * removed!
  60:str_merge.c   ****  * removed!
  61:str_merge.c   ****  * removed!
  62:str_merge.c   ****  *
  63:str_merge.c   ****  * removed!
  64:str_merge.c   ****  * removed!
  65:str_merge.c   ****  *
  66:str_merge.c   ****  * removed!
  67:str_merge.c   ****  * removed!
  68:str_merge.c   ****  *
  69:str_merge.c   ****  * removed!
  70:str_merge.c   ****  * removed!
  71:str_merge.c   ****  * removed!
  72:str_merge.c   ****  *
  73:str_merge.c   ****  * removed!
  74:str_merge.c   ****  * removed!
  75:str_merge.c   ****  * removed!
  76:str_merge.c   ****  *
  77:str_merge.c   ****  * removed!
  78:str_merge.c   ****  * removed!
  79:str_merge.c   ****  * removed!
  80:str_merge.c   ****  *
  81:str_merge.c   ****  * removed!
  82:str_merge.c   ****  * removed!
  83:str_merge.c   ****  * removed!
  84:str_merge.c   ****  *
  85:str_merge.c   ****  * removed!
  86:str_merge.c   ****  * removed!
  87:str_merge.c   ****  * removed!
  88:str_merge.c   ****  *
  89:str_merge.c   ****  * removed!
  90:str_merge.c   ****  * removed!
  91:str_merge.c   ****  * removed!
  92:str_merge.c   ****  *
  93:str_merge.c   ****  * removed!
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 3


  94:str_merge.c   ****  * removed!
  95:str_merge.c   ****  * removed!
  96:str_merge.c   ****  *
  97:str_merge.c   ****  * removed!
  98:str_merge.c   ****  * removed!
  99:str_merge.c   ****  * removed!
 100:str_merge.c   ****  *
 101:str_merge.c   ****  * removed!
 102:str_merge.c   ****  * removed!
 103:str_merge.c   ****  * removed!
 104:str_merge.c   ****  *
 105:str_merge.c   ****  * removed!
 106:str_merge.c   ****  * removed!
 107:str_merge.c   ****  * removed!
 108:str_merge.c   ****  *
 109:str_merge.c   ****  * removed!
 110:str_merge.c   ****  * removed!
 111:str_merge.c   ****  * removed!
 112:str_merge.c   ****  *
 113:str_merge.c   ****  * removed!
 114:str_merge.c   ****  * removed!
 115:str_merge.c   ****  * removed!
 116:str_merge.c   ****  *
 117:str_merge.c   ****  * removed!
 118:str_merge.c   ****  * removed!
 119:str_merge.c   ****  * removed!
 120:str_merge.c   ****  *
 121:str_merge.c   ****  * removed!
 122:str_merge.c   ****  * removed!
 123:str_merge.c   ****  * removed!
 124:str_merge.c   ****  *
 125:str_merge.c   ****  * removed!
 126:str_merge.c   ****  * removed!
 127:str_merge.c   ****  * removed!
 128:str_merge.c   ****  *
 129:str_merge.c   ****  * removed!
 130:str_merge.c   ****  * removed!
 131:str_merge.c   ****  * removed!
 132:str_merge.c   ****  *
 133:str_merge.c   ****  * removed!
 134:str_merge.c   ****  * removed!
 135:str_merge.c   ****  * removed!
 136:str_merge.c   ****  *
 137:str_merge.c   ****  * removed!
 138:str_merge.c   ****  * removed!
 139:str_merge.c   ****  * removed!
 140:str_merge.c   ****  *
 141:str_merge.c   ****  * removed!
 142:str_merge.c   ****  * removed!
 143:str_merge.c   ****  * removed!
 144:str_merge.c   ****  *
 145:str_merge.c   ****  * removed!
 146:str_merge.c   ****  * removed!
 147:str_merge.c   ****  * removed!
 148:str_merge.c   ****  *
 149:str_merge.c   ****  * removed!
 150:str_merge.c   ****  * removed!
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 4


 151:str_merge.c   ****  * removed!
 152:str_merge.c   ****  *
 153:str_merge.c   ****  * removed!
 154:str_merge.c   ****  * removed!
 155:str_merge.c   ****  * removed!
 156:str_merge.c   ****  *
 157:str_merge.c   ****  * removed!
 158:str_merge.c   ****  * removed!
 159:str_merge.c   ****  * removed!
 160:str_merge.c   ****  *
 161:str_merge.c   ****  * removed!
 162:str_merge.c   ****  * removed!
 163:str_merge.c   ****  * removed!
 164:str_merge.c   ****  *
 165:str_merge.c   ****  * removed!
 166:str_merge.c   ****  * removed!
 167:str_merge.c   ****  * removed!
 168:str_merge.c   ****  *
 169:str_merge.c   ****  * removed!
 170:str_merge.c   ****  * removed!
 171:str_merge.c   ****  * removed!
 172:str_merge.c   ****  *
 173:str_merge.c   ****  * removed!
 174:str_merge.c   ****  * removed!
 175:str_merge.c   ****  * removed!
 176:str_merge.c   ****  *
 177:str_merge.c   ****  * removed!
 178:str_merge.c   ****  * removed!
 179:str_merge.c   ****  * removed!
 180:str_merge.c   ****  *
 181:str_merge.c   ****  * removed!
 182:str_merge.c   ****  * removed!
 183:str_merge.c   ****  * removed!
 184:str_merge.c   ****  *
 185:str_merge.c   ****  * removed!
 186:str_merge.c   ****  * removed!
 187:str_merge.c   ****  * removed!
 188:str_merge.c   ****  *
 189:str_merge.c   ****  * removed!
 190:str_merge.c   ****  * removed!
 191:str_merge.c   ****  * removed!
 192:str_merge.c   ****  *
 193:str_merge.c   ****  * removed!
 194:str_merge.c   ****  * removed!
 195:str_merge.c   ****  * removed!
 196:str_merge.c   ****  *
 197:str_merge.c   ****  * removed!
 198:str_merge.c   ****  * removed!
 199:str_merge.c   ****  * removed!
 200:str_merge.c   ****  *
 201:str_merge.c   ****  * removed!
 202:str_merge.c   ****  * removed!
 203:str_merge.c   ****  * removed!
 204:str_merge.c   ****  *
 205:str_merge.c   ****  * removed!
 206:str_merge.c   ****  * removed!
 207:str_merge.c   ****  * removed!
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 5


 208:str_merge.c   ****  *
 209:str_merge.c   ****  * removed!
 210:str_merge.c   ****  * removed!
 211:str_merge.c   ****  * removed!
 212:str_merge.c   ****  *
 213:str_merge.c   ****  * removed!
 214:str_merge.c   ****  * removed!
 215:str_merge.c   ****  * removed!
 216:str_merge.c   ****  *
 217:str_merge.c   ****  * removed!
 218:str_merge.c   ****  * removed!
 219:str_merge.c   ****  * removed!
 220:str_merge.c   ****  *
 221:str_merge.c   ****  * removed!
 222:str_merge.c   ****  * removed!
 223:str_merge.c   ****  * removed!
 224:str_merge.c   ****  *
 225:str_merge.c   ****  * removed!
 226:str_merge.c   ****  * removed!
 227:str_merge.c   ****  * removed!
 228:str_merge.c   ****  *
 229:str_merge.c   ****  * removed!
 230:str_merge.c   ****  * removed!
 231:str_merge.c   ****  * removed!
 232:str_merge.c   ****  *
 233:str_merge.c   ****  * removed!
 234:str_merge.c   ****  * removed!
 235:str_merge.c   ****  * removed!
 236:str_merge.c   ****  *
 237:str_merge.c   ****  * removed!
 238:str_merge.c   ****  * removed!
 239:str_merge.c   ****  * removed!
 240:str_merge.c   ****  *
 241:str_merge.c   ****  * removed!
 242:str_merge.c   ****  * removed!
 243:str_merge.c   ****  * removed!
 244:str_merge.c   ****  *
 245:str_merge.c   ****  * removed!
 246:str_merge.c   ****  * removed!
 247:str_merge.c   ****  * removed!
 248:str_merge.c   ****  *
 249:str_merge.c   ****  * removed!
 250:str_merge.c   ****  * removed!
 251:str_merge.c   ****  * removed!
 252:str_merge.c   ****  *
 253:str_merge.c   ****  * removed!
 254:str_merge.c   ****  * removed!
 255:str_merge.c   ****  * removed!
 256:str_merge.c   ****  *
 257:str_merge.c   ****  * removed!
 258:str_merge.c   ****  * removed!
 259:str_merge.c   ****  * removed!
 260:str_merge.c   ****  *
 261:str_merge.c   ****  * removed!
 262:str_merge.c   ****  * removed!
 263:str_merge.c   ****  * removed!
 264:str_merge.c   ****  *
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 6


 265:str_merge.c   ****  * removed!
 266:str_merge.c   ****  * removed!
 267:str_merge.c   ****  * removed!
 268:str_merge.c   ****  *
 269:str_merge.c   ****  *------------------------------------------------------------------------------
 270:str_merge.c   ****  * Upper this line, this part is controlled by PVCS VM. DO NOT MODIFY!! 
 271:str_merge.c   ****  *==============================================================================
 272:str_merge.c   ****  *******************************************************************************/
 273:str_merge.c   **** 
 274:str_merge.c   **** #include <stdio.h>
 275:str_merge.c   **** #include <stdlib.h>
 276:str_merge.c   **** #include <string.h>
 277:str_merge.c   **** #include <malloc.h>
 278:str_merge.c   **** #include <tchar.h>
 279:str_merge.c   **** #include <unistd.h>
 280:str_merge.c   **** 
 281:str_merge.c   **** #include "MMI_features.h"
 282:str_merge.c   **** #include "MMIDataType.h"
 283:str_merge.c   **** #include "FontRes.h"
 284:str_merge.c   **** #include "CustDataRes.h"
 285:str_merge.c   **** #include "CustResDef.h"
 286:str_merge.c   **** 
 287:str_merge.c   **** #include "FontDcl.h"
 288:str_merge.c   **** #include "str_merge_public.h"
 289:str_merge.c   **** #include "ResgenLogCAPI.h"
 290:str_merge.c   **** #include "ResgenCatUtilCAPI.h"
 291:str_merge.c   **** // Global Configuration of MMIResource Compression
 292:str_merge.c   **** // You can config the compression in this header file
 293:str_merge.c   **** #include "ResCompressConfig.h"
 294:str_merge.c   **** 
 295:str_merge.c   **** 
 296:str_merge.c   **** /*
 297:str_merge.c   **** To define the following macro variable to enable/disable function as following:
 298:str_merge.c   **** (1) MEM_REF_LIST_OPT: To reduce the REF LIST buffer memory requirement 
 299:str_merge.c   **** (2) STR_MERGE_DEBUG: Show extra debuging infomation
 300:str_merge.c   **** (3) DEBUG_REF_LIST_DUMP: dump ref list processed to the following path :
 301:str_merge.c   ****      debug\ref_all_dump.txt: ref_all loaded in memory
 302:str_merge.c   ****      debug\ref_all_merged_dump.txt : processing result of ref_all in memory
 303:str_merge.c   **** (4) MEM_LIST_INFO_STATS: Show length statistic information of string lines in REF LIST file
 304:str_merge.c   **** */
 305:str_merge.c   **** 
 306:str_merge.c   **** 
 307:str_merge.c   **** /* Memory optimization for loading ref list */
 308:str_merge.c   **** #define MEM_REF_LIST_OPT
 309:str_merge.c   **** 
 310:str_merge.c   **** 
 311:str_merge.c   **** /* Statistic of memory usage of string lines in ref lists */
 312:str_merge.c   **** /* #define MEM_LIST_INFO_STATS */
 313:str_merge.c   **** 
 314:str_merge.c   **** /* Show debug message and dump processed ref list to files*/
 315:str_merge.c   **** #define STR_MERGE_DEBUG
 316:str_merge.c   **** 
 317:str_merge.c   **** #define STRMERG_TAG       "STR_MERGE"
 318:str_merge.c   **** #define STRMERG_SUB_TAG_MEM     "[MEM]"
 319:str_merge.c   **** 
 320:str_merge.c   **** #define STRMERG_LOG_D(format, args...) RES_LOG_D((STRMERG_TAG), (format) , ##args)
 321:str_merge.c   **** #define STRMERG_LOG_V(format, args...) RES_LOG_V((STRMERG_TAG), (format) , ##args)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 7


 322:str_merge.c   **** #define STRMERG_LOG_W(format, args...) RES_LOG_W((STRMERG_TAG), (format) , ##args)
 323:str_merge.c   **** #define STRMERG_LOG_E(format, args...) RES_LOG_E((STRMERG_TAG), (format) , ##args)
 324:str_merge.c   **** 
 325:str_merge.c   **** #define STRMERG_WLOG_D(format, args...) RES_WLOG_D((STRMERG_TAG), (format) , ##args)
 326:str_merge.c   **** #define STRMERG_WLOG_V(format, args...) RES_WLOG_V((STRMERG_TAG), (format) , ##args)
 327:str_merge.c   **** #define STRMERG_WLOG_W(format, args...) RES_WLOG_W((STRMERG_TAG), (format) , ##args)
 328:str_merge.c   **** #define STRMERG_WLOG_E(format, args...) RES_WLOG_E((STRMERG_TAG), (format) , ##args)
 329:str_merge.c   **** 
 330:str_merge.c   **** #ifdef MEM_REF_LIST_OPT
 331:str_merge.c   **** #define REF_LIST_SIZE_INCREMENT 500
 332:str_merge.c   **** #define REF_LIST_DEFAULT_SIZE 15000
 333:str_merge.c   **** #endif /*MEM_REF_LIST_OPT*/
 334:str_merge.c   **** 
 335:str_merge.c   **** #ifdef MEM_LIST_INFO_STATS
 336:str_merge.c   **** #define MEM_STATS_ITEM_MAX 5
 337:str_merge.c   **** #define MEM_STATS_ITEM_LENGTH 5000
 338:str_merge.c   **** #endif /*MEM_LIST_INFO_STATS*/
 339:str_merge.c   **** 
 340:str_merge.c   **** #ifdef DEBUG_REF_LIST_DUMP
 341:str_merge.c   **** #define REFLISST_DUMP_FILE_BEFOR_MERGE   "..\\..\\Customer\\ResGenerator\\debug\\ref_all_dump.txt"
 342:str_merge.c   **** #define REFLISST_DUMP_FILE_AFTER_MERGE   "..\\..\\Customer\\ResGenerator\\debug\\ref_all_merged_dum
 343:str_merge.c   **** #endif /* DEBUG_REF_LIST_DUMP */
 344:str_merge.c   **** 
 345:str_merge.c   **** 
 346:str_merge.c   **** #ifdef DEVELOPER_BUILD_FIRST_PASS
 347:str_merge.c   **** #define ASSERT(expr) {if(!(expr)) {while(1);}else {}}
 348:str_merge.c   **** #endif
 349:str_merge.c   **** 
 350:str_merge.c   **** #define STR_RESOURCE_MAX_SYMBOL_LEN 128
 351:str_merge.c   **** 
 352:str_merge.c   **** #if defined(__MMI_RESOURCE_STR_ZLIB_COMPRESS__)
 353:str_merge.c   **** #include "Zlib.h"
 354:str_merge.c   **** #include "StringCompressionBufferCAPI.h"
 355:str_merge.c   **** #endif
 356:str_merge.c   **** 
 357:str_merge.c   **** /* #define __TIME_CONSUME for calculating execution time */
 358:str_merge.c   **** #ifdef __TIME_CONSUME
 359:str_merge.c   **** #include <time.h>
 360:str_merge.c   **** #endif
 361:str_merge.c   **** 
 362:str_merge.c   **** /* max string length for each language */
 363:str_merge.c   **** #define MAX_LENGTH      512
 364:str_merge.c   **** /* string length for temp buffer */
 365:str_merge.c   **** #define TMP_BUF_LENGTH  1024
 366:str_merge.c   **** 
 367:str_merge.c   **** #define ref_file        "..\\custresource\\ref_list.txt"
 368:str_merge.c   **** #ifndef __OPTR_NONE__
 369:str_merge.c   **** /* max SSC length */
 370:str_merge.c   **** #define SSC_LENGTH      16
 371:str_merge.c   **** /* ref_list.txt customized for operator */
 372:str_merge.c   **** #ifdef __OP_TECH_REL__
 373:str_merge.c   **** /* under construction !*/
 374:str_merge.c   **** #else
 375:str_merge.c   **** #define optr_ref_file   "operator_ref_list.txt"
 376:str_merge.c   **** #endif
 377:str_merge.c   **** #endif
 378:str_merge.c   **** 
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 8


 379:str_merge.c   **** /* this marker indicates using English as string translation */
 380:str_merge.c   **** #define NO_TRANSLATION_MARKER   19
 381:str_merge.c   **** 
 382:str_merge.c   **** 
 383:str_merge.c   **** /* Retry count of memory allocation */
 384:str_merge.c   **** #define MEM_RETRY_COUNT_MAX 15
 385:str_merge.c   **** 
 386:str_merge.c   **** /* Time interval of memory allocation retry*/
 387:str_merge.c   **** #define MEM_RETRY_TIME_INTERVAL_SEC 60
 388:str_merge.c   **** 
 389:str_merge.c   **** 
 390:str_merge.c   **** #ifdef __MMI_RESOURCE_ENFB_SUPPORT__
 391:str_merge.c   **** #define ENFB_STRING_DATA_FILENAME  "..\\..\\Customer\\CustResource\\CustENFBStrData"
 392:str_merge.c   **** #define ENFB_STRING_HEADER_FILENAME  "..\\..\\Customer\\CustResource\\CustENFBStr.h"
 393:str_merge.c   **** #endif /* __MMI_RESOURCE_ENFB_SUPPORT__ */
 394:str_merge.c   **** 
 395:str_merge.c   **** 
 396:str_merge.c   **** 
 397:str_merge.c   **** #ifdef MEM_REF_LIST_OPT
 398:str_merge.c   **** 
 399:str_merge.c   **** typedef struct RefListItem
 400:str_merge.c   **** {
 401:str_merge.c   ****     /* String line */
 402:str_merge.c   ****     wchar_t *ItemData;
 403:str_merge.c   ****     /* Data Length in bytes */
 404:str_merge.c   ****     int ItemSize;
 405:str_merge.c   **** } RefListItem;
 406:str_merge.c   **** 
 407:str_merge.c   **** typedef struct RefList
 408:str_merge.c   **** {
 409:str_merge.c   ****     /* List items */
 410:str_merge.c   ****     RefListItem** ListItems;
 411:str_merge.c   ****     /* Length of List items in elements*/
 412:str_merge.c   ****     int ListLength;
 413:str_merge.c   ****     /* Capacity of List items in elements*/
 414:str_merge.c   ****     int Size;
 415:str_merge.c   ****     /* Allocated memory for the content in bytes*/
 416:str_merge.c   ****     unsigned long AllocatedSize;
 417:str_merge.c   **** } RefList;
 418:str_merge.c   **** 
 419:str_merge.c   **** #endif /*MEM_REF_LIST_OPT*/
 420:str_merge.c   **** 
 421:str_merge.c   **** typedef struct StrRes
 422:str_merge.c   **** {
 423:str_merge.c   ****     wchar_t **Str;      /* pointer array of lists to store Strings */
 424:str_merge.c   ****     int *StrRef;        /* pointers of Reference id in hash table of each string */
 425:str_merge.c   ****     int MaxID;          /* Maximum number of string ids */
 426:str_merge.c   ****     int MaxNum;         /* Maximum number of strings */
 427:str_merge.c   **** #ifndef __MMI_RESOURCE_ENFB_SUPPORT__
 428:str_merge.c   ****     char *is_dup;       /* flag to specify whether this string is duplicated */    
 429:str_merge.c   **** #endif
 430:str_merge.c   ****     int TotalLength;
 431:str_merge.c   **** } StrRes;
 432:str_merge.c   **** 
 433:str_merge.c   **** #ifndef __MMI_RESOURCE_ENFB_SUPPORT__
 434:str_merge.c   **** typedef struct DupStrRes
 435:str_merge.c   **** {
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 9


 436:str_merge.c   ****     wchar_t **Str;      /* pointer array of lists to store Strings */
 437:str_merge.c   ****     int MaxNum;         /* Maximum number of duplicated strings in different language */        
 438:str_merge.c   **** } DupStrRes;
 439:str_merge.c   **** #endif /* __MMI_RESOURCE_ENFB_SUPPORT__ */
 440:str_merge.c   **** 
 441:str_merge.c   **** typedef struct StrResSet
 442:str_merge.c   **** {
 443:str_merge.c   ****     struct StrRes *strres;
 444:str_merge.c   **** #ifndef __MMI_RESOURCE_ENFB_SUPPORT__
 445:str_merge.c   ****     struct DupStrRes *strres_dup;    /* field for duplicated string resource */
 446:str_merge.c   **** #endif
 447:str_merge.c   ****     int iLang;
 448:str_merge.c   **** } StrResSet;
 449:str_merge.c   **** 
 450:str_merge.c   **** typedef struct HashItem
 451:str_merge.c   **** {
 452:str_merge.c   ****     int pointer;        /* index in string array */
 453:str_merge.c   ****     struct HashItem *next;
 454:str_merge.c   **** } HashItem;
 455:str_merge.c   **** 
 456:str_merge.c   **** extern const U8 mmi_res_zip_language[MAX_LANGUAGES+1];
 457:str_merge.c   **** extern U8 StrIsPopulate[MAX_STRING_MAP_SIZE];
 458:str_merge.c   **** extern U8 *StrEnum[MAX_STRING_MAP_SIZE];
 459:str_merge.c   **** extern U8 *Str[MAX_STRING_MAP_SIZE];
 460:str_merge.c   **** extern U16 CurrMaxStringId;
 461:str_merge.c   **** 
 462:str_merge.c   **** typedef struct StrIDNode{
 463:str_merge.c   ****     wchar_t *str; /* we will not malloc for this string */
 464:str_merge.c   ****     U16 id;
 465:str_merge.c   ****     struct StrIDNode *next;
 466:str_merge.c   **** }StrIDNode;
 467:str_merge.c   **** 
 468:str_merge.c   **** typedef struct StrHashTable{
 469:str_merge.c   ****     int table_size;
 470:str_merge.c   ****     StrIDNode **table;
 471:str_merge.c   **** }StrHashTable;
 472:str_merge.c   **** 
 473:str_merge.c   **** 
 474:str_merge.c   **** #ifndef __MMI_RESOURCE_ENFB_SUPPORT__
 475:str_merge.c   **** #define FIXED_INVALID_FLAG    0
 476:str_merge.c   **** #define NO_TRANSLATE_FLAG     1
 477:str_merge.c   **** #define TRANSLATE_FLAG        2
 478:str_merge.c   **** 
 479:str_merge.c   **** /* fixed string log file */
 480:str_merge.c   **** #define FIXED_STRING_LOG    "..\\..\\Customer\\ResGenerator\\debug\\no_translate_string.txt"
 481:str_merge.c   **** 
 482:str_merge.c   **** typedef struct FixedID{
 483:str_merge.c   ****     U16 id_count;                          /* fixed id count */
 484:str_merge.c   ****     U8 *fixed_id_flag; /* flag to indicate if id is fixed language or not */
 485:str_merge.c   ****     StrHashTable *enum_id_tb;               /* ID_Enum & ID pair */
 486:str_merge.c   ****     StrHashTable *str_id_tb;                /* str & ID pair */
 487:str_merge.c   **** }FixedID;
 488:str_merge.c   **** 
 489:str_merge.c   **** typedef struct FixedResult{
 490:str_merge.c   ****     U16 nTotalStrRes;
 491:str_merge.c   ****     MMI_BOOL is16bit;
 492:str_merge.c   **** #ifdef __MMI_RESOURCE_STR_ZLIB_COMPRESS__
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 10


 493:str_merge.c   ****     U32 nResSize;
 494:str_merge.c   ****     U32 nResZipSize;
 495:str_merge.c   ****     U32 nMapSize;
 496:str_merge.c   ****     U32 nMapZipSize;
 497:str_merge.c   **** #endif /* __MMI_RESOURCE_STR_ZLIB_COMPRESS__ */
 498:str_merge.c   **** }FixedResult; /* result data structure */
 499:str_merge.c   **** 
 500:str_merge.c   **** /* extern U16 CurrMaxStringId */
 501:str_merge.c   **** U16 CurrMaxTransStrId = 0; /* total count of populated string id with translation */
 502:str_merge.c   **** 
 503:str_merge.c   **** /* fixed id data */
 504:str_merge.c   **** FixedID fixed_id;
 505:str_merge.c   **** 
 506:str_merge.c   **** /* fixed id parse result */
 507:str_merge.c   **** FixedResult fixed_result;
 508:str_merge.c   **** 
 509:str_merge.c   **** /* record string merge result */
 510:str_merge.c   **** 
 511:str_merge.c   **** static int str_merge_err_code = STRMERGE_NO_ERR;
 512:str_merge.c   **** static wchar_t str_merge_err_msg[STRMERGE_ERR_MSG_LEN_MAX+1] = L"";
 513:str_merge.c   **** 
 514:str_merge.c   **** void str_merge_set_err(int err_code, wchar_t * msg){
 387              	LM1:
 388 0000 55       		pushl	%ebp
 389 0001 89E5     		movl	%esp, %ebp
 390 0003 83EC18   		subl	$24, %esp
 515:str_merge.c   **** 	str_merge_err_code = err_code;
 392              	LM2:
 393 0006 8B4508   		movl	8(%ebp), %eax
 394 0009 A3080000 		movl	%eax, _str_merge_err_code
 394      00
 516:str_merge.c   **** 	wcsncpy(str_merge_err_msg,msg, STRMERGE_ERR_MSG_LEN_MAX);
 396              	LM3:
 397 000e C7442408 		movl	$200, 8(%esp)
 397      C8000000 
 398 0016 8B450C   		movl	12(%ebp), %eax
 399 0019 89442404 		movl	%eax, 4(%esp)
 400 001d C7042400 		movl	$_str_merge_err_msg, (%esp)
 400      000000
 401 0024 E8000000 		call	_wcsncpy
 401      00
 517:str_merge.c   **** }
 403              	LM4:
 404 0029 C9       		leave
 405 002a C3       		ret
 406              	Lscope0:
 410              	.globl _str_merge_get_err
 412              	_str_merge_get_err:
 518:str_merge.c   **** 
 519:str_merge.c   **** int str_merge_get_err(wchar_t ** msg){
 414              	LM5:
 415 002b 55       		pushl	%ebp
 416 002c 89E5     		movl	%esp, %ebp
 520:str_merge.c   **** 	if(str_merge_err_code != STRMERGE_NO_ERR){
 418              	LM6:
 419 002e 833D0800 		cmpl	$0, _str_merge_err_code
 419      000000
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 11


 420 0035 7409     		je	L19
 521:str_merge.c   **** 		*msg = str_merge_err_msg;
 422              	LM7:
 423 0037 8B4508   		movl	8(%ebp), %eax
 424 003a C7000000 		movl	$_str_merge_err_msg, (%eax)
 424      0000
 425              	L19:
 522:str_merge.c   **** 	}
 523:str_merge.c   **** 	return str_merge_err_code;
 427              	LM8:
 428 0040 A1080000 		movl	_str_merge_err_code, %eax
 428      00
 524:str_merge.c   **** }
 430              	LM9:
 431 0045 5D       		popl	%ebp
 432 0046 C3       		ret
 433              	Lscope1:
 435 0047 90       		.align 2
 436              	LC0:
 437 0048 09000000 		.ascii "\11\0\0\0"
 438              		.data
 439 0192 0000     		.align 4
 440              	_DELIMETER:
 441 0194 48000000 		.long	LC0
 442              		.text
 443              		.align 2
 444              	LC1:
 445 004c 0A000000 		.ascii "\12\0\0\0"
 446              		.data
 447              		.align 4
 448              	_EOS:
 449 0198 4C000000 		.long	LC1
 450              	.lcomm _StrID,16
 451              	.lcomm _g_line_buf_length,16
 452              	.lcomm _g_line_buf_act_length,16
 453              	.lcomm _ref_all_list,16
 454              	.lcomm _ref_ssc,16
 455              	.lcomm _ref_tmp,16
 456              	.lcomm _nLang,16
 457              	.lcomm _filter_ref_ssc,16
 458              	.lcomm _nUsedLang,16
 459              	.lcomm _line_offset,16
 460 019c 00000000 		.text
 464              	_CreateHashTable:
 525:str_merge.c   **** 
 526:str_merge.c   **** #ifdef MEM_REF_LIST_OPT
 527:str_merge.c   **** /*****************************************************************************
 528:str_merge.c   ****  * FUNCTION
 529:str_merge.c   ****  *  CreateRefList
 530:str_merge.c   ****  * DESCRIPTION
 531:str_merge.c   ****  *  Create RefList to save variable size items in a ref list 
 532:str_merge.c   ****  * PARAMETERS
 533:str_merge.c   ****  *  listSize: the list size in elements 
 534:str_merge.c   ****  * RETURNS
 535:str_merge.c   ****  *  return RefList object with size listSize
 536:str_merge.c   ****  *****************************************************************************/
 537:str_merge.c   ****  
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 12


 538:str_merge.c   **** static RefList* CreateRefList(int listSize);
 539:str_merge.c   **** 
 540:str_merge.c   **** /*****************************************************************************
 541:str_merge.c   ****  * FUNCTION
 542:str_merge.c   ****  *  DeleteRefList
 543:str_merge.c   ****  * DESCRIPTION
 544:str_merge.c   ****  *  To delete a RefList obecjt. This operator will free all the list items and
 545:str_merge.c   ****  *  their datas automatically, 
 546:str_merge.c   ****  * PARAMETERS
 547:str_merge.c   ****  *  list: the Ref List to be destroyed
 548:str_merge.c   ****  * RETURNS
 549:str_merge.c   ****  *   NA
 550:str_merge.c   ****  *****************************************************************************/
 551:str_merge.c   **** static void DeleteRefList(RefList * list);
 552:str_merge.c   **** 
 553:str_merge.c   **** 
 554:str_merge.c   **** /*****************************************************************************
 555:str_merge.c   ****  * FUNCTION
 556:str_merge.c   ****  *  CreateListItemFromStr
 557:str_merge.c   ****  * DESCRIPTION
 558:str_merge.c   ****  *  Create a ref item object with a string line with cloning approach.
 559:str_merge.c   ****  * PARAMETERS
 560:str_merge.c   ****  *  str: the string content used to create the ref list item object.
 561:str_merge.c   ****  * RETURNS
 562:str_merge.c   ****  *   A created RefListItem object, return NULL if the object creation failed
 563:str_merge.c   ****  *****************************************************************************/
 564:str_merge.c   **** /* Create a ref item object with a string line */
 565:str_merge.c   **** static RefListItem* CreateListItemFromStr(wchar_t * str);
 566:str_merge.c   **** 
 567:str_merge.c   **** /*****************************************************************************
 568:str_merge.c   ****  * FUNCTION
 569:str_merge.c   ****  *  AddRefListItem
 570:str_merge.c   ****  * DESCRIPTION
 571:str_merge.c   ****  *  Add an item form a ref list
 572:str_merge.c   ****  * PARAMETERS
 573:str_merge.c   ****  *  list: ref list object
 574:str_merge.c   ****  *  item: the ref list item to be added to ref list
 575:str_merge.c   ****  * RETURNS
 576:str_merge.c   ****  *   An int value indicated the position of the item in the ref list. Return
 577:str_merge.c   ****  *   -1 indicate that the operation is failed
 578:str_merge.c   ****  *****************************************************************************/
 579:str_merge.c   **** static int AddRefListItem(RefList * list, RefListItem* item);
 580:str_merge.c   **** 
 581:str_merge.c   **** /*****************************************************************************
 582:str_merge.c   ****  * FUNCTION
 583:str_merge.c   ****  *  GetRefListItem
 584:str_merge.c   ****  * DESCRIPTION
 585:str_merge.c   ****  *  Get an item from a ref list
 586:str_merge.c   ****  * PARAMETERS
 587:str_merge.c   ****  *  list: ref list object
 588:str_merge.c   ****  *  index: the posotion of the item in this ref list
 589:str_merge.c   ****  * RETURNS
 590:str_merge.c   ****  *   Return the item obecjt in the position assigned; return NULL if it is 
 591:str_merge.c   ****  *   not found
 592:str_merge.c   ****  *****************************************************************************/
 593:str_merge.c   **** static RefListItem* GetRefListItem(RefList * list, int index);
 594:str_merge.c   **** 
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 13


 595:str_merge.c   **** /*****************************************************************************
 596:str_merge.c   ****  * FUNCTION
 597:str_merge.c   ****  *  SetRefListItem
 598:str_merge.c   ****  * DESCRIPTION
 599:str_merge.c   ****  *  Set a list item, the old item is free by this function automatically
 600:str_merge.c   ****  * PARAMETERS
 601:str_merge.c   ****  *  list: ref list object
 602:str_merge.c   ****  *  index: the specified posotion of the item in this ref list
 603:str_merge.c   ****  *  item: the item to be set to the specified position
 604:str_merge.c   ****  * RETURNS
 605:str_merge.c   ****  *   0 means that the set operation is successful or the operation is 
 606:str_merge.c   ****  *   failed
 607:str_merge.c   ****  *****************************************************************************/
 608:str_merge.c   **** #endif /*MEM_REF_LIST_OPT*/
 609:str_merge.c   **** 
 610:str_merge.c   **** 
 611:str_merge.c   **** #ifdef STR_MERGE_DEBUG
 612:str_merge.c   **** #ifndef MEM_REF_LIST_OPT
 613:str_merge.c   **** /*****************************************************************************
 614:str_merge.c   ****  * FUNCTION
 615:str_merge.c   ****  *  DumpRefList
 616:str_merge.c   ****  * DESCRIPTION
 617:str_merge.c   ****  *  Dump the old style ref list (array style) to a speficied file
 618:str_merge.c   ****  * PARAMETERS
 619:str_merge.c   ****  *  filename: the file name of the ref list dump
 620:str_merge.c   ****  *  list: ref list array
 621:str_merge.c   ****  *  ItemSize: the array element size in bytes
 622:str_merge.c   ****  *  count: the total count of the elements
 623:str_merge.c   ****  * RETURNS
 624:str_merge.c   ****  *   NA
 625:str_merge.c   ****  *****************************************************************************/
 626:str_merge.c   **** 
 627:str_merge.c   **** static void DumpRefList(const char* filename, wchar_t *list,const int ItemSize, int count);
 628:str_merge.c   **** 
 629:str_merge.c   **** #else /*MEM_REF_LIST_OPT*/
 630:str_merge.c   **** 
 631:str_merge.c   **** /*****************************************************************************
 632:str_merge.c   ****  * FUNCTION
 633:str_merge.c   ****  *  DumpRefList
 634:str_merge.c   ****  * DESCRIPTION
 635:str_merge.c   ****  *  Dump the ref list to a speficied file
 636:str_merge.c   ****  * PARAMETERS
 637:str_merge.c   ****  *  filename: the file name of the ref list dump
 638:str_merge.c   ****  *  list: ref list object
 639:str_merge.c   ****  * RETURNS
 640:str_merge.c   ****  *   NA
 641:str_merge.c   ****  *****************************************************************************/
 642:str_merge.c   **** static void DumpRefList(const char* filename, RefList *list);
 643:str_merge.c   **** 
 644:str_merge.c   **** #endif /*MEM_REF_LIST_OPT*/
 645:str_merge.c   **** #endif /* STR_MERGE_DEBUG */
 646:str_merge.c   **** 
 647:str_merge.c   **** 
 648:str_merge.c   **** 
 649:str_merge.c   **** /* fixed string main function */
 650:str_merge.c   **** static int generate_fixed_str(FILE *res, FILE *map, FILE * resMeta, FILE * mapMeta,FixedID *fixed);
 651:str_merge.c   **** 
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 14


 652:str_merge.c   **** static int init_fixed_id(FixedID *fixed, int table_size);
 653:str_merge.c   **** static int generate_enum_hash(StrHashTable *table, U8 *isPop, wchar_t *str[]);
 654:str_merge.c   **** static int write_fixed_str(FILE *res, FILE *map, FILE *resMeta, FILE *mapMeta,U8 *s, int pos, int *
 655:str_merge.c   **** static int write_fixed_str_offset(FILE *res, FILE *map, FILE *resMeta, FILE *mapMeta, U8 *s, int po
 656:str_merge.c   **** static int write_fixed_offset(FILE *res, FILE *map, FILE* resMeta, FILE *mapMeta, int pos, int *off
 657:str_merge.c   **** static MMI_BOOL write_fixed_string_log(FILE *log, U16 id, U16 dup_id);
 658:str_merge.c   **** static int set_fixed_str_flag(FixedID *fixed, wchar_t* id);
 659:str_merge.c   **** #endif /* __MMI_RESOURCE_ENFB_SUPPORT__ */
 660:str_merge.c   **** 
 661:str_merge.c   **** static int generate_strmap_search(FILE *res, FILE *resMeta);
 662:str_merge.c   **** 
 663:str_merge.c   **** #ifndef __MMI_RESOURCE_ENFB_SUPPORT__
 664:str_merge.c   **** static MMI_BOOL generate_language_list_array(FILE *res, StrRes *strres, DupStrRes *strres_dup, int 
 665:str_merge.c   **** #else
 666:str_merge.c   **** static MMI_BOOL generate_language_list_array(FILE *res, StrRes *strres, int num_map_search,U32 *res
 667:str_merge.c   **** #endif /* __MMI_RESOURCE_ENFB_SUPPORT__ */
 668:str_merge.c   **** /* get fontres data */
 669:str_merge.c   **** extern const U16 mtk_gMaxDeployedLangs;
 670:str_merge.c   **** extern const sLanguageDetails mtk_gLanguageArray[];
 671:str_merge.c   **** 
 672:str_merge.c   **** static const wchar_t *DELIMETER = L"\t";
 673:str_merge.c   **** static const wchar_t *EOS = L"\n";
 674:str_merge.c   **** 
 675:str_merge.c   **** static int *mtk_gLanguageFlag;
 676:str_merge.c   **** 
 677:str_merge.c   **** static MMI_BOOL *is16bit;
 678:str_merge.c   **** static U16 StrLine[MAX_STRING_MAP_SIZE];
 679:str_merge.c   **** static U16 StrSize[MAX_STRING_MAP_SIZE];
 680:str_merge.c   **** static U16 *StrID = NULL;
 681:str_merge.c   **** static U32 g_line_buf_length = 0;
 682:str_merge.c   **** /*only include populate languages length*/
 683:str_merge.c   **** static U32 g_line_buf_act_length = 0;
 684:str_merge.c   **** 
 685:str_merge.c   **** #ifndef MEM_REF_LIST_OPT
 686:str_merge.c   **** static wchar_t *ref_all = NULL;
 687:str_merge.c   **** #else  /*MEM_REF_LIST_OPT*/
 688:str_merge.c   **** /* Use vector to reduce the memory size of ref list buffer*/
 689:str_merge.c   **** static RefList *ref_all_list = NULL;
 690:str_merge.c   **** #endif /*MEM_REF_LIST_OPT*/
 691:str_merge.c   **** 
 692:str_merge.c   **** static wchar_t *ref_ssc = NULL;
 693:str_merge.c   **** static wchar_t *ref_tmp = NULL;
 694:str_merge.c   **** static int nLang = 0;
 695:str_merge.c   **** 
 696:str_merge.c   **** /*filtered ref ssc*/
 697:str_merge.c   **** static wchar_t *filter_ref_ssc = NULL; 
 698:str_merge.c   **** #ifndef __OPTR_NONE__
 699:str_merge.c   **** static wchar_t *optr_filter_ref_ssc = NULL;
 700:str_merge.c   **** #endif /*__OPTR_NONE__*/
 701:str_merge.c   **** 
 702:str_merge.c   **** 
 703:str_merge.c   **** /*deployed language*/
 704:str_merge.c   **** static U16 nUsedLang = 0;
 705:str_merge.c   **** static U16 *line_offset = NULL;
 706:str_merge.c   **** 
 707:str_merge.c   **** 
 708:str_merge.c   **** 
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 15


 709:str_merge.c   **** static int ifLanguageUsed(wchar_t *ssc_ref);
 710:str_merge.c   **** 
 711:str_merge.c   **** 
 712:str_merge.c   **** 
 713:str_merge.c   **** #ifdef __MMI_RESOURCE_STR_ZLIB_COMPRESS__
 714:str_merge.c   **** 
 715:str_merge.c   **** static void launchStrDeCompressionBufferCreator(StrRes *strres, DupStrRes *strres_dup,U32 *res_size
 716:str_merge.c   ****     int i = 0;
 717:str_merge.c   ****     for (i = 0; i < mtk_gMaxDeployedLangs; i++)
 718:str_merge.c   ****     {
 719:str_merge.c   ****         int old_i = i;
 720:str_merge.c   ****         if (mtk_gLanguageFlag[i] == 0)
 721:str_merge.c   ****         {
 722:str_merge.c   ****             i = 0;
 723:str_merge.c   ****         }
 724:str_merge.c   ****         if(mmi_res_zip_language[i] == 1){
 725:str_merge.c   ****             StrDeCompressBufAddStrBuf(res_size[i], map_size[i], is16bit[i]);
 726:str_merge.c   ****         }
 727:str_merge.c   ****         i = old_i;
 728:str_merge.c   ****     }
 729:str_merge.c   **** 
 730:str_merge.c   ****     if (mmi_res_zip_language[MAX_LANGUAGES] == 1){
 731:str_merge.c   ****         // StrDeCompressionSetDupBuffer(int resSize);
 732:str_merge.c   ****         if (strres_dup->MaxNum > 0)
 733:str_merge.c   ****         {
 734:str_merge.c   **** 
 735:str_merge.c   ****             StrDeCompressBufSetDupStrBuf(res_size[511]);
 736:str_merge.c   ****         }
 737:str_merge.c   ****         else
 738:str_merge.c   ****         {
 739:str_merge.c   ****             StrDeCompressBufSetDupStrBuf(0);
 740:str_merge.c   ****         }
 741:str_merge.c   ****     }
 742:str_merge.c   ****     /* fixed string information */
 743:str_merge.c   ****     if(fixed_id.id_count > 0)
 744:str_merge.c   ****     {
 745:str_merge.c   ****         StrDeCompressBufSetFixedStrBuf(fixed_result.nResSize,
 746:str_merge.c   ****             fixed_result.nMapSize,
 747:str_merge.c   ****             fixed_result.is16bit);
 748:str_merge.c   ****     }else{
 749:str_merge.c   **** 
 750:str_merge.c   ****         StrDeCompressBufSetFixedStrBuf(0, 0, 0);
 751:str_merge.c   ****     }
 752:str_merge.c   **** 
 753:str_merge.c   **** 
 754:str_merge.c   **** 
 755:str_merge.c   **** }
 756:str_merge.c   **** #endif
 757:str_merge.c   **** 
 758:str_merge.c   **** /* This is simple hash operation for string merge application, in order to reduce memory and improv
 759:str_merge.c   **** /*****************************************************************************
 760:str_merge.c   ****  * FUNCTION
 761:str_merge.c   ****  *  CreateHashTable
 762:str_merge.c   ****  * DESCRIPTION
 763:str_merge.c   ****  *  create a size hash table
 764:str_merge.c   ****  * PARAMETERS
 765:str_merge.c   ****  *  size    [IN] table size
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 16


 766:str_merge.c   ****  * RETURNS
 767:str_merge.c   ****  *  hash table pointer
 768:str_merge.c   ****  *****************************************************************************/
 769:str_merge.c   **** static StrHashTable* CreateHashTable(int size)
 770:str_merge.c   **** {
 466              	LM10:
 467 0050 55       		pushl	%ebp
 468 0051 89E5     		movl	%esp, %ebp
 469 0053 53       		pushl	%ebx
 470 0054 83EC14   		subl	$20, %esp
 771:str_merge.c   ****     if(size <= 0)
 472              	LM11:
 473              	LBB2:
 474 0057 837D0800 		cmpl	$0, 8(%ebp)
 475 005b 7F09     		jg	L21
 772:str_merge.c   ****     {
 773:str_merge.c   ****         return 0;
 477              	LM12:
 478 005d C745F400 		movl	$0, -12(%ebp)
 478      000000
 479 0064 EB72     		jmp	L20
 480              	L21:
 774:str_merge.c   ****     }
 775:str_merge.c   **** 
 776:str_merge.c   ****     StrHashTable *table = (StrHashTable *)malloc(sizeof(StrHashTable));
 482              	LM13:
 483 0066 C7042408 		movl	$8, (%esp)
 483      000000
 484 006d E8000000 		call	_malloc
 484      00
 485 0072 8945F8   		movl	%eax, -8(%ebp)
 777:str_merge.c   ****     if(table == 0)
 487              	LM14:
 488 0075 837DF800 		cmpl	$0, -8(%ebp)
 489 0079 7509     		jne	L22
 778:str_merge.c   ****     {
 779:str_merge.c   ****         return 0;
 491              	LM15:
 492 007b C745F400 		movl	$0, -12(%ebp)
 492      000000
 493 0082 EB54     		jmp	L20
 494              	L22:
 780:str_merge.c   ****     }
 781:str_merge.c   **** 
 782:str_merge.c   ****     table->table_size = size;
 496              	LM16:
 497 0084 8B55F8   		movl	-8(%ebp), %edx
 498 0087 8B4508   		movl	8(%ebp), %eax
 499 008a 8902     		movl	%eax, (%edx)
 783:str_merge.c   ****     table->table = (StrIDNode **)malloc(sizeof(StrIDNode *) * size);
 501              	LM17:
 502 008c 8B5DF8   		movl	-8(%ebp), %ebx
 503 008f 8B4508   		movl	8(%ebp), %eax
 504 0092 C1E002   		sall	$2, %eax
 505 0095 890424   		movl	%eax, (%esp)
 506 0098 E8000000 		call	_malloc
 506      00
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 17


 507 009d 894304   		movl	%eax, 4(%ebx)
 784:str_merge.c   ****     if(table->table == 0)
 509              	LM18:
 510 00a0 8B45F8   		movl	-8(%ebp), %eax
 511 00a3 83780400 		cmpl	$0, 4(%eax)
 512 00a7 7509     		jne	L23
 785:str_merge.c   ****     {
 786:str_merge.c   ****         return 0;
 514              	LM19:
 515 00a9 C745F400 		movl	$0, -12(%ebp)
 515      000000
 516 00b0 EB26     		jmp	L20
 517              	L23:
 787:str_merge.c   ****     }
 788:str_merge.c   **** 
 789:str_merge.c   ****     memset(table->table, 0, sizeof(StrIDNode *)*size);
 519              	LM20:
 520 00b2 8B4508   		movl	8(%ebp), %eax
 521 00b5 C1E002   		sall	$2, %eax
 522 00b8 89442408 		movl	%eax, 8(%esp)
 523 00bc C7442404 		movl	$0, 4(%esp)
 523      00000000 
 524 00c4 8B45F8   		movl	-8(%ebp), %eax
 525 00c7 8B4004   		movl	4(%eax), %eax
 526 00ca 890424   		movl	%eax, (%esp)
 527 00cd E8000000 		call	_memset
 527      00
 790:str_merge.c   **** 
 791:str_merge.c   ****     return table;
 529              	LM21:
 530 00d2 8B45F8   		movl	-8(%ebp), %eax
 531 00d5 8945F4   		movl	%eax, -12(%ebp)
 792:str_merge.c   **** }
 533              	LM22:
 534              	L20:
 535              	LBE2:
 536 00d8 8B45F4   		movl	-12(%ebp), %eax
 537 00db 83C414   		addl	$20, %esp
 538 00de 5B       		popl	%ebx
 539 00df 5D       		popl	%ebp
 540 00e0 C3       		ret
 544              	Lscope2:
 549              	_DJBHash:
 793:str_merge.c   **** 
 794:str_merge.c   **** 
 795:str_merge.c   **** /*****************************************************************************
 796:str_merge.c   ****  * FUNCTION
 797:str_merge.c   ****  *  DJBHash
 798:str_merge.c   ****  *
 799:str_merge.c   ****  * DESCRIPTION
 800:str_merge.c   ****  *  DJB hash algrithom
 801:str_merge.c   ****  *
 802:str_merge.c   ****  * PARAMETERS
 803:str_merge.c   ****  *  key    [IN] key of hash algrithm input, here is special for wchar_t type
 804:str_merge.c   ****  *
 805:str_merge.c   ****  * RETURNS
 806:str_merge.c   ****  *  hash table pointer
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 18


 807:str_merge.c   ****  *****************************************************************************/
 808:str_merge.c   **** static int DJBHash(wchar_t* key) /* DJB hash */
 809:str_merge.c   **** {
 551              	LM23:
 552 00e1 55       		pushl	%ebp
 553 00e2 89E5     		movl	%esp, %ebp
 554 00e4 83EC18   		subl	$24, %esp
 810:str_merge.c   ****     unsigned int hash = 5381;
 556              	LM24:
 557              	LBB3:
 558 00e7 C745FC05 		movl	$5381, -4(%ebp)
 558      150000
 811:str_merge.c   ****     int i = 0;
 560              	LM25:
 561 00ee C745F800 		movl	$0, -8(%ebp)
 561      000000
 812:str_merge.c   **** 
 813:str_merge.c   ****     int len = wcslen(key);
 563              	LM26:
 564 00f5 8B4508   		movl	8(%ebp), %eax
 565 00f8 890424   		movl	%eax, (%esp)
 566 00fb E8000000 		call	_wcslen
 566      00
 567 0100 8945F4   		movl	%eax, -12(%ebp)
 814:str_merge.c   **** 
 815:str_merge.c   ****     for(i = 0; i < len; ++i)
 569              	LM27:
 570 0103 C745F800 		movl	$0, -8(%ebp)
 570      000000
 571              	L25:
 572 010a 8B45F8   		movl	-8(%ebp), %eax
 573 010d 3B45F4   		cmpl	-12(%ebp), %eax
 574 0110 7C02     		jl	L28
 575 0112 EB25     		jmp	L26
 576              	L28:
 816:str_merge.c   ****     {
 817:str_merge.c   ****         hash = ((hash << 5) + hash) + key[i];
 578              	LM28:
 579 0114 8B45FC   		movl	-4(%ebp), %eax
 580 0117 C1E005   		sall	$5, %eax
 581 011a 89C1     		movl	%eax, %ecx
 582 011c 034DFC   		addl	-4(%ebp), %ecx
 583 011f 8B45F8   		movl	-8(%ebp), %eax
 584 0122 8D1400   		leal	(%eax,%eax), %edx
 585 0125 8B4508   		movl	8(%ebp), %eax
 586 0128 0FB70410 		movzwl	(%eax,%edx), %eax
 587 012c 8D0408   		leal	(%eax,%ecx), %eax
 588 012f 8945FC   		movl	%eax, -4(%ebp)
 590              	LM29:
 591 0132 8D45F8   		leal	-8(%ebp), %eax
 592 0135 FF00     		incl	(%eax)
 593 0137 EBD1     		jmp	L25
 594              	L26:
 818:str_merge.c   ****     }
 819:str_merge.c   **** 
 820:str_merge.c   ****     return 0x7fffffff & hash;
 596              	LM30:
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 19


 597 0139 8B45FC   		movl	-4(%ebp), %eax
 598 013c 25FFFFFF 		andl	$2147483647, %eax
 598      7F
 821:str_merge.c   **** }
 600              	LM31:
 601 0141 C9       		leave
 602 0142 C3       		ret
 603              	LBE3:
 609              	Lscope3:
 615              	_hash_add:
 822:str_merge.c   **** 
 823:str_merge.c   **** 
 824:str_merge.c   **** /*****************************************************************************
 825:str_merge.c   ****  * FUNCTION
 826:str_merge.c   ****  *  hash_add
 827:str_merge.c   ****  * DESCRIPTION
 828:str_merge.c   ****  *  add node to hash table
 829:str_merge.c   ****  * PARAMETERS
 830:str_merge.c   ****  *  hash    [IN/OUT] : hash table
 831:str_merge.c   ****  *  node    [IN] : node to be added into hash table
 832:str_merge.c   ****  * RETURNS
 833:str_merge.c   ****  *  int       0 means duplicate node, 1 means add success, 
 834:str_merge.c   ****  *           -1 means allocate memory fail, -2 means invalid input
 835:str_merge.c   ****  *****************************************************************************/
 836:str_merge.c   **** static int hash_add(StrHashTable* hash, StrIDNode *node)
 837:str_merge.c   **** {
 617              	LM32:
 618 0143 55       		pushl	%ebp
 619 0144 89E5     		movl	%esp, %ebp
 620 0146 83EC28   		subl	$40, %esp
 838:str_merge.c   ****     int hv = -1;
 622              	LM33:
 623              	LBB4:
 624 0149 C745FCFF 		movl	$-1, -4(%ebp)
 624      FFFFFF
 839:str_merge.c   ****     if(hash == NULL || node == NULL || node->str == NULL)
 626              	LM34:
 627 0150 837D0800 		cmpl	$0, 8(%ebp)
 628 0154 740E     		je	L31
 629 0156 837D0C00 		cmpl	$0, 12(%ebp)
 630 015a 7408     		je	L31
 631 015c 8B450C   		movl	12(%ebp), %eax
 632 015f 833800   		cmpl	$0, (%eax)
 633 0162 750C     		jne	L30
 634              	L31:
 840:str_merge.c   ****     {
 841:str_merge.c   ****         return -2; /* invalid input */
 636              	LM35:
 637 0164 C745ECFE 		movl	$-2, -20(%ebp)
 637      FFFFFF
 638 016b E9470100 		jmp	L29
 638      00
 639              	L30:
 842:str_merge.c   ****     }
 843:str_merge.c   **** 
 844:str_merge.c   ****     hv = DJBHash(node->str) % hash->table_size;
 641              	LM36:
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 20


 642 0170 8B450C   		movl	12(%ebp), %eax
 643 0173 8B00     		movl	(%eax), %eax
 644 0175 890424   		movl	%eax, (%esp)
 645 0178 E864FFFF 		call	_DJBHash
 645      FF
 646 017d 89C2     		movl	%eax, %edx
 647 017f 8B4508   		movl	8(%ebp), %eax
 648 0182 8945E8   		movl	%eax, -24(%ebp)
 649 0185 89D0     		movl	%edx, %eax
 650 0187 8B4DE8   		movl	-24(%ebp), %ecx
 651 018a 99       		cltd
 652 018b F739     		idivl	(%ecx)
 653 018d 8955FC   		movl	%edx, -4(%ebp)
 845:str_merge.c   **** 
 846:str_merge.c   ****     if(hash->table[hv] == 0) /* hash node not exist */
 655              	LM37:
 656 0190 8B4D08   		movl	8(%ebp), %ecx
 657 0193 8B45FC   		movl	-4(%ebp), %eax
 658 0196 8D148500 		leal	0(,%eax,4), %edx
 658      000000
 659 019d 8B4104   		movl	4(%ecx), %eax
 660 01a0 833C1000 		cmpl	$0, (%eax,%edx)
 661 01a4 755E     		jne	L32
 847:str_merge.c   ****     {
 848:str_merge.c   ****         StrIDNode *new_node = (StrIDNode *)malloc(sizeof(StrIDNode));
 663              	LM38:
 664              	LBB5:
 665 01a6 C704240C 		movl	$12, (%esp)
 665      000000
 666 01ad E8000000 		call	_malloc
 666      00
 667 01b2 8945F8   		movl	%eax, -8(%ebp)
 849:str_merge.c   ****         if(new_node == 0)
 669              	LM39:
 670 01b5 837DF800 		cmpl	$0, -8(%ebp)
 671 01b9 750C     		jne	L33
 850:str_merge.c   ****         {
 851:str_merge.c   ****             return -1; /* invalid memory malloc */
 673              	LM40:
 674 01bb C745ECFF 		movl	$-1, -20(%ebp)
 674      FFFFFF
 675 01c2 E9F00000 		jmp	L29
 675      00
 676              	L33:
 852:str_merge.c   ****         }
 853:str_merge.c   ****         /* initialize new node */
 854:str_merge.c   ****         new_node->next = NULL;
 678              	LM41:
 679 01c7 8B45F8   		movl	-8(%ebp), %eax
 680 01ca C7400800 		movl	$0, 8(%eax)
 680      000000
 855:str_merge.c   ****         new_node->id = node->id;
 682              	LM42:
 683 01d1 8B55F8   		movl	-8(%ebp), %edx
 684 01d4 8B450C   		movl	12(%ebp), %eax
 685 01d7 0FB74004 		movzwl	4(%eax), %eax
 686 01db 66894204 		movw	%ax, 4(%edx)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 21


 856:str_merge.c   ****         new_node->str = node->str;
 688              	LM43:
 689 01df 8B55F8   		movl	-8(%ebp), %edx
 690 01e2 8B450C   		movl	12(%ebp), %eax
 691 01e5 8B00     		movl	(%eax), %eax
 692 01e7 8902     		movl	%eax, (%edx)
 857:str_merge.c   **** 
 858:str_merge.c   ****         /* add new node to hash table */
 859:str_merge.c   ****         hash->table[hv] = new_node;
 694              	LM44:
 695 01e9 8B5508   		movl	8(%ebp), %edx
 696 01ec 8B45FC   		movl	-4(%ebp), %eax
 697 01ef 8D0C8500 		leal	0(,%eax,4), %ecx
 697      000000
 698 01f6 8B5204   		movl	4(%edx), %edx
 699 01f9 8B45F8   		movl	-8(%ebp), %eax
 700 01fc 89040A   		movl	%eax, (%edx,%ecx)
 701              	LBE5:
 702 01ff E9AC0000 		jmp	L34
 702      00
 703              	L32:
 860:str_merge.c   ****     }
 861:str_merge.c   ****     else /* hash node exist */
 862:str_merge.c   ****     {
 863:str_merge.c   ****         StrIDNode *tmp = hash->table[hv];
 705              	LM45:
 706              	LBB6:
 707 0204 8B4D08   		movl	8(%ebp), %ecx
 708 0207 8B45FC   		movl	-4(%ebp), %eax
 709 020a 8D148500 		leal	0(,%eax,4), %edx
 709      000000
 710 0211 8B4104   		movl	4(%ecx), %eax
 711 0214 8B0410   		movl	(%eax,%edx), %eax
 712 0217 8945F8   		movl	%eax, -8(%ebp)
 864:str_merge.c   ****         StrIDNode *prev = 0;
 714              	LM46:
 715 021a C745F400 		movl	$0, -12(%ebp)
 715      000000
 865:str_merge.c   ****         while(tmp != NULL) /* here is hash search function */
 717              	LM47:
 718              	L35:
 719 0221 837DF800 		cmpl	$0, -8(%ebp)
 720 0225 7502     		jne	L37
 721 0227 EB2D     		jmp	L36
 722              	L37:
 866:str_merge.c   ****         {
 867:str_merge.c   ****             prev = tmp;
 724              	LM48:
 725 0229 8B45F8   		movl	-8(%ebp), %eax
 726 022c 8945F4   		movl	%eax, -12(%ebp)
 868:str_merge.c   ****             if(!wcscmp(node->str, prev->str))
 728              	LM49:
 729 022f 8B45F4   		movl	-12(%ebp), %eax
 730 0232 8B00     		movl	(%eax), %eax
 731 0234 89442404 		movl	%eax, 4(%esp)
 732 0238 8B450C   		movl	12(%ebp), %eax
 733 023b 8B00     		movl	(%eax), %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 22


 734 023d 890424   		movl	%eax, (%esp)
 735 0240 E8000000 		call	_wcscmp
 735      00
 736 0245 85C0     		testl	%eax, %eax
 737 0247 7502     		jne	L38
 869:str_merge.c   ****             {
 870:str_merge.c   ****                 break;
 739              	LM50:
 740 0249 EB0B     		jmp	L36
 741              	L38:
 871:str_merge.c   ****             }
 872:str_merge.c   ****             tmp = tmp->next;
 743              	LM51:
 744 024b 8B45F8   		movl	-8(%ebp), %eax
 745 024e 8B4008   		movl	8(%eax), %eax
 746 0251 8945F8   		movl	%eax, -8(%ebp)
 747 0254 EBCB     		jmp	L35
 748              	L36:
 873:str_merge.c   ****         }
 874:str_merge.c   ****         /* does not found the same string node */
 875:str_merge.c   ****         if(tmp == NULL)
 750              	LM52:
 751 0256 837DF800 		cmpl	$0, -8(%ebp)
 752 025a 754B     		jne	L39
 876:str_merge.c   ****         {
 877:str_merge.c   ****             StrIDNode *new_node = (StrIDNode *)malloc(sizeof(StrIDNode));
 754              	LM53:
 755              	LBB7:
 756 025c C704240C 		movl	$12, (%esp)
 756      000000
 757 0263 E8000000 		call	_malloc
 757      00
 758 0268 8945F0   		movl	%eax, -16(%ebp)
 878:str_merge.c   ****             if(new_node == 0)
 760              	LM54:
 761 026b 837DF000 		cmpl	$0, -16(%ebp)
 762 026f 7509     		jne	L40
 879:str_merge.c   ****             {
 880:str_merge.c   ****                 return -1; /* invalid malloc */
 764              	LM55:
 765 0271 C745ECFF 		movl	$-1, -20(%ebp)
 765      FFFFFF
 766 0278 EB3D     		jmp	L29
 767              	L40:
 881:str_merge.c   ****             }
 882:str_merge.c   ****             new_node->next = NULL;
 769              	LM56:
 770 027a 8B45F0   		movl	-16(%ebp), %eax
 771 027d C7400800 		movl	$0, 8(%eax)
 771      000000
 883:str_merge.c   ****             new_node->id = node->id;
 773              	LM57:
 774 0284 8B55F0   		movl	-16(%ebp), %edx
 775 0287 8B450C   		movl	12(%ebp), %eax
 776 028a 0FB74004 		movzwl	4(%eax), %eax
 777 028e 66894204 		movw	%ax, 4(%edx)
 884:str_merge.c   ****             new_node->str = node->str;
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 23


 779              	LM58:
 780 0292 8B55F0   		movl	-16(%ebp), %edx
 781 0295 8B450C   		movl	12(%ebp), %eax
 782 0298 8B00     		movl	(%eax), %eax
 783 029a 8902     		movl	%eax, (%edx)
 885:str_merge.c   ****             /* add new node to the chain list */
 886:str_merge.c   ****             prev->next = new_node;
 785              	LM59:
 786 029c 8B55F4   		movl	-12(%ebp), %edx
 787 029f 8B45F0   		movl	-16(%ebp), %eax
 788 02a2 894208   		movl	%eax, 8(%edx)
 789              	LBE7:
 790 02a5 EB09     		jmp	L34
 791              	L39:
 887:str_merge.c   ****         }
 888:str_merge.c   ****         else
 889:str_merge.c   ****         {
 890:str_merge.c   ****             return 0; /* duplicate string */
 793              	LM60:
 794 02a7 C745EC00 		movl	$0, -20(%ebp)
 794      000000
 795 02ae EB07     		jmp	L29
 796              	L34:
 891:str_merge.c   ****         }
 892:str_merge.c   ****     }
 893:str_merge.c   ****     return 1; /* add successfully */
 798              	LM61:
 799              	LBE6:
 800 02b0 C745EC01 		movl	$1, -20(%ebp)
 800      000000
 894:str_merge.c   **** }
 802              	LM62:
 803              	L29:
 804              	LBE4:
 805 02b7 8B45EC   		movl	-20(%ebp), %eax
 806 02ba C9       		leave
 807 02bb C3       		ret
 821              	Lscope4:
 827              	_hash_search:
 895:str_merge.c   **** 
 896:str_merge.c   **** 
 897:str_merge.c   **** /*****************************************************************************
 898:str_merge.c   ****  * FUNCTION
 899:str_merge.c   ****  *  hash_search
 900:str_merge.c   ****  * DESCRIPTION
 901:str_merge.c   ****  *  search if key exist in hash table
 902:str_merge.c   ****  * PARAMETERS
 903:str_merge.c   ****  *  hash    [IN] : hash table
 904:str_merge.c   ****  *  key      [IN] : key will be search
 905:str_merge.c   ****  * RETURNS
 906:str_merge.c   ****  *  int       true: find key in hash table, false:not found key in hash table
 907:str_merge.c   ****  *****************************************************************************/
 908:str_merge.c   **** static StrIDNode* hash_search(const StrHashTable* hash, const wchar_t *key)
 909:str_merge.c   **** {
 829              	LM63:
 830 02bc 55       		pushl	%ebp
 831 02bd 89E5     		movl	%esp, %ebp
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 24


 832 02bf 83EC28   		subl	$40, %esp
 910:str_merge.c   ****     int hv = -1;
 834              	LM64:
 835              	LBB8:
 836 02c2 C745FCFF 		movl	$-1, -4(%ebp)
 836      FFFFFF
 911:str_merge.c   ****     int i = 0;
 838              	LM65:
 839 02c9 C745F800 		movl	$0, -8(%ebp)
 839      000000
 912:str_merge.c   ****     StrIDNode *tmp = 0;
 841              	LM66:
 842 02d0 C745F400 		movl	$0, -12(%ebp)
 842      000000
 913:str_merge.c   **** 
 914:str_merge.c   ****     if(key == 0 || hash == 0)
 844              	LM67:
 845 02d7 837D0C00 		cmpl	$0, 12(%ebp)
 846 02db 7406     		je	L44
 847 02dd 837D0800 		cmpl	$0, 8(%ebp)
 848 02e1 7509     		jne	L43
 849              	L44:
 915:str_merge.c   ****     {
 916:str_merge.c   ****         return 0;
 851              	LM68:
 852 02e3 C745F000 		movl	$0, -16(%ebp)
 852      000000
 853 02ea EB6E     		jmp	L42
 854              	L43:
 917:str_merge.c   ****     }
 918:str_merge.c   **** 
 919:str_merge.c   ****     hv = DJBHash(key) % hash->table_size; /* caculate hash value */
 856              	LM69:
 857 02ec 8B450C   		movl	12(%ebp), %eax
 858 02ef 890424   		movl	%eax, (%esp)
 859 02f2 E8EAFDFF 		call	_DJBHash
 859      FF
 860 02f7 89C2     		movl	%eax, %edx
 861 02f9 8B4508   		movl	8(%ebp), %eax
 862 02fc 8945EC   		movl	%eax, -20(%ebp)
 863 02ff 89D0     		movl	%edx, %eax
 864 0301 8B4DEC   		movl	-20(%ebp), %ecx
 865 0304 99       		cltd
 866 0305 F739     		idivl	(%ecx)
 867 0307 8955FC   		movl	%edx, -4(%ebp)
 920:str_merge.c   **** 
 921:str_merge.c   ****     tmp = hash->table[hv];
 869              	LM70:
 870 030a 8B4D08   		movl	8(%ebp), %ecx
 871 030d 8B45FC   		movl	-4(%ebp), %eax
 872 0310 8D148500 		leal	0(,%eax,4), %edx
 872      000000
 873 0317 8B4104   		movl	4(%ecx), %eax
 874 031a 8B0410   		movl	(%eax,%edx), %eax
 875 031d 8945F4   		movl	%eax, -12(%ebp)
 922:str_merge.c   ****     while(tmp)
 877              	LM71:
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 25


 878              	L45:
 879 0320 837DF400 		cmpl	$0, -12(%ebp)
 880 0324 7502     		jne	L47
 881 0326 EB2B     		jmp	L46
 882              	L47:
 923:str_merge.c   ****     {
 924:str_merge.c   ****         if(!wcscmp(key, tmp->str))
 884              	LM72:
 885 0328 8B45F4   		movl	-12(%ebp), %eax
 886 032b 8B00     		movl	(%eax), %eax
 887 032d 89442404 		movl	%eax, 4(%esp)
 888 0331 8B450C   		movl	12(%ebp), %eax
 889 0334 890424   		movl	%eax, (%esp)
 890 0337 E8000000 		call	_wcscmp
 890      00
 891 033c 85C0     		testl	%eax, %eax
 892 033e 7508     		jne	L48
 925:str_merge.c   ****             return tmp;
 894              	LM73:
 895 0340 8B45F4   		movl	-12(%ebp), %eax
 896 0343 8945F0   		movl	%eax, -16(%ebp)
 897 0346 EB12     		jmp	L42
 898              	L48:
 926:str_merge.c   ****         tmp = tmp->next;
 900              	LM74:
 901 0348 8B45F4   		movl	-12(%ebp), %eax
 902 034b 8B4008   		movl	8(%eax), %eax
 903 034e 8945F4   		movl	%eax, -12(%ebp)
 904 0351 EBCD     		jmp	L45
 905              	L46:
 927:str_merge.c   ****     }
 928:str_merge.c   **** 
 929:str_merge.c   ****     return 0;    
 907              	LM75:
 908 0353 C745F000 		movl	$0, -16(%ebp)
 908      000000
 930:str_merge.c   **** }
 910              	LM76:
 911              	L42:
 912              	LBE8:
 913 035a 8B45F0   		movl	-16(%ebp), %eax
 914 035d C9       		leave
 915 035e C3       		ret
 921              	Lscope5:
 926              	_hash_free:
 931:str_merge.c   **** 
 932:str_merge.c   **** 
 933:str_merge.c   **** /*****************************************************************************
 934:str_merge.c   ****  * FUNCTION
 935:str_merge.c   ****  *  hash_free
 936:str_merge.c   ****  * DESCRIPTION
 937:str_merge.c   ****  *  free hash table
 938:str_merge.c   ****  * PARAMETERS
 939:str_merge.c   ****  *  hash    [IN] : hash table
 940:str_merge.c   ****  * RETURNS
 941:str_merge.c   ****  *  void
 942:str_merge.c   ****  *****************************************************************************/
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 26


 943:str_merge.c   **** static void hash_free(StrHashTable* hash)
 944:str_merge.c   **** {
 928              	LM77:
 929 035f 55       		pushl	%ebp
 930 0360 89E5     		movl	%esp, %ebp
 931 0362 83EC18   		subl	$24, %esp
 945:str_merge.c   ****     int i = 0;
 933              	LM78:
 934              	LBB9:
 935 0365 C745FC00 		movl	$0, -4(%ebp)
 935      000000
 946:str_merge.c   ****     StrIDNode *node = 0, *next = 0;;
 937              	LM79:
 938 036c C745F800 		movl	$0, -8(%ebp)
 938      000000
 939 0373 C745F400 		movl	$0, -12(%ebp)
 939      000000
 947:str_merge.c   ****     
 948:str_merge.c   ****     if(hash == NULL)
 941              	LM80:
 942 037a 837D0800 		cmpl	$0, 8(%ebp)
 943 037e 7502     		jne	L50
 949:str_merge.c   ****         return;
 945              	LM81:
 946 0380 EB5F     		jmp	L49
 947              	L50:
 950:str_merge.c   **** 
 951:str_merge.c   ****     /* free each node in hash table */
 952:str_merge.c   ****     for(i = 0; i < hash->table_size; ++i)
 949              	LM82:
 950 0382 C745FC00 		movl	$0, -4(%ebp)
 950      000000
 951              	L51:
 952 0389 8B5508   		movl	8(%ebp), %edx
 953 038c 8B45FC   		movl	-4(%ebp), %eax
 954 038f 3B02     		cmpl	(%edx), %eax
 955 0391 7C02     		jl	L54
 956 0393 EB41     		jmp	L52
 957              	L54:
 953:str_merge.c   ****     {
 954:str_merge.c   ****         node = hash->table[i];
 959              	LM83:
 960 0395 8B4D08   		movl	8(%ebp), %ecx
 961 0398 8B45FC   		movl	-4(%ebp), %eax
 962 039b 8D148500 		leal	0(,%eax,4), %edx
 962      000000
 963 03a2 8B4104   		movl	4(%ecx), %eax
 964 03a5 8B0410   		movl	(%eax,%edx), %eax
 965 03a8 8945F8   		movl	%eax, -8(%ebp)
 955:str_merge.c   ****         while(node)
 967              	LM84:
 968              	L55:
 969 03ab 837DF800 		cmpl	$0, -8(%ebp)
 970 03af 7502     		jne	L57
 971 03b1 EB1C     		jmp	L53
 972              	L57:
 956:str_merge.c   ****         {
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 27


 957:str_merge.c   ****             next = node->next;
 974              	LM85:
 975 03b3 8B45F8   		movl	-8(%ebp), %eax
 976 03b6 8B4008   		movl	8(%eax), %eax
 977 03b9 8945F4   		movl	%eax, -12(%ebp)
 958:str_merge.c   ****             free(node);
 979              	LM86:
 980 03bc 8B45F8   		movl	-8(%ebp), %eax
 981 03bf 890424   		movl	%eax, (%esp)
 982 03c2 E8000000 		call	_free
 982      00
 959:str_merge.c   ****             node = next;
 984              	LM87:
 985 03c7 8B45F4   		movl	-12(%ebp), %eax
 986 03ca 8945F8   		movl	%eax, -8(%ebp)
 987 03cd EBDC     		jmp	L55
 989              	LM88:
 990              	L53:
 991 03cf 8D45FC   		leal	-4(%ebp), %eax
 992 03d2 FF00     		incl	(%eax)
 993 03d4 EBB3     		jmp	L51
 994              	L52:
 960:str_merge.c   ****         }
 961:str_merge.c   ****     }
 962:str_merge.c   **** 
 963:str_merge.c   ****     /* free hash table itself */
 964:str_merge.c   ****     free(hash);
 996              	LM89:
 997 03d6 8B4508   		movl	8(%ebp), %eax
 998 03d9 890424   		movl	%eax, (%esp)
 999 03dc E8000000 		call	_free
 999      00
 965:str_merge.c   **** }
 1001              	LM90:
 1002              	L49:
 1003 03e1 C9       		leave
 1004 03e2 C3       		ret
 1005              	LBE9:
 1011              	Lscope6:
 1017              	_UCS2ASCII:
 966:str_merge.c   **** 
 967:str_merge.c   **** 
 968:str_merge.c   **** /*****************************************************************************
 969:str_merge.c   ****  * FUNCTION
 970:str_merge.c   ****  *  UCS2ASCII
 971:str_merge.c   ****  * DESCRIPTION
 972:str_merge.c   ****  *  Convert wide character to ASCII character
 973:str_merge.c   ****  * PARAMETERS
 974:str_merge.c   ****  *  w_in    [IN]
 975:str_merge.c   ****  *  a_out   [OUT]
 976:str_merge.c   ****  * RETURNS
 977:str_merge.c   ****  *  void
 978:str_merge.c   ****  *****************************************************************************/
 979:str_merge.c   **** static void UCS2ASCII(char *w_in, char *a_out)
 980:str_merge.c   **** {
 1019              	LM91:
 1020 03e3 55       		pushl	%ebp
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 28


 1021 03e4 89E5     		movl	%esp, %ebp
 1022 03e6 83EC04   		subl	$4, %esp
 981:str_merge.c   ****     /*----------------------------------------------------------------*/
 982:str_merge.c   ****     /* Local Variables                                                */
 983:str_merge.c   ****     /*----------------------------------------------------------------*/
 984:str_merge.c   ****     int i = 0;
 1024              	LM92:
 1025              	LBB10:
 1026 03e9 C745FC00 		movl	$0, -4(%ebp)
 1026      000000
 985:str_merge.c   **** 
 986:str_merge.c   ****     /*----------------------------------------------------------------*/
 987:str_merge.c   ****     /* Code Body                                                      */
 988:str_merge.c   ****     /*----------------------------------------------------------------*/
 989:str_merge.c   ****     while (w_in[i * 2] != '\0' || w_in[i * 2 + 1] != '\0')
 1028              	LM93:
 1029              	L59:
 1030 03f0 8B45FC   		movl	-4(%ebp), %eax
 1031 03f3 8D1400   		leal	(%eax,%eax), %edx
 1032 03f6 8B4508   		movl	8(%ebp), %eax
 1033 03f9 803C1000 		cmpb	$0, (%eax,%edx)
 1034 03fd 7510     		jne	L61
 1035 03ff 8B45FC   		movl	-4(%ebp), %eax
 1036 0402 01C0     		addl	%eax, %eax
 1037 0404 034508   		addl	8(%ebp), %eax
 1038 0407 40       		incl	%eax
 1039 0408 803800   		cmpb	$0, (%eax)
 1040 040b 7502     		jne	L61
 1041 040d EB1E     		jmp	L60
 1042              	L61:
 990:str_merge.c   ****     {
 991:str_merge.c   ****         a_out[i] = w_in[i * 2];
 1044              	LM94:
 1045 040f 8B45FC   		movl	-4(%ebp), %eax
 1046 0412 8B4D0C   		movl	12(%ebp), %ecx
 1047 0415 01C1     		addl	%eax, %ecx
 1048 0417 8B45FC   		movl	-4(%ebp), %eax
 1049 041a 8D1400   		leal	(%eax,%eax), %edx
 1050 041d 8B4508   		movl	8(%ebp), %eax
 1051 0420 0FB60410 		movzbl	(%eax,%edx), %eax
 1052 0424 8801     		movb	%al, (%ecx)
 992:str_merge.c   ****         i += 1;
 1054              	LM95:
 1055 0426 8D45FC   		leal	-4(%ebp), %eax
 1056 0429 FF00     		incl	(%eax)
 1057 042b EBC3     		jmp	L59
 1058              	L60:
 993:str_merge.c   ****     }
 994:str_merge.c   ****     a_out[i] = '\0';
 1060              	LM96:
 1061 042d 8B45FC   		movl	-4(%ebp), %eax
 1062 0430 03450C   		addl	12(%ebp), %eax
 1063 0433 C60000   		movb	$0, (%eax)
 995:str_merge.c   **** }
 1065              	LM97:
 1066 0436 C9       		leave
 1067 0437 C3       		ret
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 29


 1068              	LBE10:
 1072              	Lscope7:
 1074              	LC2:
 1075 0438 47657449 		.ascii "GetItem p1 == NULL\0"
 1075      74656D20 
 1075      7031203D 
 1075      3D204E55 
 1075      4C4C00
 1076              	LC3:
 1077 044b 5354525F 		.ascii "STR_MERGE\0"
 1077      4D455247 
 1077      4500
 1083              	_GetItem:
 996:str_merge.c   **** 
 997:str_merge.c   **** 
 998:str_merge.c   **** /*****************************************************************************
 999:str_merge.c   ****  * FUNCTION
1000:str_merge.c   ****  *  GetItem
1001:str_merge.c   ****  * DESCRIPTION
1002:str_merge.c   ****  *  Get token between index and index+1 DELIMETER
1003:str_merge.c   ****  * PARAMETERS
1004:str_merge.c   ****  *  string  [IN]
1005:str_merge.c   ****  *  index   [IN]
1006:str_merge.c   ****  *  buf     [OUT]
1007:str_merge.c   ****  * RETURNS
1008:str_merge.c   ****  *  void
1009:str_merge.c   ****  *****************************************************************************/
1010:str_merge.c   **** static void GetItem(wchar_t *string, int index, wchar_t *buf)
1011:str_merge.c   **** {
 1085              	LM98:
 1086 0455 55       		pushl	%ebp
 1087 0456 89E5     		movl	%esp, %ebp
 1088 0458 83EC18   		subl	$24, %esp
1012:str_merge.c   ****     /*----------------------------------------------------------------*/
1013:str_merge.c   ****     /* Local Variables                                                */
1014:str_merge.c   ****     /*----------------------------------------------------------------*/
1015:str_merge.c   ****     wchar_t *p1 = string;
 1090              	LM99:
 1091              	LBB11:
 1092 045b 8B4508   		movl	8(%ebp), %eax
 1093 045e 8945FC   		movl	%eax, -4(%ebp)
1016:str_merge.c   ****     wchar_t *p2 = wcsstr(string, DELIMETER);
 1095              	LM100:
 1096 0461 A1940100 		movl	_DELIMETER, %eax
 1096      00
 1097 0466 89442404 		movl	%eax, 4(%esp)
 1098 046a 8B4508   		movl	8(%ebp), %eax
 1099 046d 890424   		movl	%eax, (%esp)
 1100 0470 E8000000 		call	_wcsstr
 1100      00
 1101 0475 8945F8   		movl	%eax, -8(%ebp)
1017:str_merge.c   ****     int n = p2 - p1;
 1103              	LM101:
 1104 0478 8B55FC   		movl	-4(%ebp), %edx
 1105 047b 8B45F8   		movl	-8(%ebp), %eax
 1106 047e 29D0     		subl	%edx, %eax
 1107 0480 D1F8     		sarl	%eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 30


 1108 0482 8945F4   		movl	%eax, -12(%ebp)
1018:str_merge.c   **** 
1019:str_merge.c   ****     /*----------------------------------------------------------------*/
1020:str_merge.c   ****     /* Code Body                                                      */
1021:str_merge.c   ****     /*----------------------------------------------------------------*/
1022:str_merge.c   ****     ASSERT(p2 != NULL);
 1110              	LM102:
 1111 0485 837DF800 		cmpl	$0, -8(%ebp)
 1112 0489 7502     		jne	L67
 1113              	L64:
 1114 048b EBFE     		jmp	L64
 1115              	L67:
 1116 048d 90       		nop
1023:str_merge.c   ****     
1024:str_merge.c   ****     while (index > 0)
 1118              	LM103:
 1119              	L68:
 1120 048e 837D0C00 		cmpl	$0, 12(%ebp)
 1121 0492 7F02     		jg	L70
 1122 0494 EB3C     		jmp	L69
 1123              	L70:
1025:str_merge.c   ****     {
1026:str_merge.c   ****         p1 = p2 + 1;
 1125              	LM104:
 1126 0496 8B45F8   		movl	-8(%ebp), %eax
 1127 0499 83C002   		addl	$2, %eax
 1128 049c 8945FC   		movl	%eax, -4(%ebp)
1027:str_merge.c   ****         p2 = wcsstr(p1, DELIMETER);
 1130              	LM105:
 1131 049f A1940100 		movl	_DELIMETER, %eax
 1131      00
 1132 04a4 89442404 		movl	%eax, 4(%esp)
 1133 04a8 8B45FC   		movl	-4(%ebp), %eax
 1134 04ab 890424   		movl	%eax, (%esp)
 1135 04ae E8000000 		call	_wcsstr
 1135      00
 1136 04b3 8945F8   		movl	%eax, -8(%ebp)
1028:str_merge.c   ****         index--;
 1138              	LM106:
 1139 04b6 8D450C   		leal	12(%ebp), %eax
 1140 04b9 FF08     		decl	(%eax)
1029:str_merge.c   ****         if (p2 == NULL)
 1142              	LM107:
 1143 04bb 837DF800 		cmpl	$0, -8(%ebp)
 1144 04bf 7502     		jne	L71
1030:str_merge.c   ****             break;
 1146              	LM108:
 1147 04c1 EB0F     		jmp	L69
 1148              	L71:
1031:str_merge.c   ****         n = p2 - p1;
 1150              	LM109:
 1151 04c3 8B55FC   		movl	-4(%ebp), %edx
 1152 04c6 8B45F8   		movl	-8(%ebp), %eax
 1153 04c9 29D0     		subl	%edx, %eax
 1154 04cb D1F8     		sarl	%eax
 1155 04cd 8945F4   		movl	%eax, -12(%ebp)
 1156 04d0 EBBC     		jmp	L68
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 31


 1157              	L69:
1032:str_merge.c   ****     }
1033:str_merge.c   **** 
1034:str_merge.c   ****     if (index > 0)
 1159              	LM110:
 1160 04d2 837D0C00 		cmpl	$0, 12(%ebp)
 1161 04d6 7E0D     		jle	L72
1035:str_merge.c   ****     {
1036:str_merge.c   ****         buf[0] = L'\0';
 1163              	LM111:
 1164 04d8 8B4510   		movl	16(%ebp), %eax
 1165 04db 66C70000 		movw	$0, (%eax)
 1165      00
 1166 04e0 E9B30000 		jmp	L62
 1166      00
 1167              	L72:
1037:str_merge.c   ****     }
1038:str_merge.c   ****     else if (p2 == NULL)
 1169              	LM112:
 1170 04e5 837DF800 		cmpl	$0, -8(%ebp)
 1171 04e9 757D     		jne	L74
1039:str_merge.c   ****     {
1040:str_merge.c   ****         if (p1 == NULL)
 1173              	LM113:
 1174 04eb 837DFC00 		cmpl	$0, -4(%ebp)
 1175 04ef 7528     		jne	L75
1041:str_merge.c   ****         {
1042:str_merge.c   ****             STRMERG_LOG_E("GetItem p1 == NULL");
 1177              	LM114:
 1178 04f1 C7442408 		movl	$LC2, 8(%esp)
 1178      38040000 
 1179 04f9 C7442404 		movl	$LC3, 4(%esp)
 1179      4B040000 
 1180 0501 C7042403 		movl	$3, (%esp)
 1180      000000
 1181 0508 E8000000 		call	_reslog_adaptor_log
 1181      00
1043:str_merge.c   ****             exit(2);
 1183              	LM115:
 1184 050d C7042402 		movl	$2, (%esp)
 1184      000000
 1185 0514 E8000000 		call	_exit
 1185      00
 1186              	L75:
1044:str_merge.c   ****         }
1045:str_merge.c   ****         wcscpy(buf, p1);
 1188              	LM116:
 1189 0519 8B45FC   		movl	-4(%ebp), %eax
 1190 051c 89442404 		movl	%eax, 4(%esp)
 1191 0520 8B4510   		movl	16(%ebp), %eax
 1192 0523 890424   		movl	%eax, (%esp)
 1193 0526 E8000000 		call	_wcscpy
 1193      00
1046:str_merge.c   ****         n = wcsstr(p1, EOS) - p1;
 1195              	LM117:
 1196 052b A1980100 		movl	_EOS, %eax
 1196      00
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 32


 1197 0530 89442404 		movl	%eax, 4(%esp)
 1198 0534 8B45FC   		movl	-4(%ebp), %eax
 1199 0537 890424   		movl	%eax, (%esp)
 1200 053a E8000000 		call	_wcsstr
 1200      00
 1201 053f 2B45FC   		subl	-4(%ebp), %eax
 1202 0542 D1F8     		sarl	%eax
 1203 0544 8945F4   		movl	%eax, -12(%ebp)
1047:str_merge.c   ****         buf[n] = L'\0';
 1205              	LM118:
 1206 0547 8B45F4   		movl	-12(%ebp), %eax
 1207 054a 8D1400   		leal	(%eax,%eax), %edx
 1208 054d 8B4510   		movl	16(%ebp), %eax
 1209 0550 66C70410 		movw	$0, (%eax,%edx)
 1209      0000
1048:str_merge.c   ****         buf[n - 1] = L'\0';
 1211              	LM119:
 1212 0556 8B45F4   		movl	-12(%ebp), %eax
 1213 0559 01C0     		addl	%eax, %eax
 1214 055b 034510   		addl	16(%ebp), %eax
 1215 055e 83E802   		subl	$2, %eax
 1216 0561 66C70000 		movw	$0, (%eax)
 1216      00
 1217 0566 EB30     		jmp	L62
 1218              	L74:
1049:str_merge.c   ****     }
1050:str_merge.c   ****     else
1051:str_merge.c   ****     {
1052:str_merge.c   ****         ASSERT(p1 != NULL);
 1220              	LM120:
 1221 0568 837DFC00 		cmpl	$0, -4(%ebp)
 1222 056c 7502     		jne	L81
 1223              	L78:
 1224 056e EBFE     		jmp	L78
 1225              	L81:
1053:str_merge.c   ****         wcsncpy(buf, p1, n);
 1227              	LM121:
 1228 0570 8B45F4   		movl	-12(%ebp), %eax
 1229 0573 89442408 		movl	%eax, 8(%esp)
 1230 0577 8B45FC   		movl	-4(%ebp), %eax
 1231 057a 89442404 		movl	%eax, 4(%esp)
 1232 057e 8B4510   		movl	16(%ebp), %eax
 1233 0581 890424   		movl	%eax, (%esp)
 1234 0584 E8000000 		call	_wcsncpy
 1234      00
1054:str_merge.c   ****         buf[n] = L'\0';
 1236              	LM122:
 1237 0589 8B45F4   		movl	-12(%ebp), %eax
 1238 058c 8D1400   		leal	(%eax,%eax), %edx
 1239 058f 8B4510   		movl	16(%ebp), %eax
 1240 0592 66C70410 		movw	$0, (%eax,%edx)
 1240      0000
1055:str_merge.c   ****     }
1056:str_merge.c   **** }
 1242              	LM123:
 1243              	L62:
 1244 0598 C9       		leave
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 33


 1245 0599 C3       		ret
 1246              	LBE11:
 1252              	Lscope8:
 1254              		.align 2
 1255              	LC4:
 1256 059a 4E006F00 		.ascii "N\0o\0 \0T\0r\0a\0n\0s\0l\0a\0t\0i\0o\0n\0\0\0"
 1256      20005400 
 1256      72006100 
 1256      6E007300 
 1256      6C006100 
 1264              	_OutputFixColumns:
1057:str_merge.c   **** 
1058:str_merge.c   **** 
1059:str_merge.c   **** /*****************************************************************************
1060:str_merge.c   ****  * FUNCTION
1061:str_merge.c   ****  *  OutputFixColumns
1062:str_merge.c   ****  * DESCRIPTION
1063:str_merge.c   ****  *  Output content of fix columns to temp buffer
1064:str_merge.c   ****  * PARAMETERS
1065:str_merge.c   ****  *  linebuf     [IN]
1066:str_merge.c   ****  *  token_id    [IN OUT]
1067:str_merge.c   ****  *  itembuf     [IN]
1068:str_merge.c   ****  *  log_output  [OUT]
1069:str_merge.c   ****  *  ref_output  [OUT]
1070:str_merge.c   ****  * RETURNS
1071:str_merge.c   ****  *  void
1072:str_merge.c   ****  *****************************************************************************/
1073:str_merge.c   **** static void OutputFixColumns(wchar_t *linebuf, int *token_id, wchar_t *itembuf, 
1074:str_merge.c   ****                              wchar_t *log_output, wchar_t *ref_output)
1075:str_merge.c   **** {
 1266              	LM124:
 1267 05b8 55       		pushl	%ebp
 1268 05b9 89E5     		movl	%esp, %ebp
 1269 05bb 83EC18   		subl	$24, %esp
1076:str_merge.c   ****     GetItem(linebuf, (*token_id)++, itembuf);
 1271              	LM125:
 1272 05be 8B4510   		movl	16(%ebp), %eax
 1273 05c1 89442408 		movl	%eax, 8(%esp)
 1274 05c5 8B450C   		movl	12(%ebp), %eax
 1275 05c8 8B10     		movl	(%eax), %edx
 1276 05ca 89542404 		movl	%edx, 4(%esp)
 1277 05ce FF00     		incl	(%eax)
 1278 05d0 8B4508   		movl	8(%ebp), %eax
 1279 05d3 890424   		movl	%eax, (%esp)
 1280 05d6 E87AFEFF 		call	_GetItem
 1280      FF
1077:str_merge.c   ****     wcscat(log_output, L"\t");
 1282              	LM126:
 1283 05db C7442404 		movl	$LC0, 4(%esp)
 1283      48000000 
 1284 05e3 8B4514   		movl	20(%ebp), %eax
 1285 05e6 890424   		movl	%eax, (%esp)
 1286 05e9 E8000000 		call	_wcscat
 1286      00
1078:str_merge.c   ****     wcscat(log_output, itembuf);            /* print out Module Name */
 1288              	LM127:
 1289 05ee 8B4510   		movl	16(%ebp), %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 34


 1290 05f1 89442404 		movl	%eax, 4(%esp)
 1291 05f5 8B4514   		movl	20(%ebp), %eax
 1292 05f8 890424   		movl	%eax, (%esp)
 1293 05fb E8000000 		call	_wcscat
 1293      00
1079:str_merge.c   **** 
1080:str_merge.c   ****     GetItem(linebuf, (*token_id)++, itembuf);
 1295              	LM128:
 1296 0600 8B4510   		movl	16(%ebp), %eax
 1297 0603 89442408 		movl	%eax, 8(%esp)
 1298 0607 8B450C   		movl	12(%ebp), %eax
 1299 060a 8B10     		movl	(%eax), %edx
 1300 060c 89542404 		movl	%edx, 4(%esp)
 1301 0610 FF00     		incl	(%eax)
 1302 0612 8B4508   		movl	8(%ebp), %eax
 1303 0615 890424   		movl	%eax, (%esp)
 1304 0618 E838FEFF 		call	_GetItem
 1304      FF
1081:str_merge.c   ****     wcscat(log_output, L"\t");
 1306              	LM129:
 1307 061d C7442404 		movl	$LC0, 4(%esp)
 1307      48000000 
 1308 0625 8B4514   		movl	20(%ebp), %eax
 1309 0628 890424   		movl	%eax, (%esp)
 1310 062b E8000000 		call	_wcscat
 1310      00
1082:str_merge.c   ****     wcscat(log_output, itembuf);            /* print out Max String Length */
 1312              	LM130:
 1313 0630 8B4510   		movl	16(%ebp), %eax
 1314 0633 89442404 		movl	%eax, 4(%esp)
 1315 0637 8B4514   		movl	20(%ebp), %eax
 1316 063a 890424   		movl	%eax, (%esp)
 1317 063d E8000000 		call	_wcscat
 1317      00
1083:str_merge.c   **** 
1084:str_merge.c   ****     /* will copy back to reference string table */
1085:str_merge.c   ****     wcscpy(ref_output, log_output);
 1319              	LM131:
 1320 0642 8B4514   		movl	20(%ebp), %eax
 1321 0645 89442404 		movl	%eax, 4(%esp)
 1322 0649 8B4518   		movl	24(%ebp), %eax
 1323 064c 890424   		movl	%eax, (%esp)
 1324 064f E8000000 		call	_wcscpy
 1324      00
1086:str_merge.c   **** 
1087:str_merge.c   ****     GetItem(linebuf, (*token_id)++, itembuf);
 1326              	LM132:
 1327 0654 8B4510   		movl	16(%ebp), %eax
 1328 0657 89442408 		movl	%eax, 8(%esp)
 1329 065b 8B450C   		movl	12(%ebp), %eax
 1330 065e 8B10     		movl	(%eax), %edx
 1331 0660 89542404 		movl	%edx, 4(%esp)
 1332 0664 FF00     		incl	(%eax)
 1333 0666 8B4508   		movl	8(%ebp), %eax
 1334 0669 890424   		movl	%eax, (%esp)
 1335 066c E8E4FDFF 		call	_GetItem
 1335      FF
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 35


1088:str_merge.c   ****     wcscat(log_output, L"\t");
 1337              	LM133:
 1338 0671 C7442404 		movl	$LC0, 4(%esp)
 1338      48000000 
 1339 0679 8B4514   		movl	20(%ebp), %eax
 1340 067c 890424   		movl	%eax, (%esp)
 1341 067f E8000000 		call	_wcscat
 1341      00
1089:str_merge.c   ****     wcscat(log_output, L"No Translation");  /* print out description */
 1343              	LM134:
 1344 0684 C7442404 		movl	$LC4, 4(%esp)
 1344      9A050000 
 1345 068c 8B4514   		movl	20(%ebp), %eax
 1346 068f 890424   		movl	%eax, (%esp)
 1347 0692 E8000000 		call	_wcscat
 1347      00
1090:str_merge.c   **** 
1091:str_merge.c   ****     /* will copy back to reference string table */
1092:str_merge.c   ****     wcscat(ref_output, L"\t");
 1349              	LM135:
 1350 0697 C7442404 		movl	$LC0, 4(%esp)
 1350      48000000 
 1351 069f 8B4518   		movl	24(%ebp), %eax
 1352 06a2 890424   		movl	%eax, (%esp)
 1353 06a5 E8000000 		call	_wcscat
 1353      00
1093:str_merge.c   ****     wcscat(ref_output, itembuf);
 1355              	LM136:
 1356 06aa 8B4510   		movl	16(%ebp), %eax
 1357 06ad 89442404 		movl	%eax, 4(%esp)
 1358 06b1 8B4518   		movl	24(%ebp), %eax
 1359 06b4 890424   		movl	%eax, (%esp)
 1360 06b7 E8000000 		call	_wcscat
 1360      00
1094:str_merge.c   **** }
 1362              	LM137:
 1363 06bc C9       		leave
 1364 06bd C3       		ret
 1365              	Lscope9:
 1367 06be 89F6     		.align 32
 1368              	LC5:
 1369 06c0 6D656D6F 		.ascii "memory not available!! GetLineBufLength\0"
 1369      7279206E 
 1369      6F742061 
 1369      7661696C 
 1369      61626C65 
 1374              	_GetLineBufLength:
1095:str_merge.c   **** 
1096:str_merge.c   **** 
1097:str_merge.c   **** /*****************************************************************************
1098:str_merge.c   ****  * FUNCTION
1099:str_merge.c   ****  *  GetLineBufLength
1100:str_merge.c   ****  * DESCRIPTION
1101:str_merge.c   ****  *  Find the max chars(including NULL char) of each line in ref_list, in order to reduce memory con
1102:str_merge.c   ****  * PARAMETERS
1103:str_merge.c   ****  *  void
1104:str_merge.c   ****  * RETURNS
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 36


1105:str_merge.c   ****  *  Max chars of each line in ref_list
1106:str_merge.c   ****  *****************************************************************************/
1107:str_merge.c   **** static int GetLineBufLength(FILE *ref_list_file, int lang_count)
1108:str_merge.c   **** {
 1376              	LM138:
 1377 06e8 55       		pushl	%ebp
 1378 06e9 89E5     		movl	%esp, %ebp
 1379 06eb 83EC28   		subl	$40, %esp
1109:str_merge.c   ****     wchar_t *temp_buf = NULL; /* line buffer */
 1381              	LM139:
 1382              	LBB12:
 1383 06ee C745FC00 		movl	$0, -4(%ebp)
 1383      000000
1110:str_merge.c   ****     int max_line_char_count; /* including NULL char */
1111:str_merge.c   ****     int max_line_buf_length = 0;
 1385              	LM140:
 1386 06f5 C745F400 		movl	$0, -12(%ebp)
 1386      000000
1112:str_merge.c   ****     int tmp;
1113:str_merge.c   ****     
1114:str_merge.c   **** #ifdef MEM_LIST_INFO_STATS
1115:str_merge.c   ****     int length_stats[MEM_STATS_ITEM_LENGTH] = {0};
1116:str_merge.c   ****     int length_index = 0;
1117:str_merge.c   **** #endif /*MEM_LIST_INFO_STATS*/
1118:str_merge.c   **** 
1119:str_merge.c   ****     /* 
1120:str_merge.c   ****      * calculate line buffer size 
1121:str_merge.c   ****      * here +2 for Description, and (Max String Length, MODULE, ENUM)
1122:str_merge.c   ****      */    
1123:str_merge.c   ****     max_line_char_count = (lang_count + 2) * MAX_LENGTH;
 1388              	LM141:
 1389 06fc 8B450C   		movl	12(%ebp), %eax
 1390 06ff C1E009   		sall	$9, %eax
 1391 0702 05000400 		addl	$1024, %eax
 1391      00
 1392 0707 8945F8   		movl	%eax, -8(%ebp)
1124:str_merge.c   ****     temp_buf = (wchar_t *)malloc(max_line_char_count * sizeof(wchar_t));
 1394              	LM142:
 1395 070a 8B45F8   		movl	-8(%ebp), %eax
 1396 070d 01C0     		addl	%eax, %eax
 1397 070f 890424   		movl	%eax, (%esp)
 1398 0712 E8000000 		call	_malloc
 1398      00
 1399 0717 8945FC   		movl	%eax, -4(%ebp)
1125:str_merge.c   ****     if (temp_buf == NULL)
 1401              	LM143:
 1402 071a 837DFC00 		cmpl	$0, -4(%ebp)
 1403 071e 7528     		jne	L84
1126:str_merge.c   ****     {
1127:str_merge.c   ****         STRMERG_LOG_E("memory not available!! GetLineBufLength");
 1405              	LM144:
 1406 0720 C7442408 		movl	$LC5, 8(%esp)
 1406      C0060000 
 1407 0728 C7442404 		movl	$LC3, 4(%esp)
 1407      4B040000 
 1408 0730 C7042403 		movl	$3, (%esp)
 1408      000000
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 37


 1409 0737 E8000000 		call	_reslog_adaptor_log
 1409      00
1128:str_merge.c   ****         exit(2);
 1411              	LM145:
 1412 073c C7042402 		movl	$2, (%esp)
 1412      000000
 1413 0743 E8000000 		call	_exit
 1413      00
 1414              	L84:
 1415 0748 90       		nop
1129:str_merge.c   ****     }
1130:str_merge.c   ****     while (!feof(ref_list_file))
 1417              	LM146:
 1418              	L85:
 1419 0749 8B4508   		movl	8(%ebp), %eax
 1420 074c 890424   		movl	%eax, (%esp)
 1421 074f E8000000 		call	_feof
 1421      00
 1422 0754 85C0     		testl	%eax, %eax
 1423 0756 7402     		je	L87
 1424 0758 EB38     		jmp	L86
 1425              	L87:
1131:str_merge.c   ****     {
1132:str_merge.c   ****         /* get a line of string */
1133:str_merge.c   ****         fgetws(temp_buf, max_line_char_count, ref_list_file);  
 1427              	LM147:
 1428 075a 8B4508   		movl	8(%ebp), %eax
 1429 075d 89442408 		movl	%eax, 8(%esp)
 1430 0761 8B45F8   		movl	-8(%ebp), %eax
 1431 0764 89442404 		movl	%eax, 4(%esp)
 1432 0768 8B45FC   		movl	-4(%ebp), %eax
 1433 076b 890424   		movl	%eax, (%esp)
 1434 076e E8000000 		call	_fgetws
 1434      00
1134:str_merge.c   ****         tmp = wcslen(temp_buf) + 1;
 1436              	LM148:
 1437 0773 8B45FC   		movl	-4(%ebp), %eax
 1438 0776 890424   		movl	%eax, (%esp)
 1439 0779 E8000000 		call	_wcslen
 1439      00
 1440 077e 40       		incl	%eax
 1441 077f 8945F0   		movl	%eax, -16(%ebp)
1135:str_merge.c   ****         if (max_line_buf_length < tmp)
 1443              	LM149:
 1444 0782 8B45F4   		movl	-12(%ebp), %eax
 1445 0785 3B45F0   		cmpl	-16(%ebp), %eax
 1446 0788 7DBF     		jge	L85
1136:str_merge.c   ****         {
1137:str_merge.c   ****             max_line_buf_length = tmp;    
 1448              	LM150:
 1449 078a 8B45F0   		movl	-16(%ebp), %eax
 1450 078d 8945F4   		movl	%eax, -12(%ebp)
 1451 0790 EBB7     		jmp	L85
 1452              	L86:
1138:str_merge.c   ****         }
1139:str_merge.c   **** 
1140:str_merge.c   **** #ifdef MEM_LIST_INFO_STATS
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 38


1141:str_merge.c   ****     	/* Memory usage statistics of each language string line 
1142:str_merge.c   ****             in ref_list loaded
1143:str_merge.c   ****         */
1144:str_merge.c   **** 	length_index = (int)(tmp/MEM_STATS_ITEM_LENGTH);
1145:str_merge.c   **** 	if(length_index >= MEM_STATS_ITEM_MAX)
1146:str_merge.c   ****         {
1147:str_merge.c   **** 	    length_index = MEM_STATS_ITEM_MAX-1;
1148:str_merge.c   ****         }
1149:str_merge.c   **** 	length_stats[length_index]++;
1150:str_merge.c   **** 
1151:str_merge.c   ****         if(tmp > MEM_STATS_ITEM_LENGTH)
1152:str_merge.c   ****         {
1153:str_merge.c   ****             STRMERG_LOG_V("\n[%d]: %d\t", length_index * MEM_STATS_ITEM_LENGTH, tmp);
1154:str_merge.c   ****             STRMERG_WLOG_V(L"%ls",temp_buf);
1155:str_merge.c   ****         }
1156:str_merge.c   **** #endif /*MEM_LIST_INFO_STATS*/
1157:str_merge.c   ****     } 
1158:str_merge.c   **** 	
1159:str_merge.c   **** #ifdef MEM_LIST_INFO_STATS
1160:str_merge.c   ****     /* Show the memory usage statistics of string lines in ref_list */
1161:str_merge.c   ****     STRMERG_LOG_V("\nSummary of String line length:");
1162:str_merge.c   ****   
1163:str_merge.c   ****     for(length_index = 0; length_index < MEM_STATS_ITEM_MAX; length_index++)
1164:str_merge.c   ****     {
1165:str_merge.c   ****         STRMERG_LOG_V("[%d]: %d", length_index * MEM_STATS_ITEM_LENGTH, length_stats[length_index])
1166:str_merge.c   ****       
1167:str_merge.c   ****      }
1168:str_merge.c   **** #endif /*MEM_LIST_INFO_STATS*/
1169:str_merge.c   ****   
1170:str_merge.c   ****     free(temp_buf);
 1454              	LM151:
 1455 0792 8B45FC   		movl	-4(%ebp), %eax
 1456 0795 890424   		movl	%eax, (%esp)
 1457 0798 E8000000 		call	_free
 1457      00
1171:str_merge.c   ****     return max_line_buf_length;
 1459              	LM152:
 1460 079d 8B45F4   		movl	-12(%ebp), %eax
1172:str_merge.c   **** }
 1462              	LM153:
 1463 07a0 C9       		leave
 1464 07a1 C3       		ret
 1465              	LBE12:
 1472              	Lscope10:
 1474              	LC6:
 1475 07a2 2A233030 		.ascii "*#0044#\0"
 1475      34342300 
 1478              	_en_language_is_open:
1173:str_merge.c   **** 
1174:str_merge.c   **** 
1175:str_merge.c   **** /*****************************************************************************
1176:str_merge.c   ****  * FUNCTION
1177:str_merge.c   ****  *  en_language_is_open
1178:str_merge.c   ****  * DESCRIPTION
1179:str_merge.c   ****  *  check if english language is open or not 
1180:str_merge.c   ****  * PARAMETERS
1181:str_merge.c   ****  *  svoid
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 39


1182:str_merge.c   ****  * RETURNS
1183:str_merge.c   ****  *  Return TRUE if english is open, otherwise, return FALSE
1184:str_merge.c   ****  *****************************************************************************/
1185:str_merge.c   **** static BOOL en_language_is_open(void)
1186:str_merge.c   **** {
 1480              	LM154:
 1481 07aa 55       		pushl	%ebp
 1482 07ab 89E5     		movl	%esp, %ebp
 1483 07ad 83EC18   		subl	$24, %esp
1187:str_merge.c   ****     int i = 0;
 1485              	LM155:
 1486              	LBB13:
 1487 07b0 C745FC00 		movl	$0, -4(%ebp)
 1487      000000
1188:str_merge.c   ****     char *en = "*#0044#";
 1489              	LM156:
 1490 07b7 C745F8A2 		movl	$LC6, -8(%ebp)
 1490      070000
1189:str_merge.c   **** 
1190:str_merge.c   ****     for(i = 0; i < mtk_gMaxDeployedLangs; ++i)
 1492              	LM157:
 1493 07be C745FC00 		movl	$0, -4(%ebp)
 1493      000000
 1494              	L90:
 1495 07c5 0FB70500 		movzwl	_mtk_gMaxDeployedLangs, %eax
 1495      000000
 1496 07cc 3945FC   		cmpl	%eax, -4(%ebp)
 1497 07cf 7C02     		jl	L93
 1498 07d1 EB34     		jmp	L91
 1499              	L93:
1191:str_merge.c   ****     {
1192:str_merge.c   ****         if(strcmp(mtk_gLanguageArray[i].aLangSSC, en) == 0)
 1501              	LM158:
 1502 07d3 8B45F8   		movl	-8(%ebp), %eax
 1503 07d6 89442404 		movl	%eax, 4(%esp)
 1504 07da 8B55FC   		movl	-4(%ebp), %edx
 1505 07dd 89D0     		movl	%edx, %eax
 1506 07df C1E005   		sall	$5, %eax
 1507 07e2 29D0     		subl	%edx, %eax
 1508 07e4 01C0     		addl	%eax, %eax
 1509 07e6 05280000 		addl	$_mtk_gLanguageArray+40, %eax
 1509      00
 1510 07eb 890424   		movl	%eax, (%esp)
 1511 07ee E8000000 		call	_strcmp
 1511      00
 1512 07f3 85C0     		testl	%eax, %eax
 1513 07f5 7509     		jne	L92
1193:str_merge.c   ****         {
1194:str_merge.c   ****             return TRUE;
 1515              	LM159:
 1516 07f7 C745F401 		movl	$1, -12(%ebp)
 1516      000000
 1517 07fe EB0E     		jmp	L89
 1519              	LM160:
 1520              	L92:
 1521 0800 8D45FC   		leal	-4(%ebp), %eax
 1522 0803 FF00     		incl	(%eax)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 40


 1523 0805 EBBE     		jmp	L90
 1524              	L91:
1195:str_merge.c   ****         }
1196:str_merge.c   ****     }
1197:str_merge.c   **** 
1198:str_merge.c   ****     return FALSE;
 1526              	LM161:
 1527 0807 C745F400 		movl	$0, -12(%ebp)
 1527      000000
1199:str_merge.c   **** }
 1529              	LM162:
 1530              	L89:
 1531              	LBE13:
 1532 080e 8B45F4   		movl	-12(%ebp), %eax
 1533 0811 C9       		leave
 1534 0812 C3       		ret
 1539              	Lscope11:
 1541 0813 90       		.align 2
 1542              	LC7:
 1543 0814 2A002300 		.ascii "*\0#\0"
 1544 0818 3000     		.ascii "0\0"
 1545 081a 3000     		.ascii "0\0"
 1546 081c 3400     		.ascii "4\0"
 1547 081e 34002300 		.ascii "4\0#\0\0\0"
 1547      0000
 1553              	_get_language_in_ssc_index:
1200:str_merge.c   **** 
1201:str_merge.c   **** 
1202:str_merge.c   **** /*****************************************************************************
1203:str_merge.c   ****  * FUNCTION
1204:str_merge.c   ****  *  get_language_in_ssc_index
1205:str_merge.c   ****  * DESCRIPTION
1206:str_merge.c   ****  *  get the column index that deployed language in ref list 
1207:str_merge.c   ****  * PARAMETERS
1208:str_merge.c   ****  *  ssc         :[IN]  ssc string of ref list
1209:str_merge.c   ****  *  index       :[OUT] column index that deployed language in ref list
1210:str_merge.c   ****  *  lang_count  :[IN] language total count
1211:str_merge.c   ****  * RETURNS
1212:str_merge.c   ****  *  Return 0 on success, otherwise, return -1
1213:str_merge.c   ****  *****************************************************************************/
1214:str_merge.c   **** static void get_language_in_ssc_index(const wchar_t* ssc, int **index, int lang_count)
1215:str_merge.c   **** {
 1555              	LM163:
 1556 0824 55       		pushl	%ebp
 1557 0825 89E5     		movl	%esp, %ebp
 1558 0827 83EC28   		subl	$40, %esp
1216:str_merge.c   ****     int j = 0, k = 0;
 1560              	LM164:
 1561              	LBB14:
 1562 082a C745FC00 		movl	$0, -4(%ebp)
 1562      000000
 1563 0831 C745F800 		movl	$0, -8(%ebp)
 1563      000000
1217:str_merge.c   ****     wchar_t *tok = NULL;
 1565              	LM165:
 1566 0838 C745F400 		movl	$0, -12(%ebp)
 1566      000000
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 41


1218:str_merge.c   ****     wchar_t *en = L"*#0044#";
 1568              	LM166:
 1569 083f C745F014 		movl	$LC7, -16(%ebp)
 1569      080000
1219:str_merge.c   ****     int LangIndex = 0;
 1571              	LM167:
 1572 0846 C745EC00 		movl	$0, -20(%ebp)
 1572      000000
1220:str_merge.c   ****     int en_index = -1;
 1574              	LM168:
 1575 084d C745E8FF 		movl	$-1, -24(%ebp)
 1575      FFFFFF
1221:str_merge.c   ****     int count = 0;
 1577              	LM169:
 1578 0854 C745E400 		movl	$0, -28(%ebp)
 1578      000000
1222:str_merge.c   ****     /*g_line_buf_length has been initialized here*/
1223:str_merge.c   ****     wchar_t *rssc = NULL;
 1580              	LM170:
 1581 085b C745E000 		movl	$0, -32(%ebp)
 1581      000000
1224:str_merge.c   **** 
1225:str_merge.c   ****     rssc = (wchar_t*)malloc(g_line_buf_length * sizeof(wchar_t));
 1583              	LM171:
 1584 0862 A1280000 		movl	_g_line_buf_length, %eax
 1584      00
 1585 0867 01C0     		addl	%eax, %eax
 1586 0869 890424   		movl	%eax, (%esp)
 1587 086c E8000000 		call	_malloc
 1587      00
 1588 0871 8945E0   		movl	%eax, -32(%ebp)
1226:str_merge.c   **** 
1227:str_merge.c   ****     if(ssc == NULL || index == NULL || rssc == NULL)
 1590              	LM172:
 1591 0874 837D0800 		cmpl	$0, 8(%ebp)
 1592 0878 0F843C02 		je	L95
 1592      0000
 1593 087e 837D0C00 		cmpl	$0, 12(%ebp)
 1594 0882 0F843202 		je	L95
 1594      0000
 1595 0888 837DE000 		cmpl	$0, -32(%ebp)
 1596 088c 7505     		jne	L96
1228:str_merge.c   ****     {
1229:str_merge.c   ****         return;
 1598              	LM173:
 1599 088e E9270200 		jmp	L95
 1599      00
 1600              	L96:
1230:str_merge.c   ****     }
1231:str_merge.c   **** 
1232:str_merge.c   ****     /*skip the fist 4 column header*/
1233:str_merge.c   ****     wcscpy(rssc, ssc);
 1602              	LM174:
 1603 0893 8B4508   		movl	8(%ebp), %eax
 1604 0896 89442404 		movl	%eax, 4(%esp)
 1605 089a 8B45E0   		movl	-32(%ebp), %eax
 1606 089d 890424   		movl	%eax, (%esp)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 42


 1607 08a0 E8000000 		call	_wcscpy
 1607      00
1234:str_merge.c   ****     tok = wcstok(rssc, DELIMETER);	 /* ENUM */
 1609              	LM175:
 1610 08a5 A1940100 		movl	_DELIMETER, %eax
 1610      00
 1611 08aa 89442404 		movl	%eax, 4(%esp)
 1612 08ae 8B45E0   		movl	-32(%ebp), %eax
 1613 08b1 890424   		movl	%eax, (%esp)
 1614 08b4 E8000000 		call	_wcstok
 1614      00
 1615 08b9 8945F4   		movl	%eax, -12(%ebp)
1235:str_merge.c   ****     tok = wcstok(NULL, DELIMETER);		/* MODULE NAME */
 1617              	LM176:
 1618 08bc A1940100 		movl	_DELIMETER, %eax
 1618      00
 1619 08c1 89442404 		movl	%eax, 4(%esp)
 1620 08c5 C7042400 		movl	$0, (%esp)
 1620      000000
 1621 08cc E8000000 		call	_wcstok
 1621      00
 1622 08d1 8945F4   		movl	%eax, -12(%ebp)
1236:str_merge.c   ****     tok = wcstok(NULL, DELIMETER);		/* MAX LENGTH */
 1624              	LM177:
 1625 08d4 A1940100 		movl	_DELIMETER, %eax
 1625      00
 1626 08d9 89442404 		movl	%eax, 4(%esp)
 1627 08dd C7042400 		movl	$0, (%esp)
 1627      000000
 1628 08e4 E8000000 		call	_wcstok
 1628      00
 1629 08e9 8945F4   		movl	%eax, -12(%ebp)
1237:str_merge.c   ****     tok = wcstok(NULL, DELIMETER);		/* DESCRIPTION */
 1631              	LM178:
 1632 08ec A1940100 		movl	_DELIMETER, %eax
 1632      00
 1633 08f1 89442404 		movl	%eax, 4(%esp)
 1634 08f5 C7042400 		movl	$0, (%esp)
 1634      000000
 1635 08fc E8000000 		call	_wcstok
 1635      00
 1636 0901 8945F4   		movl	%eax, -12(%ebp)
1238:str_merge.c   **** 
1239:str_merge.c   ****     for (j = 4; j < lang_count + 4; j++) /*a little tricky*/
 1638              	LM179:
 1639 0904 C745FC04 		movl	$4, -4(%ebp)
 1639      000000
 1640              	L98:
 1641 090b 8B4510   		movl	16(%ebp), %eax
 1642 090e 83C004   		addl	$4, %eax
 1643 0911 3945FC   		cmpl	%eax, -4(%ebp)
 1644 0914 7C02     		jl	L101
 1645 0916 EB63     		jmp	L99
 1646              	L101:
1240:str_merge.c   ****     {
1241:str_merge.c   ****         /* change to corresponding language column according to j */
1242:str_merge.c   ****         tok = wcstok(NULL, DELIMETER);
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 43


 1648              	LM180:
 1649 0918 A1940100 		movl	_DELIMETER, %eax
 1649      00
 1650 091d 89442404 		movl	%eax, 4(%esp)
 1651 0921 C7042400 		movl	$0, (%esp)
 1651      000000
 1652 0928 E8000000 		call	_wcstok
 1652      00
 1653 092d 8945F4   		movl	%eax, -12(%ebp)
1243:str_merge.c   **** 
1244:str_merge.c   ****         ASSERT(tok != NULL);
 1655              	LM181:
 1656 0930 837DF400 		cmpl	$0, -12(%ebp)
 1657 0934 7502     		jne	L106
 1658              	L103:
 1659 0936 EBFE     		jmp	L103
 1660              	L106:
1245:str_merge.c   ****         LangIndex = ifLanguageUsed(tok);
 1662              	LM182:
 1663 0938 8B45F4   		movl	-12(%ebp), %eax
 1664 093b 890424   		movl	%eax, (%esp)
 1665 093e E8DA2000 		call	_ifLanguageUsed
 1665      00
 1666 0943 8945EC   		movl	%eax, -20(%ebp)
1246:str_merge.c   **** 
1247:str_merge.c   ****         if (LangIndex < 0) /* the language is not used in font resource */
 1668              	LM183:
 1669 0946 837DEC00 		cmpl	$0, -20(%ebp)
 1670 094a 7902     		jns	L107
1248:str_merge.c   ****             continue;
 1672              	LM184:
 1673 094c EB26     		jmp	L100
 1674              	L107:
1249:str_merge.c   **** 
1250:str_merge.c   ****         index[count++] = j;
 1676              	LM185:
 1677 094e 8B45E4   		movl	-28(%ebp), %eax
 1678 0951 8D0C8500 		leal	0(,%eax,4), %ecx
 1678      000000
 1679 0958 8B550C   		movl	12(%ebp), %edx
 1680 095b 8B45FC   		movl	-4(%ebp), %eax
 1681 095e 89040A   		movl	%eax, (%edx,%ecx)
 1682 0961 8D45E4   		leal	-28(%ebp), %eax
 1683 0964 FF00     		incl	(%eax)
1251:str_merge.c   **** 
1252:str_merge.c   ****         /*if all language has been searched, we will return*/
1253:str_merge.c   ****         if(count == mtk_gMaxDeployedLangs)
 1685              	LM186:
 1686 0966 0FB70500 		movzwl	_mtk_gMaxDeployedLangs, %eax
 1686      000000
 1687 096d 3945E4   		cmpl	%eax, -28(%ebp)
 1688 0970 7502     		jne	L100
1254:str_merge.c   ****             break;
 1690              	LM187:
 1691 0972 EB07     		jmp	L99
 1693              	LM188:
 1694              	L100:
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 44


 1695 0974 8D45FC   		leal	-4(%ebp), %eax
 1696 0977 FF00     		incl	(%eax)
 1697 0979 EB90     		jmp	L98
 1698              	L99:
1255:str_merge.c   ****     }
1256:str_merge.c   **** 
1257:str_merge.c   ****     /*if english is not opened, insert english order into index*/
1258:str_merge.c   ****     if(!en_language_is_open())
 1700              	LM189:
 1701 097b E82AFEFF 		call	_en_language_is_open
 1701      FF
 1702 0980 85C0     		testl	%eax, %eax
 1703 0982 0F852701 		jne	L109
 1703      0000
1259:str_merge.c   ****     {
1260:str_merge.c   ****         /*find english index in ssc*/
1261:str_merge.c   ****         wcscpy(rssc, ssc);
 1705              	LM190:
 1706 0988 8B4508   		movl	8(%ebp), %eax
 1707 098b 89442404 		movl	%eax, 4(%esp)
 1708 098f 8B45E0   		movl	-32(%ebp), %eax
 1709 0992 890424   		movl	%eax, (%esp)
 1710 0995 E8000000 		call	_wcscpy
 1710      00
1262:str_merge.c   ****         tok = wcstok(rssc, DELIMETER);	 /* ENUM */
 1712              	LM191:
 1713 099a A1940100 		movl	_DELIMETER, %eax
 1713      00
 1714 099f 89442404 		movl	%eax, 4(%esp)
 1715 09a3 8B45E0   		movl	-32(%ebp), %eax
 1716 09a6 890424   		movl	%eax, (%esp)
 1717 09a9 E8000000 		call	_wcstok
 1717      00
 1718 09ae 8945F4   		movl	%eax, -12(%ebp)
1263:str_merge.c   ****         tok = wcstok(NULL, DELIMETER);		/* MODULE NAME */
 1720              	LM192:
 1721 09b1 A1940100 		movl	_DELIMETER, %eax
 1721      00
 1722 09b6 89442404 		movl	%eax, 4(%esp)
 1723 09ba C7042400 		movl	$0, (%esp)
 1723      000000
 1724 09c1 E8000000 		call	_wcstok
 1724      00
 1725 09c6 8945F4   		movl	%eax, -12(%ebp)
1264:str_merge.c   ****         tok = wcstok(NULL, DELIMETER);		/* MAX LENGTH */
 1727              	LM193:
 1728 09c9 A1940100 		movl	_DELIMETER, %eax
 1728      00
 1729 09ce 89442404 		movl	%eax, 4(%esp)
 1730 09d2 C7042400 		movl	$0, (%esp)
 1730      000000
 1731 09d9 E8000000 		call	_wcstok
 1731      00
 1732 09de 8945F4   		movl	%eax, -12(%ebp)
1265:str_merge.c   ****         tok = wcstok(NULL, DELIMETER);		/* DESCRIPTION */
 1734              	LM194:
 1735 09e1 A1940100 		movl	_DELIMETER, %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 45


 1735      00
 1736 09e6 89442404 		movl	%eax, 4(%esp)
 1737 09ea C7042400 		movl	$0, (%esp)
 1737      000000
 1738 09f1 E8000000 		call	_wcstok
 1738      00
 1739 09f6 8945F4   		movl	%eax, -12(%ebp)
1266:str_merge.c   **** 
1267:str_merge.c   ****         /*get the index of english in ssc*/
1268:str_merge.c   ****         for(j = 4; j < lang_count + 4; j++)
 1741              	LM195:
 1742 09f9 C745FC04 		movl	$4, -4(%ebp)
 1742      000000
 1743              	L110:
 1744 0a00 8B4510   		movl	16(%ebp), %eax
 1745 0a03 83C004   		addl	$4, %eax
 1746 0a06 3945FC   		cmpl	%eax, -4(%ebp)
 1747 0a09 7C02     		jl	L113
 1748 0a0b EB45     		jmp	L111
 1749              	L113:
1269:str_merge.c   ****         {
1270:str_merge.c   ****             tok = wcstok(NULL, DELIMETER);
 1751              	LM196:
 1752 0a0d A1940100 		movl	_DELIMETER, %eax
 1752      00
 1753 0a12 89442404 		movl	%eax, 4(%esp)
 1754 0a16 C7042400 		movl	$0, (%esp)
 1754      000000
 1755 0a1d E8000000 		call	_wcstok
 1755      00
 1756 0a22 8945F4   		movl	%eax, -12(%ebp)
1271:str_merge.c   **** 
1272:str_merge.c   ****             ASSERT(tok != NULL);
 1758              	LM197:
 1759 0a25 837DF400 		cmpl	$0, -12(%ebp)
 1760 0a29 7502     		jne	L118
 1761              	L115:
 1762 0a2b EBFE     		jmp	L115
 1763              	L118:
1273:str_merge.c   ****             if(wcscmp(tok, en) == 0)
 1765              	LM198:
 1766 0a2d 8B45F0   		movl	-16(%ebp), %eax
 1767 0a30 89442404 		movl	%eax, 4(%esp)
 1768 0a34 8B45F4   		movl	-12(%ebp), %eax
 1769 0a37 890424   		movl	%eax, (%esp)
 1770 0a3a E8000000 		call	_wcscmp
 1770      00
 1771 0a3f 85C0     		testl	%eax, %eax
 1772 0a41 7508     		jne	L112
1274:str_merge.c   ****             {
1275:str_merge.c   ****                 en_index = j;
 1774              	LM199:
 1775 0a43 8B45FC   		movl	-4(%ebp), %eax
 1776 0a46 8945E8   		movl	%eax, -24(%ebp)
1276:str_merge.c   ****                 break;
 1778              	LM200:
 1779 0a49 EB07     		jmp	L111
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 46


 1781              	LM201:
 1782              	L112:
 1783 0a4b 8D45FC   		leal	-4(%ebp), %eax
 1784 0a4e FF00     		incl	(%eax)
 1785 0a50 EBAE     		jmp	L110
 1786              	L111:
1277:str_merge.c   ****             }
1278:str_merge.c   ****         }
1279:str_merge.c   **** 
1280:str_merge.c   ****         /*insert en_index into index and keep increase order*/
1281:str_merge.c   ****         for(j = mtk_gMaxDeployedLangs; j > 0; --j)
 1788              	LM202:
 1789 0a52 0FB70500 		movzwl	_mtk_gMaxDeployedLangs, %eax
 1789      000000
 1790 0a59 8945FC   		movl	%eax, -4(%ebp)
 1791              	L120:
 1792 0a5c 837DFC00 		cmpl	$0, -4(%ebp)
 1793 0a60 7F02     		jg	L123
 1794 0a62 EB38     		jmp	L121
 1795              	L123:
1282:str_merge.c   ****         {
1283:str_merge.c   ****             if(en_index < index[j - 1])
 1797              	LM203:
 1798 0a64 8B45FC   		movl	-4(%ebp), %eax
 1799 0a67 C1E002   		sall	$2, %eax
 1800 0a6a 03450C   		addl	12(%ebp), %eax
 1801 0a6d 8D50FC   		leal	-4(%eax), %edx
 1802 0a70 8B45E8   		movl	-24(%ebp), %eax
 1803 0a73 3B02     		cmpl	(%edx), %eax
 1804 0a75 7325     		jae	L121
1284:str_merge.c   ****                 index[j] = index[j - 1];
 1806              	LM204:
 1807 0a77 8B45FC   		movl	-4(%ebp), %eax
 1808 0a7a 8D148500 		leal	0(,%eax,4), %edx
 1808      000000
 1809 0a81 8B4D0C   		movl	12(%ebp), %ecx
 1810 0a84 8B45FC   		movl	-4(%ebp), %eax
 1811 0a87 C1E002   		sall	$2, %eax
 1812 0a8a 03450C   		addl	12(%ebp), %eax
 1813 0a8d 83E804   		subl	$4, %eax
 1814 0a90 8B00     		movl	(%eax), %eax
 1815 0a92 890411   		movl	%eax, (%ecx,%edx)
 1817              	LM205:
 1818 0a95 8D45FC   		leal	-4(%ebp), %eax
 1819 0a98 FF08     		decl	(%eax)
 1820 0a9a EBC0     		jmp	L120
 1821              	L121:
1285:str_merge.c   ****             else
1286:str_merge.c   ****                 break;
1287:str_merge.c   ****         }
1288:str_merge.c   ****         index[j] = en_index;
 1823              	LM206:
 1824 0a9c 8B45FC   		movl	-4(%ebp), %eax
 1825 0a9f 8D0C8500 		leal	0(,%eax,4), %ecx
 1825      000000
 1826 0aa6 8B550C   		movl	12(%ebp), %edx
 1827 0aa9 8B45E8   		movl	-24(%ebp), %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 47


 1828 0aac 89040A   		movl	%eax, (%edx,%ecx)
 1829              	L109:
1289:str_merge.c   ****     }
1290:str_merge.c   **** 
1291:str_merge.c   ****     free(rssc);
 1831              	LM207:
 1832 0aaf 8B45E0   		movl	-32(%ebp), %eax
 1833 0ab2 890424   		movl	%eax, (%esp)
 1834 0ab5 E8000000 		call	_free
 1834      00
1292:str_merge.c   **** }
 1836              	LM208:
 1837              	L95:
 1838 0aba C9       		leave
 1839 0abb C3       		ret
 1840              	LBE14:
 1851              	Lscope12:
 1853              		.align 2
 1854              	LC8:
 1855 0abc 0D000A00 		.ascii "\15\0\12\0\0\0\0\0"
 1855      00000000 
 1862              	_filter_raw_string:
1293:str_merge.c   **** 
1294:str_merge.c   **** 
1295:str_merge.c   **** /*****************************************************************************
1296:str_merge.c   ****  * FUNCTION
1297:str_merge.c   ****  *  filter_raw_string
1298:str_merge.c   ****  * DESCRIPTION
1299:str_merge.c   ****  *  filter not used fieled, only reserve the first 5 column and opened language
1300:str_merge.c   ****  *
1301:str_merge.c   ****  * PARAMETERS
1302:str_merge.c   ****  *  in_data      :[IN]  one line of ref_list.txt
1303:str_merge.c   ****  *  out_data    :[OUT] column index that deployed language in ref list
1304:str_merge.c   ****  *  index         :[IN] index array that open language in ssc
1305:str_merge.c   ****  *  total_lang   :[IN] total language count
1306:str_merge.c   ****  * RETURNS
1307:str_merge.c   ****  *  void
1308:str_merge.c   ****  *****************************************************************************/
1309:str_merge.c   **** static void filter_raw_string(const wchar_t* in_data, wchar_t* out_data, const int *index, int tota
1310:str_merge.c   **** {
 1864              	LM209:
 1865 0ac4 55       		pushl	%ebp
 1866 0ac5 89E5     		movl	%esp, %ebp
 1867 0ac7 81EC3808 		subl	$2104, %esp
 1867      0000
 1868              	LBB15:
 1869 0acd 89A5E0F7 		movl	%esp, -2080(%ebp)
 1869      FFFF
1311:str_merge.c   ****     int i = 0;
 1871              	LM210:
 1872 0ad3 C745F400 		movl	$0, -12(%ebp)
 1872      000000
1312:str_merge.c   ****     int token = 0;
 1874              	LM211:
 1875 0ada C745F000 		movl	$0, -16(%ebp)
 1875      000000
1313:str_merge.c   ****     wchar_t itembuf[TMP_BUF_LENGTH];
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 48


1314:str_merge.c   ****     wchar_t tmp[g_line_buf_length * sizeof(wchar_t)];
 1877              	LM212:
 1878 0ae1 A1280000 		movl	_g_line_buf_length, %eax
 1878      00
 1879 0ae6 01C0     		addl	%eax, %eax
 1880 0ae8 48       		decl	%eax
 1881 0ae9 01C0     		addl	%eax, %eax
 1882 0aeb 83C002   		addl	$2, %eax
 1883 0aee 83C00F   		addl	$15, %eax
 1884 0af1 C1E804   		shrl	$4, %eax
 1885 0af4 C1E004   		sall	$4, %eax
 1886 0af7 8985D8F7 		movl	%eax, -2088(%ebp)
 1886      FFFF
 1887 0afd 8B85D8F7 		movl	-2088(%ebp), %eax
 1887      FFFF
 1888 0b03 E8000000 		call	__alloca
 1888      00
 1889 0b08 8D44240C 		leal	12(%esp), %eax
 1890 0b0c 8985DCF7 		movl	%eax, -2084(%ebp)
 1890      FFFF
1315:str_merge.c   ****     wchar_t marker[2] = {NO_TRANSLATION_MARKER, 0};
 1892              	LM213:
 1893 0b12 66C785E4 		movw	$19, -2076(%ebp)
 1893      F7FFFF13 
 1893      00
 1894 0b1b 66C785E6 		movw	$0, -2074(%ebp)
 1894      F7FFFF00 
 1894      00
1316:str_merge.c   **** 
1317:str_merge.c   ****     if(in_data == NULL || out_data == NULL || index == NULL)
 1896              	LM214:
 1897 0b24 837D0800 		cmpl	$0, 8(%ebp)
 1898 0b28 740C     		je	L128
 1899 0b2a 837D0C00 		cmpl	$0, 12(%ebp)
 1900 0b2e 7406     		je	L128
 1901 0b30 837D1000 		cmpl	$0, 16(%ebp)
 1902 0b34 750B     		jne	L127
 1903              	L128:
1318:str_merge.c   ****     {
1319:str_merge.c   ****         return;
 1905              	LM215:
 1906              	LBB16:
 1907 0b36 8BA5E0F7 		movl	-2080(%ebp), %esp
 1907      FFFF
 1908              	LBE16:
 1909 0b3c E9B40100 		jmp	L126
 1909      00
 1910              	L127:
1320:str_merge.c   ****     }
1321:str_merge.c   **** 
1322:str_merge.c   ****     /*put it in the tmp buffer*/
1323:str_merge.c   ****     wcscpy(tmp, in_data);
 1912              	LM216:
 1913 0b41 8B4508   		movl	8(%ebp), %eax
 1914 0b44 89442404 		movl	%eax, 4(%esp)
 1915 0b48 8B85DCF7 		movl	-2084(%ebp), %eax
 1915      FFFF
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 49


 1916 0b4e 890424   		movl	%eax, (%esp)
 1917 0b51 E8000000 		call	_wcscpy
 1917      00
1324:str_merge.c   **** 
1325:str_merge.c   ****     /*copy the first 4 column*/	
1326:str_merge.c   ****     GetItem(tmp, token++, itembuf);
 1919              	LM217:
 1920 0b56 8D85E8F7 		leal	-2072(%ebp), %eax
 1920      FFFF
 1921 0b5c 89442408 		movl	%eax, 8(%esp)
 1922 0b60 8B45F0   		movl	-16(%ebp), %eax
 1923 0b63 89442404 		movl	%eax, 4(%esp)
 1924 0b67 8D45F0   		leal	-16(%ebp), %eax
 1925 0b6a FF00     		incl	(%eax)
 1926 0b6c 8B85DCF7 		movl	-2084(%ebp), %eax
 1926      FFFF
 1927 0b72 890424   		movl	%eax, (%esp)
 1928 0b75 E8DBF8FF 		call	_GetItem
 1928      FF
1327:str_merge.c   ****     wcscpy(out_data, itembuf);
 1930              	LM218:
 1931 0b7a 8D85E8F7 		leal	-2072(%ebp), %eax
 1931      FFFF
 1932 0b80 89442404 		movl	%eax, 4(%esp)
 1933 0b84 8B450C   		movl	12(%ebp), %eax
 1934 0b87 890424   		movl	%eax, (%esp)
 1935 0b8a E8000000 		call	_wcscpy
 1935      00
1328:str_merge.c   ****     wcscat(out_data, L"\t");
 1937              	LM219:
 1938 0b8f C7442404 		movl	$LC0, 4(%esp)
 1938      48000000 
 1939 0b97 8B450C   		movl	12(%ebp), %eax
 1940 0b9a 890424   		movl	%eax, (%esp)
 1941 0b9d E8000000 		call	_wcscat
 1941      00
1329:str_merge.c   **** 
1330:str_merge.c   ****     for(i = 1; i < 4; ++i)
 1943              	LM220:
 1944 0ba2 C745F401 		movl	$1, -12(%ebp)
 1944      000000
 1945              	L129:
 1946 0ba9 837DF403 		cmpl	$3, -12(%ebp)
 1947 0bad 7E02     		jle	L132
 1948 0baf EB71     		jmp	L130
 1949              	L132:
1331:str_merge.c   ****     {
1332:str_merge.c   ****         GetItem(in_data, token++, itembuf);
 1951              	LM221:
 1952 0bb1 8D85E8F7 		leal	-2072(%ebp), %eax
 1952      FFFF
 1953 0bb7 89442408 		movl	%eax, 8(%esp)
 1954 0bbb 8B45F0   		movl	-16(%ebp), %eax
 1955 0bbe 89442404 		movl	%eax, 4(%esp)
 1956 0bc2 8D45F0   		leal	-16(%ebp), %eax
 1957 0bc5 FF00     		incl	(%eax)
 1958 0bc7 8B4508   		movl	8(%ebp), %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 50


 1959 0bca 890424   		movl	%eax, (%esp)
 1960 0bcd E883F8FF 		call	_GetItem
 1960      FF
1333:str_merge.c   ****         /* wcscat(out_data, itembuf); */    
1334:str_merge.c   ****         if(itembuf[0] == '\0'){
 1962              	LM222:
 1963 0bd2 6683BDE8 		cmpw	$0, -2072(%ebp)
 1963      F7FFFF00 
 1964 0bda 7517     		jne	L133
1335:str_merge.c   ****             wcscat(out_data, marker);
 1966              	LM223:
 1967 0bdc 8D85E4F7 		leal	-2076(%ebp), %eax
 1967      FFFF
 1968 0be2 89442404 		movl	%eax, 4(%esp)
 1969 0be6 8B450C   		movl	12(%ebp), %eax
 1970 0be9 890424   		movl	%eax, (%esp)
 1971 0bec E8000000 		call	_wcscat
 1971      00
 1972 0bf1 EB15     		jmp	L134
 1973              	L133:
1336:str_merge.c   ****         }
1337:str_merge.c   ****         else{
1338:str_merge.c   ****             wcscat(out_data, itembuf);
 1975              	LM224:
 1976 0bf3 8D85E8F7 		leal	-2072(%ebp), %eax
 1976      FFFF
 1977 0bf9 89442404 		movl	%eax, 4(%esp)
 1978 0bfd 8B450C   		movl	12(%ebp), %eax
 1979 0c00 890424   		movl	%eax, (%esp)
 1980 0c03 E8000000 		call	_wcscat
 1980      00
 1981              	L134:
1339:str_merge.c   ****         }
1340:str_merge.c   **** 
1341:str_merge.c   ****         wcscat(out_data, L"\t");
 1983              	LM225:
 1984 0c08 C7442404 		movl	$LC0, 4(%esp)
 1984      48000000 
 1985 0c10 8B450C   		movl	12(%ebp), %eax
 1986 0c13 890424   		movl	%eax, (%esp)
 1987 0c16 E8000000 		call	_wcscat
 1987      00
 1989              	LM226:
 1990 0c1b 8D45F4   		leal	-12(%ebp), %eax
 1991 0c1e FF00     		incl	(%eax)
 1992 0c20 EB87     		jmp	L129
 1993              	L130:
1342:str_merge.c   ****     }
1343:str_merge.c   **** 
1344:str_merge.c   ****     /*copy the needed column*/
1345:str_merge.c   ****     for(i = 0; i < total_lang; ++i)
 1995              	LM227:
 1996 0c22 C745F400 		movl	$0, -12(%ebp)
 1996      000000
 1997              	L135:
 1998 0c29 8B45F4   		movl	-12(%ebp), %eax
 1999 0c2c 3B4514   		cmpl	20(%ebp), %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 51


 2000 0c2f 7C05     		jl	L138
 2001 0c31 E9A60000 		jmp	L136
 2001      00
 2002              	L138:
1346:str_merge.c   ****     {
1347:str_merge.c   ****         if(index[i] != -1) /*we have this language in ref_list*/
 2004              	LM228:
 2005 0c36 8B45F4   		movl	-12(%ebp), %eax
 2006 0c39 8D148500 		leal	0(,%eax,4), %edx
 2006      000000
 2007 0c40 8B4510   		movl	16(%ebp), %eax
 2008 0c43 833C10FF 		cmpl	$-1, (%eax,%edx)
 2009 0c47 7461     		je	L139
1348:str_merge.c   ****         {
1349:str_merge.c   ****             GetItem(in_data, index[i], itembuf);
 2011              	LM229:
 2012 0c49 8D85E8F7 		leal	-2072(%ebp), %eax
 2012      FFFF
 2013 0c4f 89442408 		movl	%eax, 8(%esp)
 2014 0c53 8B45F4   		movl	-12(%ebp), %eax
 2015 0c56 8D148500 		leal	0(,%eax,4), %edx
 2015      000000
 2016 0c5d 8B4510   		movl	16(%ebp), %eax
 2017 0c60 8B0410   		movl	(%eax,%edx), %eax
 2018 0c63 89442404 		movl	%eax, 4(%esp)
 2019 0c67 8B4508   		movl	8(%ebp), %eax
 2020 0c6a 890424   		movl	%eax, (%esp)
 2021 0c6d E8E3F7FF 		call	_GetItem
 2021      FF
1350:str_merge.c   **** 		
1351:str_merge.c   ****             if(itembuf[0] == '\0'){
 2023              	LM230:
 2024 0c72 6683BDE8 		cmpw	$0, -2072(%ebp)
 2024      F7FFFF00 
 2025 0c7a 7517     		jne	L140
1352:str_merge.c   ****                 wcscat(out_data, marker);
 2027              	LM231:
 2028 0c7c 8D85E4F7 		leal	-2076(%ebp), %eax
 2028      FFFF
 2029 0c82 89442404 		movl	%eax, 4(%esp)
 2030 0c86 8B450C   		movl	12(%ebp), %eax
 2031 0c89 890424   		movl	%eax, (%esp)
 2032 0c8c E8000000 		call	_wcscat
 2032      00
 2033 0c91 EB2C     		jmp	L142
 2034              	L140:
1353:str_merge.c   ****             }
1354:str_merge.c   ****             else{
1355:str_merge.c   ****                 wcscat(out_data, itembuf);
 2036              	LM232:
 2037 0c93 8D85E8F7 		leal	-2072(%ebp), %eax
 2037      FFFF
 2038 0c99 89442404 		movl	%eax, 4(%esp)
 2039 0c9d 8B450C   		movl	12(%ebp), %eax
 2040 0ca0 890424   		movl	%eax, (%esp)
 2041 0ca3 E8000000 		call	_wcscat
 2041      00
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 52


 2042 0ca8 EB15     		jmp	L142
 2043              	L139:
1356:str_merge.c   ****             }
1357:str_merge.c   ****         }
1358:str_merge.c   ****         else{ /*in ref_list, we do not have this language*/
1359:str_merge.c   ****             wcscat(out_data, marker);
 2045              	LM233:
 2046 0caa 8D85E4F7 		leal	-2076(%ebp), %eax
 2046      FFFF
 2047 0cb0 89442404 		movl	%eax, 4(%esp)
 2048 0cb4 8B450C   		movl	12(%ebp), %eax
 2049 0cb7 890424   		movl	%eax, (%esp)
 2050 0cba E8000000 		call	_wcscat
 2050      00
 2051              	L142:
1360:str_merge.c   ****         }
1361:str_merge.c   ****         wcscat(out_data, L"\t");
 2053              	LM234:
 2054 0cbf C7442404 		movl	$LC0, 4(%esp)
 2054      48000000 
 2055 0cc7 8B450C   		movl	12(%ebp), %eax
 2056 0cca 890424   		movl	%eax, (%esp)
 2057 0ccd E8000000 		call	_wcscat
 2057      00
 2059              	LM235:
 2060 0cd2 8D45F4   		leal	-12(%ebp), %eax
 2061 0cd5 FF00     		incl	(%eax)
 2062 0cd7 E94DFFFF 		jmp	L135
 2062      FF
 2063              	L136:
1362:str_merge.c   ****     }
1363:str_merge.c   ****     /*in order to reduce memory but will increase process time*/
1364:str_merge.c   ****     wcscat(out_data, L"\r\n\0");
 2065              	LM236:
 2066 0cdc C7442404 		movl	$LC8, 4(%esp)
 2066      BC0A0000 
 2067 0ce4 8B450C   		movl	12(%ebp), %eax
 2068 0ce7 890424   		movl	%eax, (%esp)
 2069 0cea E8000000 		call	_wcscat
 2069      00
 2070 0cef 8BA5E0F7 		movl	-2080(%ebp), %esp
 2070      FFFF
1365:str_merge.c   **** }
 2072              	LM237:
 2073              	L126:
 2074 0cf5 C9       		leave
 2075 0cf6 C3       		ret
 2076              	LBE15:
 2084              	Lscope13:
 2086              	LC9:
 2087 0cf7 52454620 		.ascii "REF LIST ITEM is NULL\0"
 2087      4C495354 
 2087      20495445 
 2087      4D206973 
 2087      204E554C 
 2088 0d0d 90909090 		.align 32
 2088      90909090 
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 53


 2088      90909090 
 2088      90909090 
 2088      909090
 2089              	LC10:
 2090 0d20 52454620 		.ascii "REF LIST ITEM format error!! It can be an empty line. \0"
 2090      4C495354 
 2090      20495445 
 2090      4D20666F 
 2090      726D6174 
 2091 0d57 89F68DBC 		.align 32
 2091      27000000 
 2091      00
 2092              	LC11:
 2093 0d60 52454620 		.ascii "REF LIST item overflow: %d, buffer size = %d\0"
 2093      4C495354 
 2093      20697465 
 2093      6D206F76 
 2093      6572666C 
 2097              	.globl _check_ref_list_item
 2099              	_check_ref_list_item:
1366:str_merge.c   **** 
1367:str_merge.c   **** /*****************************************************************************
1368:str_merge.c   ****  * FUNCTION
1369:str_merge.c   ****  *  check_ref_list_item
1370:str_merge.c   ****  * DESCRIPTION
1371:str_merge.c   ****  *  Check if the format of the ref list line is invalid or not
1372:str_merge.c   ****  *
1373:str_merge.c   ****  * PARAMETERS
1374:str_merge.c   ****  *  ref_line      :[IN] one line of ref list to be check
1375:str_merge.c   ****  * RETURNS
1376:str_merge.c   ****  *  0              : Valid format
1377:str_merge.c   ****  * -1            : Invalid format
1378:str_merge.c   ****  *****************************************************************************/
1379:str_merge.c   **** int check_ref_list_item(wchar_t * ref_line, int buf_size)
1380:str_merge.c   **** { 
 2101              	LM238:
 2102 0d8d 55       		pushl	%ebp
 2103 0d8e 89E5     		movl	%esp, %ebp
 2104 0d90 83EC28   		subl	$40, %esp
1381:str_merge.c   ****     int str_length = 0;
 2106              	LM239:
 2107              	LBB17:
 2108 0d93 C745FC00 		movl	$0, -4(%ebp)
 2108      000000
1382:str_merge.c   ****     // NULL pointer check
1383:str_merge.c   ****     if(ref_line == NULL)
 2110              	LM240:
 2111 0d9a 837D0800 		cmpl	$0, 8(%ebp)
 2112 0d9e 7525     		jne	L144
1384:str_merge.c   ****     {
1385:str_merge.c   ****                 STRMERG_LOG_E("REF LIST ITEM is NULL");
 2114              	LM241:
 2115 0da0 C7442408 		movl	$LC9, 8(%esp)
 2115      F70C0000 
 2116 0da8 C7442404 		movl	$LC3, 4(%esp)
 2116      4B040000 
 2117 0db0 C7042403 		movl	$3, (%esp)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 54


 2117      000000
 2118 0db7 E8000000 		call	_reslog_adaptor_log
 2118      00
1386:str_merge.c   ****                 return -1;
 2120              	LM242:
 2121 0dbc C745F8FF 		movl	$-1, -8(%ebp)
 2121      FFFFFF
 2122 0dc3 EB7B     		jmp	L143
 2123              	L144:
1387:str_merge.c   ****     }
1388:str_merge.c   ****     // Empty check
1389:str_merge.c   ****     str_length= wcslen(ref_line);
 2125              	LM243:
 2126 0dc5 8B4508   		movl	8(%ebp), %eax
 2127 0dc8 890424   		movl	%eax, (%esp)
 2128 0dcb E8000000 		call	_wcslen
 2128      00
 2129 0dd0 8945FC   		movl	%eax, -4(%ebp)
1390:str_merge.c   **** 
1391:str_merge.c   ****     if(str_length <= 2){
 2131              	LM244:
 2132 0dd3 837DFC02 		cmpl	$2, -4(%ebp)
 2133 0dd7 7F25     		jg	L145
1392:str_merge.c   ****         STRMERG_LOG_E("REF LIST ITEM format error!! It can be an empty line. ");
 2135              	LM245:
 2136 0dd9 C7442408 		movl	$LC10, 8(%esp)
 2136      200D0000 
 2137 0de1 C7442404 		movl	$LC3, 4(%esp)
 2137      4B040000 
 2138 0de9 C7042403 		movl	$3, (%esp)
 2138      000000
 2139 0df0 E8000000 		call	_reslog_adaptor_log
 2139      00
1393:str_merge.c   ****         return -1;
 2141              	LM246:
 2142 0df5 C745F8FF 		movl	$-1, -8(%ebp)
 2142      FFFFFF
 2143 0dfc EB42     		jmp	L143
 2144              	L145:
1394:str_merge.c   ****     }
1395:str_merge.c   **** 
1396:str_merge.c   ****     // Check for overflow
1397:str_merge.c   ****     if(str_length >= buf_size){
 2146              	LM247:
 2147 0dfe 8B45FC   		movl	-4(%ebp), %eax
 2148 0e01 3B450C   		cmpl	12(%ebp), %eax
 2149 0e04 7C33     		jl	L146
1398:str_merge.c   ****         STRMERG_LOG_E("REF LIST item overflow: %d, buffer size = %d", str_length, buf_size);
 2151              	LM248:
 2152 0e06 8B450C   		movl	12(%ebp), %eax
 2153 0e09 89442410 		movl	%eax, 16(%esp)
 2154 0e0d 8B45FC   		movl	-4(%ebp), %eax
 2155 0e10 8944240C 		movl	%eax, 12(%esp)
 2156 0e14 C7442408 		movl	$LC11, 8(%esp)
 2156      600D0000 
 2157 0e1c C7442404 		movl	$LC3, 4(%esp)
 2157      4B040000 
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 55


 2158 0e24 C7042403 		movl	$3, (%esp)
 2158      000000
 2159 0e2b E8000000 		call	_reslog_adaptor_log
 2159      00
1399:str_merge.c   ****         return -1;
 2161              	LM249:
 2162 0e30 C745F8FF 		movl	$-1, -8(%ebp)
 2162      FFFFFF
 2163 0e37 EB07     		jmp	L143
 2164              	L146:
1400:str_merge.c   ****     }
1401:str_merge.c   **** 
1402:str_merge.c   ****     return 0;
 2166              	LM250:
 2167 0e39 C745F800 		movl	$0, -8(%ebp)
 2167      000000
1403:str_merge.c   **** }
 2169              	LM251:
 2170              	L143:
 2171              	LBE17:
 2172 0e40 8B45F8   		movl	-8(%ebp), %eax
 2173 0e43 C9       		leave
 2174 0e44 C3       		ret
 2178              	Lscope14:
 2180 0e45 90       		.align 2
 2181              	LC12:
 2182 0e46 0000     		.ascii "\0\0"
 2183              		.align 2
 2184              	LC13:
 2185 0e48 50006100 		.ascii "P\0a\0r\0s\0i\0n\0g\0:\0 \0%\0l\0s\0\0\0"
 2185      72007300 
 2185      69006E00 
 2185      67003A00 
 2185      20002500 
 2186 0e62 90909090 		.align 32
 2186      90909090 
 2186      90909090 
 2186      90909090 
 2186      90909090 
 2187              	LC14:
 2188 0e80 49006E00 		.ascii "I\0n\0v\0a\0l\0i\0d\0 \0R\0E\0F\0 \0i\0t\0e\0m\0 \0a\0f\0t\0e\0r\0:\0 \0%\0l\0s\0\0\0"
 2188      76006100 
 2188      6C006900 
 2188      64002000 
 2188      52004500 
 2189 0eb8 908DB426 		.align 32
 2189      00000000 
 2190              	LC15:
 2191 0ec0 50006C00 		.ascii "P\0l\0e\0a\0e\0 \0c\0h\0e\0c\0k\0 \0t\0h\0e\0 \0R\0E\0F\0 \0i\0t\0e\0m\0 \0i\0n\0 \0p\0l\0
 2191      65006100 
 2191      65002000 
 2191      63006800 
 2191      65006300 
 2192 0fa6 90909090 		.align 32
 2192      90909090 
 2192      90909090 
 2192      90909090 
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 56


 2192      90909090 
 2193              	LC16:
 2194 0fc0 46006100 		.ascii "F\0a\0t\0a\0l\0 \0e\0r\0r\0o\0r\0 \0i\0n\0 \0l\0o\0a\0d\0_\0r\0e\0f\0_\0l\0i\0s\0t\0_\0t\0
 2194      74006100 
 2194      6C002000 
 2194      65007200 
 2194      72006F00 
 2195 100c 90909090 		.align 32
 2195      90909090 
 2195      90909090 
 2195      90909090 
 2195      90909090 
 2196              	LC17:
 2197 1020 50006C00 		.ascii "P\0l\0e\0a\0s\0e\0 \0c\0h\0e\0c\0k\0 \0p\0l\0u\0t\0o\0m\0m\0i\0\\\0C\0u\0s\0t\0o\0m\0e\0r\
 2197      65006100 
 2197      73006500 
 2197      20006300 
 2197      68006500 
 2205              	_load_ref_list_to_mem:
1404:str_merge.c   **** 
1405:str_merge.c   **** #ifndef MEM_REF_LIST_OPT /* MEM_REF_LIST_OPT */
1406:str_merge.c   **** 
1407:str_merge.c   **** /*****************************************************************************
1408:str_merge.c   ****  * FUNCTION
1409:str_merge.c   ****  *  load_ref_list_to_mem
1410:str_merge.c   ****  * DESCRIPTION
1411:str_merge.c   ****  *  load the ref list's information to memory
1412:str_merge.c   ****  *
1413:str_merge.c   ****  * PARAMETERS
1414:str_merge.c   ****  *  out_buff     :[OUT]  the buffer used to store the content of ref list
1415:str_merge.c   ****  *  end_line     :[OUT] the end line of ref list
1416:str_merge.c   ****  *  ref          :[IN] file handle point to ref list
1417:str_merge.c   ****  *  index        :[IN] the column index that populated language in ref list
1418:str_merge.c   ****  *  ref_cnt      :[IN] the item count in ref list
1419:str_merge.c   ****  * RETURNS
1420:str_merge.c   ****  *  void
1421:str_merge.c   ****  *****************************************************************************/
1422:str_merge.c   **** static void load_ref_list_to_mem(wchar_t *out_buff, wchar_t **end_line, FILE* ref, const int* index
1423:str_merge.c   **** {
1424:str_merge.c   ****     int j = 0;
1425:str_merge.c   ****     wchar_t *tmp = out_buff;
1426:str_merge.c   ****     wchar_t *ref_line = NULL;
1427:str_merge.c   ****     wchar_t *last_valid_ref_line = NULL;	
1428:str_merge.c   ****     wchar_t *ref_result = NULL;
1429:str_merge.c   ****     wchar_t itembuf[MAX_LENGTH];
1430:str_merge.c   **** 
1431:str_merge.c   ****     if(out_buff == NULL)
1432:str_merge.c   ****         return;
1433:str_merge.c   **** 
1434:str_merge.c   ****     /*mallco memory for tmp buffer*/
1435:str_merge.c   ****     ref_line = (wchar_t *)malloc(g_line_buf_length * sizeof(wchar_t));
1436:str_merge.c   ****     last_valid_ref_line = (wchar_t *)malloc(g_line_buf_length * sizeof(wchar_t));
1437:str_merge.c   ****     if(ref_line == NULL || last_valid_ref_line == NULL)
1438:str_merge.c   ****     {
1439:str_merge.c   ****         ASSERT(0);
1440:str_merge.c   ****     }
1441:str_merge.c   **** 
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 57


1442:str_merge.c   ****     /*malloc  memory for return result*/
1443:str_merge.c   ****     ref_result = (wchar_t *)malloc(g_line_buf_length * sizeof(wchar_t));
1444:str_merge.c   **** 
1445:str_merge.c   ****     if(ref_result == NULL)
1446:str_merge.c   ****     {
1447:str_merge.c   ****         free(ref_line);
1448:str_merge.c   ****         ASSERT(0);
1449:str_merge.c   ****     }
1450:str_merge.c   **** 
1451:str_merge.c   ****     // Init last_valid_ref_line
1452:str_merge.c   ****     wcscpy(last_valid_ref_line,L"");
1453:str_merge.c   **** 
1454:str_merge.c   ****     rewind(ref);
1455:str_merge.c   ****     fgetws(ref_line, g_line_buf_length, ref);
1456:str_merge.c   ****     fgetws(ref_line, g_line_buf_length, ref);
1457:str_merge.c   ****     fgetws(ref_line, g_line_buf_length, ref);
1458:str_merge.c   **** 
1459:str_merge.c   ****     for(j = 0; j < ref_cnt; j++)
1460:str_merge.c   ****     {
1461:str_merge.c   ****         fgetws(ref_line, g_line_buf_length, ref);
1462:str_merge.c   **** 
1463:str_merge.c   ****         if(check_ref_list_item(ref_line, g_line_buf_length)< 0)
1464:str_merge.c   ****         {
1465:str_merge.c   ****             // The format is invalid!!
1466:str_merge.c   ****             STRMERG_WLOG_E(L"Invalid REF item after: %ls", last_valid_ref_line);
1467:str_merge.c   ****             fflush(stdout);
1468:str_merge.c   ****          }
1469:str_merge.c   ****          else
1470:str_merge.c   ****          {
1471:str_merge.c   **** 
1472:str_merge.c   **** 
1473:str_merge.c   **** #ifndef __MMI_RESOURCE_ENFB_SUPPORT__
1474:str_merge.c   ****         /* set fixed string id flag */
1475:str_merge.c   ****         GetItem(ref_line, 0, itembuf);
1476:str_merge.c   ****         set_fixed_str_flag(&fixed_id, itembuf);
1477:str_merge.c   **** #endif /* __MMI_RESOURCE_ENFB_SUPPORT__ */
1478:str_merge.c   ****         
1479:str_merge.c   ****         filter_raw_string(ref_line, ref_result, index, deployed_lang);
1480:str_merge.c   **** 
1481:str_merge.c   ****         wcscpy(tmp, ref_result);
1482:str_merge.c   ****         wcscpy(last_valid_ref_line, ref_line);		
1483:str_merge.c   ****         tmp += g_line_buf_act_length;
1484:str_merge.c   **** 
1485:str_merge.c   ****         }
1486:str_merge.c   ****     }
1487:str_merge.c   **** 
1488:str_merge.c   ****     *end_line = tmp - g_line_buf_act_length;
1489:str_merge.c   **** 
1490:str_merge.c   ****     free(ref_line);
1491:str_merge.c   ****     free(ref_result);
1492:str_merge.c   **** }
1493:str_merge.c   **** #else /* MEM_REF_LIST_OPT */
1494:str_merge.c   **** /*****************************************************************************
1495:str_merge.c   ****  * FUNCTION
1496:str_merge.c   ****  *  load_ref_list_to_mem
1497:str_merge.c   ****  * DESCRIPTION
1498:str_merge.c   ****  *  Load the ref list's information to memory; storing the ref list data with 
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 58


1499:str_merge.c   ****  *   a vector (dynamic array) instead of a large continuous array
1500:str_merge.c   ****  *
1501:str_merge.c   ****  * PARAMETERS
1502:str_merge.c   ****  *  out_buff     :[OUT]  the buffer used to store the content of ref list
1503:str_merge.c   ****  *  ref          :[IN] file handle point to ref list
1504:str_merge.c   ****  *  index        :[IN] the column index that populated language in ref list
1505:str_merge.c   ****  *  ref_cnt      :[IN] the item count in ref list
1506:str_merge.c   ****  * RETURNS
1507:str_merge.c   ****  *  void
1508:str_merge.c   ****  *****************************************************************************/
1509:str_merge.c   **** static void load_ref_list_to_mem(RefList *out_buff, FILE* ref, const int* index, const int ref_cnt,
1510:str_merge.c   **** {
 2207              	LM252:
 2208 10ce 55       		pushl	%ebp
 2209 10cf 89E5     		movl	%esp, %ebp
 2210 10d1 81EC5804 		subl	$1112, %esp
 2210      0000
1511:str_merge.c   ****     int j = 0;
 2212              	LM253:
 2213              	LBB18:
 2214 10d7 C745F400 		movl	$0, -12(%ebp)
 2214      000000
1512:str_merge.c   ****     wchar_t *tmp = out_buff;
 2216              	LM254:
 2217 10de 8B4508   		movl	8(%ebp), %eax
 2218 10e1 8945F0   		movl	%eax, -16(%ebp)
1513:str_merge.c   ****     wchar_t *ref_line = NULL;
 2220              	LM255:
 2221 10e4 C745EC00 		movl	$0, -20(%ebp)
 2221      000000
1514:str_merge.c   ****     wchar_t *last_valid_ref_line = NULL;
 2223              	LM256:
 2224 10eb C745E800 		movl	$0, -24(%ebp)
 2224      000000
1515:str_merge.c   ****     wchar_t *ref_result = NULL;
 2226              	LM257:
 2227 10f2 C745E400 		movl	$0, -28(%ebp)
 2227      000000
1516:str_merge.c   ****     wchar_t itembuf[MAX_LENGTH];
1517:str_merge.c   **** 
1518:str_merge.c   ****     if(out_buff == NULL)
 2229              	LM258:
 2230 10f9 837D0800 		cmpl	$0, 8(%ebp)
 2231 10fd 7505     		jne	L148
1519:str_merge.c   ****         return;
 2233              	LM259:
 2234 10ff E9850200 		jmp	L147
 2234      00
 2235              	L148:
1520:str_merge.c   **** 
1521:str_merge.c   ****     /*mallco memory for tmp buffer (str line of all languages)*/
1522:str_merge.c   ****     ref_line = (wchar_t *)malloc(g_line_buf_length * sizeof(wchar_t));
 2237              	LM260:
 2238 1104 A1280000 		movl	_g_line_buf_length, %eax
 2238      00
 2239 1109 01C0     		addl	%eax, %eax
 2240 110b 890424   		movl	%eax, (%esp)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 59


 2241 110e E8000000 		call	_malloc
 2241      00
 2242 1113 8945EC   		movl	%eax, -20(%ebp)
1523:str_merge.c   **** 	
1524:str_merge.c   ****     last_valid_ref_line = (wchar_t *)malloc(g_line_buf_length * sizeof(wchar_t));
 2244              	LM261:
 2245 1116 A1280000 		movl	_g_line_buf_length, %eax
 2245      00
 2246 111b 01C0     		addl	%eax, %eax
 2247 111d 890424   		movl	%eax, (%esp)
 2248 1120 E8000000 		call	_malloc
 2248      00
 2249 1125 8945E8   		movl	%eax, -24(%ebp)
1525:str_merge.c   ****     if(ref_line == NULL || last_valid_ref_line == NULL)
 2251              	LM262:
 2252 1128 837DEC00 		cmpl	$0, -20(%ebp)
 2253 112c 7406     		je	L150
 2254 112e 837DE800 		cmpl	$0, -24(%ebp)
 2255 1132 7502     		jne	L149
 2256              	L150:
1526:str_merge.c   ****     {
1527:str_merge.c   ****         ASSERT(0);
 2258              	LM263:
 2259              	L152:
 2260 1134 EBFE     		jmp	L152
 2261              	L149:
1528:str_merge.c   ****     }
1529:str_merge.c   **** 
1530:str_merge.c   ****     /* malloc  memory for return result (str line of deployed languages)*/
1531:str_merge.c   ****     ref_result = (wchar_t *)malloc(g_line_buf_length * sizeof(wchar_t));
 2263              	LM264:
 2264 1136 A1280000 		movl	_g_line_buf_length, %eax
 2264      00
 2265 113b 01C0     		addl	%eax, %eax
 2266 113d 890424   		movl	%eax, (%esp)
 2267 1140 E8000000 		call	_malloc
 2267      00
 2268 1145 8945E4   		movl	%eax, -28(%ebp)
1532:str_merge.c   ****     if(ref_result == NULL)
 2270              	LM265:
 2271 1148 837DE400 		cmpl	$0, -28(%ebp)
 2272 114c 750D     		jne	L156
1533:str_merge.c   ****     {
1534:str_merge.c   ****         free(ref_line);
 2274              	LM266:
 2275 114e 8B45EC   		movl	-20(%ebp), %eax
 2276 1151 890424   		movl	%eax, (%esp)
 2277 1154 E8000000 		call	_free
 2277      00
1535:str_merge.c   ****         ASSERT(0);
 2279              	LM267:
 2280              	L158:
 2281 1159 EBFE     		jmp	L158
 2282              	L156:
1536:str_merge.c   ****     }
1537:str_merge.c   **** 
1538:str_merge.c   ****     // Initialize last_valid_ref_line
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 60


1539:str_merge.c   ****     wcscpy(last_valid_ref_line,L"");
 2284              	LM268:
 2285 115b C7442404 		movl	$LC12, 4(%esp)
 2285      460E0000 
 2286 1163 8B45E8   		movl	-24(%ebp), %eax
 2287 1166 890424   		movl	%eax, (%esp)
 2288 1169 E8000000 		call	_wcscpy
 2288      00
1540:str_merge.c   **** 
1541:str_merge.c   ****     rewind(ref);
 2290              	LM269:
 2291 116e 8B450C   		movl	12(%ebp), %eax
 2292 1171 890424   		movl	%eax, (%esp)
 2293 1174 E8000000 		call	_rewind
 2293      00
1542:str_merge.c   ****     fgetws(ref_line, g_line_buf_length, ref);
 2295              	LM270:
 2296 1179 8B450C   		movl	12(%ebp), %eax
 2297 117c 89442408 		movl	%eax, 8(%esp)
 2298 1180 A1280000 		movl	_g_line_buf_length, %eax
 2298      00
 2299 1185 89442404 		movl	%eax, 4(%esp)
 2300 1189 8B45EC   		movl	-20(%ebp), %eax
 2301 118c 890424   		movl	%eax, (%esp)
 2302 118f E8000000 		call	_fgetws
 2302      00
1543:str_merge.c   ****     fgetws(ref_line, g_line_buf_length, ref);
 2304              	LM271:
 2305 1194 8B450C   		movl	12(%ebp), %eax
 2306 1197 89442408 		movl	%eax, 8(%esp)
 2307 119b A1280000 		movl	_g_line_buf_length, %eax
 2307      00
 2308 11a0 89442404 		movl	%eax, 4(%esp)
 2309 11a4 8B45EC   		movl	-20(%ebp), %eax
 2310 11a7 890424   		movl	%eax, (%esp)
 2311 11aa E8000000 		call	_fgetws
 2311      00
1544:str_merge.c   ****     fgetws(ref_line, g_line_buf_length, ref);
 2313              	LM272:
 2314 11af 8B450C   		movl	12(%ebp), %eax
 2315 11b2 89442408 		movl	%eax, 8(%esp)
 2316 11b6 A1280000 		movl	_g_line_buf_length, %eax
 2316      00
 2317 11bb 89442404 		movl	%eax, 4(%esp)
 2318 11bf 8B45EC   		movl	-20(%ebp), %eax
 2319 11c2 890424   		movl	%eax, (%esp)
 2320 11c5 E8000000 		call	_fgetws
 2320      00
1545:str_merge.c   **** 
1546:str_merge.c   ****     for(j = 0; j < ref_cnt; j++)
 2322              	LM273:
 2323 11ca C745F400 		movl	$0, -12(%ebp)
 2323      000000
 2324              	L162:
 2325 11d1 8B45F4   		movl	-12(%ebp), %eax
 2326 11d4 3B4514   		cmpl	20(%ebp), %eax
 2327 11d7 7C05     		jl	L165
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 61


 2328 11d9 E9950100 		jmp	L163
 2328      00
 2329              	L165:
1547:str_merge.c   ****     {
1548:str_merge.c   ****         fgetws(ref_line, g_line_buf_length, ref);
 2331              	LM274:
 2332 11de 8B450C   		movl	12(%ebp), %eax
 2333 11e1 89442408 		movl	%eax, 8(%esp)
 2334 11e5 A1280000 		movl	_g_line_buf_length, %eax
 2334      00
 2335 11ea 89442404 		movl	%eax, 4(%esp)
 2336 11ee 8B45EC   		movl	-20(%ebp), %eax
 2337 11f1 890424   		movl	%eax, (%esp)
 2338 11f4 E8000000 		call	_fgetws
 2338      00
1549:str_merge.c   **** #ifdef STR_MERGE_DEBUG
1550:str_merge.c   ****         STRMERG_WLOG_D(L"Parsing: %ls", ref_line);
 2340              	LM275:
 2341 11f9 8B45EC   		movl	-20(%ebp), %eax
 2342 11fc 8944240C 		movl	%eax, 12(%esp)
 2343 1200 C7442408 		movl	$LC13, 8(%esp)
 2343      480E0000 
 2344 1208 C7442404 		movl	$LC3, 4(%esp)
 2344      4B040000 
 2345 1210 C7042400 		movl	$0, (%esp)
 2345      000000
 2346 1217 E8000000 		call	_reslog_adaptor_wlog
 2346      00
1551:str_merge.c   ****         fflush(stdout);
 2348              	LM276:
 2349 121c A1000000 		movl	__imp___iob, %eax
 2349      00
 2350 1221 83C020   		addl	$32, %eax
 2351 1224 890424   		movl	%eax, (%esp)
 2352 1227 E8000000 		call	_fflush
 2352      00
1552:str_merge.c   **** #endif
1553:str_merge.c   ****         if(check_ref_list_item(ref_line, g_line_buf_length)< 0)
 2354              	LM277:
 2355 122c A1280000 		movl	_g_line_buf_length, %eax
 2355      00
 2356 1231 89442404 		movl	%eax, 4(%esp)
 2357 1235 8B45EC   		movl	-20(%ebp), %eax
 2358 1238 890424   		movl	%eax, (%esp)
 2359 123b E84DFBFF 		call	_check_ref_list_item
 2359      FF
 2360 1240 85C0     		testl	%eax, %eax
 2361 1242 0F899600 		jns	L166
 2361      0000
1554:str_merge.c   ****         {
1555:str_merge.c   ****         // The format is invalid!!
1556:str_merge.c   ****             wchar_t * err_msg = malloc((STRMERGE_ERR_MSG_LEN_MAX+1) * sizeof(wchar_t));
 2363              	LM278:
 2364              	LBB19:
 2365 1248 C7042492 		movl	$402, (%esp)
 2365      010000
 2366 124f E8000000 		call	_malloc
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 62


 2366      00
 2367 1254 8985D4FB 		movl	%eax, -1068(%ebp)
 2367      FFFF
1557:str_merge.c   ****             swprintf(err_msg,L"Invalid REF item after: %ls", last_valid_ref_line);
 2369              	LM279:
 2370 125a 8B45E8   		movl	-24(%ebp), %eax
 2371 125d 89442408 		movl	%eax, 8(%esp)
 2372 1261 C7442404 		movl	$LC14, 4(%esp)
 2372      800E0000 
 2373 1269 8B85D4FB 		movl	-1068(%ebp), %eax
 2373      FFFF
 2374 126f 890424   		movl	%eax, (%esp)
 2375 1272 E8000000 		call	_swprintf
 2375      00
1558:str_merge.c   ****             // Use RES_WLOG_PENDING_FATAL to notify error. It will cause mtk_resgenerator.exe to re
1559:str_merge.c   ****             RES_WLOG_PENDING_FATAL(STRMERG_TAG, L"Fatal error in load_ref_list_to_mem()", err_msg,L
 2377              	LM280:
 2378 1277 C7442410 		movl	$LC15, 16(%esp)
 2378      C00E0000 
 2379 127f 8B85D4FB 		movl	-1068(%ebp), %eax
 2379      FFFF
 2380 1285 8944240C 		movl	%eax, 12(%esp)
 2381 1289 C7442408 		movl	$LC16, 8(%esp)
 2381      C00F0000 
 2382 1291 C7442404 		movl	$LC3, 4(%esp)
 2382      4B040000 
 2383 1299 C7042403 		movl	$3, (%esp)
 2383      000000
 2384 12a0 E8000000 		call	_reslog_adaptor_fatal_error_pending_wlog
 2384      00
1560:str_merge.c   ****             STRMERG_WLOG_E(L"Please check plutommi\\Customer\\CustResource\\ref_list.txt for this e
 2386              	LM281:
 2387 12a5 8B85D4FB 		movl	-1068(%ebp), %eax
 2387      FFFF
 2388 12ab 8944240C 		movl	%eax, 12(%esp)
 2389 12af C7442408 		movl	$LC17, 8(%esp)
 2389      20100000 
 2390 12b7 C7442404 		movl	$LC3, 4(%esp)
 2390      4B040000 
 2391 12bf C7042403 		movl	$3, (%esp)
 2391      000000
 2392 12c6 E8000000 		call	_reslog_adaptor_wlog
 2392      00
1561:str_merge.c   ****             free(err_msg);
 2394              	LM282:
 2395 12cb 8B85D4FB 		movl	-1068(%ebp), %eax
 2395      FFFF
 2396 12d1 890424   		movl	%eax, (%esp)
 2397 12d4 E8000000 		call	_free
 2397      00
 2398              	LBE19:
 2399 12d9 E98B0000 		jmp	L164
 2399      00
 2400              	L166:
1562:str_merge.c   ****         }
1563:str_merge.c   ****         else
1564:str_merge.c   ****         {
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 63


1565:str_merge.c   **** 
1566:str_merge.c   **** #ifndef __MMI_RESOURCE_ENFB_SUPPORT__
1567:str_merge.c   ****             /* set fixed string id flag */
1568:str_merge.c   ****             GetItem(ref_line, 0, itembuf);
 2402              	LM283:
 2403              	LBB20:
 2404 12de 8D85D8FB 		leal	-1064(%ebp), %eax
 2404      FFFF
 2405 12e4 89442408 		movl	%eax, 8(%esp)
 2406 12e8 C7442404 		movl	$0, 4(%esp)
 2406      00000000 
 2407 12f0 8B45EC   		movl	-20(%ebp), %eax
 2408 12f3 890424   		movl	%eax, (%esp)
 2409 12f6 E85AF1FF 		call	_GetItem
 2409      FF
1569:str_merge.c   ****             set_fixed_str_flag(&fixed_id, itembuf);
 2411              	LM284:
 2412 12fb 8D85D8FB 		leal	-1064(%ebp), %eax
 2412      FFFF
 2413 1301 89442404 		movl	%eax, 4(%esp)
 2414 1305 C7042400 		movl	$_fixed_id, (%esp)
 2414      000000
 2415 130c E8A85600 		call	_set_fixed_str_flag
 2415      00
1570:str_merge.c   **** #endif /* __MMI_RESOURCE_ENFB_SUPPORT__ */
1571:str_merge.c   ****     
1572:str_merge.c   ****             /* Load the string of deployed language only */
1573:str_merge.c   ****             filter_raw_string(ref_line, ref_result, index, deployed_lang);
 2417              	LM285:
 2418 1311 8B4518   		movl	24(%ebp), %eax
 2419 1314 8944240C 		movl	%eax, 12(%esp)
 2420 1318 8B4510   		movl	16(%ebp), %eax
 2421 131b 89442408 		movl	%eax, 8(%esp)
 2422 131f 8B45E4   		movl	-28(%ebp), %eax
 2423 1322 89442404 		movl	%eax, 4(%esp)
 2424 1326 8B45EC   		movl	-20(%ebp), %eax
 2425 1329 890424   		movl	%eax, (%esp)
 2426 132c E893F7FF 		call	_filter_raw_string
 2426      FF
1574:str_merge.c   ****             /* Create a ref list item object and store the str line to it */
1575:str_merge.c   ****             RefListItem *lineItem = CreateListItemFromStr(ref_result);
 2428              	LM286:
 2429 1331 8B45E4   		movl	-28(%ebp), %eax
 2430 1334 890424   		movl	%eax, (%esp)
 2431 1337 E8886700 		call	_CreateListItemFromStr
 2431      00
 2432 133c 8985D4FB 		movl	%eax, -1068(%ebp)
 2432      FFFF
1576:str_merge.c   ****             /* Add the new ref list item to ref list*/
1577:str_merge.c   ****             AddRefListItem(out_buff,lineItem);
 2434              	LM287:
 2435 1342 8B85D4FB 		movl	-1068(%ebp), %eax
 2435      FFFF
 2436 1348 89442404 		movl	%eax, 4(%esp)
 2437 134c 8B4508   		movl	8(%ebp), %eax
 2438 134f 890424   		movl	%eax, (%esp)
 2439 1352 E85F6900 		call	_AddRefListItem
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 64


 2439      00
1578:str_merge.c   ****             /* Record the last success one for debug */			
1579:str_merge.c   ****             wcscpy(last_valid_ref_line, ref_line);
 2441              	LM288:
 2442 1357 8B45EC   		movl	-20(%ebp), %eax
 2443 135a 89442404 		movl	%eax, 4(%esp)
 2444 135e 8B45E8   		movl	-24(%ebp), %eax
 2445 1361 890424   		movl	%eax, (%esp)
 2446 1364 E8000000 		call	_wcscpy
 2446      00
 2448              	LM289:
 2449              	L164:
 2450 1369 8D45F4   		leal	-12(%ebp), %eax
 2451              	LBE20:
 2452 136c FF00     		incl	(%eax)
 2453 136e E95EFEFF 		jmp	L162
 2453      FF
 2454              	L163:
1580:str_merge.c   ****         }
1581:str_merge.c   ****     }
1582:str_merge.c   ****     free(ref_line);
 2456              	LM290:
 2457 1373 8B45EC   		movl	-20(%ebp), %eax
 2458 1376 890424   		movl	%eax, (%esp)
 2459 1379 E8000000 		call	_free
 2459      00
1583:str_merge.c   ****     free(ref_result);
 2461              	LM291:
 2462 137e 8B45E4   		movl	-28(%ebp), %eax
 2463 1381 890424   		movl	%eax, (%esp)
 2464 1384 E8000000 		call	_free
 2464      00
1584:str_merge.c   **** }
 2466              	LM292:
 2467              	L147:
 2468 1389 C9       		leave
 2469 138a C3       		ret
 2470              	LBE18:
 2485              	Lscope15:
 2491              	.globl _get_ref_count
 2493              	_get_ref_count:
1585:str_merge.c   **** #endif
1586:str_merge.c   **** 
1587:str_merge.c   **** /*****************************************************************************
1588:str_merge.c   ****  * FUNCTION
1589:str_merge.c   ****  *  get_ref_count
1590:str_merge.c   ****  * DESCRIPTION
1591:str_merge.c   ****  *  get the ref list item count
1592:str_merge.c   ****  *
1593:str_merge.c   ****  * PARAMETERS
1594:str_merge.c   ****  *  fp            :[IN]  file handle of ref list
1595:str_merge.c   ****  *  line_len      :[IN] line length of each item
1596:str_merge.c   ****  *  buff          :[IN] buffer to restore a item content
1597:str_merge.c   ****  * RETURNS
1598:str_merge.c   ****  *  int           : item count 
1599:str_merge.c   ****  *****************************************************************************/
1600:str_merge.c   **** int get_ref_count(FILE *fp, U32 line_len, wchar_t* buff)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 65


1601:str_merge.c   **** {
 2495              	LM293:
 2496 138b 55       		pushl	%ebp
 2497 138c 89E5     		movl	%esp, %ebp
 2498 138e 83EC18   		subl	$24, %esp
1602:str_merge.c   ****     int count = 0;
 2500              	LM294:
 2501              	LBB21:
 2502 1391 C745FC00 		movl	$0, -4(%ebp)
 2502      000000
1603:str_merge.c   **** 
1604:str_merge.c   ****     if(fp == NULL || line_len <= 0)
 2504              	LM295:
 2505 1398 837D0800 		cmpl	$0, 8(%ebp)
 2506 139c 7406     		je	L170
 2507 139e 837D0C00 		cmpl	$0, 12(%ebp)
 2508 13a2 7509     		jne	L169
 2509              	L170:
1605:str_merge.c   ****     {
1606:str_merge.c   ****         return 0;
 2511              	LM296:
 2512 13a4 C745F800 		movl	$0, -8(%ebp)
 2512      000000
 2513 13ab EB50     		jmp	L168
 2514              	L169:
1607:str_merge.c   ****     }
1608:str_merge.c   **** 
1609:str_merge.c   ****     /* calculate the number of entries and read them to the buffer */
1610:str_merge.c   ****     fgetws(buff, line_len, fp);
 2516              	LM297:
 2517 13ad 8B4508   		movl	8(%ebp), %eax
 2518 13b0 89442408 		movl	%eax, 8(%esp)
 2519 13b4 8B450C   		movl	12(%ebp), %eax
 2520 13b7 89442404 		movl	%eax, 4(%esp)
 2521 13bb 8B4510   		movl	16(%ebp), %eax
 2522 13be 890424   		movl	%eax, (%esp)
 2523 13c1 E8000000 		call	_fgetws
 2523      00
1611:str_merge.c   ****     while (!feof(fp))
 2525              	LM298:
 2526              	L171:
 2527 13c6 8B4508   		movl	8(%ebp), %eax
 2528 13c9 890424   		movl	%eax, (%esp)
 2529 13cc E8000000 		call	_feof
 2529      00
 2530 13d1 85C0     		testl	%eax, %eax
 2531 13d3 7402     		je	L173
 2532 13d5 EB20     		jmp	L172
 2533              	L173:
1612:str_merge.c   ****     {
1613:str_merge.c   ****         count++;
 2535              	LM299:
 2536 13d7 8D45FC   		leal	-4(%ebp), %eax
 2537 13da FF00     		incl	(%eax)
1614:str_merge.c   ****         fgetws(buff, line_len, fp);
 2539              	LM300:
 2540 13dc 8B4508   		movl	8(%ebp), %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 66


 2541 13df 89442408 		movl	%eax, 8(%esp)
 2542 13e3 8B450C   		movl	12(%ebp), %eax
 2543 13e6 89442404 		movl	%eax, 4(%esp)
 2544 13ea 8B4510   		movl	16(%ebp), %eax
 2545 13ed 890424   		movl	%eax, (%esp)
 2546 13f0 E8000000 		call	_fgetws
 2546      00
 2547 13f5 EBCF     		jmp	L171
 2548              	L172:
1615:str_merge.c   ****     }
1616:str_merge.c   **** 
1617:str_merge.c   ****     return count;
 2550              	LM301:
 2551 13f7 8B45FC   		movl	-4(%ebp), %eax
 2552 13fa 8945F8   		movl	%eax, -8(%ebp)
1618:str_merge.c   **** }
 2554              	LM302:
 2555              	L168:
 2556              	LBE21:
 2557 13fd 8B45F8   		movl	-8(%ebp), %eax
 2558 1400 C9       		leave
 2559 1401 C3       		ret
 2563              	Lscope16:
 2566              	.globl _get_filter_used_language_count
 2568              	_get_filter_used_language_count:
1619:str_merge.c   **** 
1620:str_merge.c   **** 
1621:str_merge.c   **** /*****************************************************************************
1622:str_merge.c   ****  * FUNCTION
1623:str_merge.c   ****  *  get_filter_used_language_count
1624:str_merge.c   ****  * DESCRIPTION
1625:str_merge.c   ****  *  get the filter language count
1626:str_merge.c   ****  *
1627:str_merge.c   ****  * PARAMETERS
1628:str_merge.c   ****  *  void
1629:str_merge.c   ****  * RETURNS
1630:str_merge.c   ****  *  int          : filtered total language count
1631:str_merge.c   ****  *****************************************************************************/
1632:str_merge.c   **** int get_filter_used_language_count(void)
1633:str_merge.c   **** {
 2570              	LM303:
 2571 1402 55       		pushl	%ebp
 2572 1403 89E5     		movl	%esp, %ebp
 2573 1405 83EC08   		subl	$8, %esp
1634:str_merge.c   ****     int count = 0;
 2575              	LM304:
 2576              	LBB22:
 2577 1408 C745FC00 		movl	$0, -4(%ebp)
 2577      000000
1635:str_merge.c   **** 	
1636:str_merge.c   ****     if(en_language_is_open()){
 2579              	LM305:
 2580 140f E896F3FF 		call	_en_language_is_open
 2580      FF
 2581 1414 85C0     		testl	%eax, %eax
 2582 1416 740C     		je	L175
1637:str_merge.c   ****         count = mtk_gMaxDeployedLangs;
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 67


 2584              	LM306:
 2585 1418 0FB70500 		movzwl	_mtk_gMaxDeployedLangs, %eax
 2585      000000
 2586 141f 8945FC   		movl	%eax, -4(%ebp)
 2587 1422 EB0B     		jmp	L176
 2588              	L175:
1638:str_merge.c   ****     }
1639:str_merge.c   ****     else{
1640:str_merge.c   ****         /*if english is not open, we still need to process it, so total language count will add 1*/
1641:str_merge.c   ****         count = mtk_gMaxDeployedLangs + 1;
 2590              	LM307:
 2591 1424 0FB70500 		movzwl	_mtk_gMaxDeployedLangs, %eax
 2591      000000
 2592 142b 40       		incl	%eax
 2593 142c 8945FC   		movl	%eax, -4(%ebp)
 2594              	L176:
1642:str_merge.c   ****     }
1643:str_merge.c   **** 
1644:str_merge.c   ****     return count;
 2596              	LM308:
 2597 142f 8B45FC   		movl	-4(%ebp), %eax
1645:str_merge.c   **** }
 2599              	LM309:
 2600 1432 C9       		leave
 2601 1433 C3       		ret
 2602              	LBE22:
 2606              	Lscope17:
 2608 1434 8DB60000 		.align 32
 2608      00008DBF 
 2608      00000000 
 2609              	LC18:
 2610 1440 4D657267 		.ascii "MergeStrRes(): Start to merge string translation data\0"
 2610      65537472 
 2610      52657328 
 2610      293A2053 
 2610      74617274 
 2611              	LC19:
 2612 1476 7374725F 		.ascii "str_merge.c\0"
 2612      6D657267 
 2612      652E6300 
 2613 1482 90909090 		.align 32
 2613      90909090 
 2613      90909090 
 2613      90909090 
 2613      90909090 
 2614              	LC20:
 2615 14a0 696E6974 		.ascii "init_fixed_id() error: LINE:%d,\11FILE%s\0"
 2615      5F666978 
 2615      65645F69 
 2615      64282920 
 2615      6572726F 
 2616 14c7 90909090 		.align 32
 2616      90909090 
 2616      90909090 
 2616      90909090 
 2616      90909090 
 2617              	LC21:
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 68


 2618 14e0 6661696C 		.ascii "failed error: LINE:%d,\11FILE%s\12\0"
 2618      65642065 
 2618      72726F72 
 2618      3A204C49 
 2618      4E453A25 
 2619 14ff 90       		.align 32
 2620              	LC22:
 2621 1500 67656E65 		.ascii "generate_enum_hash() error: LINE:%d,\11FILE%s\0"
 2621      72617465 
 2621      5F656E75 
 2621      6D5F6861 
 2621      73682829 
 2622              	LC23:
 2623 152c 726200   		.ascii "rb\0"
 2624              	LC24:
 2625 152f 2E2E5C63 		.ascii "..\\custresource\\ref_list.txt\0"
 2625      75737472 
 2625      65736F75 
 2625      7263655C 
 2625      7265665F 
 2626 154c 90909090 		.align 32
 2626      90909090 
 2626      90909090 
 2626      90909090 
 2626      90909090 
 2627              	LC25:
 2628 1560 496E7661 		.ascii "Invalid reference filename: %s\0"
 2628      6C696420 
 2628      72656665 
 2628      72656E63 
 2628      65206669 
 2629              	LC26:
 2630 157f 7700     		.ascii "w\0"
 2631              	LC27:
 2632 1581 2E5C5C64 		.ascii ".\\\\debug\\\\NoTranslation.txt\0"
 2632      65627567 
 2632      5C5C4E6F 
 2632      5472616E 
 2632      736C6174 
 2633 159d 8D7600   		.align 32
 2634              	LC28:
 2635 15a0 2E5C5C64 		.ascii ".\\\\debug\\\\NoTranslation.txt Open Fail!!\0"
 2635      65627567 
 2635      5C5C4E6F 
 2635      5472616E 
 2635      736C6174 
 2636              	LC29:
 2637 15c8 6100     		.ascii "a\0"
 2638              	LC30:
 2639 15ca 4E6F5472 		.ascii "NoTranslation.txt Open Fail!!\0"
 2639      616E736C 
 2639      6174696F 
 2639      6E2E7478 
 2639      74204F70 
 2640 15e8 90909090 		.align 32
 2640      90909090 
 2640      90909090 
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 69


 2640      90909090 
 2640      90909090 
 2641              	LC31:
 2642 1600 6D656D6F 		.ascii "memory is not available step.1 size=[%d]\0"
 2642      72792069 
 2642      73206E6F 
 2642      74206176 
 2642      61696C61 
 2643              	LC32:
 2644 1629 257300   		.ascii "%s\0"
 2645              	LC33:
 2646 162c 09257300 		.ascii "\11%s\0"
 2647              	LC34:
 2648 1630 0A00     		.ascii "\12\0"
 2649 1632 8DB42600 		.align 32
 2649      0000008D 
 2649      BC270000 
 2649      0000
 2650              	LC35:
 2651 1640 6D656D6F 		.ascii "memory is not available step.2 size=[%d]\0"
 2651      72792069 
 2651      73206E6F 
 2651      74206176 
 2651      61696C61 
 2652 1669 90909090 		.align 32
 2652      90909090 
 2652      90909090 
 2652      90909090 
 2652      90909090 
 2653              	LC36:
 2654 1680 5B4D454D 		.ascii "[MEM]CreateRefList : create data structure to store ref list lines\0"
 2654      5D437265 
 2654      61746552 
 2654      65664C69 
 2654      7374203A 
 2655 16c3 90909090 		.align 32
 2655      90909090 
 2655      90909090 
 2655      90909090 
 2655      90909090 
 2656              	LC37:
 2657 16e0 6D656D6F 		.ascii "memory is not available step.7 length=[%d]\0"
 2657      72792069 
 2657      73206E6F 
 2657      74206176 
 2657      61696C61 
 2658 170b 90909090 		.align 32
 2658      90909090 
 2658      90909090 
 2658      90909090 
 2658      90909090 
 2659              	LC38:
 2660 1720 5B4D454D 		.ascii "[MEM]load_ref_list_to_mem: load ref list items to ref_all vector\0"
 2660      5D6C6F61 
 2660      645F7265 
 2660      665F6C69 
 2660      73745F74 
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 70


 2661 1761 90909090 		.align 32
 2661      90909090 
 2661      90909090 
 2661      90909090 
 2661      90909090 
 2662              	LC39:
 2663 1780 6D656D6F 		.ascii "memory is not available step.8 size=[%d]\0"
 2663      72792069 
 2663      73206E6F 
 2663      74206176 
 2663      61696C61 
 2664              	LC40:
 2665 17a9 43686563 		.ascii "Check String ID %d\0"
 2665      6B205374 
 2665      72696E67 
 2665      20494420 
 2665      256400
 2666 17bc 8D742600 		.align 32
 2667              	LC41:
 2668 17c0 50726F63 		.ascii "Process ref_all_list!! search_index = %d\0"
 2668      65737320 
 2668      7265665F 
 2668      616C6C5F 
 2668      6C697374 
 2669 17e9 90       		.align 2
 2670              	LC42:
 2671 17ea 09005600 		.ascii "\11\0V\0\0\0"
 2671      0000
 2672 17f0 90909090 		.align 32
 2672      90909090 
 2672      90909090 
 2672      90909090 
 2673              	LC43:
 2674 1800 6D697373 		.ascii "missLanguage found!! search_index = %d\0"
 2674      4C616E67 
 2674      75616765 
 2674      20666F75 
 2674      6E642121 
 2675              	LC44:
 2676 1827 6974656D 		.ascii "item in ref list is NULL: %d \0"
 2676      20696E20 
 2676      72656620 
 2676      6C697374 
 2676      20697320 
 2677              	LC45:
 2678 1845 25730909 		.ascii "%s\11\11\11Empty\12\0"
 2678      09456D70 
 2678      74790A00 
 2679 1851 EB0D9090 		.align 32
 2679      90909090 
 2679      90909090 
 2679      909090
 2680              	LC46:
 2681 1860 506C6561 		.ascii "Please see NoTranslation.txt to see the result...\0"
 2681      73652073 
 2681      6565204E 
 2681      6F547261 
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 71


 2681      6E736C61 
 2683              	.globl _MergeStrRes
 2685              	_MergeStrRes:
1646:str_merge.c   **** 
1647:str_merge.c   **** 
1648:str_merge.c   **** /*****************************************************************************
1649:str_merge.c   ****  * FUNCTION
1650:str_merge.c   ****  *  MergeStrRes
1651:str_merge.c   ****  * DESCRIPTION
1652:str_merge.c   ****  *  Find string ID in ref_list.txt, generate string content table
1653:str_merge.c   ****  * PARAMETERS
1654:str_merge.c   ****  *  void
1655:str_merge.c   ****  * RETURNS
1656:str_merge.c   ****  *  Return 0 on success, otherwise, return -1
1657:str_merge.c   ****  *****************************************************************************/
1658:str_merge.c   **** int MergeStrRes(void)
1659:str_merge.c   **** {
 2687              	LM310:
 2688 1892 55       		pushl	%ebp
 2689 1893 89E5     		movl	%esp, %ebp
 2690 1895 B8A81A00 		movl	$6824, %eax
 2690      00
 2691 189a E8000000 		call	__alloca
 2691      00
 2692              	LBB23:
 2693 189f 89A58CE5 		movl	%esp, -6772(%ebp)
 2693      FFFF
1660:str_merge.c   ****     /*----------------------------------------------------------------*/
1661:str_merge.c   ****     /* Local Variables                                                */
1662:str_merge.c   ****     /*----------------------------------------------------------------*/
1663:str_merge.c   ****     FILE *ref = NULL;
 2695              	LM311:
 2696 18a5 C745F400 		movl	$0, -12(%ebp)
 2696      000000
1664:str_merge.c   ****     FILE *fail = NULL;
 2698              	LM312:
 2699 18ac C745F000 		movl	$0, -16(%ebp)
 2699      000000
1665:str_merge.c   ****     wchar_t *tmp_line;
1666:str_merge.c   ****     wchar_t *end_line;
1667:str_merge.c   **** 
1668:str_merge.c   **** #ifdef MEM_REF_LIST_OPT
1669:str_merge.c   ****     /* Record the scanning string line index of ref list */
1670:str_merge.c   ****     int tmp_line_indx = 0;
 2701              	LM313:
 2702 18b3 C745E400 		movl	$0, -28(%ebp)
 2702      000000
1671:str_merge.c   ****     /* temp variable to read/wirte data from/to a ref list item*/
1672:str_merge.c   ****     RefListItem *tmp_list_item = NULL;
 2704              	LM314:
 2705 18ba C745E000 		movl	$0, -32(%ebp)
 2705      000000
1673:str_merge.c   **** #endif /* MEM_REF_LIST_OPT */
1674:str_merge.c   **** 
1675:str_merge.c   ****     wchar_t buf_src[TMP_BUF_LENGTH];
1676:str_merge.c   ****     wchar_t buf_ref[TMP_BUF_LENGTH];
1677:str_merge.c   ****     wchar_t tmp_buf[TMP_BUF_LENGTH];
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 72


1678:str_merge.c   ****     int token_id = 0, gIndex = 0;
 2707              	LM315:
 2708 18c1 C785D4E7 		movl	$0, -6188(%ebp)
 2708      FFFF0000 
 2708      0000
 2709 18cb C785D0E7 		movl	$0, -6192(%ebp)
 2709      FFFF0000 
 2709      0000
1679:str_merge.c   ****     char buf_asc[512];
1680:str_merge.c   ****     int found = 0, i = 0, StrNotTranslated = 1, missLanguage = 0;
 2711              	LM316:
 2712 18d5 C785C4E5 		movl	$0, -6716(%ebp)
 2712      FFFF0000 
 2712      0000
 2713 18df C785C0E5 		movl	$0, -6720(%ebp)
 2713      FFFF0000 
 2713      0000
 2714 18e9 C785BCE5 		movl	$1, -6724(%ebp)
 2714      FFFF0100 
 2714      0000
 2715 18f3 C785B8E5 		movl	$0, -6728(%ebp)
 2715      FFFF0000 
 2715      0000
1681:str_merge.c   **** 
1682:str_merge.c   ****     int ret = 0;
 2717              	LM317:
 2718 18fd C785B4E5 		movl	$0, -6732(%ebp)
 2718      FFFF0000 
 2718      0000
1683:str_merge.c   ****     U16 nStrId = 0;
 2720              	LM318:
 2721 1907 66C785B2 		movw	$0, -6734(%ebp)
 2721      E5FFFF00 
 2721      00
1684:str_merge.c   ****     U16 total_id = CurrMaxStringId;
 2723              	LM319:
 2724 1910 0FB70500 		movzwl	_CurrMaxStringId, %eax
 2724      000000
 2725 1917 668985B0 		movw	%ax, -6736(%ebp)
 2725      E5FFFF
1685:str_merge.c   **** 
1686:str_merge.c   ****     wchar_t marker[2] = {NO_TRANSLATION_MARKER, 0};
 2727              	LM320:
 2728 191e 66C785AC 		movw	$19, -6740(%ebp)
 2728      E5FFFF13 
 2728      00
 2729 1927 66C785AE 		movw	$0, -6738(%ebp)
 2729      E5FFFF00 
 2729      00
1687:str_merge.c   ****     // record the times of memory allocation retry
1688:str_merge.c   ****     int mem_retry_count = 0;
 2731              	LM321:
 2732 1930 C785A8E5 		movl	$0, -6744(%ebp)
 2732      FFFF0000 
 2732      0000
1689:str_merge.c   **** 
1690:str_merge.c   ****     /* operator support */
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 73


1691:str_merge.c   **** #ifndef __OPTR_NONE__
1692:str_merge.c   ****     FILE *optr_ref = NULL;
1693:str_merge.c   ****     char *optr_path;
1694:str_merge.c   ****     int optr_lang;
1695:str_merge.c   ****     U32 optr_line_buf_length;
1696:str_merge.c   ****     U16 *optr_lang_mask = NULL;
1697:str_merge.c   ****     wchar_t (*ref_ssc_list)[SSC_LENGTH] = NULL;
1698:str_merge.c   **** 
1699:str_merge.c   **** 
1700:str_merge.c   **** #ifndef MEM_REF_LIST_OPT
1701:str_merge.c   ****     wchar_t *optr_ref_all = NULL;
1702:str_merge.c   **** #else /* MEM_REF_LIST_OPT */
1703:str_merge.c   ****     /* Load optr ref list lines to a vector with variable 
1704:str_merge.c   ****        size elememts instead of a lare array with fixed
1705:str_merge.c   ****        size elementsn */
1706:str_merge.c   ****     RefList *optr_ref_all_list = NULL;
1707:str_merge.c   ****     /* Record the scanning string line index of operator ref list */
1708:str_merge.c   ****     int optr_tmp_line_indx = 0;
1709:str_merge.c   **** #endif /*MEM_REF_LIST_OPT*/
1710:str_merge.c   **** 
1711:str_merge.c   ****     wchar_t *optr_ref_ssc = NULL;
1712:str_merge.c   ****     wchar_t *optr_tmp_line;
1713:str_merge.c   ****     wchar_t *optr_end_line;
1714:str_merge.c   ****     int optr_found;
1715:str_merge.c   ****     int optr_ref_cnt = 0;
1716:str_merge.c   ****     int optr_new_cnt = 0;
1717:str_merge.c   ****     int optr_search_cnt = 0;
1718:str_merge.c   ****     int optr_search_index = 0;
1719:str_merge.c   **** #endif /* __OPTR_NONE__ */
1720:str_merge.c   **** 
1721:str_merge.c   **** #ifdef __TIME_CONSUME
1722:str_merge.c   ****     time_t start_time, end_time;
1723:str_merge.c   **** #endif
1724:str_merge.c   ****     int ref_cnt = 0;
 2734              	LM322:
 2735 193a C785A4E5 		movl	$0, -6748(%ebp)
 2735      FFFF0000 
 2735      0000
1725:str_merge.c   ****     int search_cnt = 0;
 2737              	LM323:
 2738 1944 C785A0E5 		movl	$0, -6752(%ebp)
 2738      FFFF0000 
 2738      0000
1726:str_merge.c   ****     int search_index = 0;
 2740              	LM324:
 2741 194e C7859CE5 		movl	$0, -6756(%ebp)
 2741      FFFF0000 
 2741      0000
1727:str_merge.c   ****     int j;
1728:str_merge.c   ****     /*column index that deployed language in ref list*/
1729:str_merge.c   ****     int deployed_lang_index[mtk_gMaxDeployedLangs + 1];
 2743              	LM325:
 2744 1958 0FB70500 		movzwl	_mtk_gMaxDeployedLangs, %eax
 2744      000000
 2745 195f C1E002   		sall	$2, %eax
 2746 1962 83C004   		addl	$4, %eax
 2747 1965 83C00F   		addl	$15, %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 74


 2748 1968 C1E804   		shrl	$4, %eax
 2749 196b C1E004   		sall	$4, %eax
 2750 196e 898584E5 		movl	%eax, -6780(%ebp)
 2750      FFFF
 2751 1974 8B8584E5 		movl	-6780(%ebp), %eax
 2751      FFFF
 2752 197a E8000000 		call	__alloca
 2752      00
 2753 197f 8D442414 		leal	20(%esp), %eax
 2754 1983 898588E5 		movl	%eax, -6776(%ebp)
 2754      FFFF
1730:str_merge.c   **** #ifndef __OPTR_NONE__
1731:str_merge.c   ****     int optr_deployed_lang_index[mtk_gMaxDeployedLangs + 1];
1732:str_merge.c   **** #endif /*__OPTR_NONE__*/
1733:str_merge.c   **** 
1734:str_merge.c   ****     int count = 0;
 2756              	LM326:
 2757 1989 C78594E5 		movl	$0, -6764(%ebp)
 2757      FFFF0000 
 2757      0000
1735:str_merge.c   **** 
1736:str_merge.c   ****     /*----------------------------------------------------------------*/
1737:str_merge.c   ****     /* Code Body                                                      */
1738:str_merge.c   ****     /*----------------------------------------------------------------*/
1739:str_merge.c   ****     STRMERG_LOG_V("MergeStrRes(): Start to merge string translation data");
 2759              	LM327:
 2760 1993 C7442408 		movl	$LC18, 8(%esp)
 2760      40140000 
 2761 199b C7442404 		movl	$LC3, 4(%esp)
 2761      4B040000 
 2762 19a3 C7042401 		movl	$1, (%esp)
 2762      000000
 2763 19aa E8000000 		call	_reslog_adaptor_log
 2763      00
1740:str_merge.c   **** #ifndef __MMI_RESOURCE_ENFB_SUPPORT__
1741:str_merge.c   ****     CurrMaxTransStrId = 0;
 2765              	LM328:
 2766 19af 66C70500 		movw	$0, _CurrMaxTransStrId
 2766      00000000 
 2766      00
1742:str_merge.c   **** #endif /* __MMI_RESOURCE_ENFB_SUPPORT__ */
1743:str_merge.c   ****     /*it will be used to caculate string size*/
1744:str_merge.c   ****     memset(StrSize, 0, sizeof(U16) * MAX_STRING_MAP_SIZE);
 2768              	LM329:
 2769 19b8 C7442408 		movl	$131070, 8(%esp)
 2769      FEFF0100 
 2770 19c0 C7442404 		movl	$0, 4(%esp)
 2770      00000000 
 2771 19c8 C70424D8 		movl	$_StrSize, (%esp)
 2771      000200
 2772 19cf E8000000 		call	_memset
 2772      00
1745:str_merge.c   ****     memset(deployed_lang_index, -1, sizeof(int) * (mtk_gMaxDeployedLangs + 1));
 2774              	LM330:
 2775 19d4 0FB70500 		movzwl	_mtk_gMaxDeployedLangs, %eax
 2775      000000
 2776 19db C1E002   		sall	$2, %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 75


 2777 19de 83C004   		addl	$4, %eax
 2778 19e1 89442408 		movl	%eax, 8(%esp)
 2779 19e5 C7442404 		movl	$-1, 4(%esp)
 2779      FFFFFFFF 
 2780 19ed 8B8588E5 		movl	-6776(%ebp), %eax
 2780      FFFF
 2781 19f3 890424   		movl	%eax, (%esp)
 2782 19f6 E8000000 		call	_memset
 2782      00
1746:str_merge.c   **** #ifndef __OPTR_NONE__
1747:str_merge.c   ****     memset(optr_deployed_lang_index, -1, sizeof(int) * (mtk_gMaxDeployedLangs + 1));
1748:str_merge.c   **** #endif /*__OPTR_NONE__*/
1749:str_merge.c   **** 
1750:str_merge.c   **** #ifndef __MMI_RESOURCE_ENFB_SUPPORT__
1751:str_merge.c   ****     ret = init_fixed_id(&fixed_id, CurrMaxStringId);
 2784              	LM331:
 2785 19fb 0FB70500 		movzwl	_CurrMaxStringId, %eax
 2785      000000
 2786 1a02 89442404 		movl	%eax, 4(%esp)
 2787 1a06 C7042400 		movl	$_fixed_id, (%esp)
 2787      000000
 2788 1a0d E89A4E00 		call	_init_fixed_id
 2788      00
 2789 1a12 8985B4E5 		movl	%eax, -6732(%ebp)
 2789      FFFF
1752:str_merge.c   ****     if(ret != 0){
 2791              	LM332:
 2792 1a18 83BDB4E5 		cmpl	$0, -6732(%ebp)
 2792      FFFF00
 2793 1a1f 7469     		je	L178
1753:str_merge.c   ****         STRMERG_LOG_E("init_fixed_id() error: LINE:%d,\tFILE%s", __LINE__, __FILE__);
 2795              	LM333:
 2796 1a21 C7442410 		movl	$LC19, 16(%esp)
 2796      76140000 
 2797 1a29 C744240C 		movl	$1753, 12(%esp)
 2797      D9060000 
 2798 1a31 C7442408 		movl	$LC20, 8(%esp)
 2798      A0140000 
 2799 1a39 C7442404 		movl	$LC3, 4(%esp)
 2799      4B040000 
 2800 1a41 C7042403 		movl	$3, (%esp)
 2800      000000
 2801 1a48 E8000000 		call	_reslog_adaptor_log
 2801      00
1754:str_merge.c   ****         fprintf(stderr, "failed error: LINE:%d,\tFILE%s\n", __LINE__, __FILE__);
 2803              	LM334:
 2804 1a4d C744240C 		movl	$LC19, 12(%esp)
 2804      76140000 
 2805 1a55 C7442408 		movl	$1754, 8(%esp)
 2805      DA060000 
 2806 1a5d C7442404 		movl	$LC21, 4(%esp)
 2806      E0140000 
 2807 1a65 A1000000 		movl	__imp___iob, %eax
 2807      00
 2808 1a6a 83C040   		addl	$64, %eax
 2809 1a6d 890424   		movl	%eax, (%esp)
 2810 1a70 E8000000 		call	_fprintf
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 76


 2810      00
1755:str_merge.c   ****         return -1;
 2812              	LM335:
 2813              	LBB24:
 2814 1a75 8BA58CE5 		movl	-6772(%ebp), %esp
 2814      FFFF
 2815              	LBE24:
 2816 1a7b C78590E5 		movl	$-1, -6768(%ebp)
 2816      FFFFFFFF 
 2816      FFFF
 2817 1a85 E91B0D00 		jmp	L177
 2817      00
 2818              	L178:
1756:str_merge.c   ****     }
1757:str_merge.c   **** 
1758:str_merge.c   ****     ret = generate_enum_hash(fixed_id.enum_id_tb, StrIsPopulate, StrEnum);
 2820              	LM336:
 2821 1a8a C7442408 		movl	$_StrEnum, 8(%esp)
 2821      00000000 
 2822 1a92 C7442404 		movl	$_StrIsPopulate, 4(%esp)
 2822      00000000 
 2823 1a9a A1080000 		movl	_fixed_id+8, %eax
 2823      00
 2824 1a9f 890424   		movl	%eax, (%esp)
 2825 1aa2 E8994F00 		call	_generate_enum_hash
 2825      00
 2826 1aa7 8985B4E5 		movl	%eax, -6732(%ebp)
 2826      FFFF
1759:str_merge.c   ****     if(ret < 0){
 2828              	LM337:
 2829 1aad 83BDB4E5 		cmpl	$0, -6732(%ebp)
 2829      FFFF00
 2830 1ab4 7969     		jns	L179
1760:str_merge.c   ****         STRMERG_LOG_E("generate_enum_hash() error: LINE:%d,\tFILE%s", __LINE__, __FILE__);
 2832              	LM338:
 2833 1ab6 C7442410 		movl	$LC19, 16(%esp)
 2833      76140000 
 2834 1abe C744240C 		movl	$1760, 12(%esp)
 2834      E0060000 
 2835 1ac6 C7442408 		movl	$LC22, 8(%esp)
 2835      00150000 
 2836 1ace C7442404 		movl	$LC3, 4(%esp)
 2836      4B040000 
 2837 1ad6 C7042403 		movl	$3, (%esp)
 2837      000000
 2838 1add E8000000 		call	_reslog_adaptor_log
 2838      00
1761:str_merge.c   ****         fprintf(stderr, "failed error: LINE:%d,\tFILE%s\n", __LINE__, __FILE__);
 2840              	LM339:
 2841 1ae2 C744240C 		movl	$LC19, 12(%esp)
 2841      76140000 
 2842 1aea C7442408 		movl	$1761, 8(%esp)
 2842      E1060000 
 2843 1af2 C7442404 		movl	$LC21, 4(%esp)
 2843      E0140000 
 2844 1afa A1000000 		movl	__imp___iob, %eax
 2844      00
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 77


 2845 1aff 83C040   		addl	$64, %eax
 2846 1b02 890424   		movl	%eax, (%esp)
 2847 1b05 E8000000 		call	_fprintf
 2847      00
1762:str_merge.c   ****         return -1;
 2849              	LM340:
 2850              	LBB25:
 2851 1b0a 8BA58CE5 		movl	-6772(%ebp), %esp
 2851      FFFF
 2852              	LBE25:
 2853 1b10 C78590E5 		movl	$-1, -6768(%ebp)
 2853      FFFFFFFF 
 2853      FFFF
 2854 1b1a E9860C00 		jmp	L177
 2854      00
 2855              	L179:
1763:str_merge.c   ****     }
1764:str_merge.c   **** #endif /* __MMI_RESOURCE_ENFB_SUPPORT__ */
1765:str_merge.c   **** 
1766:str_merge.c   **** 
1767:str_merge.c   ****     nUsedLang = get_filter_used_language_count();
 2857              	LM341:
 2858 1b1f E8DEF8FF 		call	_get_filter_used_language_count
 2858      FF
 2859 1b24 66A39800 		movw	%ax, _nUsedLang
 2859      0000
1768:str_merge.c   **** 
1769:str_merge.c   ****     ref = fopen(ref_file, "rb");
 2861              	LM342:
 2862 1b2a C7442404 		movl	$LC23, 4(%esp)
 2862      2C150000 
 2863 1b32 C704242F 		movl	$LC24, (%esp)
 2863      150000
 2864 1b39 E8000000 		call	_fopen
 2864      00
 2865 1b3e 8945F4   		movl	%eax, -12(%ebp)
1770:str_merge.c   ****     if (ref == NULL)
 2867              	LM343:
 2868 1b41 837DF400 		cmpl	$0, -12(%ebp)
 2869 1b45 7539     		jne	L180
1771:str_merge.c   ****     {
1772:str_merge.c   ****         STRMERG_LOG_E("Invalid reference filename: %s",ref_file);
 2871              	LM344:
 2872 1b47 C744240C 		movl	$LC24, 12(%esp)
 2872      2F150000 
 2873 1b4f C7442408 		movl	$LC25, 8(%esp)
 2873      60150000 
 2874 1b57 C7442404 		movl	$LC3, 4(%esp)
 2874      4B040000 
 2875 1b5f C7042403 		movl	$3, (%esp)
 2875      000000
 2876 1b66 E8000000 		call	_reslog_adaptor_log
 2876      00
1773:str_merge.c   ****         return -1;
 2878              	LM345:
 2879              	LBB26:
 2880 1b6b 8BA58CE5 		movl	-6772(%ebp), %esp
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 78


 2880      FFFF
 2881              	LBE26:
 2882 1b71 C78590E5 		movl	$-1, -6768(%ebp)
 2882      FFFFFFFF 
 2882      FFFF
 2883 1b7b E9250C00 		jmp	L177
 2883      00
 2884              	L180:
1774:str_merge.c   ****     }
1775:str_merge.c   ****     /* operator support */
1776:str_merge.c   **** #ifndef __OPTR_NONE__
1777:str_merge.c   ****     optr_path = (char *)tmp_buf;
1778:str_merge.c   ****     strcpy(tmp_buf, CUST_OPERATOR_STR_PATH);
1779:str_merge.c   ****     strcat(tmp_buf, "\\");
1780:str_merge.c   ****     strcat(tmp_buf, optr_ref_file);
1781:str_merge.c   **** 
1782:str_merge.c   ****     optr_ref = fopen(optr_path, "rb");
1783:str_merge.c   ****     if (optr_ref == NULL)
1784:str_merge.c   ****     {
1785:str_merge.c   ****         STRMERG_LOG_E("Invalid operator reference filename");
1786:str_merge.c   ****         goto ERR_RET;
1787:str_merge.c   ****     }
1788:str_merge.c   **** #endif /* __OPTR_NONE__ */
1789:str_merge.c   ****     fail = fopen(".\\\\debug\\\\NoTranslation.txt", "w");
 2886              	LM346:
 2887 1b80 C7442404 		movl	$LC26, 4(%esp)
 2887      7F150000 
 2888 1b88 C7042481 		movl	$LC27, (%esp)
 2888      150000
 2889 1b8f E8000000 		call	_fopen
 2889      00
 2890 1b94 8945F0   		movl	%eax, -16(%ebp)
1790:str_merge.c   ****     if (fail == NULL)
 2892              	LM347:
 2893 1b97 837DF000 		cmpl	$0, -16(%ebp)
 2894 1b9b 7521     		jne	L181
1791:str_merge.c   ****     {
1792:str_merge.c   ****         STRMERG_LOG_E(".\\\\debug\\\\NoTranslation.txt Open Fail!!");
 2896              	LM348:
 2897 1b9d C7442408 		movl	$LC28, 8(%esp)
 2897      A0150000 
 2898 1ba5 C7442404 		movl	$LC3, 4(%esp)
 2898      4B040000 
 2899 1bad C7042403 		movl	$3, (%esp)
 2899      000000
 2900 1bb4 E8000000 		call	_reslog_adaptor_log
 2900      00
1793:str_merge.c   ****         goto ERR_RET;
 2902              	LM349:
 2903 1bb9 E93C0B00 		jmp	L182
 2903      00
 2904              	L181:
1794:str_merge.c   ****     }
1795:str_merge.c   ****     fclose(fail);
 2906              	LM350:
 2907 1bbe 8B45F0   		movl	-16(%ebp), %eax
 2908 1bc1 890424   		movl	%eax, (%esp)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 79


 2909 1bc4 E8000000 		call	_fclose
 2909      00
1796:str_merge.c   ****     fail = fopen(".\\\\debug\\\\NoTranslation.txt", "a");
 2911              	LM351:
 2912 1bc9 C7442404 		movl	$LC29, 4(%esp)
 2912      C8150000 
 2913 1bd1 C7042481 		movl	$LC27, (%esp)
 2913      150000
 2914 1bd8 E8000000 		call	_fopen
 2914      00
 2915 1bdd 8945F0   		movl	%eax, -16(%ebp)
1797:str_merge.c   ****     if (fail == NULL)
 2917              	LM352:
 2918 1be0 837DF000 		cmpl	$0, -16(%ebp)
 2919 1be4 7521     		jne	L183
1798:str_merge.c   ****     {
1799:str_merge.c   ****         STRMERG_LOG_E("NoTranslation.txt Open Fail!!");
 2921              	LM353:
 2922 1be6 C7442408 		movl	$LC30, 8(%esp)
 2922      CA150000 
 2923 1bee C7442404 		movl	$LC3, 4(%esp)
 2923      4B040000 
 2924 1bf6 C7042403 		movl	$3, (%esp)
 2924      000000
 2925 1bfd E8000000 		call	_reslog_adaptor_log
 2925      00
1800:str_merge.c   ****         goto ERR_RET;        
 2927              	LM354:
 2928 1c02 E9F30A00 		jmp	L182
 2928      00
 2929              	L183:
1801:str_merge.c   ****     }
1802:str_merge.c   **** 
1803:str_merge.c   **** #ifdef __TIME_CONSUME
1804:str_merge.c   ****     start_time = time(NULL);
1805:str_merge.c   **** #endif
1806:str_merge.c   **** 
1807:str_merge.c   ****     fgetws(tmp_buf, TMP_BUF_LENGTH, ref); /* Number of Language */
 2931              	LM355:
 2932 1c07 8B45F4   		movl	-12(%ebp), %eax
 2933 1c0a 89442408 		movl	%eax, 8(%esp)
 2934 1c0e C7442404 		movl	$1024, 4(%esp)
 2934      00040000 
 2935 1c16 8D85D8E7 		leal	-6184(%ebp), %eax
 2935      FFFF
 2936 1c1c 890424   		movl	%eax, (%esp)
 2937 1c1f E8000000 		call	_fgetws
 2937      00
1808:str_merge.c   ****     GetItem(tmp_buf, 1, buf_ref);
 2939              	LM356:
 2940 1c24 8D85D8EF 		leal	-4136(%ebp), %eax
 2940      FFFF
 2941 1c2a 89442408 		movl	%eax, 8(%esp)
 2942 1c2e C7442404 		movl	$1, 4(%esp)
 2942      01000000 
 2943 1c36 8D85D8E7 		leal	-6184(%ebp), %eax
 2943      FFFF
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 80


 2944 1c3c 890424   		movl	%eax, (%esp)
 2945 1c3f E811E8FF 		call	_GetItem
 2945      FF
1809:str_merge.c   ****     nLang = _wtoi(buf_ref);
 2947              	LM357:
 2948 1c44 8D85D8EF 		leal	-4136(%ebp), %eax
 2948      FFFF
 2949 1c4a 890424   		movl	%eax, (%esp)
 2950 1c4d E8000000 		call	__wtoi
 2950      00
 2951 1c52 A3780000 		movl	%eax, _nLang
 2951      00
1810:str_merge.c   ****     rewind(ref);
 2953              	LM358:
 2954 1c57 8B45F4   		movl	-12(%ebp), %eax
 2955 1c5a 890424   		movl	%eax, (%esp)
 2956 1c5d E8000000 		call	_rewind
 2956      00
1811:str_merge.c   ****     g_line_buf_length = GetLineBufLength(ref, nLang);
 2958              	LM359:
 2959 1c62 A1780000 		movl	_nLang, %eax
 2959      00
 2960 1c67 89442404 		movl	%eax, 4(%esp)
 2961 1c6b 8B45F4   		movl	-12(%ebp), %eax
 2962 1c6e 890424   		movl	%eax, (%esp)
 2963 1c71 E872EAFF 		call	_GetLineBufLength
 2963      FF
 2964 1c76 A3280000 		movl	%eax, _g_line_buf_length
 2964      00
1812:str_merge.c   ****     /* need additional buffer for NO_TRANSLATION_MARKER to avoid buffer overruns */
1813:str_merge.c   ****     g_line_buf_length += wcslen(marker) * nLang;
 2966              	LM360:
 2967 1c7b 8D85ACE5 		leal	-6740(%ebp), %eax
 2967      FFFF
 2968 1c81 890424   		movl	%eax, (%esp)
 2969 1c84 E8000000 		call	_wcslen
 2969      00
 2970 1c89 0FAF0578 		imull	_nLang, %eax
 2970      000000
 2971 1c90 01052800 		addl	%eax, _g_line_buf_length
 2971      0000
1814:str_merge.c   ****     /* actually line length */
1815:str_merge.c   ****     g_line_buf_act_length = g_line_buf_length;
 2973              	LM361:
 2974 1c96 A1280000 		movl	_g_line_buf_length, %eax
 2974      00
 2975 1c9b A3380000 		movl	%eax, _g_line_buf_act_length
 2975      00
1816:str_merge.c   **** 
1817:str_merge.c   ****     rewind(ref);
 2977              	LM362:
 2978 1ca0 8B45F4   		movl	-12(%ebp), %eax
 2979 1ca3 890424   		movl	%eax, (%esp)
 2980 1ca6 E8000000 		call	_rewind
 2980      00
1818:str_merge.c   ****     fgetws(tmp_buf, TMP_BUF_LENGTH, ref); /* Skip Number of Language */
 2982              	LM363:
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 81


 2983 1cab 8B45F4   		movl	-12(%ebp), %eax
 2984 1cae 89442408 		movl	%eax, 8(%esp)
 2985 1cb2 C7442404 		movl	$1024, 4(%esp)
 2985      00040000 
 2986 1cba 8D85D8E7 		leal	-6184(%ebp), %eax
 2986      FFFF
 2987 1cc0 890424   		movl	%eax, (%esp)
 2988 1cc3 E8000000 		call	_fgetws
 2988      00
1819:str_merge.c   **** 
1820:str_merge.c   **** 
1821:str_merge.c   **** #ifdef MEM_REF_LIST_OPT
1822:str_merge.c   ****     /* Allocate tmp_line buffer. tmp_line will be write back to RefList
1823:str_merge.c   ****             strcuture indexed by corrosponding tmp_line_index. */
1824:str_merge.c   ****     tmp_line = (wchar_t *)malloc(g_line_buf_act_length * sizeof(wchar_t));
 2990              	LM364:
 2991 1cc8 A1380000 		movl	_g_line_buf_act_length, %eax
 2991      00
 2992 1ccd 01C0     		addl	%eax, %eax
 2993 1ccf 890424   		movl	%eax, (%esp)
 2994 1cd2 E8000000 		call	_malloc
 2994      00
 2995 1cd7 8945EC   		movl	%eax, -20(%ebp)
1825:str_merge.c   ****     memset(tmp_line, 0, g_line_buf_act_length * sizeof(wchar_t));
 2997              	LM365:
 2998 1cda A1380000 		movl	_g_line_buf_act_length, %eax
 2998      00
 2999 1cdf 01C0     		addl	%eax, %eax
 3000 1ce1 89442408 		movl	%eax, 8(%esp)
 3001 1ce5 C7442404 		movl	$0, 4(%esp)
 3001      00000000 
 3002 1ced 8B45EC   		movl	-20(%ebp), %eax
 3003 1cf0 890424   		movl	%eax, (%esp)
 3004 1cf3 E8000000 		call	_memset
 3004      00
1826:str_merge.c   **** #endif /*MEM_REF_LIST_OPT*/
1827:str_merge.c   **** 
1828:str_merge.c   ****     /* operator support */
1829:str_merge.c   **** #ifndef __OPTR_NONE__
1830:str_merge.c   ****     fgetws(tmp_buf, TMP_BUF_LENGTH, optr_ref);
1831:str_merge.c   ****     GetItem(tmp_buf, 1, buf_ref);
1832:str_merge.c   ****     optr_lang = _wtoi(buf_ref);
1833:str_merge.c   ****     rewind(optr_ref);
1834:str_merge.c   ****     optr_line_buf_length = GetLineBufLength(optr_ref, optr_lang); 
1835:str_merge.c   ****     /* need additional buffer for NO_TRANSLATION_MARKER to avoid buffer overruns */
1836:str_merge.c   ****     optr_line_buf_length += wcslen(marker) * optr_lang;    
1837:str_merge.c   ****     rewind(optr_ref);
1838:str_merge.c   ****     fgetws(tmp_buf, TMP_BUF_LENGTH, optr_ref); /* Skip Number of Language */
1839:str_merge.c   **** 	
1840:str_merge.c   **** #ifdef MEM_REF_LIST_OPT
1841:str_merge.c   ****     /* Allocate tmp_line buffer. optr_tmp_line will be write back to RefList 
1842:str_merge.c   ****             strcuture indexed by corrosponding optr_tmp_line_index. */
1843:str_merge.c   ****     optr_tmp_line = (wchar_t *)malloc(g_line_buf_act_length * sizeof(wchar_t));
1844:str_merge.c   ****     memset(optr_tmp_line, 0, g_line_buf_act_length * sizeof(wchar_t));
1845:str_merge.c   **** #endif /*MEM_REF_LIST_OPT*/
1846:str_merge.c   **** 
1847:str_merge.c   **** #endif /* __OPTR_NONE__ */
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 82


1848:str_merge.c   **** 
1849:str_merge.c   ****     /* 
1850:str_merge.c   ****      * calculate line buffer size 
1851:str_merge.c   ****      * here +2 for Description, and (Max String Length, MODULE, ENUM)
1852:str_merge.c   ****      */
1853:str_merge.c   ****     /* Makr this line for reduce string memory, use GetLineBufLength */
1854:str_merge.c   ****     /*  g_line_buf_length = (nLang + 2) * MAX_LENGTH; */
1855:str_merge.c   ****     ref_tmp = (wchar_t *)malloc(g_line_buf_length * sizeof(wchar_t));
 3006              	LM366:
 3007 1cf8 A1280000 		movl	_g_line_buf_length, %eax
 3007      00
 3008 1cfd 01C0     		addl	%eax, %eax
 3009 1cff 890424   		movl	%eax, (%esp)
 3010 1d02 E8000000 		call	_malloc
 3010      00
 3011 1d07 A3680000 		movl	%eax, _ref_tmp
 3011      00
1856:str_merge.c   ****     if (ref_tmp == NULL)
 3013              	LM367:
 3014 1d0c 833D6800 		cmpl	$0, _ref_tmp
 3014      000000
 3015 1d13 752C     		jne	L184
1857:str_merge.c   ****     {
1858:str_merge.c   ****         STRMERG_LOG_E("memory is not available step.1 size=[%d]", g_line_buf_length * sizeof(wchar_
 3017              	LM368:
 3018 1d15 A1280000 		movl	_g_line_buf_length, %eax
 3018      00
 3019 1d1a 01C0     		addl	%eax, %eax
 3020 1d1c 8944240C 		movl	%eax, 12(%esp)
 3021 1d20 C7442408 		movl	$LC31, 8(%esp)
 3021      00160000 
 3022 1d28 C7442404 		movl	$LC3, 4(%esp)
 3022      4B040000 
 3023 1d30 C7042403 		movl	$3, (%esp)
 3023      000000
 3024 1d37 E8000000 		call	_reslog_adaptor_log
 3024      00
1859:str_merge.c   ****         goto ERR_RET;
 3026              	LM369:
 3027 1d3c E9B90900 		jmp	L182
 3027      00
 3028              	L184:
1860:str_merge.c   ****     }
1861:str_merge.c   **** 
1862:str_merge.c   ****     token_id = 0;
 3030              	LM370:
 3031 1d41 C785D4E7 		movl	$0, -6188(%ebp)
 3031      FFFF0000 
 3031      0000
1863:str_merge.c   ****     fgetws(ref_tmp, TMP_BUF_LENGTH, ref);   /* Title list */
 3033              	LM371:
 3034 1d4b 8B45F4   		movl	-12(%ebp), %eax
 3035 1d4e 89442408 		movl	%eax, 8(%esp)
 3036 1d52 C7442404 		movl	$1024, 4(%esp)
 3036      00040000 
 3037 1d5a A1680000 		movl	_ref_tmp, %eax
 3037      00
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 83


 3038 1d5f 890424   		movl	%eax, (%esp)
 3039 1d62 E8000000 		call	_fgetws
 3039      00
1864:str_merge.c   ****     GetItem(ref_tmp, token_id++, buf_src);
 3041              	LM372:
 3042 1d67 8D85D8F7 		leal	-2088(%ebp), %eax
 3042      FFFF
 3043 1d6d 89442408 		movl	%eax, 8(%esp)
 3044 1d71 8B85D4E7 		movl	-6188(%ebp), %eax
 3044      FFFF
 3045 1d77 89442404 		movl	%eax, 4(%esp)
 3046 1d7b 8D85D4E7 		leal	-6188(%ebp), %eax
 3046      FFFF
 3047 1d81 FF00     		incl	(%eax)
 3048 1d83 A1680000 		movl	_ref_tmp, %eax
 3048      00
 3049 1d88 890424   		movl	%eax, (%esp)
 3050 1d8b E8C5E6FF 		call	_GetItem
 3050      FF
1865:str_merge.c   ****     UCS2ASCII((char*)buf_src, buf_asc);     /* Enum Value */
 3052              	LM373:
 3053 1d90 8D85C8E5 		leal	-6712(%ebp), %eax
 3053      FFFF
 3054 1d96 89442404 		movl	%eax, 4(%esp)
 3055 1d9a 8D85D8F7 		leal	-2088(%ebp), %eax
 3055      FFFF
 3056 1da0 890424   		movl	%eax, (%esp)
 3057 1da3 E83BE6FF 		call	_UCS2ASCII
 3057      FF
1866:str_merge.c   ****     fprintf(fail, "%s", buf_asc);           /* print out to NoTranslation.txt */
 3059              	LM374:
 3060 1da8 8D85C8E5 		leal	-6712(%ebp), %eax
 3060      FFFF
 3061 1dae 89442408 		movl	%eax, 8(%esp)
 3062 1db2 C7442404 		movl	$LC32, 4(%esp)
 3062      29160000 
 3063 1dba 8B45F0   		movl	-16(%ebp), %eax
 3064 1dbd 890424   		movl	%eax, (%esp)
 3065 1dc0 E8000000 		call	_fprintf
 3065      00
1867:str_merge.c   **** 
1868:str_merge.c   ****     GetItem(ref_tmp, token_id++, buf_src);
 3067              	LM375:
 3068 1dc5 8D85D8F7 		leal	-2088(%ebp), %eax
 3068      FFFF
 3069 1dcb 89442408 		movl	%eax, 8(%esp)
 3070 1dcf 8B85D4E7 		movl	-6188(%ebp), %eax
 3070      FFFF
 3071 1dd5 89442404 		movl	%eax, 4(%esp)
 3072 1dd9 8D85D4E7 		leal	-6188(%ebp), %eax
 3072      FFFF
 3073 1ddf FF00     		incl	(%eax)
 3074 1de1 A1680000 		movl	_ref_tmp, %eax
 3074      00
 3075 1de6 890424   		movl	%eax, (%esp)
 3076 1de9 E867E6FF 		call	_GetItem
 3076      FF
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 84


1869:str_merge.c   ****     UCS2ASCII((char*)buf_src, buf_asc);     /* MODULE NAME */
 3078              	LM376:
 3079 1dee 8D85C8E5 		leal	-6712(%ebp), %eax
 3079      FFFF
 3080 1df4 89442404 		movl	%eax, 4(%esp)
 3081 1df8 8D85D8F7 		leal	-2088(%ebp), %eax
 3081      FFFF
 3082 1dfe 890424   		movl	%eax, (%esp)
 3083 1e01 E8DDE5FF 		call	_UCS2ASCII
 3083      FF
1870:str_merge.c   ****     fprintf(fail, "\t%s", buf_asc);         /* print out to NoTranslation.txt */
 3085              	LM377:
 3086 1e06 8D85C8E5 		leal	-6712(%ebp), %eax
 3086      FFFF
 3087 1e0c 89442408 		movl	%eax, 8(%esp)
 3088 1e10 C7442404 		movl	$LC33, 4(%esp)
 3088      2C160000 
 3089 1e18 8B45F0   		movl	-16(%ebp), %eax
 3090 1e1b 890424   		movl	%eax, (%esp)
 3091 1e1e E8000000 		call	_fprintf
 3091      00
1871:str_merge.c   **** 
1872:str_merge.c   ****     GetItem(ref_tmp, token_id++, buf_src);
 3093              	LM378:
 3094 1e23 8D85D8F7 		leal	-2088(%ebp), %eax
 3094      FFFF
 3095 1e29 89442408 		movl	%eax, 8(%esp)
 3096 1e2d 8B85D4E7 		movl	-6188(%ebp), %eax
 3096      FFFF
 3097 1e33 89442404 		movl	%eax, 4(%esp)
 3098 1e37 8D85D4E7 		leal	-6188(%ebp), %eax
 3098      FFFF
 3099 1e3d FF00     		incl	(%eax)
 3100 1e3f A1680000 		movl	_ref_tmp, %eax
 3100      00
 3101 1e44 890424   		movl	%eax, (%esp)
 3102 1e47 E809E6FF 		call	_GetItem
 3102      FF
1873:str_merge.c   ****     UCS2ASCII((char*)buf_src, buf_asc);     /* Max String Length */
 3104              	LM379:
 3105 1e4c 8D85C8E5 		leal	-6712(%ebp), %eax
 3105      FFFF
 3106 1e52 89442404 		movl	%eax, 4(%esp)
 3107 1e56 8D85D8F7 		leal	-2088(%ebp), %eax
 3107      FFFF
 3108 1e5c 890424   		movl	%eax, (%esp)
 3109 1e5f E87FE5FF 		call	_UCS2ASCII
 3109      FF
1874:str_merge.c   ****     fprintf(fail, "\t%s", buf_asc);         /* print out to NoTranslation.txt */
 3111              	LM380:
 3112 1e64 8D85C8E5 		leal	-6712(%ebp), %eax
 3112      FFFF
 3113 1e6a 89442408 		movl	%eax, 8(%esp)
 3114 1e6e C7442404 		movl	$LC33, 4(%esp)
 3114      2C160000 
 3115 1e76 8B45F0   		movl	-16(%ebp), %eax
 3116 1e79 890424   		movl	%eax, (%esp)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 85


 3117 1e7c E8000000 		call	_fprintf
 3117      00
1875:str_merge.c   **** 
1876:str_merge.c   ****     GetItem(ref_tmp, token_id++, buf_src);
 3119              	LM381:
 3120 1e81 8D85D8F7 		leal	-2088(%ebp), %eax
 3120      FFFF
 3121 1e87 89442408 		movl	%eax, 8(%esp)
 3122 1e8b 8B85D4E7 		movl	-6188(%ebp), %eax
 3122      FFFF
 3123 1e91 89442404 		movl	%eax, 4(%esp)
 3124 1e95 8D85D4E7 		leal	-6188(%ebp), %eax
 3124      FFFF
 3125 1e9b FF00     		incl	(%eax)
 3126 1e9d A1680000 		movl	_ref_tmp, %eax
 3126      00
 3127 1ea2 890424   		movl	%eax, (%esp)
 3128 1ea5 E8ABE5FF 		call	_GetItem
 3128      FF
1877:str_merge.c   ****     UCS2ASCII((char*)buf_src, buf_asc);     /* Description */
 3130              	LM382:
 3131 1eaa 8D85C8E5 		leal	-6712(%ebp), %eax
 3131      FFFF
 3132 1eb0 89442404 		movl	%eax, 4(%esp)
 3133 1eb4 8D85D8F7 		leal	-2088(%ebp), %eax
 3133      FFFF
 3134 1eba 890424   		movl	%eax, (%esp)
 3135 1ebd E821E5FF 		call	_UCS2ASCII
 3135      FF
1878:str_merge.c   ****     fprintf(fail, "\t%s", buf_asc);         /* print out to NoTranslation.txt */
 3137              	LM383:
 3138 1ec2 8D85C8E5 		leal	-6712(%ebp), %eax
 3138      FFFF
 3139 1ec8 89442408 		movl	%eax, 8(%esp)
 3140 1ecc C7442404 		movl	$LC33, 4(%esp)
 3140      2C160000 
 3141 1ed4 8B45F0   		movl	-16(%ebp), %eax
 3142 1ed7 890424   		movl	%eax, (%esp)
 3143 1eda E8000000 		call	_fprintf
 3143      00
1879:str_merge.c   **** 
1880:str_merge.c   ****     for (i = 0; i < nLang; i++)
 3145              	LM384:
 3146 1edf C785C0E5 		movl	$0, -6720(%ebp)
 3146      FFFF0000 
 3146      0000
 3147              	L185:
 3148 1ee9 8B85C0E5 		movl	-6720(%ebp), %eax
 3148      FFFF
 3149 1eef 3B057800 		cmpl	_nLang, %eax
 3149      0000
 3150 1ef5 7C02     		jl	L188
 3151 1ef7 EB66     		jmp	L186
 3152              	L188:
1881:str_merge.c   ****     {
1882:str_merge.c   ****         GetItem(ref_tmp, token_id + i, buf_ref);
 3154              	LM385:
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 86


 3155 1ef9 8D85D8EF 		leal	-4136(%ebp), %eax
 3155      FFFF
 3156 1eff 89442408 		movl	%eax, 8(%esp)
 3157 1f03 8B85C0E5 		movl	-6720(%ebp), %eax
 3157      FFFF
 3158 1f09 0385D4E7 		addl	-6188(%ebp), %eax
 3158      FFFF
 3159 1f0f 89442404 		movl	%eax, 4(%esp)
 3160 1f13 A1680000 		movl	_ref_tmp, %eax
 3160      00
 3161 1f18 890424   		movl	%eax, (%esp)
 3162 1f1b E835E5FF 		call	_GetItem
 3162      FF
1883:str_merge.c   ****         UCS2ASCII((char*)buf_ref, buf_asc); /* Language */
 3164              	LM386:
 3165 1f20 8D85C8E5 		leal	-6712(%ebp), %eax
 3165      FFFF
 3166 1f26 89442404 		movl	%eax, 4(%esp)
 3167 1f2a 8D85D8EF 		leal	-4136(%ebp), %eax
 3167      FFFF
 3168 1f30 890424   		movl	%eax, (%esp)
 3169 1f33 E8ABE4FF 		call	_UCS2ASCII
 3169      FF
1884:str_merge.c   ****         fprintf(fail, "\t%s", buf_asc);     /* print out to NoTranslation.txt */
 3171              	LM387:
 3172 1f38 8D85C8E5 		leal	-6712(%ebp), %eax
 3172      FFFF
 3173 1f3e 89442408 		movl	%eax, 8(%esp)
 3174 1f42 C7442404 		movl	$LC33, 4(%esp)
 3174      2C160000 
 3175 1f4a 8B45F0   		movl	-16(%ebp), %eax
 3176 1f4d 890424   		movl	%eax, (%esp)
 3177 1f50 E8000000 		call	_fprintf
 3177      00
 3179              	LM388:
 3180 1f55 8D85C0E5 		leal	-6720(%ebp), %eax
 3180      FFFF
 3181 1f5b FF00     		incl	(%eax)
 3182 1f5d EB8A     		jmp	L185
 3183              	L186:
1885:str_merge.c   ****     }
1886:str_merge.c   ****     fprintf(fail, "\n");
 3185              	LM389:
 3186 1f5f C7442404 		movl	$LC34, 4(%esp)
 3186      30160000 
 3187 1f67 8B45F0   		movl	-16(%ebp), %eax
 3188 1f6a 890424   		movl	%eax, (%esp)
 3189 1f6d E8000000 		call	_fprintf
 3189      00
1887:str_merge.c   **** 
1888:str_merge.c   ****     ref_ssc = (wchar_t *)malloc(g_line_buf_length * sizeof(wchar_t));
 3191              	LM390:
 3192 1f72 A1280000 		movl	_g_line_buf_length, %eax
 3192      00
 3193 1f77 01C0     		addl	%eax, %eax
 3194 1f79 890424   		movl	%eax, (%esp)
 3195 1f7c E8000000 		call	_malloc
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 87


 3195      00
 3196 1f81 A3580000 		movl	%eax, _ref_ssc
 3196      00
1889:str_merge.c   ****     if (ref_ssc == NULL)
 3198              	LM391:
 3199 1f86 833D5800 		cmpl	$0, _ref_ssc
 3199      000000
 3200 1f8d 752C     		jne	L189
1890:str_merge.c   ****     {
1891:str_merge.c   ****         STRMERG_LOG_E("memory is not available step.2 size=[%d]", g_line_buf_length * sizeof(wchar_
 3202              	LM392:
 3203 1f8f A1280000 		movl	_g_line_buf_length, %eax
 3203      00
 3204 1f94 01C0     		addl	%eax, %eax
 3205 1f96 8944240C 		movl	%eax, 12(%esp)
 3206 1f9a C7442408 		movl	$LC35, 8(%esp)
 3206      40160000 
 3207 1fa2 C7442404 		movl	$LC3, 4(%esp)
 3207      4B040000 
 3208 1faa C7042403 		movl	$3, (%esp)
 3208      000000
 3209 1fb1 E8000000 		call	_reslog_adaptor_log
 3209      00
1892:str_merge.c   ****         goto ERR_RET;
 3211              	LM393:
 3212 1fb6 E93F0700 		jmp	L182
 3212      00
 3213              	L189:
1893:str_merge.c   ****     }
1894:str_merge.c   ****     fgetws(ref_ssc, g_line_buf_length, ref); /* SSC STRING */
 3215              	LM394:
 3216 1fbb 8B45F4   		movl	-12(%ebp), %eax
 3217 1fbe 89442408 		movl	%eax, 8(%esp)
 3218 1fc2 A1280000 		movl	_g_line_buf_length, %eax
 3218      00
 3219 1fc7 89442404 		movl	%eax, 4(%esp)
 3220 1fcb A1580000 		movl	_ref_ssc, %eax
 3220      00
 3221 1fd0 890424   		movl	%eax, (%esp)
 3222 1fd3 E8000000 		call	_fgetws
 3222      00
1895:str_merge.c   **** 
1896:str_merge.c   ****     filter_ref_ssc = (wchar_t *)malloc(g_line_buf_act_length * sizeof(wchar_t));
 3224              	LM395:
 3225 1fd8 A1380000 		movl	_g_line_buf_act_length, %eax
 3225      00
 3226 1fdd 01C0     		addl	%eax, %eax
 3227 1fdf 890424   		movl	%eax, (%esp)
 3228 1fe2 E8000000 		call	_malloc
 3228      00
 3229 1fe7 A3880000 		movl	%eax, _filter_ref_ssc
 3229      00
1897:str_merge.c   ****     if (filter_ref_ssc == NULL)
 3231              	LM396:
 3232 1fec 833D8800 		cmpl	$0, _filter_ref_ssc
 3232      000000
 3233 1ff3 752C     		jne	L190
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 88


1898:str_merge.c   ****     {
1899:str_merge.c   ****         STRMERG_LOG_E("memory is not available step.2 size=[%d]", g_line_buf_act_length * sizeof(wc
 3235              	LM397:
 3236 1ff5 A1380000 		movl	_g_line_buf_act_length, %eax
 3236      00
 3237 1ffa 01C0     		addl	%eax, %eax
 3238 1ffc 8944240C 		movl	%eax, 12(%esp)
 3239 2000 C7442408 		movl	$LC35, 8(%esp)
 3239      40160000 
 3240 2008 C7442404 		movl	$LC3, 4(%esp)
 3240      4B040000 
 3241 2010 C7042403 		movl	$3, (%esp)
 3241      000000
 3242 2017 E8000000 		call	_reslog_adaptor_log
 3242      00
1900:str_merge.c   ****         goto ERR_RET;
 3244              	LM398:
 3245 201c E9D90600 		jmp	L182
 3245      00
 3246              	L190:
1901:str_merge.c   ****     }
1902:str_merge.c   **** 
1903:str_merge.c   ****     ref_cnt = get_ref_count(ref, g_line_buf_length, ref_tmp);
 3248              	LM399:
 3249 2021 A1680000 		movl	_ref_tmp, %eax
 3249      00
 3250 2026 89442408 		movl	%eax, 8(%esp)
 3251 202a A1280000 		movl	_g_line_buf_length, %eax
 3251      00
 3252 202f 89442404 		movl	%eax, 4(%esp)
 3253 2033 8B45F4   		movl	-12(%ebp), %eax
 3254 2036 890424   		movl	%eax, (%esp)
 3255 2039 E84DF3FF 		call	_get_ref_count
 3255      FF
 3256 203e 8985A4E5 		movl	%eax, -6748(%ebp)
 3256      FFFF
1904:str_merge.c   **** 
1905:str_merge.c   ****     /*get index of language in ref list*/
1906:str_merge.c   ****     get_language_in_ssc_index(ref_ssc, &deployed_lang_index, nLang);
 3258              	LM400:
 3259 2044 A1780000 		movl	_nLang, %eax
 3259      00
 3260 2049 89442408 		movl	%eax, 8(%esp)
 3261 204d 8B8588E5 		movl	-6776(%ebp), %eax
 3261      FFFF
 3262 2053 89442404 		movl	%eax, 4(%esp)
 3263 2057 A1580000 		movl	_ref_ssc, %eax
 3263      00
 3264 205c 890424   		movl	%eax, (%esp)
 3265 205f E8C0E7FF 		call	_get_language_in_ssc_index
 3265      FF
1907:str_merge.c   ****     filter_raw_string(ref_ssc, filter_ref_ssc, deployed_lang_index, nUsedLang);
 3267              	LM401:
 3268 2064 0FB70598 		movzwl	_nUsedLang, %eax
 3268      000000
 3269 206b 8944240C 		movl	%eax, 12(%esp)
 3270 206f 8B8588E5 		movl	-6776(%ebp), %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 89


 3270      FFFF
 3271 2075 89442408 		movl	%eax, 8(%esp)
 3272 2079 A1880000 		movl	_filter_ref_ssc, %eax
 3272      00
 3273 207e 89442404 		movl	%eax, 4(%esp)
 3274 2082 A1580000 		movl	_ref_ssc, %eax
 3274      00
 3275 2087 890424   		movl	%eax, (%esp)
 3276 208a E835EAFF 		call	_filter_raw_string
 3276      FF
1908:str_merge.c   **** 
1909:str_merge.c   ****     /* operator support */
1910:str_merge.c   **** #ifndef __OPTR_NONE__
1911:str_merge.c   ****     /* Makr this line for reduce string memory, use GetLineBufLength */
1912:str_merge.c   ****     /* optr_line_buf_length = (optr_lang + 2) * MAX_LENGTH; */
1913:str_merge.c   ****     optr_ref_ssc = (wchar_t *)malloc(optr_line_buf_length * sizeof(wchar_t));
1914:str_merge.c   ****     if (optr_ref_ssc == NULL)
1915:str_merge.c   ****     {
1916:str_merge.c   ****         STRMERG_LOG_E("memory is not available step.3 size=[%d]", optr_line_buf_length * sizeof(wch
1917:str_merge.c   ****         goto ERR_RET;
1918:str_merge.c   ****     }
1919:str_merge.c   **** 
1920:str_merge.c   ****     optr_filter_ref_ssc =  (wchar_t *)malloc(g_line_buf_act_length * sizeof(wchar_t));
1921:str_merge.c   ****     if (optr_filter_ref_ssc == NULL)
1922:str_merge.c   ****     {
1923:str_merge.c   ****         STRMERG_LOG_E("memory is not available step.3 size=[%d]", g_line_buf_act_length * sizeof(wc
1924:str_merge.c   ****         goto ERR_RET;
1925:str_merge.c   ****     }
1926:str_merge.c   **** 
1927:str_merge.c   ****     fgetws(ref_tmp, optr_line_buf_length, optr_ref);
1928:str_merge.c   ****     fgetws(optr_ref_ssc, optr_line_buf_length, optr_ref);
1929:str_merge.c   **** 
1930:str_merge.c   ****     /*get index of language in operator ref list and filter ssc*/
1931:str_merge.c   ****     get_language_in_ssc_index(optr_ref_ssc, &optr_deployed_lang_index, optr_lang);
1932:str_merge.c   ****     filter_raw_string(optr_ref_ssc, optr_filter_ref_ssc, optr_deployed_lang_index, nUsedLang);
1933:str_merge.c   **** 
1934:str_merge.c   ****     /* allocate mask for languages in operator_ref_list.txt */
1935:str_merge.c   ****     optr_lang_mask = (U16 *)malloc(nUsedLang* sizeof(U16));
1936:str_merge.c   ****     if (optr_lang_mask == NULL)
1937:str_merge.c   ****     {
1938:str_merge.c   ****         STRMERG_LOG_E("memory is not available step.4 size=[%d]", nUsedLang * sizeof(U16));
1939:str_merge.c   ****         goto ERR_RET;
1940:str_merge.c   ****     }
1941:str_merge.c   ****     memset(optr_lang_mask, 0, nUsedLang * sizeof(U16));
1942:str_merge.c   ****     ref_ssc_list = (wchar_t (*)[SSC_LENGTH])malloc(sizeof(wchar_t[SSC_LENGTH]) * nUsedLang);
1943:str_merge.c   ****     if (ref_ssc_list == NULL)
1944:str_merge.c   ****     {
1945:str_merge.c   ****         STRMERG_LOG_E("memory is not available step.5 size=[%d]", sizeof(wchar_t[SSC_LENGTH]) * nUs
1946:str_merge.c   ****         goto ERR_RET;
1947:str_merge.c   ****     }
1948:str_merge.c   **** 
1949:str_merge.c   ****     /* read each SSC into ref_ssc_list */
1950:str_merge.c   ****     token_id = 4; /* skip the first 4 column header information */
1951:str_merge.c   ****     for (i = 0; i < nUsedLang; i++)
1952:str_merge.c   ****     {
1953:str_merge.c   ****         GetItem(filter_ref_ssc, token_id++, buf_ref);
1954:str_merge.c   ****         wcscpy(ref_ssc_list[i], buf_ref);
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 90


1955:str_merge.c   ****     }
1956:str_merge.c   ****     /* 
1957:str_merge.c   ****      * try to match each SSC in operator_ref_list.txt 
1958:str_merge.c   ****      * within ref_ssc_list
1959:str_merge.c   ****      */
1960:str_merge.c   ****     token_id = 4; /* skip the first 4 column header information */
1961:str_merge.c   ****     for (i = 0; i < nUsedLang; i++)
1962:str_merge.c   ****     {
1963:str_merge.c   ****         GetItem(optr_filter_ref_ssc, token_id++, buf_ref);
1964:str_merge.c   ****         for (j = 0; j < nUsedLang; j++)
1965:str_merge.c   ****         {
1966:str_merge.c   ****             if (!wcscmp(buf_ref, ref_ssc_list[j]))
1967:str_merge.c   ****             {
1968:str_merge.c   ****                 /* 
1969:str_merge.c   ****                  * language column j is found in operator_ref_list.txt, 
1970:str_merge.c   ****                  * and matching to language column i
1971:str_merge.c   ****                  */
1972:str_merge.c   ****                 optr_lang_mask[j] = i + 1;
1973:str_merge.c   ****                 break;
1974:str_merge.c   ****             }
1975:str_merge.c   ****         }
1976:str_merge.c   ****     }
1977:str_merge.c   ****     free(ref_ssc_list);
1978:str_merge.c   ****     ref_ssc_list = NULL;
1979:str_merge.c   **** 
1980:str_merge.c   **** 
1981:str_merge.c   ****     optr_ref_cnt = get_ref_count(optr_ref, g_line_buf_length, ref_tmp);
1982:str_merge.c   **** 
1983:str_merge.c   ****     if (optr_ref_cnt != 0)
1984:str_merge.c   ****     {
1985:str_merge.c   **** 
1986:str_merge.c   **** #ifndef MEM_REF_LIST_OPT
1987:str_merge.c   ****         optr_ref_all = (wchar_t *)malloc(g_line_buf_act_length * sizeof(wchar_t) * optr_ref_cnt);
1988:str_merge.c   **** 
1989:str_merge.c   ****         if (optr_ref_all == NULL)
1990:str_merge.c   ****         {
1991:str_merge.c   ****             STRMERG_LOG_E("memory is not available step.6 size=[%d]", g_line_buf_act_length * sizeo
1992:str_merge.c   ****             goto ERR_RET;
1993:str_merge.c   ****         }
1994:str_merge.c   ****         /*load optr ref list to optr_ref_all, this is used to instead the following old part*/
1995:str_merge.c   ****         STRMERG_LOG_V(STRMERG_SUB_TAG_MEM "Load optr ref list to memory");
1996:str_merge.c   ****         load_ref_list_to_mem(optr_ref_all, &optr_end_line, optr_ref, optr_deployed_lang_index, optr
1997:str_merge.c   ****         STRMERG_LOG_V(STRMERG_SUB_TAG_MEM "optr ref list: count= %d , size = %d", optr_ref_cnt, g_l
1998:str_merge.c   **** #else / *MEM_REF_LIST_OPT */
1999:str_merge.c   ****         /* Create a Vector-like structure to load operator ref list */
2000:str_merge.c   ****         optr_ref_all_list = CreateRefList(optr_ref_cnt);
2001:str_merge.c   ****         
2002:str_merge.c   ****         if (optr_ref_all_list == NULL)
2003:str_merge.c   ****         {
2004:str_merge.c   ****             STRMERG_LOG_E("memory is not available step.6 length=[%d]",optr_ref_cnt);
2005:str_merge.c   ****             goto ERR_RET;
2006:str_merge.c   ****         }
2007:str_merge.c   ****         
2008:str_merge.c   ****         /*load optr ref list to ref_all, this is used to instead the following old part*/
2009:str_merge.c   ****         STRMERG_LOG_V(STRMERG_SUB_TAG_MEM "Load optr ref list to memory");
2010:str_merge.c   ****         load_ref_list_to_mem(optr_ref_all_list, optr_ref, optr_deployed_lang_index, optr_ref_cnt, n
2011:str_merge.c   ****         STRMERG_LOG_V(STRMERG_SUB_TAG_MEM "optr_ref_all_list length = %d, size = %d", optr_ref_all_
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 91


2012:str_merge.c   **** #endif /*MEM_REF_LIST_OPT*/
2013:str_merge.c   ****     }
2014:str_merge.c   **** #endif /* __OPTR_NONE__ */
2015:str_merge.c   **** 
2016:str_merge.c   ****     /* operator support */
2017:str_merge.c   **** #ifndef __OPTR_NONE__
2018:str_merge.c   ****     count = ref_cnt + optr_ref_cnt;
2019:str_merge.c   **** #else /*__OPTR_NONE__*/
2020:str_merge.c   ****     count = ref_cnt; 
 3278              	LM402:
 3279 208f 8B85A4E5 		movl	-6748(%ebp), %eax
 3279      FFFF
 3280 2095 898594E5 		movl	%eax, -6764(%ebp)
 3280      FFFF
2021:str_merge.c   **** #endif /*__OPTR_NONE__*/
2022:str_merge.c   **** 
2023:str_merge.c   **** #ifndef MEM_REF_LIST_OPT
2024:str_merge.c   ****     ref_all = (wchar_t *)malloc(g_line_buf_act_length * sizeof(wchar_t) * (count));
2025:str_merge.c   ****     STRMERG_LOG_V(STRMERG_SUB_TAG_MEM "memory usage in step.7 size=[%d], buf_length: %d, count: %d"
2026:str_merge.c   ****     fflush(stdout);
2027:str_merge.c   **** 	
2028:str_merge.c   ****     //Retry if the memory is not available
2029:str_merge.c   ****     while(ref_all == NULL && mem_retry_count < MEM_RETRY_COUNT_MAX)
2030:str_merge.c   ****     {
2031:str_merge.c   ****         /* Retry count of memory allocation */
2032:str_merge.c   ****         STRMERG_LOG_V(STRMERG_SUB_TAG_MEM "memory is unavailable step.7, retry after %d sec", MEM_R
2033:str_merge.c   ****         sleep(MEM_RETRY_TIME_INTERVAL_SEC);
2034:str_merge.c   ****         STRMERG_LOG_V(STRMERG_SUB_TAG_MEM "retry: %d", mem_retry_count);
2035:str_merge.c   ****         ref_all = (wchar_t *)malloc(g_line_buf_act_length * sizeof(wchar_t) * (count));
2036:str_merge.c   ****         mem_retry_count++;
2037:str_merge.c   ****     }
2038:str_merge.c   **** 	  
2039:str_merge.c   ****     if (ref_all == NULL)
2040:str_merge.c   ****     {
2041:str_merge.c   ****         STRMERG_LOG_E("memory is not available step.7 size=[%d]", g_line_buf_act_length * sizeof(wc
2042:str_merge.c   ****         goto ERR_RET;
2043:str_merge.c   ****     }    
2044:str_merge.c   ****     /*load ref list to ref_all, this is used to instead the following old part*/
2045:str_merge.c   ****     load_ref_list_to_mem(ref_all, &end_line, ref, deployed_lang_index, ref_cnt, nUsedLang);
2046:str_merge.c   **** #else /*MEM_REF_LIST_OPT*/
2047:str_merge.c   ****     /* Create a ref list vector to store ref list lines in ref_list.txt */
2048:str_merge.c   **** 	STRMERG_LOG_V(STRMERG_SUB_TAG_MEM "CreateRefList : create data structure to store ref list lines")
 3282              	LM403:
 3283 209b C7442408 		movl	$LC36, 8(%esp)
 3283      80160000 
 3284 20a3 C7442404 		movl	$LC3, 4(%esp)
 3284      4B040000 
 3285 20ab C7042401 		movl	$1, (%esp)
 3285      000000
 3286 20b2 E8000000 		call	_reslog_adaptor_log
 3286      00
2049:str_merge.c   ****     fflush(stdout);
 3288              	LM404:
 3289 20b7 A1000000 		movl	__imp___iob, %eax
 3289      00
 3290 20bc 83C020   		addl	$32, %eax
 3291 20bf 890424   		movl	%eax, (%esp)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 92


 3292 20c2 E8000000 		call	_fflush
 3292      00
2050:str_merge.c   ****     ref_all_list = CreateRefList(count);
 3294              	LM405:
 3295 20c7 8B8594E5 		movl	-6764(%ebp), %eax
 3295      FFFF
 3296 20cd 890424   		movl	%eax, (%esp)
 3297 20d0 E8775700 		call	_CreateRefList
 3297      00
 3298 20d5 A3480000 		movl	%eax, _ref_all_list
 3298      00
2051:str_merge.c   ****     if (ref_all_list == NULL)
 3300              	LM406:
 3301 20da 833D4800 		cmpl	$0, _ref_all_list
 3301      000000
 3302 20e1 752B     		jne	L191
2052:str_merge.c   ****     {
2053:str_merge.c   ****         STRMERG_LOG_E("memory is not available step.7 length=[%d]", count);
 3304              	LM407:
 3305 20e3 8B8594E5 		movl	-6764(%ebp), %eax
 3305      FFFF
 3306 20e9 8944240C 		movl	%eax, 12(%esp)
 3307 20ed C7442408 		movl	$LC37, 8(%esp)
 3307      E0160000 
 3308 20f5 C7442404 		movl	$LC3, 4(%esp)
 3308      4B040000 
 3309 20fd C7042403 		movl	$3, (%esp)
 3309      000000
 3310 2104 E8000000 		call	_reslog_adaptor_log
 3310      00
2054:str_merge.c   ****         goto ERR_RET;
 3312              	LM408:
 3313 2109 E9EC0500 		jmp	L182
 3313      00
 3314              	L191:
2055:str_merge.c   ****     }
2056:str_merge.c   **** 	
2057:str_merge.c   ****     /* load ref list items to ref_all vector*/
2058:str_merge.c   **** 	STRMERG_LOG_V(STRMERG_SUB_TAG_MEM "load_ref_list_to_mem: load ref list items to ref_all vector");	
 3316              	LM409:
 3317 210e C7442408 		movl	$LC38, 8(%esp)
 3317      20170000 
 3318 2116 C7442404 		movl	$LC3, 4(%esp)
 3318      4B040000 
 3319 211e C7042401 		movl	$1, (%esp)
 3319      000000
 3320 2125 E8000000 		call	_reslog_adaptor_log
 3320      00
2059:str_merge.c   ****     fflush(stdout);
 3322              	LM410:
 3323 212a A1000000 		movl	__imp___iob, %eax
 3323      00
 3324 212f 83C020   		addl	$32, %eax
 3325 2132 890424   		movl	%eax, (%esp)
 3326 2135 E8000000 		call	_fflush
 3326      00
2060:str_merge.c   ****     load_ref_list_to_mem(ref_all_list, ref, deployed_lang_index, ref_cnt, nUsedLang);
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 93


 3328              	LM411:
 3329 213a 0FB70598 		movzwl	_nUsedLang, %eax
 3329      000000
 3330 2141 89442410 		movl	%eax, 16(%esp)
 3331 2145 8B85A4E5 		movl	-6748(%ebp), %eax
 3331      FFFF
 3332 214b 8944240C 		movl	%eax, 12(%esp)
 3333 214f 8B8588E5 		movl	-6776(%ebp), %eax
 3333      FFFF
 3334 2155 89442408 		movl	%eax, 8(%esp)
 3335 2159 8B45F4   		movl	-12(%ebp), %eax
 3336 215c 89442404 		movl	%eax, 4(%esp)
 3337 2160 A1480000 		movl	_ref_all_list, %eax
 3337      00
 3338 2165 890424   		movl	%eax, (%esp)
 3339 2168 E861EFFF 		call	_load_ref_list_to_mem
 3339      FF
2061:str_merge.c   **** 
2062:str_merge.c   **** 	/* Update ref_cnt based to the loaded items */
2063:str_merge.c   ****     ref_cnt = ref_all_list->ListLength;
 3341              	LM412:
 3342 216d A1480000 		movl	_ref_all_list, %eax
 3342      00
 3343 2172 8B4004   		movl	4(%eax), %eax
 3344 2175 8985A4E5 		movl	%eax, -6748(%ebp)
 3344      FFFF
2064:str_merge.c   **** #endif /*MEM_REF_LIST_OPT*/
2065:str_merge.c   **** 
2066:str_merge.c   **** #ifdef DEBUG_REF_LIST_DUMP
2067:str_merge.c   **** /* Dump the ref list loaded in memory to log file REFLISST_DUMP_FILE_BEFOR_MERGE */
2068:str_merge.c   **** #ifndef MEM_REF_LIST_OPT
2069:str_merge.c   ****     DumpRefList(REFLISST_DUMP_FILE_BEFOR_MERGE, ref_all, g_line_buf_act_length, count);
2070:str_merge.c   **** #else /* MEM_REF_LIST_OPT */
2071:str_merge.c   ****     DumpRefList(REFLISST_DUMP_FILE_BEFOR_MERGE, ref_all_list);
2072:str_merge.c   **** #endif /* MEM_REF_LIST_OPT */
2073:str_merge.c   **** #endif /* DEBUG_REF_LIST_DUMP */
2074:str_merge.c   **** 
2075:str_merge.c   **** 
2076:str_merge.c   **** #ifndef __MMI_RESOURCE_ENFB_SUPPORT__
2077:str_merge.c   ****     total_id = CurrMaxTransStrId;
 3346              	LM413:
 3347 217b 0FB70500 		movzwl	_CurrMaxTransStrId, %eax
 3347      000000
 3348 2182 668985B0 		movw	%ax, -6736(%ebp)
 3348      E5FFFF
2078:str_merge.c   **** #endif /* __MMI_RESOURCE_ENFB_SUPPORT__ */
2079:str_merge.c   **** 
2080:str_merge.c   ****     /* String ID array without empty slot */
2081:str_merge.c   ****     StrID = (U16 *)malloc(sizeof(U16) * total_id);
 3350              	LM414:
 3351 2189 0FB785B0 		movzwl	-6736(%ebp), %eax
 3351      E5FFFF
 3352 2190 01C0     		addl	%eax, %eax
 3353 2192 890424   		movl	%eax, (%esp)
 3354 2195 E8000000 		call	_malloc
 3354      00
 3355 219a A3180000 		movl	%eax, _StrID
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 94


 3355      00
2082:str_merge.c   ****     if (StrID == NULL)
 3357              	LM415:
 3358 219f 833D1800 		cmpl	$0, _StrID
 3358      000000
 3359 21a6 752E     		jne	L192
2083:str_merge.c   ****     {
2084:str_merge.c   ****         STRMERG_LOG_E("memory is not available step.8 size=[%d]", sizeof(U16) * total_id);
 3361              	LM416:
 3362 21a8 0FB785B0 		movzwl	-6736(%ebp), %eax
 3362      E5FFFF
 3363 21af 01C0     		addl	%eax, %eax
 3364 21b1 8944240C 		movl	%eax, 12(%esp)
 3365 21b5 C7442408 		movl	$LC39, 8(%esp)
 3365      80170000 
 3366 21bd C7442404 		movl	$LC3, 4(%esp)
 3366      4B040000 
 3367 21c5 C7042403 		movl	$3, (%esp)
 3367      000000
 3368 21cc E8000000 		call	_reslog_adaptor_log
 3368      00
2085:str_merge.c   ****         goto ERR_RET;
 3370              	LM417:
 3371 21d1 E9240500 		jmp	L182
 3371      00
 3372              	L192:
2086:str_merge.c   ****     }
2087:str_merge.c   **** 
2088:str_merge.c   ****     nStrId = 0;
 3374              	LM418:
 3375 21d6 66C785B2 		movw	$0, -6734(%ebp)
 3375      E5FFFF00 
 3375      00
2089:str_merge.c   ****     while (nStrId < MAX_STRING_MAP_SIZE)
 3377              	LM419:
 3378              	L193:
 3379 21df 6683BDB2 		cmpw	$-1, -6734(%ebp)
 3379      E5FFFFFF 
 3380 21e7 7505     		jne	L195
 3381 21e9 E99B0400 		jmp	L194
 3381      00
 3382              	L195:
2090:str_merge.c   ****     {
2091:str_merge.c   **** #ifdef STR_MERGE_DEBUG
2092:str_merge.c   ****         STRMERG_LOG_D("Check String ID %d", nStrId);
 3384              	LM420:
 3385 21ee 0FB785B2 		movzwl	-6734(%ebp), %eax
 3385      E5FFFF
 3386 21f5 8944240C 		movl	%eax, 12(%esp)
 3387 21f9 C7442408 		movl	$LC40, 8(%esp)
 3387      A9170000 
 3388 2201 C7442404 		movl	$LC3, 4(%esp)
 3388      4B040000 
 3389 2209 C7042400 		movl	$0, (%esp)
 3389      000000
 3390 2210 E8000000 		call	_reslog_adaptor_log
 3390      00
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 95


2093:str_merge.c   **** #endif /* STR_MERGE_DEBUG */
2094:str_merge.c   ****         if (StrIsPopulate[nStrId] == 0)
 3392              	LM421:
 3393 2215 0FB785B2 		movzwl	-6734(%ebp), %eax
 3393      E5FFFF
 3394 221c 80B80000 		cmpb	$0, _StrIsPopulate(%eax)
 3394      000000
 3395 2223 7511     		jne	L196
2095:str_merge.c   ****         {
2096:str_merge.c   ****             nStrId++;
 3397              	LM422:
 3398 2225 0FB785B2 		movzwl	-6734(%ebp), %eax
 3398      E5FFFF
 3399 222c 40       		incl	%eax
 3400 222d 668985B2 		movw	%ax, -6734(%ebp)
 3400      E5FFFF
2097:str_merge.c   ****             continue;
 3402              	LM423:
 3403 2234 EBA9     		jmp	L193
 3404              	L196:
2098:str_merge.c   ****         }
2099:str_merge.c   **** 
2100:str_merge.c   **** #ifndef __MMI_RESOURCE_ENFB_SUPPORT__
2101:str_merge.c   ****         /* skip no translated string id */
2102:str_merge.c   ****         if(fixed_id.fixed_id_flag[nStrId] == NO_TRANSLATE_FLAG)
 3406              	LM424:
 3407 2236 0FB795B2 		movzwl	-6734(%ebp), %edx
 3407      E5FFFF
 3408 223d A1040000 		movl	_fixed_id+4, %eax
 3408      00
 3409 2242 803C0201 		cmpb	$1, (%edx,%eax)
 3410 2246 7511     		jne	L197
2103:str_merge.c   ****         {
2104:str_merge.c   ****             nStrId++;
 3412              	LM425:
 3413 2248 0FB785B2 		movzwl	-6734(%ebp), %eax
 3413      E5FFFF
 3414 224f 40       		incl	%eax
 3415 2250 668985B2 		movw	%ax, -6734(%ebp)
 3415      E5FFFF
2105:str_merge.c   ****             continue;
 3417              	LM426:
 3418 2257 EB86     		jmp	L193
 3419              	L197:
2106:str_merge.c   ****         }
2107:str_merge.c   **** #endif /* __MMI_RESOURCE_ENFB_SUPPORT__ */
2108:str_merge.c   **** 
2109:str_merge.c   ****         *(StrID + gIndex) = nStrId;
 3421              	LM427:
 3422 2259 8B85D0E7 		movl	-6192(%ebp), %eax
 3422      FFFF
 3423 225f 8D0C00   		leal	(%eax,%eax), %ecx
 3424 2262 8B151800 		movl	_StrID, %edx
 3424      0000
 3425 2268 0FB785B2 		movzwl	-6734(%ebp), %eax
 3425      E5FFFF
 3426 226f 6689040A 		movw	%ax, (%edx,%ecx)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 96


2110:str_merge.c   **** 
2111:str_merge.c   ****         /* operator support */
2112:str_merge.c   **** #ifndef __OPTR_NONE__
2113:str_merge.c   ****         optr_found = 0;
2114:str_merge.c   ****         if (optr_ref_cnt != 0) /* operator ref liststring id */
2115:str_merge.c   ****         {
2116:str_merge.c   **** #ifdef STR_MERGE_DEBUG
2117:str_merge.c   ****             STRMERG_LOG_D("OP ref list item idx = %d",optr_search_index );
2118:str_merge.c   **** #endif /* STR_MERGE_DEBUG */
2119:str_merge.c   **** 
2120:str_merge.c   **** #ifndef MEM_REF_LIST_OPT
2121:str_merge.c   ****             optr_tmp_line = optr_ref_all + optr_search_index * g_line_buf_act_length;
2122:str_merge.c   **** #else
2123:str_merge.c   ****             /* Read a list item from optr_ref_all_list*/
2124:str_merge.c   ****             tmp_list_item = GetRefListItem(optr_ref_all_list,optr_search_index);
2125:str_merge.c   ****             /* NULL pointer check*/
2126:str_merge.c   ****             if(tmp_list_item != NULL)
2127:str_merge.c   ****             {
2128:str_merge.c   ****                 wcscpy(optr_tmp_line,tmp_list_item->ItemData);
2129:str_merge.c   ****             }
2130:str_merge.c   ****             else
2131:str_merge.c   ****             {
2132:str_merge.c   ****                 STRMERG_LOG_E("tmp_list_item in op list is NULL, idx = %d", optr_search_index);
2133:str_merge.c   ****             }
2134:str_merge.c   ****             /* Record the current scaning line in the op ref list */
2135:str_merge.c   ****             optr_tmp_line_indx = optr_search_index;
2136:str_merge.c   **** #endif  /*MEM_REF_LIST_OPT*/
2137:str_merge.c   ****             while (optr_search_cnt < optr_ref_cnt)
2138:str_merge.c   ****             {
2139:str_merge.c   ****                 token_id = 0;
2140:str_merge.c   ****                 GetItem(optr_tmp_line, token_id++, buf_ref);
2141:str_merge.c   ****                 /* Check if it is a new string*/
2142:str_merge.c   ****                 if (!wcscmp((wchar_t *)StrEnum[nStrId], buf_ref))
2143:str_merge.c   ****                 {
2144:str_merge.c   ****                     optr_found = 1;
2145:str_merge.c   ****                     break;
2146:str_merge.c   ****                 }
2147:str_merge.c   ****                 optr_search_cnt++;
2148:str_merge.c   ****                 optr_search_index++;
2149:str_merge.c   ****                 if (optr_search_index >= optr_ref_cnt)
2150:str_merge.c   ****                     optr_search_index = 0;
2151:str_merge.c   **** 
2152:str_merge.c   **** #ifndef MEM_REF_LIST_OPT
2153:str_merge.c   ****                 optr_tmp_line += g_line_buf_act_length;
2154:str_merge.c   ****                 if (optr_tmp_line > optr_end_line)
2155:str_merge.c   ****                     optr_tmp_line = optr_ref_all;
2156:str_merge.c   **** #else
2157:str_merge.c   ****                 tmp_list_item = GetRefListItem(optr_ref_all_list,optr_search_index);
2158:str_merge.c   ****                 /* Read the next string line in optr ref list */
2159:str_merge.c   ****                 if(tmp_list_item!=NULL)
2160:str_merge.c   ****                 {
2161:str_merge.c   ****                     wcscpy(optr_tmp_line, tmp_list_item->ItemData);
2162:str_merge.c   ****                 }
2163:str_merge.c   ****                 else
2164:str_merge.c   ****                 {
2165:str_merge.c   ****                     wcscpy(optr_tmp_line,L"");
2166:str_merge.c   ****                 }
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 97


2167:str_merge.c   ****                 /* Record the current scanning line in optr ref list */
2168:str_merge.c   ****                 optr_tmp_line_indx = optr_search_index;
2169:str_merge.c   **** #endif  /*MEM_REF_LIST_OPT*/
2170:str_merge.c   ****             }
2171:str_merge.c   **** 
2172:str_merge.c   **** #ifdef STR_MERGE_DEBUG
2173:str_merge.c   ****             STRMERG_LOG_D("Finished check opfound= %d", optr_found);
2174:str_merge.c   **** #endif /* STR_MERGE_DEBUG */
2175:str_merge.c   ****         }
2176:str_merge.c   **** 
2177:str_merge.c   **** #endif /* __OPTR_NONE__ */
2178:str_merge.c   **** #ifdef STR_MERGE_DEBUG
2179:str_merge.c   ****         STRMERG_LOG_D("Process ref_all_list!! search_index = %d",search_index);
 3428              	LM428:
 3429 2273 8B859CE5 		movl	-6756(%ebp), %eax
 3429      FFFF
 3430 2279 8944240C 		movl	%eax, 12(%esp)
 3431 227d C7442408 		movl	$LC41, 8(%esp)
 3431      C0170000 
 3432 2285 C7442404 		movl	$LC3, 4(%esp)
 3432      4B040000 
 3433 228d C7042400 		movl	$0, (%esp)
 3433      000000
 3434 2294 E8000000 		call	_reslog_adaptor_log
 3434      00
2180:str_merge.c   **** #endif /* STR_MERGE_DEBUG */
2181:str_merge.c   ****         found = 0;
 3436              	LM429:
 3437 2299 C785C4E5 		movl	$0, -6716(%ebp)
 3437      FFFF0000 
 3437      0000
2182:str_merge.c   **** #ifndef MEM_REF_LIST_OPT
2183:str_merge.c   ****         tmp_line = ref_all + search_index * g_line_buf_act_length;
2184:str_merge.c   **** #else
2185:str_merge.c   ****         tmp_list_item = GetRefListItem(ref_all_list, search_index);
 3439              	LM430:
 3440 22a3 8B859CE5 		movl	-6756(%ebp), %eax
 3440      FFFF
 3441 22a9 89442404 		movl	%eax, 4(%esp)
 3442 22ad A1480000 		movl	_ref_all_list, %eax
 3442      00
 3443 22b2 890424   		movl	%eax, (%esp)
 3444 22b5 E8CA5B00 		call	_GetRefListItem
 3444      00
 3445 22ba 8945E0   		movl	%eax, -32(%ebp)
2186:str_merge.c   ****         if(tmp_list_item!=NULL)
 3447              	LM431:
 3448 22bd 837DE000 		cmpl	$0, -32(%ebp)
 3449 22c1 7416     		je	L198
2187:str_merge.c   ****         {
2188:str_merge.c   ****             /* Copy string line to temp line buffer */
2189:str_merge.c   ****             wcscpy(tmp_line,tmp_list_item->ItemData);
 3451              	LM432:
 3452 22c3 8B45E0   		movl	-32(%ebp), %eax
 3453 22c6 8B00     		movl	(%eax), %eax
 3454 22c8 89442404 		movl	%eax, 4(%esp)
 3455 22cc 8B45EC   		movl	-20(%ebp), %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 98


 3456 22cf 890424   		movl	%eax, (%esp)
 3457 22d2 E8000000 		call	_wcscpy
 3457      00
 3458 22d7 EB13     		jmp	L199
 3459              	L198:
2190:str_merge.c   ****         }
2191:str_merge.c   ****         else{
2192:str_merge.c   ****                 wcscpy(tmp_line,L"");
 3461              	LM433:
 3462 22d9 C7442404 		movl	$LC12, 4(%esp)
 3462      460E0000 
 3463 22e1 8B45EC   		movl	-20(%ebp), %eax
 3464 22e4 890424   		movl	%eax, (%esp)
 3465 22e7 E8000000 		call	_wcscpy
 3465      00
 3466              	L199:
2193:str_merge.c   ****         }
2194:str_merge.c   ****         /* Record scanning line index of ref list */
2195:str_merge.c   ****         tmp_line_indx = search_index;
 3468              	LM434:
 3469 22ec 8B859CE5 		movl	-6756(%ebp), %eax
 3469      FFFF
 3470 22f2 8945E4   		movl	%eax, -28(%ebp)
2196:str_merge.c   **** #endif /* MEM_REF_LIST_OPT */
2197:str_merge.c   **** 
2198:str_merge.c   **** 
2199:str_merge.c   ****         while ((search_cnt < ref_cnt) && !found)
 3472              	LM435:
 3473              	L200:
 3474 22f5 8B85A0E5 		movl	-6752(%ebp), %eax
 3474      FFFF
 3475 22fb 3B85A4E5 		cmpl	-6748(%ebp), %eax
 3475      FFFF
 3476 2301 0F8D0C03 		jge	L201
 3476      0000
 3477 2307 83BDC4E5 		cmpl	$0, -6716(%ebp)
 3477      FFFF00
 3478 230e 0F85FF02 		jne	L201
 3478      0000
2200:str_merge.c   ****         {
2201:str_merge.c   ****             token_id = 0;
 3480              	LM436:
 3481 2314 C785D4E7 		movl	$0, -6188(%ebp)
 3481      FFFF0000 
 3481      0000
2202:str_merge.c   ****             GetItem(tmp_line, token_id++, buf_ref);
 3483              	LM437:
 3484 231e 8D85D8EF 		leal	-4136(%ebp), %eax
 3484      FFFF
 3485 2324 89442408 		movl	%eax, 8(%esp)
 3486 2328 8B85D4E7 		movl	-6188(%ebp), %eax
 3486      FFFF
 3487 232e 89442404 		movl	%eax, 4(%esp)
 3488 2332 8D85D4E7 		leal	-6188(%ebp), %eax
 3488      FFFF
 3489 2338 FF00     		incl	(%eax)
 3490 233a 8B45EC   		movl	-20(%ebp), %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 99


 3491 233d 890424   		movl	%eax, (%esp)
 3492 2340 E810E1FF 		call	_GetItem
 3492      FF
2203:str_merge.c   ****             if (!wcscmp((wchar_t *)StrEnum[nStrId], buf_ref))
 3494              	LM438:
 3495 2345 8D85D8EF 		leal	-4136(%ebp), %eax
 3495      FFFF
 3496 234b 89442404 		movl	%eax, 4(%esp)
 3497 234f 0FB785B2 		movzwl	-6734(%ebp), %eax
 3497      E5FFFF
 3498 2356 8B048500 		movl	_StrEnum(,%eax,4), %eax
 3498      000000
 3499 235d 890424   		movl	%eax, (%esp)
 3500 2360 E8000000 		call	_wcscmp
 3500      00
 3501 2365 85C0     		testl	%eax, %eax
 3502 2367 0F85F801 		jne	L204
 3502      0000
2204:str_merge.c   ****             {
2205:str_merge.c   ****                 found = 1;
 3504              	LM439:
 3505 236d C785C4E5 		movl	$1, -6716(%ebp)
 3505      FFFF0100 
 3505      0000
2206:str_merge.c   ****                 StrLine[nStrId] = search_index + 1;
 3507              	LM440:
 3508 2377 0FB795B2 		movzwl	-6734(%ebp), %edx
 3508      E5FFFF
 3509 237e 8B859CE5 		movl	-6756(%ebp), %eax
 3509      FFFF
 3510 2384 40       		incl	%eax
 3511 2385 66898412 		movw	%ax, _StrLine(%edx,%edx)
 3511      D8000000 
2207:str_merge.c   **** 
2208:str_merge.c   ****                 wcscpy(tmp_buf, (wchar_t *)StrEnum[nStrId]); /* print out Enum Values */
 3513              	LM441:
 3514 238d 0FB785B2 		movzwl	-6734(%ebp), %eax
 3514      E5FFFF
 3515 2394 8B048500 		movl	_StrEnum(,%eax,4), %eax
 3515      000000
 3516 239b 89442404 		movl	%eax, 4(%esp)
 3517 239f 8D85D8E7 		leal	-6184(%ebp), %eax
 3517      FFFF
 3518 23a5 890424   		movl	%eax, (%esp)
 3519 23a8 E8000000 		call	_wcscpy
 3519      00
2209:str_merge.c   **** 
2210:str_merge.c   ****                 /* output content of fix columns */
2211:str_merge.c   ****                 OutputFixColumns(tmp_line, &token_id, buf_src, tmp_buf, ref_tmp);
 3521              	LM442:
 3522 23ad A1680000 		movl	_ref_tmp, %eax
 3522      00
 3523 23b2 89442410 		movl	%eax, 16(%esp)
 3524 23b6 8D85D8E7 		leal	-6184(%ebp), %eax
 3524      FFFF
 3525 23bc 8944240C 		movl	%eax, 12(%esp)
 3526 23c0 8D85D8F7 		leal	-2088(%ebp), %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 100


 3526      FFFF
 3527 23c6 89442408 		movl	%eax, 8(%esp)
 3528 23ca 8D85D4E7 		leal	-6188(%ebp), %eax
 3528      FFFF
 3529 23d0 89442404 		movl	%eax, 4(%esp)
 3530 23d4 8B45EC   		movl	-20(%ebp), %eax
 3531 23d7 890424   		movl	%eax, (%esp)
 3532 23da E8D9E1FF 		call	_OutputFixColumns
 3532      FF
2212:str_merge.c   **** 
2213:str_merge.c   ****                 missLanguage = 0;
 3534              	LM443:
 3535 23df C785B8E5 		movl	$0, -6728(%ebp)
 3535      FFFF0000 
 3535      0000
2214:str_merge.c   ****                 for (i = 0; i < nUsedLang; i++)
 3537              	LM444:
 3538 23e9 C785C0E5 		movl	$0, -6720(%ebp)
 3538      FFFF0000 
 3538      0000
 3539              	L205:
 3540 23f3 0FB70598 		movzwl	_nUsedLang, %eax
 3540      000000
 3541 23fa 3985C0E5 		cmpl	%eax, -6720(%ebp)
 3541      FFFF
 3542 2400 7C05     		jl	L208
 3543 2402 E9CC0000 		jmp	L206
 3543      00
 3544              	L208:
2215:str_merge.c   ****                 {
2216:str_merge.c   ****                     GetItem(tmp_line, i + token_id, buf_ref);
 3546              	LM445:
 3547 2407 8D85D8EF 		leal	-4136(%ebp), %eax
 3547      FFFF
 3548 240d 89442408 		movl	%eax, 8(%esp)
 3549 2411 8B85D4E7 		movl	-6188(%ebp), %eax
 3549      FFFF
 3550 2417 0385C0E5 		addl	-6720(%ebp), %eax
 3550      FFFF
 3551 241d 89442404 		movl	%eax, 4(%esp)
 3552 2421 8B45EC   		movl	-20(%ebp), %eax
 3553 2424 890424   		movl	%eax, (%esp)
 3554 2427 E829E0FF 		call	_GetItem
 3554      FF
2217:str_merge.c   **** 
2218:str_merge.c   ****                     /* operator support */
2219:str_merge.c   **** #ifndef __OPTR_NONE__
2220:str_merge.c   ****                     if (optr_found == 1 && optr_lang_mask[i])
2221:str_merge.c   ****                     {
2222:str_merge.c   ****                         GetItem(optr_tmp_line, 3 + optr_lang_mask[i], buf_ref);
2223:str_merge.c   ****                     }
2224:str_merge.c   **** #endif /* __OPTR_NONE__ */
2225:str_merge.c   **** 
2226:str_merge.c   ****                     if (buf_ref[0] == '\0')
 3556              	LM446:
 3557 242c 6683BDD8 		cmpw	$0, -4136(%ebp)
 3557      EFFFFF00 
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 101


 3558 2434 754E     		jne	L209
2227:str_merge.c   ****                     {
2228:str_merge.c   ****                         /* if there is no corresponding string translation, use English */
2229:str_merge.c   ****                         missLanguage = 1;
 3560              	LM447:
 3561 2436 C785B8E5 		movl	$1, -6728(%ebp)
 3561      FFFF0100 
 3561      0000
2230:str_merge.c   ****                         wcscat(tmp_buf, L"\tV");
 3563              	LM448:
 3564 2440 C7442404 		movl	$LC42, 4(%esp)
 3564      EA170000 
 3565 2448 8D85D8E7 		leal	-6184(%ebp), %eax
 3565      FFFF
 3566 244e 890424   		movl	%eax, (%esp)
 3567 2451 E8000000 		call	_wcscat
 3567      00
2231:str_merge.c   **** 
2232:str_merge.c   ****                         wcscat(ref_tmp, L"\t");
 3569              	LM449:
 3570 2456 C7442404 		movl	$LC0, 4(%esp)
 3570      48000000 
 3571 245e A1680000 		movl	_ref_tmp, %eax
 3571      00
 3572 2463 890424   		movl	%eax, (%esp)
 3573 2466 E8000000 		call	_wcscat
 3573      00
2233:str_merge.c   ****                         wcscat(ref_tmp, marker);
 3575              	LM450:
 3576 246b 8D85ACE5 		leal	-6740(%ebp), %eax
 3576      FFFF
 3577 2471 89442404 		movl	%eax, 4(%esp)
 3578 2475 A1680000 		movl	_ref_tmp, %eax
 3578      00
 3579 247a 890424   		movl	%eax, (%esp)
 3580 247d E8000000 		call	_wcscat
 3580      00
 3581 2482 EB42     		jmp	L207
 3582              	L209:
2234:str_merge.c   ****                     }
2235:str_merge.c   ****                     else
2236:str_merge.c   ****                     {
2237:str_merge.c   ****                         wcscat(tmp_buf, L"\t");
 3584              	LM451:
 3585 2484 C7442404 		movl	$LC0, 4(%esp)
 3585      48000000 
 3586 248c 8D85D8E7 		leal	-6184(%ebp), %eax
 3586      FFFF
 3587 2492 890424   		movl	%eax, (%esp)
 3588 2495 E8000000 		call	_wcscat
 3588      00
2238:str_merge.c   **** 
2239:str_merge.c   ****                         /* for possible missing language translation */
2240:str_merge.c   ****                         wcscat(ref_tmp, L"\t");
 3590              	LM452:
 3591 249a C7442404 		movl	$LC0, 4(%esp)
 3591      48000000 
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 102


 3592 24a2 A1680000 		movl	_ref_tmp, %eax
 3592      00
 3593 24a7 890424   		movl	%eax, (%esp)
 3594 24aa E8000000 		call	_wcscat
 3594      00
2241:str_merge.c   ****                         wcscat(ref_tmp, buf_ref);
 3596              	LM453:
 3597 24af 8D85D8EF 		leal	-4136(%ebp), %eax
 3597      FFFF
 3598 24b5 89442404 		movl	%eax, 4(%esp)
 3599 24b9 A1680000 		movl	_ref_tmp, %eax
 3599      00
 3600 24be 890424   		movl	%eax, (%esp)
 3601 24c1 E8000000 		call	_wcscat
 3601      00
 3603              	LM454:
 3604              	L207:
 3605 24c6 8D85C0E5 		leal	-6720(%ebp), %eax
 3605      FFFF
 3606 24cc FF00     		incl	(%eax)
 3607 24ce E920FFFF 		jmp	L205
 3607      FF
 3608              	L206:
2242:str_merge.c   ****                     }
2243:str_merge.c   ****                 }
2244:str_merge.c   ****                 if (missLanguage == 1)
 3610              	LM455:
 3611 24d3 83BDB8E5 		cmpl	$1, -6728(%ebp)
 3611      FFFF01
 3612 24da 0F858500 		jne	L204
 3612      0000
2245:str_merge.c   ****                 {
2246:str_merge.c   ****                     wcscat(tmp_buf, L"\n");
 3614              	LM456:
 3615 24e0 C7442404 		movl	$LC1, 4(%esp)
 3615      4C000000 
 3616 24e8 8D85D8E7 		leal	-6184(%ebp), %eax
 3616      FFFF
 3617 24ee 890424   		movl	%eax, (%esp)
 3618 24f1 E8000000 		call	_wcscat
 3618      00
2247:str_merge.c   ****                     UCS2ASCII((char*)tmp_buf, buf_asc);
 3620              	LM457:
 3621 24f6 8D85C8E5 		leal	-6712(%ebp), %eax
 3621      FFFF
 3622 24fc 89442404 		movl	%eax, 4(%esp)
 3623 2500 8D85D8E7 		leal	-6184(%ebp), %eax
 3623      FFFF
 3624 2506 890424   		movl	%eax, (%esp)
 3625 2509 E8D5DEFF 		call	_UCS2ASCII
 3625      FF
2248:str_merge.c   ****                     fprintf(fail, "%s", buf_asc);
 3627              	LM458:
 3628 250e 8D85C8E5 		leal	-6712(%ebp), %eax
 3628      FFFF
 3629 2514 89442408 		movl	%eax, 8(%esp)
 3630 2518 C7442404 		movl	$LC32, 4(%esp)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 103


 3630      29160000 
 3631 2520 8B45F0   		movl	-16(%ebp), %eax
 3632 2523 890424   		movl	%eax, (%esp)
 3633 2526 E8000000 		call	_fprintf
 3633      00
2249:str_merge.c   **** #ifdef STR_MERGE_DEBUG
2250:str_merge.c   ****                     STRMERG_LOG_V("missLanguage found!! search_index = %d",search_index);     
 3635              	LM459:
 3636 252b 8B859CE5 		movl	-6756(%ebp), %eax
 3636      FFFF
 3637 2531 8944240C 		movl	%eax, 12(%esp)
 3638 2535 C7442408 		movl	$LC43, 8(%esp)
 3638      00180000 
 3639 253d C7442404 		movl	$LC3, 4(%esp)
 3639      4B040000 
 3640 2545 C7042401 		movl	$1, (%esp)
 3640      000000
 3641 254c E8000000 		call	_reslog_adaptor_log
 3641      00
2251:str_merge.c   **** #endif /* STR_MERGE_DEBUG */
2252:str_merge.c   **** 
2253:str_merge.c   ****                     /* replace string content */
2254:str_merge.c   ****                     wcscpy(tmp_line, ref_tmp);
 3643              	LM460:
 3644 2551 A1680000 		movl	_ref_tmp, %eax
 3644      00
 3645 2556 89442404 		movl	%eax, 4(%esp)
 3646 255a 8B45EC   		movl	-20(%ebp), %eax
 3647 255d 890424   		movl	%eax, (%esp)
 3648 2560 E8000000 		call	_wcscpy
 3648      00
 3649              	L204:
2255:str_merge.c   ****                 }
2256:str_merge.c   **** #ifndef __OPTR_NONE__
2257:str_merge.c   ****                 else if (optr_found == 1)
2258:str_merge.c   ****                 {
2259:str_merge.c   **** #ifdef STR_MERGE_DEBUG
2260:str_merge.c   ****                     STRMERG_LOG_D("OPTR found!! search_index = %d",search_index);     
2261:str_merge.c   **** #endif /* STR_MERGE_DEBUG */
2262:str_merge.c   ****                     /* replace string content */
2263:str_merge.c   **** #ifndef MEM_REF_LIST_OPT
2264:str_merge.c   ****                     wcscpy(tmp_line, ref_tmp);
2265:str_merge.c   **** #else
2266:str_merge.c   ****                     tmp_list_item = CreateListItemFromStr(ref_tmp);
2267:str_merge.c   ****                     SetRefListItem(ref_all_list, tmp_line_indx,tmp_list_item );
2268:str_merge.c   **** #endif /* MEM_REF_LIST_OPT */
2269:str_merge.c   ****                 }
2270:str_merge.c   **** #endif /* __OPTR_NONE__ */
2271:str_merge.c   ****             }
2272:str_merge.c   ****             if (!found)
 3651              	LM461:
 3652 2565 83BDC4E5 		cmpl	$0, -6716(%ebp)
 3652      FFFF00
 3653 256c 7508     		jne	L212
2273:str_merge.c   ****             {
2274:str_merge.c   ****                 search_cnt++;
 3655              	LM462:
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 104


 3656 256e 8D85A0E5 		leal	-6752(%ebp), %eax
 3656      FFFF
 3657 2574 FF00     		incl	(%eax)
 3658              	L212:
2275:str_merge.c   ****             }
2276:str_merge.c   ****             search_index++;
 3660              	LM463:
 3661 2576 8D859CE5 		leal	-6756(%ebp), %eax
 3661      FFFF
 3662 257c FF00     		incl	(%eax)
2277:str_merge.c   ****             if (search_index >= ref_cnt)
 3664              	LM464:
 3665 257e 8B859CE5 		movl	-6756(%ebp), %eax
 3665      FFFF
 3666 2584 3B85A4E5 		cmpl	-6748(%ebp), %eax
 3666      FFFF
 3667 258a 7C0A     		jl	L213
2278:str_merge.c   ****                 search_index = 0;
 3669              	LM465:
 3670 258c C7859CE5 		movl	$0, -6756(%ebp)
 3670      FFFF0000 
 3670      0000
 3671              	L213:
2279:str_merge.c   **** #ifndef MEM_REF_LIST_OPT
2280:str_merge.c   ****             tmp_line += g_line_buf_act_length;
2281:str_merge.c   ****             if (tmp_line > end_line)
2282:str_merge.c   ****                 tmp_line = ref_all;
2283:str_merge.c   **** #else
2284:str_merge.c   ****             tmp_list_item = GetRefListItem(ref_all_list, search_index);
 3673              	LM466:
 3674 2596 8B859CE5 		movl	-6756(%ebp), %eax
 3674      FFFF
 3675 259c 89442404 		movl	%eax, 4(%esp)
 3676 25a0 A1480000 		movl	_ref_all_list, %eax
 3676      00
 3677 25a5 890424   		movl	%eax, (%esp)
 3678 25a8 E8D75800 		call	_GetRefListItem
 3678      00
 3679 25ad 8945E0   		movl	%eax, -32(%ebp)
2285:str_merge.c   ****             if(tmp_list_item!=NULL)
 3681              	LM467:
 3682 25b0 837DE000 		cmpl	$0, -32(%ebp)
 3683 25b4 7416     		je	L214
2286:str_merge.c   ****             {
2287:str_merge.c   ****                 /* read scanning line to buffer */
2288:str_merge.c   ****                 wcscpy(tmp_line,tmp_list_item->ItemData);
 3685              	LM468:
 3686 25b6 8B45E0   		movl	-32(%ebp), %eax
 3687 25b9 8B00     		movl	(%eax), %eax
 3688 25bb 89442404 		movl	%eax, 4(%esp)
 3689 25bf 8B45EC   		movl	-20(%ebp), %eax
 3690 25c2 890424   		movl	%eax, (%esp)
 3691 25c5 E8000000 		call	_wcscpy
 3691      00
 3692 25ca EB39     		jmp	L215
 3693              	L214:
2289:str_merge.c   ****             }
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 105


2290:str_merge.c   ****             else
2291:str_merge.c   ****             {
2292:str_merge.c   ****                 STRMERG_LOG_D("item in ref list is NULL: %d ",search_index);
 3695              	LM469:
 3696 25cc 8B859CE5 		movl	-6756(%ebp), %eax
 3696      FFFF
 3697 25d2 8944240C 		movl	%eax, 12(%esp)
 3698 25d6 C7442408 		movl	$LC44, 8(%esp)
 3698      27180000 
 3699 25de C7442404 		movl	$LC3, 4(%esp)
 3699      4B040000 
 3700 25e6 C7042400 		movl	$0, (%esp)
 3700      000000
 3701 25ed E8000000 		call	_reslog_adaptor_log
 3701      00
2293:str_merge.c   ****                 wcscpy(tmp_line,L"");
 3703              	LM470:
 3704 25f2 C7442404 		movl	$LC12, 4(%esp)
 3704      460E0000 
 3705 25fa 8B45EC   		movl	-20(%ebp), %eax
 3706 25fd 890424   		movl	%eax, (%esp)
 3707 2600 E8000000 		call	_wcscpy
 3707      00
 3708              	L215:
2294:str_merge.c   ****             }
2295:str_merge.c   ****             tmp_line_indx = search_index;
 3710              	LM471:
 3711 2605 8B859CE5 		movl	-6756(%ebp), %eax
 3711      FFFF
 3712 260b 8945E4   		movl	%eax, -28(%ebp)
 3713 260e E9E2FCFF 		jmp	L200
 3713      FF
 3714              	L201:
2296:str_merge.c   **** #endif /* MEM_REF_LIST_OPT */
2297:str_merge.c   ****         }
2298:str_merge.c   ****         if (!found)
 3716              	LM472:
 3717 2613 83BDC4E5 		cmpl	$0, -6716(%ebp)
 3717      FFFF00
 3718 261a 7547     		jne	L216
2299:str_merge.c   ****         {
2300:str_merge.c   **** #ifndef __OPTR_NONE__
2301:str_merge.c   ****             if (optr_found == 1)
2302:str_merge.c   ****             {
2303:str_merge.c   ****                 /* for strings only in operator_ref_list.txt */
2304:str_merge.c   ****                 int optr_token_id = 0;
2305:str_merge.c   **** 
2306:str_merge.c   ****                 GetItem(optr_tmp_line, optr_token_id++, buf_src);
2307:str_merge.c   ****                 wcscpy(tmp_buf, (wchar_t *)buf_src); /* print out Enum Values */
2308:str_merge.c   **** 
2309:str_merge.c   ****                 /* output content of fix columns */
2310:str_merge.c   ****                 OutputFixColumns(optr_tmp_line, &optr_token_id, buf_src, tmp_buf, ref_tmp);
2311:str_merge.c   **** 
2312:str_merge.c   ****                 missLanguage = 0;
2313:str_merge.c   ****                 for (i = 0; i < nUsedLang; i++)
2314:str_merge.c   ****                 {
2315:str_merge.c   ****                     buf_ref[0] = '\0';
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 106


2316:str_merge.c   **** 
2317:str_merge.c   ****                     if (optr_lang_mask[i])
2318:str_merge.c   ****                     {
2319:str_merge.c   ****                         GetItem(optr_tmp_line, 3 + optr_lang_mask[i], buf_ref);
2320:str_merge.c   ****                     }
2321:str_merge.c   **** 
2322:str_merge.c   ****                     if (buf_ref[0] == '\0')
2323:str_merge.c   ****                     {
2324:str_merge.c   ****                         /* if there is no corresponding string translation, use English */
2325:str_merge.c   ****                         missLanguage = 1;
2326:str_merge.c   ****                         wcscat(tmp_buf, L"\tV");
2327:str_merge.c   **** 
2328:str_merge.c   ****                         wcscat(ref_tmp, L"\t");
2329:str_merge.c   ****                         wcscat(ref_tmp, marker);
2330:str_merge.c   ****                     }
2331:str_merge.c   ****                     else
2332:str_merge.c   ****                     {
2333:str_merge.c   ****                         wcscat(tmp_buf, L"\t");
2334:str_merge.c   **** 
2335:str_merge.c   ****                         /* will copy back to reference string table */
2336:str_merge.c   ****                         wcscat(ref_tmp, L"\t");
2337:str_merge.c   ****                         wcscat(ref_tmp, buf_ref);
2338:str_merge.c   ****                     }
2339:str_merge.c   ****                 }
2340:str_merge.c   **** 
2341:str_merge.c   ****                 if (missLanguage == 1)
2342:str_merge.c   ****                 {
2343:str_merge.c   ****                     wcscat(tmp_buf, L"\n");
2344:str_merge.c   ****                     UCS2ASCII((char*)tmp_buf, buf_asc);
2345:str_merge.c   ****                     fprintf(fail, "%s", buf_asc);
2346:str_merge.c   ****                 }
2347:str_merge.c   **** 
2348:str_merge.c   ****                 /* copy back to reference string table */
2349:str_merge.c   ****                 optr_new_cnt++;
2350:str_merge.c   ****                 StrLine[nStrId] = ref_cnt + optr_new_cnt;
2351:str_merge.c   **** #ifdef STR_MERGE_DEBUG
2352:str_merge.c   ****                 STRMERG_LOG_E("Copy Back nStrId = %d",nStrId);
2353:str_merge.c   **** #endif /* STR_MERGE_DEBUG */
2354:str_merge.c   **** 
2355:str_merge.c   **** #ifndef MEM_REF_LIST_OPT
2356:str_merge.c   ****                 wcscpy((end_line + optr_new_cnt * g_line_buf_act_length), ref_tmp);
2357:str_merge.c   **** #else
2358:str_merge.c   ****                 tmp_list_item = CreateListItemFromStr(ref_tmp);
2359:str_merge.c   ****                 if(tmp_list_item!=NULL)
2360:str_merge.c   ****                 {
2361:str_merge.c   ****                     AddRefListItem(ref_all_list,tmp_list_item);
2362:str_merge.c   ****                 }
2363:str_merge.c   ****                 else
2364:str_merge.c   ****                 {
2365:str_merge.c   ****                     STRMERG_LOG_V("Copy back from an empty item in ref list, index = %d", optr_new_
2366:str_merge.c   ****                 }
2367:str_merge.c   **** #endif /*MEM_REF_LIST_OPT*/
2368:str_merge.c   ****             }
2369:str_merge.c   ****             else
2370:str_merge.c   **** #endif /*__OPTR_NONE__*/
2371:str_merge.c   ****             {
2372:str_merge.c   ****                 /* didn't find any match */
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 107


2373:str_merge.c   ****                 StrNotTranslated = 0;
 3720              	LM473:
 3721 261c C785BCE5 		movl	$0, -6724(%ebp)
 3721      FFFF0000 
 3721      0000
2374:str_merge.c   ****                 UCS2ASCII((char*)StrEnum[nStrId], buf_asc);
 3723              	LM474:
 3724 2626 8D85C8E5 		leal	-6712(%ebp), %eax
 3724      FFFF
 3725 262c 89442404 		movl	%eax, 4(%esp)
 3726 2630 0FB785B2 		movzwl	-6734(%ebp), %eax
 3726      E5FFFF
 3727 2637 8B048500 		movl	_StrEnum(,%eax,4), %eax
 3727      000000
 3728 263e 890424   		movl	%eax, (%esp)
 3729 2641 E89DDDFF 		call	_UCS2ASCII
 3729      FF
2375:str_merge.c   ****                 fprintf(fail, "%s\t\t\tEmpty\n", buf_asc);
 3731              	LM475:
 3732 2646 8D85C8E5 		leal	-6712(%ebp), %eax
 3732      FFFF
 3733 264c 89442408 		movl	%eax, 8(%esp)
 3734 2650 C7442404 		movl	$LC45, 4(%esp)
 3734      45180000 
 3735 2658 8B45F0   		movl	-16(%ebp), %eax
 3736 265b 890424   		movl	%eax, (%esp)
 3737 265e E8000000 		call	_fprintf
 3737      00
 3738              	L216:
2376:str_merge.c   ****             }
2377:str_merge.c   ****         }
2378:str_merge.c   **** 
2379:str_merge.c   ****         gIndex++;
 3740              	LM476:
 3741 2663 8D85D0E7 		leal	-6192(%ebp), %eax
 3741      FFFF
 3742 2669 FF00     		incl	(%eax)
2380:str_merge.c   ****         nStrId++;
 3744              	LM477:
 3745 266b 0FB785B2 		movzwl	-6734(%ebp), %eax
 3745      E5FFFF
 3746 2672 40       		incl	%eax
 3747 2673 668985B2 		movw	%ax, -6734(%ebp)
 3747      E5FFFF
2381:str_merge.c   ****         search_cnt = 0;
 3749              	LM478:
 3750 267a C785A0E5 		movl	$0, -6752(%ebp)
 3750      FFFF0000 
 3750      0000
 3751 2684 E956FBFF 		jmp	L193
 3751      FF
 3752              	L194:
2382:str_merge.c   ****         /* operator support */
2383:str_merge.c   **** #ifndef __OPTR_NONE__
2384:str_merge.c   ****         optr_search_cnt = 0;
2385:str_merge.c   **** #endif
2386:str_merge.c   ****     }
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 108


2387:str_merge.c   **** 
2388:str_merge.c   **** #ifdef __TIME_CONSUME
2389:str_merge.c   ****     end_time = time(NULL);
2390:str_merge.c   ****     STRMERG_LOG_V("elapsed time = %d", end_time - start_time);
2391:str_merge.c   **** #endif /* __TIME_CONSUME */
2392:str_merge.c   **** 
2393:str_merge.c   ****     /* operator support */
2394:str_merge.c   **** #ifndef __OPTR_NONE__
2395:str_merge.c   ****     if (optr_lang_mask)
2396:str_merge.c   ****         free(optr_lang_mask);
2397:str_merge.c   ****     if (optr_ref_ssc)
2398:str_merge.c   ****         free(optr_ref_ssc);
2399:str_merge.c   ****     if(optr_filter_ref_ssc)
2400:str_merge.c   ****         free(optr_filter_ref_ssc);
2401:str_merge.c   **** /* Release ref list buffer memory*/
2402:str_merge.c   **** #ifndef MEM_REF_LIST_OPT
2403:str_merge.c   ****     if (optr_ref_all)
2404:str_merge.c   ****         free(optr_ref_all);
2405:str_merge.c   **** #else
2406:str_merge.c   ****     if(optr_tmp_line)
2407:str_merge.c   ****         free(optr_tmp_line);
2408:str_merge.c   ****     if(optr_ref_all_list)
2409:str_merge.c   ****         DeleteRefList(optr_ref_all_list);
2410:str_merge.c   **** #endif /* MEM_REF_LIST_OPT*/
2411:str_merge.c   ****     if (optr_ref)
2412:str_merge.c   ****         fclose(optr_ref);
2413:str_merge.c   **** #endif /* __OPTR_NONE__ */
2414:str_merge.c   **** 
2415:str_merge.c   **** #ifdef MEM_REF_LIST_OPT
2416:str_merge.c   ****     if(tmp_line)
 3754              	LM479:
 3755 2689 837DEC00 		cmpl	$0, -20(%ebp)
 3756 268d 740B     		je	L217
2417:str_merge.c   ****         free(tmp_line);
 3758              	LM480:
 3759 268f 8B45EC   		movl	-20(%ebp), %eax
 3760 2692 890424   		movl	%eax, (%esp)
 3761 2695 E8000000 		call	_free
 3761      00
 3762              	L217:
2418:str_merge.c   **** #endif /* MEM_REF_LIST_OPT*/
2419:str_merge.c   **** 
2420:str_merge.c   **** #ifdef DEBUG_REF_LIST_DUMP
2421:str_merge.c   **** #ifndef MEM_REF_LIST_OPT
2422:str_merge.c   ****     DumpRefList(REFLISST_DUMP_FILE_AFTER_MERGE, ref_all, g_line_buf_act_length, count);
2423:str_merge.c   **** #else
2424:str_merge.c   ****     DumpRefList(REFLISST_DUMP_FILE_AFTER_MERGE, ref_all_list);
2425:str_merge.c   **** #endif /* MEM_REF_LIST_OPT*/
2426:str_merge.c   **** #endif /* DEBUG_REF_LIST_DUMP */
2427:str_merge.c   **** 
2428:str_merge.c   ****     fclose(ref);
 3764              	LM481:
 3765 269a 8B45F4   		movl	-12(%ebp), %eax
 3766 269d 890424   		movl	%eax, (%esp)
 3767 26a0 E8000000 		call	_fclose
 3767      00
2429:str_merge.c   ****     fclose(fail);
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 109


 3769              	LM482:
 3770 26a5 8B45F0   		movl	-16(%ebp), %eax
 3771 26a8 890424   		movl	%eax, (%esp)
 3772 26ab E8000000 		call	_fclose
 3772      00
2430:str_merge.c   ****     if (StrNotTranslated == 0)
 3774              	LM483:
 3775 26b0 83BDBCE5 		cmpl	$0, -6724(%ebp)
 3775      FFFF00
 3776 26b7 751C     		jne	L218
2431:str_merge.c   ****     {
2432:str_merge.c   ****         STRMERG_LOG_V("Please see NoTranslation.txt to see the result...");
 3778              	LM484:
 3779 26b9 C7442408 		movl	$LC46, 8(%esp)
 3779      60180000 
 3780 26c1 C7442404 		movl	$LC3, 4(%esp)
 3780      4B040000 
 3781 26c9 C7042401 		movl	$1, (%esp)
 3781      000000
 3782 26d0 E8000000 		call	_reslog_adaptor_log
 3782      00
 3783              	L218:
2433:str_merge.c   ****     }
2434:str_merge.c   **** 	
2435:str_merge.c   **** 	fflush(stdout); // flush log message
 3785              	LM485:
 3786 26d5 A1000000 		movl	__imp___iob, %eax
 3786      00
 3787 26da 83C020   		addl	$32, %eax
 3788 26dd 890424   		movl	%eax, (%esp)
 3789 26e0 E8000000 		call	_fflush
 3789      00
2436:str_merge.c   ****     return 0;
 3791              	LM486:
 3792              	LBB27:
 3793 26e5 8BA58CE5 		movl	-6772(%ebp), %esp
 3793      FFFF
 3794              	LBE27:
 3795 26eb C78590E5 		movl	$0, -6768(%ebp)
 3795      FFFF0000 
 3795      0000
 3796 26f5 E9AB0000 		jmp	L177
 3796      00
 3797              	L182:
2437:str_merge.c   **** 
2438:str_merge.c   **** ERR_RET:
2439:str_merge.c   **** 	fflush(stdout); // flush log message
 3799              	LM487:
 3800 26fa A1000000 		movl	__imp___iob, %eax
 3800      00
 3801 26ff 83C020   		addl	$32, %eax
 3802 2702 890424   		movl	%eax, (%esp)
 3803 2705 E8000000 		call	_fflush
 3803      00
2440:str_merge.c   ****     if (ref_tmp)
 3805              	LM488:
 3806 270a 833D6800 		cmpl	$0, _ref_tmp
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 110


 3806      000000
 3807 2711 740D     		je	L219
2441:str_merge.c   ****         free(ref_tmp);
 3809              	LM489:
 3810 2713 A1680000 		movl	_ref_tmp, %eax
 3810      00
 3811 2718 890424   		movl	%eax, (%esp)
 3812 271b E8000000 		call	_free
 3812      00
 3813              	L219:
2442:str_merge.c   ****     if (ref_ssc)
 3815              	LM490:
 3816 2720 833D5800 		cmpl	$0, _ref_ssc
 3816      000000
 3817 2727 740D     		je	L220
2443:str_merge.c   ****         free(ref_ssc);
 3819              	LM491:
 3820 2729 A1580000 		movl	_ref_ssc, %eax
 3820      00
 3821 272e 890424   		movl	%eax, (%esp)
 3822 2731 E8000000 		call	_free
 3822      00
 3823              	L220:
2444:str_merge.c   **** 
2445:str_merge.c   **** /* Release ref list buffer memory*/
2446:str_merge.c   **** #ifndef MEM_REF_LIST_OPT
2447:str_merge.c   ****     if (ref_all)
2448:str_merge.c   ****         free(ref_all);
2449:str_merge.c   **** #else
2450:str_merge.c   ****     if(tmp_line)
 3825              	LM492:
 3826 2736 837DEC00 		cmpl	$0, -20(%ebp)
 3827 273a 740B     		je	L221
2451:str_merge.c   ****         free(tmp_line);
 3829              	LM493:
 3830 273c 8B45EC   		movl	-20(%ebp), %eax
 3831 273f 890424   		movl	%eax, (%esp)
 3832 2742 E8000000 		call	_free
 3832      00
 3833              	L221:
2452:str_merge.c   ****     if(ref_all_list)
 3835              	LM494:
 3836 2747 833D4800 		cmpl	$0, _ref_all_list
 3836      000000
 3837 274e 740D     		je	L222
2453:str_merge.c   ****         DeleteRefList(ref_all_list);
 3839              	LM495:
 3840 2750 A1480000 		movl	_ref_all_list, %eax
 3840      00
 3841 2755 890424   		movl	%eax, (%esp)
 3842 2758 E85B5200 		call	_DeleteRefList
 3842      00
 3843              	L222:
2454:str_merge.c   **** #endif /*MEM_REF_LIST_OPT*/
2455:str_merge.c   **** 
2456:str_merge.c   ****     if(filter_ref_ssc)
 3845              	LM496:
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 111


 3846 275d 833D8800 		cmpl	$0, _filter_ref_ssc
 3846      000000
 3847 2764 740D     		je	L223
2457:str_merge.c   ****         free(filter_ref_ssc);
 3849              	LM497:
 3850 2766 A1880000 		movl	_filter_ref_ssc, %eax
 3850      00
 3851 276b 890424   		movl	%eax, (%esp)
 3852 276e E8000000 		call	_free
 3852      00
 3853              	L223:
2458:str_merge.c   ****     /* operator support */
2459:str_merge.c   **** #ifndef __OPTR_NONE__
2460:str_merge.c   ****     if (optr_lang_mask)
2461:str_merge.c   ****         free(optr_lang_mask);
2462:str_merge.c   ****     if (ref_ssc_list)
2463:str_merge.c   ****         free(ref_ssc_list);
2464:str_merge.c   ****     if (optr_ref_ssc)
2465:str_merge.c   ****         free(optr_ref_ssc);
2466:str_merge.c   **** 
2467:str_merge.c   **** /* Release OPTR ref list buffer memory*/
2468:str_merge.c   **** #ifndef MEM_REF_LIST_OPT
2469:str_merge.c   ****     if (optr_ref_all)
2470:str_merge.c   ****         free(optr_ref_all);
2471:str_merge.c   **** #else
2472:str_merge.c   ****     if(optr_ref_all_list)
2473:str_merge.c   ****         DeleteRefList(optr_ref_all_list);
2474:str_merge.c   ****     if(optr_tmp_line)
2475:str_merge.c   ****         free(optr_tmp_line);
2476:str_merge.c   **** #endif /*#ifndef MEM_REF_LIST_OPT*/
2477:str_merge.c   ****     if (optr_ref)
2478:str_merge.c   ****         fclose(optr_ref);
2479:str_merge.c   **** #endif /* __OPTR_NONE__ */
2480:str_merge.c   **** 
2481:str_merge.c   ****     if (ref)
 3855              	LM498:
 3856 2773 837DF400 		cmpl	$0, -12(%ebp)
 3857 2777 740B     		je	L224
2482:str_merge.c   ****         fclose(ref);
 3859              	LM499:
 3860 2779 8B45F4   		movl	-12(%ebp), %eax
 3861 277c 890424   		movl	%eax, (%esp)
 3862 277f E8000000 		call	_fclose
 3862      00
 3863              	L224:
2483:str_merge.c   ****     if (fail)
 3865              	LM500:
 3866 2784 837DF000 		cmpl	$0, -16(%ebp)
 3867 2788 740B     		je	L225
2484:str_merge.c   ****         fclose(fail);
 3869              	LM501:
 3870 278a 8B45F0   		movl	-16(%ebp), %eax
 3871 278d 890424   		movl	%eax, (%esp)
 3872 2790 E8000000 		call	_fclose
 3872      00
 3873              	L225:
2485:str_merge.c   ****     return -1;
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 112


 3875              	LM502:
 3876              	LBB28:
 3877 2795 8BA58CE5 		movl	-6772(%ebp), %esp
 3877      FFFF
 3878              	LBE28:
 3879 279b C78590E5 		movl	$-1, -6768(%ebp)
 3879      FFFFFFFF 
 3879      FFFF
2486:str_merge.c   **** }
 3881              	LM503:
 3882              	L177:
 3883              	LBE23:
 3884 27a5 8B8590E5 		movl	-6768(%ebp), %eax
 3884      FFFF
 3885 27ab C9       		leave
 3886 27ac C3       		ret
 3916              	Lscope18:
 3921              	_mask_length:
2487:str_merge.c   **** 
2488:str_merge.c   **** 
2489:str_merge.c   **** /*****************************************************************************
2490:str_merge.c   ****  * FUNCTION
2491:str_merge.c   ****  *  mask_length
2492:str_merge.c   ****  * DESCRIPTION
2493:str_merge.c   ****  *  Get token between index and index+1 DELIMETER
2494:str_merge.c   ****  * PARAMETERS
2495:str_merge.c   ****  *  val     [IN]
2496:str_merge.c   ****  * RETURNS
2497:str_merge.c   ****  *  Return the mask bit count
2498:str_merge.c   ****  *****************************************************************************/
2499:str_merge.c   **** static int mask_length(int val)
2500:str_merge.c   **** {
 3923              	LM504:
 3924 27ad 55       		pushl	%ebp
 3925 27ae 89E5     		movl	%esp, %ebp
 3926 27b0 83EC08   		subl	$8, %esp
2501:str_merge.c   ****     /*----------------------------------------------------------------*/
2502:str_merge.c   ****     /* Local Variables                                                */
2503:str_merge.c   ****     /*----------------------------------------------------------------*/
2504:str_merge.c   ****     int l = 0, v;
 3928              	LM505:
 3929              	LBB29:
 3930 27b3 C745FC00 		movl	$0, -4(%ebp)
 3930      000000
2505:str_merge.c   **** 
2506:str_merge.c   ****     /*----------------------------------------------------------------*/
2507:str_merge.c   ****     /* Code Body                                                      */
2508:str_merge.c   ****     /*----------------------------------------------------------------*/
2509:str_merge.c   ****     v = val / 2;
 3932              	LM506:
 3933 27ba 8B5508   		movl	8(%ebp), %edx
 3934 27bd 89D0     		movl	%edx, %eax
 3935 27bf C1F81F   		sarl	$31, %eax
 3936 27c2 C1E81F   		shrl	$31, %eax
 3937 27c5 8D0410   		leal	(%eax,%edx), %eax
 3938 27c8 D1F8     		sarl	%eax
 3939 27ca 8945F8   		movl	%eax, -8(%ebp)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 113


2510:str_merge.c   ****     while (v >= 1)
 3941              	LM507:
 3942              	L227:
 3943 27cd 837DF800 		cmpl	$0, -8(%ebp)
 3944 27d1 7F02     		jg	L229
 3945 27d3 EB1A     		jmp	L228
 3946              	L229:
2511:str_merge.c   ****     {
2512:str_merge.c   ****         l++;
 3948              	LM508:
 3949 27d5 8D45FC   		leal	-4(%ebp), %eax
 3950 27d8 FF00     		incl	(%eax)
2513:str_merge.c   ****         v = v / 2;
 3952              	LM509:
 3953 27da 8B55F8   		movl	-8(%ebp), %edx
 3954 27dd 89D0     		movl	%edx, %eax
 3955 27df C1F81F   		sarl	$31, %eax
 3956 27e2 C1E81F   		shrl	$31, %eax
 3957 27e5 8D0410   		leal	(%eax,%edx), %eax
 3958 27e8 D1F8     		sarl	%eax
 3959 27ea 8945F8   		movl	%eax, -8(%ebp)
 3960 27ed EBDE     		jmp	L227
 3961              	L228:
2514:str_merge.c   ****     }
2515:str_merge.c   ****     return l;
 3963              	LM510:
 3964 27ef 8B45FC   		movl	-4(%ebp), %eax
2516:str_merge.c   **** }
 3966              	LM511:
 3967 27f2 C9       		leave
 3968 27f3 C3       		ret
 3969              	LBE29:
 3974              	Lscope19:
 3980              	_pow:
2517:str_merge.c   **** 
2518:str_merge.c   **** 
2519:str_merge.c   **** /*****************************************************************************
2520:str_merge.c   ****  * FUNCTION
2521:str_merge.c   ****  *  pow
2522:str_merge.c   ****  * DESCRIPTION
2523:str_merge.c   ****  *  Calculate base raised to the power of index
2524:str_merge.c   ****  * PARAMETERS
2525:str_merge.c   ****  *  base    [IN]
2526:str_merge.c   ****  *  index   [IN]
2527:str_merge.c   ****  * RETURNS
2528:str_merge.c   ****  *  Return the value: base raised to the power of index
2529:str_merge.c   ****  *****************************************************************************/
2530:str_merge.c   **** static int pow(int base, int index)
2531:str_merge.c   **** {
 3982              	LM512:
 3983 27f4 55       		pushl	%ebp
 3984 27f5 89E5     		movl	%esp, %ebp
 3985 27f7 83EC08   		subl	$8, %esp
2532:str_merge.c   ****     /*----------------------------------------------------------------*/
2533:str_merge.c   ****     /* Local Variables                                                */
2534:str_merge.c   ****     /*----------------------------------------------------------------*/
2535:str_merge.c   ****     int i, ret = 1;
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 114


 3987              	LM513:
 3988              	LBB30:
 3989 27fa C745F801 		movl	$1, -8(%ebp)
 3989      000000
2536:str_merge.c   **** 
2537:str_merge.c   ****     /*----------------------------------------------------------------*/
2538:str_merge.c   ****     /* Code Body                                                      */
2539:str_merge.c   ****     /*----------------------------------------------------------------*/
2540:str_merge.c   ****     for (i = 0; i < index; i++)
 3991              	LM514:
 3992 2801 C745FC00 		movl	$0, -4(%ebp)
 3992      000000
 3993              	L231:
 3994 2808 8B45FC   		movl	-4(%ebp), %eax
 3995 280b 3B450C   		cmpl	12(%ebp), %eax
 3996 280e 7C02     		jl	L234
 3997 2810 EB11     		jmp	L232
 3998              	L234:
2541:str_merge.c   ****         ret = ret * base;
 4000              	LM515:
 4001 2812 8B45F8   		movl	-8(%ebp), %eax
 4002 2815 0FAF4508 		imull	8(%ebp), %eax
 4003 2819 8945F8   		movl	%eax, -8(%ebp)
 4005              	LM516:
 4006 281c 8D45FC   		leal	-4(%ebp), %eax
 4007 281f FF00     		incl	(%eax)
 4008 2821 EBE5     		jmp	L231
 4009              	L232:
2542:str_merge.c   ****     return ret;
 4011              	LM517:
 4012 2823 8B45F8   		movl	-8(%ebp), %eax
2543:str_merge.c   **** }
 4014              	LM518:
 4015 2826 C9       		leave
 4016 2827 C3       		ret
 4017              	LBE30:
 4022              	Lscope20:
 4028              	_fmod:
2544:str_merge.c   **** 
2545:str_merge.c   **** 
2546:str_merge.c   **** /*****************************************************************************
2547:str_merge.c   ****  * FUNCTION
2548:str_merge.c   ****  *  fmod
2549:str_merge.c   ****  * DESCRIPTION
2550:str_merge.c   ****  *  Calculate the remainder
2551:str_merge.c   ****  * PARAMETERS
2552:str_merge.c   ****  *  denominator [IN]
2553:str_merge.c   ****  *  numerator   [IN]
2554:str_merge.c   ****  * RETURNS
2555:str_merge.c   ****  *  Return the remainder of denominator / numerator
2556:str_merge.c   ****  *****************************************************************************/
2557:str_merge.c   **** static int fmod(int denominator, int numerator)
2558:str_merge.c   **** {
 4030              	LM519:
 4031 2828 55       		pushl	%ebp
 4032 2829 89E5     		movl	%esp, %ebp
 4033 282b 83EC04   		subl	$4, %esp
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 115


2559:str_merge.c   ****     /*----------------------------------------------------------------*/
2560:str_merge.c   ****     /* Local Variables                                                */
2561:str_merge.c   ****     /*----------------------------------------------------------------*/
2562:str_merge.c   ****     int ret = denominator;
 4035              	LM520:
 4036              	LBB31:
 4037 282e 8B4508   		movl	8(%ebp), %eax
 4038 2831 8945FC   		movl	%eax, -4(%ebp)
2563:str_merge.c   **** 
2564:str_merge.c   ****     /*----------------------------------------------------------------*/
2565:str_merge.c   ****     /* Code Body                                                      */
2566:str_merge.c   ****     /*----------------------------------------------------------------*/
2567:str_merge.c   ****     while (ret >= numerator)
 4040              	LM521:
 4041              	L236:
 4042 2834 8B45FC   		movl	-4(%ebp), %eax
 4043 2837 3B450C   		cmpl	12(%ebp), %eax
 4044 283a 7D02     		jge	L238
 4045 283c EB0A     		jmp	L237
 4046              	L238:
2568:str_merge.c   ****         ret = ret - numerator;
 4048              	LM522:
 4049 283e 8B550C   		movl	12(%ebp), %edx
 4050 2841 8D45FC   		leal	-4(%ebp), %eax
 4051 2844 2910     		subl	%edx, (%eax)
 4052 2846 EBEC     		jmp	L236
 4053              	L237:
2569:str_merge.c   ****     return ret;
 4055              	LM523:
 4056 2848 8B45FC   		movl	-4(%ebp), %eax
2570:str_merge.c   **** }
 4058              	LM524:
 4059 284b C9       		leave
 4060 284c C3       		ret
 4061              	LBE31:
 4065              	Lscope21:
 4071              	_GetHashValue:
2571:str_merge.c   **** 
2572:str_merge.c   **** 
2573:str_merge.c   **** /*****************************************************************************
2574:str_merge.c   ****  * FUNCTION
2575:str_merge.c   ****  *  GetHashValue
2576:str_merge.c   ****  * DESCRIPTION
2577:str_merge.c   ****  *  Calculate the hash value of input string
2578:str_merge.c   ****  * PARAMETERS
2579:str_merge.c   ****  *  string      [IN]
2580:str_merge.c   ****  *  hash_range  [IN]
2581:str_merge.c   ****  * RETURNS
2582:str_merge.c   ****  *  Return the hash value
2583:str_merge.c   ****  *****************************************************************************/
2584:str_merge.c   **** static int GetHashValue(wchar_t *string, int hash_range)
2585:str_merge.c   **** {
 4073              	LM525:
 4074 284d 55       		pushl	%ebp
 4075 284e 89E5     		movl	%esp, %ebp
 4076 2850 83EC18   		subl	$24, %esp
2586:str_merge.c   ****     /*----------------------------------------------------------------*/
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 116


2587:str_merge.c   ****     /* Local Variables                                                */
2588:str_merge.c   ****     /*----------------------------------------------------------------*/
2589:str_merge.c   ****     int length = mask_length(hash_range);
 4078              	LM526:
 4079              	LBB32:
 4080 2853 8B450C   		movl	12(%ebp), %eax
 4081 2856 890424   		movl	%eax, (%esp)
 4082 2859 E84FFFFF 		call	_mask_length
 4082      FF
 4083 285e 8945FC   		movl	%eax, -4(%ebp)
2590:str_merge.c   ****     int mask = (int)pow(2, length) - 1;
 4085              	LM527:
 4086 2861 8B45FC   		movl	-4(%ebp), %eax
 4087 2864 89442404 		movl	%eax, 4(%esp)
 4088 2868 C7042402 		movl	$2, (%esp)
 4088      000000
 4089 286f E880FFFF 		call	_pow
 4089      FF
 4090 2874 48       		decl	%eax
 4091 2875 8945F8   		movl	%eax, -8(%ebp)
2591:str_merge.c   ****     int i = 0;
 4093              	LM528:
 4094 2878 C745F400 		movl	$0, -12(%ebp)
 4094      000000
2592:str_merge.c   ****     long val = 0;
 4096              	LM529:
 4097 287f C745F000 		movl	$0, -16(%ebp)
 4097      000000
2593:str_merge.c   **** 
2594:str_merge.c   ****     /*----------------------------------------------------------------*/
2595:str_merge.c   ****     /* Code Body                                                      */
2596:str_merge.c   ****     /*----------------------------------------------------------------*/
2597:str_merge.c   ****     for (i = 0; i < (int)wcslen(string); i++)
 4099              	LM530:
 4100 2886 C745F400 		movl	$0, -12(%ebp)
 4100      000000
 4101              	L240:
 4102 288d 8B4508   		movl	8(%ebp), %eax
 4103 2890 890424   		movl	%eax, (%esp)
 4104 2893 E8000000 		call	_wcslen
 4104      00
 4105 2898 3945F4   		cmpl	%eax, -12(%ebp)
 4106 289b 7C02     		jl	L243
 4107 289d EB30     		jmp	L241
 4108              	L243:
2598:str_merge.c   ****     {
2599:str_merge.c   ****         val += ((string[i] + val * 37) & mask);
 4110              	LM531:
 4111 289f 8B45F4   		movl	-12(%ebp), %eax
 4112 28a2 8D1400   		leal	(%eax,%eax), %edx
 4113 28a5 8B4508   		movl	8(%ebp), %eax
 4114 28a8 0FB70C10 		movzwl	(%eax,%edx), %ecx
 4115 28ac 8B55F0   		movl	-16(%ebp), %edx
 4116 28af 89D0     		movl	%edx, %eax
 4117 28b1 C1E003   		sall	$3, %eax
 4118 28b4 01D0     		addl	%edx, %eax
 4119 28b6 C1E002   		sall	$2, %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 117


 4120 28b9 01D0     		addl	%edx, %eax
 4121 28bb 8D0408   		leal	(%eax,%ecx), %eax
 4122 28be 89C2     		movl	%eax, %edx
 4123 28c0 2355F8   		andl	-8(%ebp), %edx
 4124 28c3 8D45F0   		leal	-16(%ebp), %eax
 4125 28c6 0110     		addl	%edx, (%eax)
 4127              	LM532:
 4128 28c8 8D45F4   		leal	-12(%ebp), %eax
 4129 28cb FF00     		incl	(%eax)
 4130 28cd EBBE     		jmp	L240
 4131              	L241:
2600:str_merge.c   ****     }
2601:str_merge.c   ****     val = fmod(val, hash_range);
 4133              	LM533:
 4134 28cf 8B450C   		movl	12(%ebp), %eax
 4135 28d2 89442404 		movl	%eax, 4(%esp)
 4136 28d6 8B45F0   		movl	-16(%ebp), %eax
 4137 28d9 890424   		movl	%eax, (%esp)
 4138 28dc E847FFFF 		call	_fmod
 4138      FF
 4139 28e1 8945F0   		movl	%eax, -16(%ebp)
2602:str_merge.c   ****     return (int)val;
 4141              	LM534:
 4142 28e4 8B45F0   		movl	-16(%ebp), %eax
2603:str_merge.c   **** }
 4144              	LM535:
 4145 28e7 C9       		leave
 4146 28e8 C3       		ret
 4147              	LBE32:
 4154              	Lscope22:
 4160              	_Trans:
2604:str_merge.c   **** 
2605:str_merge.c   **** 
2606:str_merge.c   **** /*****************************************************************************
2607:str_merge.c   ****  * FUNCTION
2608:str_merge.c   ****  *  Trans
2609:str_merge.c   ****  * DESCRIPTION
2610:str_merge.c   ****  *  Transform UCS2-encoding "\","n" to "\n"
2611:str_merge.c   ****  * PARAMETERS
2612:str_merge.c   ****  *  string  [IN]
2613:str_merge.c   ****  *  buf     [OUT]
2614:str_merge.c   ****  * RETURNS
2615:str_merge.c   ****  *  Return 1 if transformed, otherwise, return 0
2616:str_merge.c   ****  *****************************************************************************/
2617:str_merge.c   **** static int Trans(wchar_t *string, wchar_t *buf)
2618:str_merge.c   **** {
 4162              	LM536:
 4163 28e9 55       		pushl	%ebp
 4164 28ea 89E5     		movl	%esp, %ebp
 4165 28ec 53       		pushl	%ebx
 4166 28ed 83EC14   		subl	$20, %esp
2619:str_merge.c   ****     /*----------------------------------------------------------------*/
2620:str_merge.c   ****     /* Local Variables                                                */
2621:str_merge.c   ****     /*----------------------------------------------------------------*/
2622:str_merge.c   ****     int i = 0;
 4168              	LM537:
 4169              	LBB33:
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 118


 4170 28f0 C745F800 		movl	$0, -8(%ebp)
 4170      000000
2623:str_merge.c   ****     int l = 0, ret = 0;
 4172              	LM538:
 4173 28f7 C745F400 		movl	$0, -12(%ebp)
 4173      000000
 4174 28fe C745F000 		movl	$0, -16(%ebp)
 4174      000000
2624:str_merge.c   **** 
2625:str_merge.c   ****     /*----------------------------------------------------------------*/
2626:str_merge.c   ****     /* Code Body                                                      */
2627:str_merge.c   ****     /*----------------------------------------------------------------*/
2628:str_merge.c   ****     for (i = 0; i < wcslen(string); i++)
 4176              	LM539:
 4177 2905 C745F800 		movl	$0, -8(%ebp)
 4177      000000
 4178              	L245:
 4179 290c 8B4508   		movl	8(%ebp), %eax
 4180 290f 890424   		movl	%eax, (%esp)
 4181 2912 E8000000 		call	_wcslen
 4181      00
 4182 2917 3945F8   		cmpl	%eax, -8(%ebp)
 4183 291a 7202     		jb	L248
 4184 291c EB64     		jmp	L246
 4185              	L248:
2629:str_merge.c   ****     {
2630:str_merge.c   ****         if (string[i] == L'\\' && string[i + 1] == L'n')
 4187              	LM540:
 4188 291e 8B45F8   		movl	-8(%ebp), %eax
 4189 2921 8D1400   		leal	(%eax,%eax), %edx
 4190 2924 8B4508   		movl	8(%ebp), %eax
 4191 2927 66833C10 		cmpw	$92, (%eax,%edx)
 4191      5C
 4192 292c 752E     		jne	L249
 4193 292e 8B45F8   		movl	-8(%ebp), %eax
 4194 2931 01C0     		addl	%eax, %eax
 4195 2933 034508   		addl	8(%ebp), %eax
 4196 2936 83C002   		addl	$2, %eax
 4197 2939 6683386E 		cmpw	$110, (%eax)
 4198 293d 751D     		jne	L249
2631:str_merge.c   ****         {
2632:str_merge.c   ****             buf[l] = '\n';
 4200              	LM541:
 4201 293f 8B45F4   		movl	-12(%ebp), %eax
 4202 2942 8D1400   		leal	(%eax,%eax), %edx
 4203 2945 8B450C   		movl	12(%ebp), %eax
 4204 2948 66C70410 		movw	$10, (%eax,%edx)
 4204      0A00
2633:str_merge.c   ****             i++;
 4206              	LM542:
 4207 294e 8D45F8   		leal	-8(%ebp), %eax
 4208 2951 FF00     		incl	(%eax)
2634:str_merge.c   ****             ret = 1;
 4210              	LM543:
 4211 2953 C745F001 		movl	$1, -16(%ebp)
 4211      000000
 4212 295a EB1A     		jmp	L250
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 119


 4213              	L249:
2635:str_merge.c   ****         }
2636:str_merge.c   ****         else
2637:str_merge.c   ****             buf[l] = string[i];
 4215              	LM544:
 4216 295c 8B45F4   		movl	-12(%ebp), %eax
 4217 295f 8D1C00   		leal	(%eax,%eax), %ebx
 4218 2962 8B4D0C   		movl	12(%ebp), %ecx
 4219 2965 8B45F8   		movl	-8(%ebp), %eax
 4220 2968 8D1400   		leal	(%eax,%eax), %edx
 4221 296b 8B4508   		movl	8(%ebp), %eax
 4222 296e 0FB70410 		movzwl	(%eax,%edx), %eax
 4223 2972 66890419 		movw	%ax, (%ecx,%ebx)
 4224              	L250:
2638:str_merge.c   ****         l++;
 4226              	LM545:
 4227 2976 8D45F4   		leal	-12(%ebp), %eax
 4228 2979 FF00     		incl	(%eax)
 4230              	LM546:
 4231 297b 8D45F8   		leal	-8(%ebp), %eax
 4232 297e FF00     		incl	(%eax)
 4233 2980 EB8A     		jmp	L245
 4234              	L246:
2639:str_merge.c   ****     }
2640:str_merge.c   ****     buf[l] = L'\0';
 4236              	LM547:
 4237 2982 8B45F4   		movl	-12(%ebp), %eax
 4238 2985 8D1400   		leal	(%eax,%eax), %edx
 4239 2988 8B450C   		movl	12(%ebp), %eax
 4240 298b 66C70410 		movw	$0, (%eax,%edx)
 4240      0000
2641:str_merge.c   ****     return ret;
 4242              	LM548:
 4243 2991 8B45F0   		movl	-16(%ebp), %eax
2642:str_merge.c   **** }
 4245              	LM549:
 4246 2994 83C414   		addl	$20, %esp
 4247 2997 5B       		popl	%ebx
 4248 2998 5D       		popl	%ebp
 4249 2999 C3       		ret
 4250              	LBE33:
 4256              	Lscope23:
 4262              	_UCS2ASCII_CR:
2643:str_merge.c   **** 
2644:str_merge.c   **** 
2645:str_merge.c   **** /*****************************************************************************
2646:str_merge.c   ****  * FUNCTION
2647:str_merge.c   ****  *  UCS2ASCII_CR
2648:str_merge.c   ****  * DESCRIPTION
2649:str_merge.c   ****  *  Convert wide character to ASCII character, removing charcters after CR
2650:str_merge.c   ****  * PARAMETERS
2651:str_merge.c   ****  *  w_in    [IN]
2652:str_merge.c   ****  *  a_out   [OUT]
2653:str_merge.c   ****  * RETURNS
2654:str_merge.c   ****  *  void
2655:str_merge.c   ****  *****************************************************************************/
2656:str_merge.c   **** static void UCS2ASCII_CR(char *w_in, char *a_out)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 120


2657:str_merge.c   **** {
 4264              	LM550:
 4265 299a 55       		pushl	%ebp
 4266 299b 89E5     		movl	%esp, %ebp
 4267 299d 83EC04   		subl	$4, %esp
2658:str_merge.c   ****     /*----------------------------------------------------------------*/
2659:str_merge.c   ****     /* Local Variables                                                */
2660:str_merge.c   ****     /*----------------------------------------------------------------*/
2661:str_merge.c   ****     int i = 0;
 4269              	LM551:
 4270              	LBB34:
 4271 29a0 C745FC00 		movl	$0, -4(%ebp)
 4271      000000
2662:str_merge.c   **** 
2663:str_merge.c   ****     /*----------------------------------------------------------------*/
2664:str_merge.c   ****     /* Code Body                                                      */
2665:str_merge.c   ****     /*----------------------------------------------------------------*/
2666:str_merge.c   ****     while (w_in[i] != '\0' || w_in[i + 1] != '\0')
 4273              	LM552:
 4274              	L252:
 4275 29a7 8B45FC   		movl	-4(%ebp), %eax
 4276 29aa 034508   		addl	8(%ebp), %eax
 4277 29ad 803800   		cmpb	$0, (%eax)
 4278 29b0 750E     		jne	L254
 4279 29b2 8B45FC   		movl	-4(%ebp), %eax
 4280 29b5 034508   		addl	8(%ebp), %eax
 4281 29b8 40       		incl	%eax
 4282 29b9 803800   		cmpb	$0, (%eax)
 4283 29bc 7502     		jne	L254
 4284 29be EB1E     		jmp	L253
 4285              	L254:
2667:str_merge.c   ****     {
2668:str_merge.c   ****         a_out[i >> 1] = w_in[i];
 4287              	LM553:
 4288 29c0 8B45FC   		movl	-4(%ebp), %eax
 4289 29c3 89C1     		movl	%eax, %ecx
 4290 29c5 D1F9     		sarl	%ecx
 4291 29c7 8B550C   		movl	12(%ebp), %edx
 4292 29ca 8B45FC   		movl	-4(%ebp), %eax
 4293 29cd 034508   		addl	8(%ebp), %eax
 4294 29d0 0FB600   		movzbl	(%eax), %eax
 4295 29d3 880411   		movb	%al, (%ecx,%edx)
2669:str_merge.c   ****         i += 2;
 4297              	LM554:
 4298 29d6 8D45FC   		leal	-4(%ebp), %eax
 4299 29d9 830002   		addl	$2, (%eax)
 4300 29dc EBC9     		jmp	L252
 4301              	L253:
2670:str_merge.c   ****     }
2671:str_merge.c   ****     a_out[i >> 1] = '\0';
 4303              	LM555:
 4304 29de 8B45FC   		movl	-4(%ebp), %eax
 4305 29e1 89C2     		movl	%eax, %edx
 4306 29e3 D1FA     		sarl	%edx
 4307 29e5 8B450C   		movl	12(%ebp), %eax
 4308 29e8 C6040200 		movb	$0, (%edx,%eax)
2672:str_merge.c   ****     i = i >> 1;
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 121


 4310              	LM556:
 4311 29ec 8D45FC   		leal	-4(%ebp), %eax
 4312 29ef D138     		sarl	(%eax)
2673:str_merge.c   ****     i--;
 4314              	LM557:
 4315 29f1 8D45FC   		leal	-4(%ebp), %eax
 4316 29f4 FF08     		decl	(%eax)
2674:str_merge.c   ****     while (i >= 0)
 4318              	LM558:
 4319              	L255:
 4320 29f6 837DFC00 		cmpl	$0, -4(%ebp)
 4321 29fa 7902     		jns	L257
 4322 29fc EB1D     		jmp	L251
 4323              	L257:
2675:str_merge.c   ****     {
2676:str_merge.c   ****         if (a_out[i] == 0x0D)
 4325              	LM559:
 4326 29fe 8B45FC   		movl	-4(%ebp), %eax
 4327 2a01 03450C   		addl	12(%ebp), %eax
 4328 2a04 80380D   		cmpb	$13, (%eax)
 4329 2a07 750B     		jne	L258
2677:str_merge.c   ****         {
2678:str_merge.c   ****             a_out[i] = '\0';
 4331              	LM560:
 4332 2a09 8B45FC   		movl	-4(%ebp), %eax
 4333 2a0c 03450C   		addl	12(%ebp), %eax
 4334 2a0f C60000   		movb	$0, (%eax)
2679:str_merge.c   ****             break;
 4336              	LM561:
 4337 2a12 EB07     		jmp	L251
 4338              	L258:
2680:str_merge.c   ****         }
2681:str_merge.c   ****         else
2682:str_merge.c   ****             i--;
 4340              	LM562:
 4341 2a14 8D45FC   		leal	-4(%ebp), %eax
 4342 2a17 FF08     		decl	(%eax)
 4343 2a19 EBDB     		jmp	L255
2683:str_merge.c   ****     }
2684:str_merge.c   **** }
 4345              	LM563:
 4346              	L251:
 4347 2a1b C9       		leave
 4348 2a1c C3       		ret
 4349              	LBE34:
 4353              	Lscope24:
 4358              	_ifLanguageUsed:
2685:str_merge.c   **** 
2686:str_merge.c   **** 
2687:str_merge.c   **** /*****************************************************************************
2688:str_merge.c   ****  * FUNCTION
2689:str_merge.c   ****  *  ifLanguageUsed
2690:str_merge.c   ****  * DESCRIPTION
2691:str_merge.c   ****  *  Decide if the translated language should be used for string resource, 
2692:str_merge.c   ****  *  according to SSC string
2693:str_merge.c   ****  * PARAMETERS
2694:str_merge.c   ****  *  ssc_ref [IN]
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 122


2695:str_merge.c   ****  * RETURNS
2696:str_merge.c   ****  *  Return -1 if the language is not used, otherwise, return non-negative index
2697:str_merge.c   ****  *****************************************************************************/
2698:str_merge.c   **** static int ifLanguageUsed(wchar_t *ssc_ref)
2699:str_merge.c   **** {
 4360              	LM564:
 4361 2a1d 55       		pushl	%ebp
 4362 2a1e 89E5     		movl	%esp, %ebp
 4363 2a20 83EC48   		subl	$72, %esp
2700:str_merge.c   ****     /*----------------------------------------------------------------*/
2701:str_merge.c   ****     /* Local Variables                                                */
2702:str_merge.c   ****     /*----------------------------------------------------------------*/
2703:str_merge.c   ****     int i = 0;
 4365              	LM565:
 4366              	LBB35:
 4367 2a23 C745F400 		movl	$0, -12(%ebp)
 4367      000000
2704:str_merge.c   ****     char ascii_ssc[10];
2705:str_merge.c   **** 
2706:str_merge.c   ****     /*----------------------------------------------------------------*/
2707:str_merge.c   ****     /* Code Body                                                      */
2708:str_merge.c   ****     /*----------------------------------------------------------------*/
2709:str_merge.c   ****     UCS2ASCII_CR((char *)ssc_ref, ascii_ssc);
 4369              	LM566:
 4370 2a2a 8D45D8   		leal	-40(%ebp), %eax
 4371 2a2d 89442404 		movl	%eax, 4(%esp)
 4372 2a31 8B4508   		movl	8(%ebp), %eax
 4373 2a34 890424   		movl	%eax, (%esp)
 4374 2a37 E85EFFFF 		call	_UCS2ASCII_CR
 4374      FF
2710:str_merge.c   ****     for (i = 0; i < mtk_gMaxDeployedLangs; i++)
 4376              	LM567:
 4377 2a3c C745F400 		movl	$0, -12(%ebp)
 4377      000000
 4378              	L261:
 4379 2a43 0FB70500 		movzwl	_mtk_gMaxDeployedLangs, %eax
 4379      000000
 4380 2a4a 3945F4   		cmpl	%eax, -12(%ebp)
 4381 2a4d 7C02     		jl	L264
 4382 2a4f EB33     		jmp	L262
 4383              	L264:
2711:str_merge.c   ****     {
2712:str_merge.c   ****         if (strcmp(mtk_gLanguageArray[i].aLangSSC, ascii_ssc) == 0)
 4385              	LM568:
 4386 2a51 8D45D8   		leal	-40(%ebp), %eax
 4387 2a54 89442404 		movl	%eax, 4(%esp)
 4388 2a58 8B55F4   		movl	-12(%ebp), %edx
 4389 2a5b 89D0     		movl	%edx, %eax
 4390 2a5d C1E005   		sall	$5, %eax
 4391 2a60 29D0     		subl	%edx, %eax
 4392 2a62 01C0     		addl	%eax, %eax
 4393 2a64 05280000 		addl	$_mtk_gLanguageArray+40, %eax
 4393      00
 4394 2a69 890424   		movl	%eax, (%esp)
 4395 2a6c E8000000 		call	_strcmp
 4395      00
 4396 2a71 85C0     		testl	%eax, %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 123


 4397 2a73 7508     		jne	L263
2713:str_merge.c   ****         {
2714:str_merge.c   ****             return i;
 4399              	LM569:
 4400 2a75 8B45F4   		movl	-12(%ebp), %eax
 4401 2a78 8945D4   		movl	%eax, -44(%ebp)
 4402 2a7b EB0E     		jmp	L260
 4404              	LM570:
 4405              	L263:
 4406 2a7d 8D45F4   		leal	-12(%ebp), %eax
 4407 2a80 FF00     		incl	(%eax)
 4408 2a82 EBBF     		jmp	L261
 4409              	L262:
2715:str_merge.c   ****         }
2716:str_merge.c   ****     }
2717:str_merge.c   ****     return -1;
 4411              	LM571:
 4412 2a84 C745D4FF 		movl	$-1, -44(%ebp)
 4412      FFFFFF
2718:str_merge.c   **** }
 4414              	LM572:
 4415              	L260:
 4416              	LBE35:
 4417 2a8b 8B45D4   		movl	-44(%ebp), %eax
 4418 2a8e C9       		leave
 4419 2a8f C3       		ret
 4424              	Lscope25:
 4433              	_GetStrByRef:
2719:str_merge.c   **** 
2720:str_merge.c   **** #ifndef __MMI_RESOURCE_ENFB_SUPPORT__
2721:str_merge.c   **** /*****************************************************************************
2722:str_merge.c   ****  * FUNCTION
2723:str_merge.c   ****  *  GetStrByRef
2724:str_merge.c   ****  * DESCRIPTION
2725:str_merge.c   ****  *  Get string content according to reference index
2726:str_merge.c   ****  *  The string content depends on whether it is duplicated or not
2727:str_merge.c   ****  * PARAMETERS
2728:str_merge.c   ****  *  strres     [IN] string resource
2729:str_merge.c   ****  *  strres_dup [IN] duplicated string resource
2730:str_merge.c   ****  *  lang_idx   [IN] language index in process
2731:str_merge.c   ****  *  id_count   [IN] string id in current language
2732:str_merge.c   ****  *  ref_idx    [IN] string reference index in current language
2733:str_merge.c   ****  * RETURNS
2734:str_merge.c   ****  *  Return the string content
2735:str_merge.c   ****  *****************************************************************************/
2736:str_merge.c   **** static wchar_t* GetStrByRef(StrRes *strres, DupStrRes *strres_dup, int lang_idx, int id_count, int 
2737:str_merge.c   **** {
 4435              	LM573:
 4436 2a90 55       		pushl	%ebp
 4437 2a91 89E5     		movl	%esp, %ebp
 4438 2a93 53       		pushl	%ebx
 4439 2a94 83EC04   		subl	$4, %esp
2738:str_merge.c   ****     /*----------------------------------------------------------------*/
2739:str_merge.c   ****     /* Local Variables                                                */
2740:str_merge.c   ****     /*----------------------------------------------------------------*/
2741:str_merge.c   **** 
2742:str_merge.c   ****     /*----------------------------------------------------------------*/
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 124


2743:str_merge.c   ****     /* Code Body                                                      */
2744:str_merge.c   ****     /*----------------------------------------------------------------*/
2745:str_merge.c   **** 
2746:str_merge.c   ****     if (!strres[lang_idx].is_dup[id_count])
 4441              	LM574:
 4442 2a97 8B5510   		movl	16(%ebp), %edx
 4443 2a9a 89D0     		movl	%edx, %eax
 4444 2a9c 01C0     		addl	%eax, %eax
 4445 2a9e 01D0     		addl	%edx, %eax
 4446 2aa0 8D0CC500 		leal	0(,%eax,8), %ecx
 4446      000000
 4447 2aa7 8B5508   		movl	8(%ebp), %edx
 4448 2aaa 8B4514   		movl	20(%ebp), %eax
 4449 2aad 03440A10 		addl	16(%edx,%ecx), %eax
 4450 2ab1 803800   		cmpb	$0, (%eax)
 4451 2ab4 7528     		jne	L267
2747:str_merge.c   ****     {
2748:str_merge.c   ****         return strres[lang_idx].Str[ref_idx];
 4453              	LM575:
 4454 2ab6 8B5510   		movl	16(%ebp), %edx
 4455 2ab9 89D0     		movl	%edx, %eax
 4456 2abb 01C0     		addl	%eax, %eax
 4457 2abd 01D0     		addl	%edx, %eax
 4458 2abf 8D1CC500 		leal	0(,%eax,8), %ebx
 4458      000000
 4459 2ac6 8B4D08   		movl	8(%ebp), %ecx
 4460 2ac9 8B4518   		movl	24(%ebp), %eax
 4461 2acc 8D148500 		leal	0(,%eax,4), %edx
 4461      000000
 4462 2ad3 8B0419   		movl	(%ecx,%ebx), %eax
 4463 2ad6 8B0410   		movl	(%eax,%edx), %eax
 4464 2ad9 8945F8   		movl	%eax, -8(%ebp)
 4465 2adc EB15     		jmp	L266
 4466              	L267:
2749:str_merge.c   ****     }
2750:str_merge.c   ****     else
2751:str_merge.c   ****     {
2752:str_merge.c   ****         return strres_dup->Str[ref_idx];
 4468              	LM576:
 4469 2ade 8B4D0C   		movl	12(%ebp), %ecx
 4470 2ae1 8B4518   		movl	24(%ebp), %eax
 4471 2ae4 8D148500 		leal	0(,%eax,4), %edx
 4471      000000
 4472 2aeb 8B01     		movl	(%ecx), %eax
 4473 2aed 8B0410   		movl	(%eax,%edx), %eax
 4474 2af0 8945F8   		movl	%eax, -8(%ebp)
2753:str_merge.c   ****     }    
2754:str_merge.c   **** }
 4476              	LM577:
 4477              	L266:
 4478 2af3 8B45F8   		movl	-8(%ebp), %eax
 4479 2af6 83C404   		addl	$4, %esp
 4480 2af9 5B       		popl	%ebx
 4481 2afa 5D       		popl	%ebp
 4482 2afb C3       		ret
 4483              	Lscope26:
 4494              	_LookupDupStr:
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 125


2755:str_merge.c   **** 
2756:str_merge.c   **** /*****************************************************************************
2757:str_merge.c   ****  * FUNCTION
2758:str_merge.c   ****  *  LookupDupStr
2759:str_merge.c   ****  * DESCRIPTION
2760:str_merge.c   ****  *  Look up potential duplicated strings in languages excluding the current language
2761:str_merge.c   ****  *  If found :
2762:str_merge.c   ****  *  1. turn on dup flag 
2763:str_merge.c   ****  *  2. assign string reference index
2764:str_merge.c   ****  *  If found first time :
2765:str_merge.c   ****  *  1. put the string into duplicated string resource
2766:str_merge.c   ****  *  2. traverse the linked list for the duplicated string in the same language, 
2767:str_merge.c   ****  *     turn on dup flags and re-assign the correct string reference index in duplicated string reso
2768:str_merge.c   ****  * PARAMETERS
2769:str_merge.c   ****  *  strres     [INOUT] string resource
2770:str_merge.c   ****  *  strres_dup [INOUT] duplicated string resource
2771:str_merge.c   ****  *  cur_lang   [IN] current language index in process
2772:str_merge.c   ****  *  id_count   [IN] string id in current language
2773:str_merge.c   ****  *  ht         [IN] hash table
2774:str_merge.c   ****  *  hash_value [IN] hash value of the string in process
2775:str_merge.c   ****  *  tok        [IN] the string in process
2776:str_merge.c   ****  * RETURNS
2777:str_merge.c   ****  *  Return 1 if any duplicated string is found, otherwise return 0
2778:str_merge.c   ****  *****************************************************************************/
2779:str_merge.c   **** static int LookupDupStr(StrRes *strres, DupStrRes *strres_dup, int cur_lang, int id_count, struct H
2780:str_merge.c   **** {
 4496              	LM578:
 4497 2afc 55       		pushl	%ebp
 4498 2afd 89E5     		movl	%esp, %ebp
 4499 2aff 57       		pushl	%edi
 4500 2b00 56       		pushl	%esi
 4501 2b01 53       		pushl	%ebx
 4502 2b02 83EC2C   		subl	$44, %esp
2781:str_merge.c   ****     /*----------------------------------------------------------------*/
2782:str_merge.c   ****     /* Local Variables                                                */
2783:str_merge.c   ****     /*----------------------------------------------------------------*/
2784:str_merge.c   ****     struct HashItem *temp = NULL;   
 4504              	LM579:
 4505              	LBB36:
 4506 2b05 C745F000 		movl	$0, -16(%ebp)
 4506      000000
2785:str_merge.c   ****     wchar_t *str; 
2786:str_merge.c   ****     int lang_idx, ref_idx;    
2787:str_merge.c   **** 
2788:str_merge.c   ****     /*----------------------------------------------------------------*/
2789:str_merge.c   ****     /* Code Body                                                      */
2790:str_merge.c   ****     /*----------------------------------------------------------------*/
2791:str_merge.c   ****     for (lang_idx = 0; lang_idx < mtk_gMaxDeployedLangs; lang_idx++)
 4508              	LM580:
 4509 2b0c C745E800 		movl	$0, -24(%ebp)
 4509      000000
 4510              	L270:
 4511 2b13 0FB70500 		movzwl	_mtk_gMaxDeployedLangs, %eax
 4511      000000
 4512 2b1a 3945E8   		cmpl	%eax, -24(%ebp)
 4513 2b1d 7C05     		jl	L273
 4514 2b1f E93A0300 		jmp	L271
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 126


 4514      00
 4515              	L273:
2792:str_merge.c   ****     {
2793:str_merge.c   ****         if (lang_idx != cur_lang && mtk_gLanguageFlag[lang_idx])
 4517              	LM581:
 4518 2b24 8B45E8   		movl	-24(%ebp), %eax
 4519 2b27 3B4510   		cmpl	16(%ebp), %eax
 4520 2b2a 0F842403 		je	L272
 4520      0000
 4521 2b30 8B45E8   		movl	-24(%ebp), %eax
 4522 2b33 8D148500 		leal	0(,%eax,4), %edx
 4522      000000
 4523 2b3a A1B80000 		movl	_mtk_gLanguageFlag, %eax
 4523      00
 4524 2b3f 833C1000 		cmpl	$0, (%eax,%edx)
 4525 2b43 0F840B03 		je	L272
 4525      0000
2794:str_merge.c   ****         {
2795:str_merge.c   ****             if (ht[lang_idx][hash_value].pointer != -1)
 4527              	LM582:
 4528 2b49 8B45E8   		movl	-24(%ebp), %eax
 4529 2b4c 8D1C8500 		leal	0(,%eax,4), %ebx
 4529      000000
 4530 2b53 8B4D18   		movl	24(%ebp), %ecx
 4531 2b56 8B451C   		movl	28(%ebp), %eax
 4532 2b59 8D14C500 		leal	0(,%eax,8), %edx
 4532      000000
 4533 2b60 8B0419   		movl	(%ecx,%ebx), %eax
 4534 2b63 833C10FF 		cmpl	$-1, (%eax,%edx)
 4535 2b67 0F84E702 		je	L272
 4535      0000
2796:str_merge.c   ****             {
2797:str_merge.c   ****                 /* there is a string with the same hash value in another language */
2798:str_merge.c   ****                 temp = &ht[lang_idx][hash_value];
 4537              	LM583:
 4538 2b6d 8B45E8   		movl	-24(%ebp), %eax
 4539 2b70 8D0C8500 		leal	0(,%eax,4), %ecx
 4539      000000
 4540 2b77 8B5518   		movl	24(%ebp), %edx
 4541 2b7a 8B451C   		movl	28(%ebp), %eax
 4542 2b7d C1E003   		sall	$3, %eax
 4543 2b80 03040A   		addl	(%edx,%ecx), %eax
 4544 2b83 8945F0   		movl	%eax, -16(%ebp)
2799:str_merge.c   ****                 while (temp != NULL)
 4546              	LM584:
 4547              	L276:
 4548 2b86 837DF000 		cmpl	$0, -16(%ebp)
 4549 2b8a 7505     		jne	L278
 4550 2b8c E9C30200 		jmp	L272
 4550      00
 4551              	L278:
2800:str_merge.c   ****                 {
2801:str_merge.c   ****                     ref_idx = strres[lang_idx].StrRef[temp->pointer];
 4553              	LM585:
 4554 2b91 8B55E8   		movl	-24(%ebp), %edx
 4555 2b94 89D0     		movl	%edx, %eax
 4556 2b96 01C0     		addl	%eax, %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 127


 4557 2b98 01D0     		addl	%edx, %eax
 4558 2b9a 8D1CC500 		leal	0(,%eax,8), %ebx
 4558      000000
 4559 2ba1 8B4D08   		movl	8(%ebp), %ecx
 4560 2ba4 8B45F0   		movl	-16(%ebp), %eax
 4561 2ba7 8B00     		movl	(%eax), %eax
 4562 2ba9 8D148500 		leal	0(,%eax,4), %edx
 4562      000000
 4563 2bb0 8B441904 		movl	4(%ecx,%ebx), %eax
 4564 2bb4 8B0410   		movl	(%eax,%edx), %eax
 4565 2bb7 8945E4   		movl	%eax, -28(%ebp)
2802:str_merge.c   ****                     str = GetStrByRef(strres, strres_dup, lang_idx, temp->pointer, ref_idx);
 4567              	LM586:
 4568 2bba 8B45E4   		movl	-28(%ebp), %eax
 4569 2bbd 89442410 		movl	%eax, 16(%esp)
 4570 2bc1 8B45F0   		movl	-16(%ebp), %eax
 4571 2bc4 8B00     		movl	(%eax), %eax
 4572 2bc6 8944240C 		movl	%eax, 12(%esp)
 4573 2bca 8B45E8   		movl	-24(%ebp), %eax
 4574 2bcd 89442408 		movl	%eax, 8(%esp)
 4575 2bd1 8B450C   		movl	12(%ebp), %eax
 4576 2bd4 89442404 		movl	%eax, 4(%esp)
 4577 2bd8 8B4508   		movl	8(%ebp), %eax
 4578 2bdb 890424   		movl	%eax, (%esp)
 4579 2bde E8ADFEFF 		call	_GetStrByRef
 4579      FF
 4580 2be3 8945EC   		movl	%eax, -20(%ebp)
2803:str_merge.c   ****                     if (wcscmp(tok, str) == 0)
 4582              	LM587:
 4583 2be6 8B45EC   		movl	-20(%ebp), %eax
 4584 2be9 89442404 		movl	%eax, 4(%esp)
 4585 2bed 8B4520   		movl	32(%ebp), %eax
 4586 2bf0 890424   		movl	%eax, (%esp)
 4587 2bf3 E8000000 		call	_wcscmp
 4587      00
 4588 2bf8 85C0     		testl	%eax, %eax
 4589 2bfa 0F854602 		jne	L279
 4589      0000
2804:str_merge.c   ****                     {
2805:str_merge.c   ****                         /* they are duplicated strings */
2806:str_merge.c   ****                         strres[cur_lang].is_dup[id_count] = 1;
 4591              	LM588:
 4592 2c00 8B5510   		movl	16(%ebp), %edx
 4593 2c03 89D0     		movl	%edx, %eax
 4594 2c05 01C0     		addl	%eax, %eax
 4595 2c07 01D0     		addl	%edx, %eax
 4596 2c09 8D0CC500 		leal	0(,%eax,8), %ecx
 4596      000000
 4597 2c10 8B5508   		movl	8(%ebp), %edx
 4598 2c13 8B4514   		movl	20(%ebp), %eax
 4599 2c16 03440A10 		addl	16(%edx,%ecx), %eax
 4600 2c1a C60001   		movb	$1, (%eax)
2807:str_merge.c   ****                         strres[cur_lang].StrRef[id_count] = ref_idx;
 4602              	LM589:
 4603 2c1d 8B5510   		movl	16(%ebp), %edx
 4604 2c20 89D0     		movl	%edx, %eax
 4605 2c22 01C0     		addl	%eax, %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 128


 4606 2c24 01D0     		addl	%edx, %eax
 4607 2c26 8D1CC500 		leal	0(,%eax,8), %ebx
 4607      000000
 4608 2c2d 8B5508   		movl	8(%ebp), %edx
 4609 2c30 8B4514   		movl	20(%ebp), %eax
 4610 2c33 8D0C8500 		leal	0(,%eax,4), %ecx
 4610      000000
 4611 2c3a 8B541A04 		movl	4(%edx,%ebx), %edx
 4612 2c3e 8B45E4   		movl	-28(%ebp), %eax
 4613 2c41 89040A   		movl	%eax, (%edx,%ecx)
2808:str_merge.c   ****                         /* check if this duplicated string has already been found before */
2809:str_merge.c   ****                         if (!strres[lang_idx].is_dup[temp->pointer])
 4615              	LM590:
 4616 2c44 8B55E8   		movl	-24(%ebp), %edx
 4617 2c47 89D0     		movl	%edx, %eax
 4618 2c49 01C0     		addl	%eax, %eax
 4619 2c4b 01D0     		addl	%edx, %eax
 4620 2c4d 8D0CC500 		leal	0(,%eax,8), %ecx
 4620      000000
 4621 2c54 8B5508   		movl	8(%ebp), %edx
 4622 2c57 8B45F0   		movl	-16(%ebp), %eax
 4623 2c5a 8B00     		movl	(%eax), %eax
 4624 2c5c 03440A10 		addl	16(%edx,%ecx), %eax
 4625 2c60 803800   		cmpb	$0, (%eax)
 4626 2c63 0F85D401 		jne	L280
 4626      0000
2810:str_merge.c   ****                         {
2811:str_merge.c   ****                             /* first time found */
2812:str_merge.c   ****                             strres[lang_idx].is_dup[temp->pointer] = 1;
 4628              	LM591:
 4629 2c69 8B55E8   		movl	-24(%ebp), %edx
 4630 2c6c 89D0     		movl	%edx, %eax
 4631 2c6e 01C0     		addl	%eax, %eax
 4632 2c70 01D0     		addl	%edx, %eax
 4633 2c72 8D0CC500 		leal	0(,%eax,8), %ecx
 4633      000000
 4634 2c79 8B5508   		movl	8(%ebp), %edx
 4635 2c7c 8B45F0   		movl	-16(%ebp), %eax
 4636 2c7f 8B00     		movl	(%eax), %eax
 4637 2c81 03440A10 		addl	16(%edx,%ecx), %eax
 4638 2c85 C60001   		movb	$1, (%eax)
2813:str_merge.c   ****                             strres[lang_idx].StrRef[temp->pointer] = strres_dup->MaxNum;
 4640              	LM592:
 4641 2c88 8B55E8   		movl	-24(%ebp), %edx
 4642 2c8b 89D0     		movl	%edx, %eax
 4643 2c8d 01C0     		addl	%eax, %eax
 4644 2c8f 01D0     		addl	%edx, %eax
 4645 2c91 8D1CC500 		leal	0(,%eax,8), %ebx
 4645      000000
 4646 2c98 8B5508   		movl	8(%ebp), %edx
 4647 2c9b 8B45F0   		movl	-16(%ebp), %eax
 4648 2c9e 8B00     		movl	(%eax), %eax
 4649 2ca0 8D0C8500 		leal	0(,%eax,4), %ecx
 4649      000000
 4650 2ca7 8B541A04 		movl	4(%edx,%ebx), %edx
 4651 2cab 8B450C   		movl	12(%ebp), %eax
 4652 2cae 8B4004   		movl	4(%eax), %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 129


 4653 2cb1 89040A   		movl	%eax, (%edx,%ecx)
2814:str_merge.c   ****                             strres[lang_idx].TotalLength -= wcslen(tok) * 2 + 2;
 4655              	LM593:
 4656 2cb4 8B55E8   		movl	-24(%ebp), %edx
 4657 2cb7 89D0     		movl	%edx, %eax
 4658 2cb9 01C0     		addl	%eax, %eax
 4659 2cbb 01D0     		addl	%edx, %eax
 4660 2cbd 8D3CC500 		leal	0(,%eax,8), %edi
 4660      000000
 4661 2cc4 8B4508   		movl	8(%ebp), %eax
 4662 2cc7 8945DC   		movl	%eax, -36(%ebp)
 4663 2cca 8B55E8   		movl	-24(%ebp), %edx
 4664 2ccd 89D0     		movl	%edx, %eax
 4665 2ccf 01C0     		addl	%eax, %eax
 4666 2cd1 01D0     		addl	%edx, %eax
 4667 2cd3 8D1CC500 		leal	0(,%eax,8), %ebx
 4667      000000
 4668 2cda 8B7508   		movl	8(%ebp), %esi
 4669 2cdd 8B4520   		movl	32(%ebp), %eax
 4670 2ce0 890424   		movl	%eax, (%esp)
 4671 2ce3 E8000000 		call	_wcslen
 4671      00
 4672 2ce8 8D1400   		leal	(%eax,%eax), %edx
 4673 2ceb 8B441E14 		movl	20(%esi,%ebx), %eax
 4674 2cef 29D0     		subl	%edx, %eax
 4675 2cf1 83E802   		subl	$2, %eax
 4676 2cf4 8B55DC   		movl	-36(%ebp), %edx
 4677 2cf7 89443A14 		movl	%eax, 20(%edx,%edi)
2815:str_merge.c   ****                             strres[cur_lang].StrRef[id_count] = strres_dup->MaxNum;
 4679              	LM594:
 4680 2cfb 8B5510   		movl	16(%ebp), %edx
 4681 2cfe 89D0     		movl	%edx, %eax
 4682 2d00 01C0     		addl	%eax, %eax
 4683 2d02 01D0     		addl	%edx, %eax
 4684 2d04 8D1CC500 		leal	0(,%eax,8), %ebx
 4684      000000
 4685 2d0b 8B5508   		movl	8(%ebp), %edx
 4686 2d0e 8B4514   		movl	20(%ebp), %eax
 4687 2d11 8D0C8500 		leal	0(,%eax,4), %ecx
 4687      000000
 4688 2d18 8B541A04 		movl	4(%edx,%ebx), %edx
 4689 2d1c 8B450C   		movl	12(%ebp), %eax
 4690 2d1f 8B4004   		movl	4(%eax), %eax
 4691 2d22 89040A   		movl	%eax, (%edx,%ecx)
2816:str_merge.c   ****                             strres_dup->Str[strres_dup->MaxNum] = strres[lang_idx].Str[ref_idx];
 4693              	LM595:
 4694 2d25 8B550C   		movl	12(%ebp), %edx
 4695 2d28 8B450C   		movl	12(%ebp), %eax
 4696 2d2b 8B4004   		movl	4(%eax), %eax
 4697 2d2e 8D348500 		leal	0(,%eax,4), %esi
 4697      000000
 4698 2d35 8B3A     		movl	(%edx), %edi
 4699 2d37 8B55E8   		movl	-24(%ebp), %edx
 4700 2d3a 89D0     		movl	%edx, %eax
 4701 2d3c 01C0     		addl	%eax, %eax
 4702 2d3e 01D0     		addl	%edx, %eax
 4703 2d40 8D1CC500 		leal	0(,%eax,8), %ebx
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 130


 4703      000000
 4704 2d47 8B4D08   		movl	8(%ebp), %ecx
 4705 2d4a 8B45E4   		movl	-28(%ebp), %eax
 4706 2d4d 8D148500 		leal	0(,%eax,4), %edx
 4706      000000
 4707 2d54 8B0419   		movl	(%ecx,%ebx), %eax
 4708 2d57 8B0410   		movl	(%eax,%edx), %eax
 4709 2d5a 890437   		movl	%eax, (%edi,%esi)
2817:str_merge.c   ****                             strres[lang_idx].Str[ref_idx] = NULL;
 4711              	LM596:
 4712 2d5d 8B55E8   		movl	-24(%ebp), %edx
 4713 2d60 89D0     		movl	%edx, %eax
 4714 2d62 01C0     		addl	%eax, %eax
 4715 2d64 01D0     		addl	%edx, %eax
 4716 2d66 8D1CC500 		leal	0(,%eax,8), %ebx
 4716      000000
 4717 2d6d 8B4D08   		movl	8(%ebp), %ecx
 4718 2d70 8B45E4   		movl	-28(%ebp), %eax
 4719 2d73 8D148500 		leal	0(,%eax,4), %edx
 4719      000000
 4720 2d7a 8B0419   		movl	(%ecx,%ebx), %eax
 4721 2d7d C7041000 		movl	$0, (%eax,%edx)
 4721      000000
2818:str_merge.c   ****                             /* traverse the linked list, turn on dup flags and 
2819:str_merge.c   ****                              * change string reference index for the dup strings in the same lang
2820:str_merge.c   ****                              */
2821:str_merge.c   ****                             while (temp->next != NULL)
 4723              	LM597:
 4724              	L281:
 4725 2d84 8B45F0   		movl	-16(%ebp), %eax
 4726 2d87 83780400 		cmpl	$0, 4(%eax)
 4727 2d8b 7505     		jne	L283
 4728 2d8d E9A50000 		jmp	L282
 4728      00
 4729              	L283:
2822:str_merge.c   ****                             {
2823:str_merge.c   ****                                 temp = temp->next;
 4731              	LM598:
 4732 2d92 8B45F0   		movl	-16(%ebp), %eax
 4733 2d95 8B4004   		movl	4(%eax), %eax
 4734 2d98 8945F0   		movl	%eax, -16(%ebp)
2824:str_merge.c   ****                                 if ((!strres[lang_idx].is_dup[temp->pointer])
 4736              	LM599:
 4737 2d9b 8B55E8   		movl	-24(%ebp), %edx
 4738 2d9e 89D0     		movl	%edx, %eax
 4739 2da0 01C0     		addl	%eax, %eax
 4740 2da2 01D0     		addl	%edx, %eax
 4741 2da4 8D0CC500 		leal	0(,%eax,8), %ecx
 4741      000000
 4742 2dab 8B5508   		movl	8(%ebp), %edx
 4743 2dae 8B45F0   		movl	-16(%ebp), %eax
 4744 2db1 8B00     		movl	(%eax), %eax
 4745 2db3 03440A10 		addl	16(%edx,%ecx), %eax
 4746 2db7 803800   		cmpb	$0, (%eax)
 4747 2dba 75C8     		jne	L281
 4748 2dbc 8B55E8   		movl	-24(%ebp), %edx
 4749 2dbf 89D0     		movl	%edx, %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 131


 4750 2dc1 01C0     		addl	%eax, %eax
 4751 2dc3 01D0     		addl	%edx, %eax
 4752 2dc5 8D1CC500 		leal	0(,%eax,8), %ebx
 4752      000000
 4753 2dcc 8B4D08   		movl	8(%ebp), %ecx
 4754 2dcf 8B45F0   		movl	-16(%ebp), %eax
 4755 2dd2 8B00     		movl	(%eax), %eax
 4756 2dd4 8D148500 		leal	0(,%eax,4), %edx
 4756      000000
 4757 2ddb 8B441904 		movl	4(%ecx,%ebx), %eax
 4758 2ddf 8B0410   		movl	(%eax,%edx), %eax
 4759 2de2 3B45E4   		cmpl	-28(%ebp), %eax
 4760 2de5 759D     		jne	L281
2825:str_merge.c   ****                                     && (strres[lang_idx].StrRef[temp->pointer] == ref_idx))
2826:str_merge.c   ****                                 {
2827:str_merge.c   ****                                     strres[lang_idx].is_dup[temp->pointer] = 1;
 4762              	LM600:
 4763 2de7 8B55E8   		movl	-24(%ebp), %edx
 4764 2dea 89D0     		movl	%edx, %eax
 4765 2dec 01C0     		addl	%eax, %eax
 4766 2dee 01D0     		addl	%edx, %eax
 4767 2df0 8D0CC500 		leal	0(,%eax,8), %ecx
 4767      000000
 4768 2df7 8B5508   		movl	8(%ebp), %edx
 4769 2dfa 8B45F0   		movl	-16(%ebp), %eax
 4770 2dfd 8B00     		movl	(%eax), %eax
 4771 2dff 03440A10 		addl	16(%edx,%ecx), %eax
 4772 2e03 C60001   		movb	$1, (%eax)
2828:str_merge.c   ****                                     strres[lang_idx].StrRef[temp->pointer] = strres_dup->MaxNum;   
 4774              	LM601:
 4775 2e06 8B55E8   		movl	-24(%ebp), %edx
 4776 2e09 89D0     		movl	%edx, %eax
 4777 2e0b 01C0     		addl	%eax, %eax
 4778 2e0d 01D0     		addl	%edx, %eax
 4779 2e0f 8D1CC500 		leal	0(,%eax,8), %ebx
 4779      000000
 4780 2e16 8B5508   		movl	8(%ebp), %edx
 4781 2e19 8B45F0   		movl	-16(%ebp), %eax
 4782 2e1c 8B00     		movl	(%eax), %eax
 4783 2e1e 8D0C8500 		leal	0(,%eax,4), %ecx
 4783      000000
 4784 2e25 8B541A04 		movl	4(%edx,%ebx), %edx
 4785 2e29 8B450C   		movl	12(%ebp), %eax
 4786 2e2c 8B4004   		movl	4(%eax), %eax
 4787 2e2f 89040A   		movl	%eax, (%edx,%ecx)
 4788 2e32 E94DFFFF 		jmp	L281
 4788      FF
 4789              	L282:
2829:str_merge.c   ****                                 }
2830:str_merge.c   ****                             }
2831:str_merge.c   ****                             strres_dup->MaxNum++;
 4791              	LM602:
 4792 2e37 8B450C   		movl	12(%ebp), %eax
 4793 2e3a FF4004   		incl	4(%eax)
 4794              	L280:
2832:str_merge.c   ****                         }
2833:str_merge.c   ****                         return 1;
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 132


 4796              	LM603:
 4797 2e3d C745E001 		movl	$1, -32(%ebp)
 4797      000000
 4798 2e44 EB1F     		jmp	L269
 4799              	L279:
2834:str_merge.c   ****                     }
2835:str_merge.c   ****                     temp = temp->next;
 4801              	LM604:
 4802 2e46 8B45F0   		movl	-16(%ebp), %eax
 4803 2e49 8B4004   		movl	4(%eax), %eax
 4804 2e4c 8945F0   		movl	%eax, -16(%ebp)
 4805 2e4f E932FDFF 		jmp	L276
 4805      FF
 4807              	LM605:
 4808              	L272:
 4809 2e54 8D45E8   		leal	-24(%ebp), %eax
 4810 2e57 FF00     		incl	(%eax)
 4811 2e59 E9B5FCFF 		jmp	L270
 4811      FF
 4812              	L271:
2836:str_merge.c   ****                 }
2837:str_merge.c   ****             }
2838:str_merge.c   ****         }
2839:str_merge.c   ****     }   
2840:str_merge.c   ****     return 0;      
 4814              	LM606:
 4815 2e5e C745E000 		movl	$0, -32(%ebp)
 4815      000000
2841:str_merge.c   **** }
 4817              	LM607:
 4818              	L269:
 4819              	LBE36:
 4820 2e65 8B45E0   		movl	-32(%ebp), %eax
 4821 2e68 83C42C   		addl	$44, %esp
 4822 2e6b 5B       		popl	%ebx
 4823 2e6c 5E       		popl	%esi
 4824 2e6d 5F       		popl	%edi
 4825 2e6e 5D       		popl	%ebp
 4826 2e6f C3       		ret
 4833              	Lscope27:
 4835              	LC47:
 4836 2e70 6D616C6C 		.ascii "malloc fail strres \0"
 4836      6F632066 
 4836      61696C20 
 4836      73747272 
 4836      65732000 
 4837              	LC48:
 4838 2e84 6D616C6C 		.ascii "malloc fail ht \0"
 4838      6F632066 
 4838      61696C20 
 4838      68742000 
 4839              	LC49:
 4840 2e94 6D616C6C 		.ascii "malloc fail strres_dup \0"
 4840      6F632066 
 4840      61696C20 
 4840      73747272 
 4840      65735F64 
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 133


 4841              	LC50:
 4842 2eac 6D616C6C 		.ascii "malloc fail strres_dup->Str \0"
 4842      6F632066 
 4842      61696C20 
 4842      73747272 
 4842      65735F64 
 4843 2ec9 90909090 		.align 32
 4843      90909090 
 4843      90909090 
 4843      90909090 
 4843      90909090 
 4844              	LC51:
 4845 2ee0 6D616C6C 		.ascii "malloc fail mtk_gLanguageFlag \0"
 4845      6F632066 
 4845      61696C20 
 4845      6D746B5F 
 4845      674C616E 
 4846 2eff 90       		.align 32
 4847              	LC52:
 4848 2f00 6D616C6C 		.ascii "malloc fail strres[LangIndex].Str \0"
 4848      6F632066 
 4848      61696C20 
 4848      73747272 
 4848      65735B4C 
 4849 2f23 90909090 		.align 32
 4849      90909090 
 4849      90909090 
 4849      90909090 
 4849      90909090 
 4850              	LC53:
 4851 2f40 6D616C6C 		.ascii "malloc fail strres[LangIndex].StrRef \0"
 4851      6F632066 
 4851      61696C20 
 4851      73747272 
 4851      65735B4C 
 4852 2f66 90909090 		.align 32
 4852      90909090 
 4852      90909090 
 4852      90909090 
 4852      90909090 
 4853              	LC54:
 4854 2f80 6D616C6C 		.ascii "malloc fail strres[LangIndex].is_dup \0"
 4854      6F632066 
 4854      61696C20 
 4854      73747272 
 4854      65735B4C 
 4855              	LC56:
 4856 2fa6 6D616C6C 		.ascii "malloc fail ht[LangIndex] \0"
 4856      6F632066 
 4856      61696C20 
 4856      68745B4C 
 4856      616E6749 
 4857 2fc1 90909090 		.align 32
 4857      90909090 
 4857      90909090 
 4857      90909090 
 4857      90909090 
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 134


 4858              	LC57:
 4859 2fe0 4E6F2052 		.ascii "No REF item found for String: %d\0"
 4859      45462069 
 4859      74656D20 
 4859      666F756E 
 4859      6420666F 
 4860 3001 90909090 		.align 32
 4860      90909090 
 4860      90909090 
 4860      90909090 
 4860      90909090 
 4861              	LC58:
 4862 3020 6D616C6C 		.ascii "malloc fail strres[LangIndex].Str[i] \0"
 4862      6F632066 
 4862      61696C20 
 4862      73747272 
 4862      65735B4C 
 4863              	LC59:
 4864 3046 6D616C6C 		.ascii "malloc fail extra \0"
 4864      6F632066 
 4864      61696C20 
 4864      65787472 
 4864      612000
 4865 3059 8DB42600 		.align 8
 4865      000000
 4866              	LC55:
 4867 3060 9A999999 		.long	-1717986918
 4868 3064 9999F13F 		.long	1072798105
 4872              	_GetStrResList:
2842:str_merge.c   **** 
2843:str_merge.c   **** 
2844:str_merge.c   **** /*****************************************************************************
2845:str_merge.c   ****  * FUNCTION
2846:str_merge.c   ****  *  GetStrResList
2847:str_merge.c   ****  * DESCRIPTION
2848:str_merge.c   ****  *  Generate a non-duplicate string list from input file, using hash table
2849:str_merge.c   ****  * PARAMETERS
2850:str_merge.c   ****  *  result  [OUT]
2851:str_merge.c   ****  * RETURNS
2852:str_merge.c   ****  *  Return number of all populated string IDs
2853:str_merge.c   ****  *****************************************************************************/
2854:str_merge.c   **** static int GetStrResList(StrResSet *result)
2855:str_merge.c   **** {
 4874              	LM608:
 4875 3068 55       		pushl	%ebp
 4876 3069 89E5     		movl	%esp, %ebp
 4877 306b 57       		pushl	%edi
 4878 306c 56       		pushl	%esi
 4879 306d 53       		pushl	%ebx
 4880 306e 83EC7C   		subl	$124, %esp
2856:str_merge.c   ****     /*----------------------------------------------------------------*/
2857:str_merge.c   ****     /* Local Variables                                                */
2858:str_merge.c   ****     /*----------------------------------------------------------------*/
2859:str_merge.c   ****     struct HashItem **ht = NULL, *extra = NULL, *temp = NULL;
 4882              	LM609:
 4883              	LBB37:
 4884 3071 C745F000 		movl	$0, -16(%ebp)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 135


 4884      000000
 4885 3078 C745EC00 		movl	$0, -20(%ebp)
 4885      000000
 4886 307f C745E800 		movl	$0, -24(%ebp)
 4886      000000
2860:str_merge.c   ****     struct StrRes *strres = NULL;
 4888              	LM610:
 4889 3086 C745E400 		movl	$0, -28(%ebp)
 4889      000000
2861:str_merge.c   ****     wchar_t *tok = NULL;
 4891              	LM611:
 4892 308d C745E000 		movl	$0, -32(%ebp)
 4892      000000
2862:str_merge.c   ****     wchar_t *tok_eng = NULL;    
 4894              	LM612:
 4895 3094 C745DC00 		movl	$0, -36(%ebp)
 4895      000000
2863:str_merge.c   ****     int i = 0, j = 0, k = 0, h = 0, l = 0;
 4897              	LM613:
 4898 309b C745D800 		movl	$0, -40(%ebp)
 4898      000000
 4899 30a2 C745D400 		movl	$0, -44(%ebp)
 4899      000000
 4900 30a9 C745D000 		movl	$0, -48(%ebp)
 4900      000000
 4901 30b0 C745CC00 		movl	$0, -52(%ebp)
 4901      000000
 4902 30b7 C745C800 		movl	$0, -56(%ebp)
 4902      000000
2864:str_merge.c   ****     int LangIndex = 0;
 4904              	LM614:
 4905 30be C745C400 		movl	$0, -60(%ebp)
 4905      000000
2865:str_merge.c   ****     int hash_range = 0;
 4907              	LM615:
 4908 30c5 C745C000 		movl	$0, -64(%ebp)
 4908      000000
2866:str_merge.c   ****     int ref_item_found = 0;
 4910              	LM616:
 4911 30cc C745BC00 		movl	$0, -68(%ebp)
 4911      000000
2867:str_merge.c   **** 
2868:str_merge.c   ****   #ifdef MEM_REF_LIST_OPT
2869:str_merge.c   ****       RefListItem * tmp_list_item = NULL; /* temp buffer of ref list item */
 4913              	LM617:
 4914 30d3 C745B800 		movl	$0, -72(%ebp)
 4914      000000
2870:str_merge.c   ****   #endif /*MEM_REF_LIST_OPT*/
2871:str_merge.c   **** 
2872:str_merge.c   ****     /* add a data structure to record duplicated strings in different language */
2873:str_merge.c   ****     struct DupStrRes *strres_dup;
2874:str_merge.c   **** 
2875:str_merge.c   ****     U16 nStrId;
2876:str_merge.c   **** 
2877:str_merge.c   ****     /*----------------------------------------------------------------*/
2878:str_merge.c   ****     /* Code Body                                                      */
2879:str_merge.c   ****     /*----------------------------------------------------------------*/
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 136


2880:str_merge.c   ****     strres = malloc(sizeof(struct StrRes) * mtk_gMaxDeployedLangs);
 4916              	LM618:
 4917 30da 0FB71500 		movzwl	_mtk_gMaxDeployedLangs, %edx
 4917      000000
 4918 30e1 89D0     		movl	%edx, %eax
 4919 30e3 01C0     		addl	%eax, %eax
 4920 30e5 01D0     		addl	%edx, %eax
 4921 30e7 C1E003   		sall	$3, %eax
 4922 30ea 890424   		movl	%eax, (%esp)
 4923 30ed E8000000 		call	_malloc
 4923      00
 4924 30f2 8945E4   		movl	%eax, -28(%ebp)
2881:str_merge.c   ****     if (strres == NULL) {STRMERG_LOG_E("malloc fail strres "); exit(2);}
 4926              	LM619:
 4927 30f5 837DE400 		cmpl	$0, -28(%ebp)
 4928 30f9 7528     		jne	L286
 4929 30fb C7442408 		movl	$LC47, 8(%esp)
 4929      702E0000 
 4930 3103 C7442404 		movl	$LC3, 4(%esp)
 4930      4B040000 
 4931 310b C7042403 		movl	$3, (%esp)
 4931      000000
 4932 3112 E8000000 		call	_reslog_adaptor_log
 4932      00
 4933 3117 C7042402 		movl	$2, (%esp)
 4933      000000
 4934 311e E8000000 		call	_exit
 4934      00
 4935              	L286:
2882:str_merge.c   ****     ht = malloc(sizeof(struct HashItem *) * mtk_gMaxDeployedLangs);
 4937              	LM620:
 4938 3123 0FB70500 		movzwl	_mtk_gMaxDeployedLangs, %eax
 4938      000000
 4939 312a C1E002   		sall	$2, %eax
 4940 312d 890424   		movl	%eax, (%esp)
 4941 3130 E8000000 		call	_malloc
 4941      00
 4942 3135 8945F0   		movl	%eax, -16(%ebp)
2883:str_merge.c   ****     if (ht == NULL) {STRMERG_LOG_E("malloc fail ht "); exit(2);}
 4944              	LM621:
 4945 3138 837DF000 		cmpl	$0, -16(%ebp)
 4946 313c 7528     		jne	L287
 4947 313e C7442408 		movl	$LC48, 8(%esp)
 4947      842E0000 
 4948 3146 C7442404 		movl	$LC3, 4(%esp)
 4948      4B040000 
 4949 314e C7042403 		movl	$3, (%esp)
 4949      000000
 4950 3155 E8000000 		call	_reslog_adaptor_log
 4950      00
 4951 315a C7042402 		movl	$2, (%esp)
 4951      000000
 4952 3161 E8000000 		call	_exit
 4952      00
 4953              	L287:
2884:str_merge.c   ****     /* allocate memory */
2885:str_merge.c   ****     strres_dup = malloc(sizeof(struct DupStrRes));
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 137


 4955              	LM622:
 4956 3166 C7042408 		movl	$8, (%esp)
 4956      000000
 4957 316d E8000000 		call	_malloc
 4957      00
 4958 3172 8945B4   		movl	%eax, -76(%ebp)
2886:str_merge.c   ****     if (strres_dup == NULL) {STRMERG_LOG_E("malloc fail strres_dup "); exit(2);}
 4960              	LM623:
 4961 3175 837DB400 		cmpl	$0, -76(%ebp)
 4962 3179 7528     		jne	L288
 4963 317b C7442408 		movl	$LC49, 8(%esp)
 4963      942E0000 
 4964 3183 C7442404 		movl	$LC3, 4(%esp)
 4964      4B040000 
 4965 318b C7042403 		movl	$3, (%esp)
 4965      000000
 4966 3192 E8000000 		call	_reslog_adaptor_log
 4966      00
 4967 3197 C7042402 		movl	$2, (%esp)
 4967      000000
 4968 319e E8000000 		call	_exit
 4968      00
 4969              	L288:
2887:str_merge.c   ****     strres_dup->Str = (wchar_t **)malloc(sizeof(wchar_t *) * CurrMaxTransStrId * 3);
 4971              	LM624:
 4972 31a3 8B5DB4   		movl	-76(%ebp), %ebx
 4973 31a6 0FB71500 		movzwl	_CurrMaxTransStrId, %edx
 4973      000000
 4974 31ad 89D0     		movl	%edx, %eax
 4975 31af 01C0     		addl	%eax, %eax
 4976 31b1 01D0     		addl	%edx, %eax
 4977 31b3 C1E002   		sall	$2, %eax
 4978 31b6 890424   		movl	%eax, (%esp)
 4979 31b9 E8000000 		call	_malloc
 4979      00
 4980 31be 8903     		movl	%eax, (%ebx)
2888:str_merge.c   ****     if (strres_dup->Str == NULL) {STRMERG_LOG_E("malloc fail strres_dup->Str "); exit(2);}
 4982              	LM625:
 4983 31c0 8B45B4   		movl	-76(%ebp), %eax
 4984 31c3 833800   		cmpl	$0, (%eax)
 4985 31c6 7528     		jne	L289
 4986 31c8 C7442408 		movl	$LC50, 8(%esp)
 4986      AC2E0000 
 4987 31d0 C7442404 		movl	$LC3, 4(%esp)
 4987      4B040000 
 4988 31d8 C7042403 		movl	$3, (%esp)
 4988      000000
 4989 31df E8000000 		call	_reslog_adaptor_log
 4989      00
 4990 31e4 C7042402 		movl	$2, (%esp)
 4990      000000
 4991 31eb E8000000 		call	_exit
 4991      00
 4992              	L289:
2889:str_merge.c   ****     /* init */
2890:str_merge.c   ****     strres_dup->MaxNum = 0;
 4994              	LM626:
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 138


 4995 31f0 8B45B4   		movl	-76(%ebp), %eax
 4996 31f3 C7400400 		movl	$0, 4(%eax)
 4996      000000
2891:str_merge.c   **** 
2892:str_merge.c   ****     mtk_gLanguageFlag = malloc(sizeof(int) * mtk_gMaxDeployedLangs);
 4998              	LM627:
 4999 31fa 0FB70500 		movzwl	_mtk_gMaxDeployedLangs, %eax
 4999      000000
 5000 3201 C1E002   		sall	$2, %eax
 5001 3204 890424   		movl	%eax, (%esp)
 5002 3207 E8000000 		call	_malloc
 5002      00
 5003 320c A3B80000 		movl	%eax, _mtk_gLanguageFlag
 5003      00
2893:str_merge.c   ****     if (mtk_gLanguageFlag == NULL) {STRMERG_LOG_E("malloc fail mtk_gLanguageFlag "); exit(2);}
 5005              	LM628:
 5006 3211 833DB800 		cmpl	$0, _mtk_gLanguageFlag
 5006      000000
 5007 3218 7528     		jne	L290
 5008 321a C7442408 		movl	$LC51, 8(%esp)
 5008      E02E0000 
 5009 3222 C7442404 		movl	$LC3, 4(%esp)
 5009      4B040000 
 5010 322a C7042403 		movl	$3, (%esp)
 5010      000000
 5011 3231 E8000000 		call	_reslog_adaptor_log
 5011      00
 5012 3236 C7042402 		movl	$2, (%esp)
 5012      000000
 5013 323d E8000000 		call	_exit
 5013      00
 5014              	L290:
2894:str_merge.c   ****     for (h = 0; h < mtk_gMaxDeployedLangs; h++)
 5016              	LM629:
 5017 3242 C745CC00 		movl	$0, -52(%ebp)
 5017      000000
 5018              	L291:
 5019 3249 0FB70500 		movzwl	_mtk_gMaxDeployedLangs, %eax
 5019      000000
 5020 3250 3945CC   		cmpl	%eax, -52(%ebp)
 5021 3253 7C02     		jl	L294
 5022 3255 EB1D     		jmp	L292
 5023              	L294:
2895:str_merge.c   ****     {
2896:str_merge.c   ****         mtk_gLanguageFlag[h] = 0;
 5025              	LM630:
 5026 3257 8B45CC   		movl	-52(%ebp), %eax
 5027 325a 8D148500 		leal	0(,%eax,4), %edx
 5027      000000
 5028 3261 A1B80000 		movl	_mtk_gLanguageFlag, %eax
 5028      00
 5029 3266 C7041000 		movl	$0, (%eax,%edx)
 5029      000000
 5031              	LM631:
 5032 326d 8D45CC   		leal	-52(%ebp), %eax
 5033 3270 FF00     		incl	(%eax)
 5034 3272 EBD5     		jmp	L291
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 139


 5035              	L292:
2897:str_merge.c   ****     }
2898:str_merge.c   **** 
2899:str_merge.c   ****     for (j = 0; j < nUsedLang; j++)
 5037              	LM632:
 5038 3274 C745D400 		movl	$0, -44(%ebp)
 5038      000000
 5039              	L295:
 5040 327b 0FB70598 		movzwl	_nUsedLang, %eax
 5040      000000
 5041 3282 3945D4   		cmpl	%eax, -44(%ebp)
 5042 3285 7C05     		jl	L298
 5043 3287 E9010D00 		jmp	L296
 5043      00
 5044              	L298:
2900:str_merge.c   ****     {
2901:str_merge.c   ****         wcscpy(ref_tmp, filter_ref_ssc);
 5046              	LM633:
 5047 328c A1880000 		movl	_filter_ref_ssc, %eax
 5047      00
 5048 3291 89442404 		movl	%eax, 4(%esp)
 5049 3295 A1680000 		movl	_ref_tmp, %eax
 5049      00
 5050 329a 890424   		movl	%eax, (%esp)
 5051 329d E8000000 		call	_wcscpy
 5051      00
2902:str_merge.c   ****         tok = wcstok(ref_tmp, DELIMETER);   /* ENUM */
 5053              	LM634:
 5054 32a2 A1940100 		movl	_DELIMETER, %eax
 5054      00
 5055 32a7 89442404 		movl	%eax, 4(%esp)
 5056 32ab A1680000 		movl	_ref_tmp, %eax
 5056      00
 5057 32b0 890424   		movl	%eax, (%esp)
 5058 32b3 E8000000 		call	_wcstok
 5058      00
 5059 32b8 8945E0   		movl	%eax, -32(%ebp)
2903:str_merge.c   ****         tok = wcstok(NULL, DELIMETER);      /* MODULE NAME */
 5061              	LM635:
 5062 32bb A1940100 		movl	_DELIMETER, %eax
 5062      00
 5063 32c0 89442404 		movl	%eax, 4(%esp)
 5064 32c4 C7042400 		movl	$0, (%esp)
 5064      000000
 5065 32cb E8000000 		call	_wcstok
 5065      00
 5066 32d0 8945E0   		movl	%eax, -32(%ebp)
2904:str_merge.c   ****         tok = wcstok(NULL, DELIMETER);      /* MAX LENGTH */
 5068              	LM636:
 5069 32d3 A1940100 		movl	_DELIMETER, %eax
 5069      00
 5070 32d8 89442404 		movl	%eax, 4(%esp)
 5071 32dc C7042400 		movl	$0, (%esp)
 5071      000000
 5072 32e3 E8000000 		call	_wcstok
 5072      00
 5073 32e8 8945E0   		movl	%eax, -32(%ebp)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 140


2905:str_merge.c   ****         tok = wcstok(NULL, DELIMETER);      /* DESCRIPTION */
 5075              	LM637:
 5076 32eb A1940100 		movl	_DELIMETER, %eax
 5076      00
 5077 32f0 89442404 		movl	%eax, 4(%esp)
 5078 32f4 C7042400 		movl	$0, (%esp)
 5078      000000
 5079 32fb E8000000 		call	_wcstok
 5079      00
 5080 3300 8945E0   		movl	%eax, -32(%ebp)
2906:str_merge.c   **** 
2907:str_merge.c   ****         /* change to corresponding language column according to j */
2908:str_merge.c   ****         for (k = 0; k < j + 1; k++)
 5082              	LM638:
 5083 3303 C745D000 		movl	$0, -48(%ebp)
 5083      000000
 5084              	L299:
 5085 330a 8B45D4   		movl	-44(%ebp), %eax
 5086 330d 40       		incl	%eax
 5087 330e 3945D0   		cmpl	%eax, -48(%ebp)
 5088 3311 7C02     		jl	L302
 5089 3313 EB1F     		jmp	L300
 5090              	L302:
2909:str_merge.c   ****         {
2910:str_merge.c   ****             tok = wcstok(NULL, DELIMETER);
 5092              	LM639:
 5093 3315 A1940100 		movl	_DELIMETER, %eax
 5093      00
 5094 331a 89442404 		movl	%eax, 4(%esp)
 5095 331e C7042400 		movl	$0, (%esp)
 5095      000000
 5096 3325 E8000000 		call	_wcstok
 5096      00
 5097 332a 8945E0   		movl	%eax, -32(%ebp)
 5099              	LM640:
 5100 332d 8D45D0   		leal	-48(%ebp), %eax
 5101 3330 FF00     		incl	(%eax)
 5102 3332 EBD6     		jmp	L299
 5103              	L300:
2911:str_merge.c   ****         }
2912:str_merge.c   ****         ASSERT(tok != NULL);
 5105              	LM641:
 5106 3334 837DE000 		cmpl	$0, -32(%ebp)
 5107 3338 7502     		jne	L307
 5108              	L304:
 5109 333a EBFE     		jmp	L304
 5110              	L307:
2913:str_merge.c   ****         LangIndex = ifLanguageUsed(tok);
 5112              	LM642:
 5113 333c 8B45E0   		movl	-32(%ebp), %eax
 5114 333f 890424   		movl	%eax, (%esp)
 5115 3342 E8D6F6FF 		call	_ifLanguageUsed
 5115      FF
 5116 3347 8945C4   		movl	%eax, -60(%ebp)
2914:str_merge.c   **** 
2915:str_merge.c   ****         if (LangIndex < 0) /* the language is not used in font resource */
 5118              	LM643:
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 141


 5119 334a 837DC400 		cmpl	$0, -60(%ebp)
 5120 334e 7905     		jns	L308
2916:str_merge.c   ****             continue;
 5122              	LM644:
 5123 3350 E92E0C00 		jmp	L297
 5123      00
 5124              	L308:
2917:str_merge.c   **** 
2918:str_merge.c   ****         mtk_gLanguageFlag[LangIndex] = 1;
 5126              	LM645:
 5127 3355 8B45C4   		movl	-60(%ebp), %eax
 5128 3358 8D148500 		leal	0(,%eax,4), %edx
 5128      000000
 5129 335f A1B80000 		movl	_mtk_gLanguageFlag, %eax
 5129      00
 5130 3364 C7041001 		movl	$1, (%eax,%edx)
 5130      000000
2919:str_merge.c   **** 
2920:str_merge.c   ****         strres[LangIndex].Str = (wchar_t **)malloc(sizeof(wchar_t *) * CurrMaxTransStrId);
 5132              	LM646:
 5133 336b 8B55C4   		movl	-60(%ebp), %edx
 5134 336e 89D0     		movl	%edx, %eax
 5135 3370 01C0     		addl	%eax, %eax
 5136 3372 01D0     		addl	%edx, %eax
 5137 3374 8D1CC500 		leal	0(,%eax,8), %ebx
 5137      000000
 5138 337b 8B75E4   		movl	-28(%ebp), %esi
 5139 337e 0FB70500 		movzwl	_CurrMaxTransStrId, %eax
 5139      000000
 5140 3385 C1E002   		sall	$2, %eax
 5141 3388 890424   		movl	%eax, (%esp)
 5142 338b E8000000 		call	_malloc
 5142      00
 5143 3390 89041E   		movl	%eax, (%esi,%ebx)
2921:str_merge.c   ****         if (strres[LangIndex].Str == NULL) {STRMERG_LOG_E("malloc fail strres[LangIndex].Str "); ex
 5145              	LM647:
 5146 3393 8B55C4   		movl	-60(%ebp), %edx
 5147 3396 89D0     		movl	%edx, %eax
 5148 3398 01C0     		addl	%eax, %eax
 5149 339a 01D0     		addl	%edx, %eax
 5150 339c 8D14C500 		leal	0(,%eax,8), %edx
 5150      000000
 5151 33a3 8B45E4   		movl	-28(%ebp), %eax
 5152 33a6 833C1000 		cmpl	$0, (%eax,%edx)
 5153 33aa 7528     		jne	L309
 5154 33ac C7442408 		movl	$LC52, 8(%esp)
 5154      002F0000 
 5155 33b4 C7442404 		movl	$LC3, 4(%esp)
 5155      4B040000 
 5156 33bc C7042403 		movl	$3, (%esp)
 5156      000000
 5157 33c3 E8000000 		call	_reslog_adaptor_log
 5157      00
 5158 33c8 C7042402 		movl	$2, (%esp)
 5158      000000
 5159 33cf E8000000 		call	_exit
 5159      00
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 142


 5160              	L309:
2922:str_merge.c   ****         strres[LangIndex].StrRef = (int *)malloc(sizeof(int) * CurrMaxTransStrId);
 5162              	LM648:
 5163 33d4 8B55C4   		movl	-60(%ebp), %edx
 5164 33d7 89D0     		movl	%edx, %eax
 5165 33d9 01C0     		addl	%eax, %eax
 5166 33db 01D0     		addl	%edx, %eax
 5167 33dd 8D1CC500 		leal	0(,%eax,8), %ebx
 5167      000000
 5168 33e4 8B75E4   		movl	-28(%ebp), %esi
 5169 33e7 0FB70500 		movzwl	_CurrMaxTransStrId, %eax
 5169      000000
 5170 33ee C1E002   		sall	$2, %eax
 5171 33f1 890424   		movl	%eax, (%esp)
 5172 33f4 E8000000 		call	_malloc
 5172      00
 5173 33f9 89441E04 		movl	%eax, 4(%esi,%ebx)
2923:str_merge.c   ****         if (strres[LangIndex].StrRef == NULL) {STRMERG_LOG_E("malloc fail strres[LangIndex].StrRef 
 5175              	LM649:
 5176 33fd 8B55C4   		movl	-60(%ebp), %edx
 5177 3400 89D0     		movl	%edx, %eax
 5178 3402 01C0     		addl	%eax, %eax
 5179 3404 01D0     		addl	%edx, %eax
 5180 3406 8D14C500 		leal	0(,%eax,8), %edx
 5180      000000
 5181 340d 8B45E4   		movl	-28(%ebp), %eax
 5182 3410 837C1004 		cmpl	$0, 4(%eax,%edx)
 5182      00
 5183 3415 7528     		jne	L310
 5184 3417 C7442408 		movl	$LC53, 8(%esp)
 5184      402F0000 
 5185 341f C7442404 		movl	$LC3, 4(%esp)
 5185      4B040000 
 5186 3427 C7042403 		movl	$3, (%esp)
 5186      000000
 5187 342e E8000000 		call	_reslog_adaptor_log
 5187      00
 5188 3433 C7042402 		movl	$2, (%esp)
 5188      000000
 5189 343a E8000000 		call	_exit
 5189      00
 5190              	L310:
2924:str_merge.c   ****         /* allocate memory */
2925:str_merge.c   ****         strres[LangIndex].is_dup= (char *)malloc(sizeof(char) * CurrMaxTransStrId);
 5192              	LM650:
 5193 343f 8B55C4   		movl	-60(%ebp), %edx
 5194 3442 89D0     		movl	%edx, %eax
 5195 3444 01C0     		addl	%eax, %eax
 5196 3446 01D0     		addl	%edx, %eax
 5197 3448 8D34C500 		leal	0(,%eax,8), %esi
 5197      000000
 5198 344f 8B5DE4   		movl	-28(%ebp), %ebx
 5199 3452 0FB70500 		movzwl	_CurrMaxTransStrId, %eax
 5199      000000
 5200 3459 890424   		movl	%eax, (%esp)
 5201 345c E8000000 		call	_malloc
 5201      00
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 143


 5202 3461 89443310 		movl	%eax, 16(%ebx,%esi)
2926:str_merge.c   ****         if (strres[LangIndex].is_dup == NULL) {STRMERG_LOG_E("malloc fail strres[LangIndex].is_dup 
 5204              	LM651:
 5205 3465 8B55C4   		movl	-60(%ebp), %edx
 5206 3468 89D0     		movl	%edx, %eax
 5207 346a 01C0     		addl	%eax, %eax
 5208 346c 01D0     		addl	%edx, %eax
 5209 346e 8D14C500 		leal	0(,%eax,8), %edx
 5209      000000
 5210 3475 8B45E4   		movl	-28(%ebp), %eax
 5211 3478 837C1010 		cmpl	$0, 16(%eax,%edx)
 5211      00
 5212 347d 7528     		jne	L311
 5213 347f C7442408 		movl	$LC54, 8(%esp)
 5213      802F0000 
 5214 3487 C7442404 		movl	$LC3, 4(%esp)
 5214      4B040000 
 5215 348f C7042403 		movl	$3, (%esp)
 5215      000000
 5216 3496 E8000000 		call	_reslog_adaptor_log
 5216      00
 5217 349b C7042402 		movl	$2, (%esp)
 5217      000000
 5218 34a2 E8000000 		call	_exit
 5218      00
 5219              	L311:
2927:str_merge.c   ****         /* set default value */
2928:str_merge.c   ****         for (l = 0; l < CurrMaxTransStrId; l++)
 5221              	LM652:
 5222 34a7 C745C800 		movl	$0, -56(%ebp)
 5222      000000
 5223              	L312:
 5224 34ae 0FB70500 		movzwl	_CurrMaxTransStrId, %eax
 5224      000000
 5225 34b5 3945C8   		cmpl	%eax, -56(%ebp)
 5226 34b8 7C02     		jl	L315
 5227 34ba EB67     		jmp	L313
 5228              	L315:
2929:str_merge.c   ****         {
2930:str_merge.c   ****             strres[LangIndex].StrRef[l] = -1;
 5230              	LM653:
 5231 34bc 8B55C4   		movl	-60(%ebp), %edx
 5232 34bf 89D0     		movl	%edx, %eax
 5233 34c1 01C0     		addl	%eax, %eax
 5234 34c3 01D0     		addl	%edx, %eax
 5235 34c5 8D1CC500 		leal	0(,%eax,8), %ebx
 5235      000000
 5236 34cc 8B4DE4   		movl	-28(%ebp), %ecx
 5237 34cf 8B45C8   		movl	-56(%ebp), %eax
 5238 34d2 8D148500 		leal	0(,%eax,4), %edx
 5238      000000
 5239 34d9 8B441904 		movl	4(%ecx,%ebx), %eax
 5240 34dd C70410FF 		movl	$-1, (%eax,%edx)
 5240      FFFFFF
2931:str_merge.c   ****             strres[LangIndex].TotalLength = 0;
 5242              	LM654:
 5243 34e4 8B55C4   		movl	-60(%ebp), %edx
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 144


 5244 34e7 89D0     		movl	%edx, %eax
 5245 34e9 01C0     		addl	%eax, %eax
 5246 34eb 01D0     		addl	%edx, %eax
 5247 34ed 8D14C500 		leal	0(,%eax,8), %edx
 5247      000000
 5248 34f4 8B45E4   		movl	-28(%ebp), %eax
 5249 34f7 C7441014 		movl	$0, 20(%eax,%edx)
 5249      00000000 
2932:str_merge.c   ****             /* set default value */
2933:str_merge.c   ****             strres[LangIndex].is_dup[l] = 0;
 5251              	LM655:
 5252 34ff 8B55C4   		movl	-60(%ebp), %edx
 5253 3502 89D0     		movl	%edx, %eax
 5254 3504 01C0     		addl	%eax, %eax
 5255 3506 01D0     		addl	%edx, %eax
 5256 3508 8D0CC500 		leal	0(,%eax,8), %ecx
 5256      000000
 5257 350f 8B55E4   		movl	-28(%ebp), %edx
 5258 3512 8B45C8   		movl	-56(%ebp), %eax
 5259 3515 03440A10 		addl	16(%edx,%ecx), %eax
 5260 3519 C60000   		movb	$0, (%eax)
 5262              	LM656:
 5263 351c 8D45C8   		leal	-56(%ebp), %eax
 5264 351f FF00     		incl	(%eax)
 5265 3521 EB8B     		jmp	L312
 5266              	L313:
2934:str_merge.c   ****         }
2935:str_merge.c   **** 
2936:str_merge.c   ****         /* set hash_range as maximum id times 1.1(Can be changed) */
2937:str_merge.c   ****         hash_range = (int)(CurrMaxTransStrId * 1.1);
 5268              	LM657:
 5269 3523 0FB70500 		movzwl	_CurrMaxTransStrId, %eax
 5269      000000
 5270 352a 50       		pushl	%eax
 5271 352b DB0424   		fildl	(%esp)
 5272 352e 8D642404 		leal	4(%esp), %esp
 5273 3532 DD056030 		fldl	LC55
 5273      0000
 5274 3538 DEC9     		fmulp	%st, %st(1)
 5275 353a D97DA2   		fnstcw	-94(%ebp)
 5276 353d 0FB745A2 		movzwl	-94(%ebp), %eax
 5277 3541 660D000C 		orw	$3072, %ax
 5278 3545 668945A0 		movw	%ax, -96(%ebp)
 5279 3549 D96DA0   		fldcw	-96(%ebp)
 5280 354c DB5DC0   		fistpl	-64(%ebp)
 5281 354f D96DA2   		fldcw	-94(%ebp)
2938:str_merge.c   **** 
2939:str_merge.c   ****         /* initialize hash table */
2940:str_merge.c   ****         ht[LangIndex] = (struct HashItem *)malloc(sizeof(struct HashItem) * hash_range);
 5283              	LM658:
 5284 3552 8B45C4   		movl	-60(%ebp), %eax
 5285 3555 8D348500 		leal	0(,%eax,4), %esi
 5285      000000
 5286 355c 8B5DF0   		movl	-16(%ebp), %ebx
 5287 355f 8B45C0   		movl	-64(%ebp), %eax
 5288 3562 C1E003   		sall	$3, %eax
 5289 3565 890424   		movl	%eax, (%esp)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 145


 5290 3568 E8000000 		call	_malloc
 5290      00
 5291 356d 890433   		movl	%eax, (%ebx,%esi)
2941:str_merge.c   ****         if (ht[LangIndex] == NULL) {STRMERG_LOG_E("malloc fail ht[LangIndex] "); exit(2);}
 5293              	LM659:
 5294 3570 8B45C4   		movl	-60(%ebp), %eax
 5295 3573 8D148500 		leal	0(,%eax,4), %edx
 5295      000000
 5296 357a 8B45F0   		movl	-16(%ebp), %eax
 5297 357d 833C1000 		cmpl	$0, (%eax,%edx)
 5298 3581 7528     		jne	L316
 5299 3583 C7442408 		movl	$LC56, 8(%esp)
 5299      A62F0000 
 5300 358b C7442404 		movl	$LC3, 4(%esp)
 5300      4B040000 
 5301 3593 C7042403 		movl	$3, (%esp)
 5301      000000
 5302 359a E8000000 		call	_reslog_adaptor_log
 5302      00
 5303 359f C7042402 		movl	$2, (%esp)
 5303      000000
 5304 35a6 E8000000 		call	_exit
 5304      00
 5305              	L316:
2942:str_merge.c   ****         for (k = 0; k < hash_range; k++)
 5307              	LM660:
 5308 35ab C745D000 		movl	$0, -48(%ebp)
 5308      000000
 5309              	L317:
 5310 35b2 8B45D0   		movl	-48(%ebp), %eax
 5311 35b5 3B45C0   		cmpl	-64(%ebp), %eax
 5312 35b8 7C02     		jl	L320
 5313 35ba EB4A     		jmp	L318
 5314              	L320:
2943:str_merge.c   ****         {
2944:str_merge.c   ****             ht[LangIndex][k].next = NULL;
 5316              	LM661:
 5317 35bc 8B45C4   		movl	-60(%ebp), %eax
 5318 35bf 8D1C8500 		leal	0(,%eax,4), %ebx
 5318      000000
 5319 35c6 8B4DF0   		movl	-16(%ebp), %ecx
 5320 35c9 8B45D0   		movl	-48(%ebp), %eax
 5321 35cc 8D14C500 		leal	0(,%eax,8), %edx
 5321      000000
 5322 35d3 8B0419   		movl	(%ecx,%ebx), %eax
 5323 35d6 C7441004 		movl	$0, 4(%eax,%edx)
 5323      00000000 
2945:str_merge.c   ****             ht[LangIndex][k].pointer = -1;
 5325              	LM662:
 5326 35de 8B45C4   		movl	-60(%ebp), %eax
 5327 35e1 8D1C8500 		leal	0(,%eax,4), %ebx
 5327      000000
 5328 35e8 8B4DF0   		movl	-16(%ebp), %ecx
 5329 35eb 8B45D0   		movl	-48(%ebp), %eax
 5330 35ee 8D14C500 		leal	0(,%eax,8), %edx
 5330      000000
 5331 35f5 8B0419   		movl	(%ecx,%ebx), %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 146


 5332 35f8 C70410FF 		movl	$-1, (%eax,%edx)
 5332      FFFFFF
 5334              	LM663:
 5335 35ff 8D45D0   		leal	-48(%ebp), %eax
 5336 3602 FF00     		incl	(%eax)
 5337 3604 EBAC     		jmp	L317
 5338              	L318:
2946:str_merge.c   ****         }
2947:str_merge.c   **** 
2948:str_merge.c   ****         k = 0;
 5340              	LM664:
 5341 3606 C745D000 		movl	$0, -48(%ebp)
 5341      000000
2949:str_merge.c   ****         i = 0;  /* number of Ref(non-duplicate strings, excluding NULL) */
 5343              	LM665:
 5344 360d C745D800 		movl	$0, -40(%ebp)
 5344      000000
2950:str_merge.c   ****         l = -1; /* number of ID (all strings) */
 5346              	LM666:
 5347 3614 C745C8FF 		movl	$-1, -56(%ebp)
 5347      FFFFFF
2951:str_merge.c   **** 
2952:str_merge.c   ****         while (l < CurrMaxTransStrId - 1)
 5349              	LM667:
 5350              	L321:
 5351 361b 0FB70500 		movzwl	_CurrMaxTransStrId, %eax
 5351      000000
 5352 3622 48       		decl	%eax
 5353 3623 3945C8   		cmpl	%eax, -56(%ebp)
 5354 3626 7C05     		jl	L323
 5355 3628 E9210900 		jmp	L322
 5355      00
 5356              	L323:
2953:str_merge.c   ****         {
2954:str_merge.c   ****             l++;
 5358              	LM668:
 5359 362d 8D45C8   		leal	-56(%ebp), %eax
 5360 3630 FF00     		incl	(%eax)
2955:str_merge.c   ****             nStrId = StrID[l];
 5362              	LM669:
 5363 3632 8B45C8   		movl	-56(%ebp), %eax
 5364 3635 8D1400   		leal	(%eax,%eax), %edx
 5365 3638 A1180000 		movl	_StrID, %eax
 5365      00
 5366 363d 0FB70410 		movzwl	(%eax,%edx), %eax
 5367 3641 668945B2 		movw	%ax, -78(%ebp)
2956:str_merge.c   **** 
2957:str_merge.c   ****             /* check if ID already found in ref_list.txt, save the result in ref_item_found */
2958:str_merge.c   ****             if (StrLine[nStrId] != 0)
 5369              	LM670:
 5370 3645 0FB745B2 		movzwl	-78(%ebp), %eax
 5371 3649 6683BC00 		cmpw	$0, _StrLine(%eax,%eax)
 5371      D8000000 
 5371      00
 5372 3652 0F848600 		je	L324
 5372      0000
2959:str_merge.c   ****             {
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 147


2960:str_merge.c   **** #ifndef MEM_REF_LIST_OPT
2961:str_merge.c   ****                 wcscpy(ref_tmp, ref_all + (StrLine[nStrId] - 1) * g_line_buf_act_length);
2962:str_merge.c   **** #else
2963:str_merge.c   ****                 tmp_list_item = GetRefListItem(ref_all_list,(StrLine[nStrId] - 1));
 5374              	LM671:
 5375 3658 0FB745B2 		movzwl	-78(%ebp), %eax
 5376 365c 0FB78400 		movzwl	_StrLine(%eax,%eax), %eax
 5376      D8000000 
 5377 3664 48       		decl	%eax
 5378 3665 89442404 		movl	%eax, 4(%esp)
 5379 3669 A1480000 		movl	_ref_all_list, %eax
 5379      00
 5380 366e 890424   		movl	%eax, (%esp)
 5381 3671 E80E4800 		call	_GetRefListItem
 5381      00
 5382 3676 8945B8   		movl	%eax, -72(%ebp)
2964:str_merge.c   ****                 if(tmp_list_item!=NULL)
 5384              	LM672:
 5385 3679 837DB800 		cmpl	$0, -72(%ebp)
 5386 367d 741F     		je	L325
2965:str_merge.c   ****                 {
2966:str_merge.c   ****                     wcscpy(ref_tmp,tmp_list_item->ItemData );
 5388              	LM673:
 5389 367f 8B45B8   		movl	-72(%ebp), %eax
 5390 3682 8B00     		movl	(%eax), %eax
 5391 3684 89442404 		movl	%eax, 4(%esp)
 5392 3688 A1680000 		movl	_ref_tmp, %eax
 5392      00
 5393 368d 890424   		movl	%eax, (%esp)
 5394 3690 E8000000 		call	_wcscpy
 5394      00
2967:str_merge.c   ****                     ref_item_found = 1;
 5396              	LM674:
 5397 3695 C745BC01 		movl	$1, -68(%ebp)
 5397      000000
 5398 369c EB40     		jmp	L324
 5399              	L325:
2968:str_merge.c   ****                 }
2969:str_merge.c   ****                 else
2970:str_merge.c   ****                 {
2971:str_merge.c   ****                     // Reset the buffer
2972:str_merge.c   ****                     wcscpy(ref_tmp,L"");
 5401              	LM675:
 5402 369e C7442404 		movl	$LC12, 4(%esp)
 5402      460E0000 
 5403 36a6 A1680000 		movl	_ref_tmp, %eax
 5403      00
 5404 36ab 890424   		movl	%eax, (%esp)
 5405 36ae E8000000 		call	_wcscpy
 5405      00
2973:str_merge.c   ****                     STRMERG_LOG_E("No REF item found for String: %d", nStrId);
 5407              	LM676:
 5408 36b3 0FB745B2 		movzwl	-78(%ebp), %eax
 5409 36b7 8944240C 		movl	%eax, 12(%esp)
 5410 36bb C7442408 		movl	$LC57, 8(%esp)
 5410      E02F0000 
 5411 36c3 C7442404 		movl	$LC3, 4(%esp)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 148


 5411      4B040000 
 5412 36cb C7042403 		movl	$3, (%esp)
 5412      000000
 5413 36d2 E8000000 		call	_reslog_adaptor_log
 5413      00
2974:str_merge.c   ****                     ref_item_found = 0;
 5415              	LM677:
 5416 36d7 C745BC00 		movl	$0, -68(%ebp)
 5416      000000
 5417              	L324:
2975:str_merge.c   ****                 }
2976:str_merge.c   **** #endif
2977:str_merge.c   ****             }
2978:str_merge.c   **** 
2979:str_merge.c   ****                 if(ref_item_found == 1){
 5419              	LM678:
 5420 36de 837DBC01 		cmpl	$1, -68(%ebp)
 5421 36e2 0F85D800 		jne	L327
 5421      0000
2980:str_merge.c   ****                 tok = wcstok(ref_tmp, DELIMETER);
 5423              	LM679:
 5424 36e8 A1940100 		movl	_DELIMETER, %eax
 5424      00
 5425 36ed 89442404 		movl	%eax, 4(%esp)
 5426 36f1 A1680000 		movl	_ref_tmp, %eax
 5426      00
 5427 36f6 890424   		movl	%eax, (%esp)
 5428 36f9 E8000000 		call	_wcstok
 5428      00
 5429 36fe 8945E0   		movl	%eax, -32(%ebp)
2981:str_merge.c   ****                 tok = wcstok(NULL, DELIMETER);  /* skip originally existing Module Name */
 5431              	LM680:
 5432 3701 A1940100 		movl	_DELIMETER, %eax
 5432      00
 5433 3706 89442404 		movl	%eax, 4(%esp)
 5434 370a C7042400 		movl	$0, (%esp)
 5434      000000
 5435 3711 E8000000 		call	_wcstok
 5435      00
 5436 3716 8945E0   		movl	%eax, -32(%ebp)
2982:str_merge.c   ****                 tok = wcstok(NULL, DELIMETER);  /* skip originally existing Max String Length */
 5438              	LM681:
 5439 3719 A1940100 		movl	_DELIMETER, %eax
 5439      00
 5440 371e 89442404 		movl	%eax, 4(%esp)
 5441 3722 C7042400 		movl	$0, (%esp)
 5441      000000
 5442 3729 E8000000 		call	_wcstok
 5442      00
 5443 372e 8945E0   		movl	%eax, -32(%ebp)
2983:str_merge.c   ****                 tok = wcstok(NULL, DELIMETER);  /* skip originally existing Description */
 5445              	LM682:
 5446 3731 A1940100 		movl	_DELIMETER, %eax
 5446      00
 5447 3736 89442404 		movl	%eax, 4(%esp)
 5448 373a C7042400 		movl	$0, (%esp)
 5448      000000
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 149


 5449 3741 E8000000 		call	_wcstok
 5449      00
 5450 3746 8945E0   		movl	%eax, -32(%ebp)
2984:str_merge.c   ****                 /* change to corresponding language column according to j */
2985:str_merge.c   ****                 for (k = 0; k < j + 1; k++)
 5452              	LM683:
 5453 3749 C745D000 		movl	$0, -48(%ebp)
 5453      000000
 5454              	L328:
 5455 3750 8B45D4   		movl	-44(%ebp), %eax
 5456 3753 40       		incl	%eax
 5457 3754 3945D0   		cmpl	%eax, -48(%ebp)
 5458 3757 7C05     		jl	L331
 5459 3759 E9B60000 		jmp	L334
 5459      00
 5460              	L331:
2986:str_merge.c   ****                 {
2987:str_merge.c   ****                     tok = wcstok(NULL, DELIMETER);
 5462              	LM684:
 5463 375e A1940100 		movl	_DELIMETER, %eax
 5463      00
 5464 3763 89442404 		movl	%eax, 4(%esp)
 5465 3767 C7042400 		movl	$0, (%esp)
 5465      000000
 5466 376e E8000000 		call	_wcstok
 5466      00
 5467 3773 8945E0   		movl	%eax, -32(%ebp)
2988:str_merge.c   ****                     if (k == 0)
 5469              	LM685:
 5470 3776 837DD000 		cmpl	$0, -48(%ebp)
 5471 377a 7506     		jne	L332
2989:str_merge.c   ****                     {
2990:str_merge.c   ****                         tok_eng = tok;
 5473              	LM686:
 5474 377c 8B45E0   		movl	-32(%ebp), %eax
 5475 377f 8945DC   		movl	%eax, -36(%ebp)
 5476              	L332:
2991:str_merge.c   ****                     }
2992:str_merge.c   ****                     /* here possible case for tok to be NULL? */
2993:str_merge.c   **** 
2994:str_merge.c   ****                     if (tok != NULL && tok[wcslen(tok) - 1] == (wchar_t)'\n')
 5478              	LM687:
 5479 3782 837DE000 		cmpl	$0, -32(%ebp)
 5480 3786 7431     		je	L330
 5481 3788 8B45E0   		movl	-32(%ebp), %eax
 5482 378b 890424   		movl	%eax, (%esp)
 5483 378e E8000000 		call	_wcslen
 5483      00
 5484 3793 01C0     		addl	%eax, %eax
 5485 3795 0345E0   		addl	-32(%ebp), %eax
 5486 3798 83E802   		subl	$2, %eax
 5487 379b 6683380A 		cmpw	$10, (%eax)
 5488 379f 7518     		jne	L330
2995:str_merge.c   ****                     {
2996:str_merge.c   ****                         /* remove carriage-return */
2997:str_merge.c   ****                         tok[wcslen(tok) - 2] = '\0';
 5490              	LM688:
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 150


 5491 37a1 8B45E0   		movl	-32(%ebp), %eax
 5492 37a4 890424   		movl	%eax, (%esp)
 5493 37a7 E8000000 		call	_wcslen
 5493      00
 5494 37ac 01C0     		addl	%eax, %eax
 5495 37ae 0345E0   		addl	-32(%ebp), %eax
 5496 37b1 83E804   		subl	$4, %eax
 5497 37b4 66C70000 		movw	$0, (%eax)
 5497      00
 5499              	LM689:
 5500              	L330:
 5501 37b9 8D45D0   		leal	-48(%ebp), %eax
 5502 37bc FF00     		incl	(%eax)
 5503 37be EB90     		jmp	L328
 5504              	L327:
2998:str_merge.c   ****                     }
2999:str_merge.c   ****                 }
3000:str_merge.c   ****             }
3001:str_merge.c   ****             else
3002:str_merge.c   ****             {
3003:str_merge.c   ****                 /* no corresponding line in ref_list.txt */
3004:str_merge.c   ****                 // TODO: maybe we do not need to do this because processed this part in MergeStrRes
3005:str_merge.c   ****                 if(fixed_id.fixed_id_flag[nStrId] == TRANSLATE_FLAG)
 5506              	LM690:
 5507 37c0 0FB755B2 		movzwl	-78(%ebp), %edx
 5508 37c4 A1040000 		movl	_fixed_id+4, %eax
 5508      00
 5509 37c9 803C0202 		cmpb	$2, (%edx,%eax)
 5510 37cd 0F8548FE 		jne	L321
 5510      FFFF
3006:str_merge.c   ****                 {
3007:str_merge.c   ****                     strres[LangIndex].MaxID = strres[LangIndex].MaxID - 1;
 5512              	LM691:
 5513 37d3 8B55C4   		movl	-60(%ebp), %edx
 5514 37d6 89D0     		movl	%edx, %eax
 5515 37d8 01C0     		addl	%eax, %eax
 5516 37da 01D0     		addl	%edx, %eax
 5517 37dc 8D0CC500 		leal	0(,%eax,8), %ecx
 5517      000000
 5518 37e3 8B5DE4   		movl	-28(%ebp), %ebx
 5519 37e6 8B55C4   		movl	-60(%ebp), %edx
 5520 37e9 89D0     		movl	%edx, %eax
 5521 37eb 01C0     		addl	%eax, %eax
 5522 37ed 01D0     		addl	%edx, %eax
 5523 37ef 8D14C500 		leal	0(,%eax,8), %edx
 5523      000000
 5524 37f6 8B45E4   		movl	-28(%ebp), %eax
 5525 37f9 8B441008 		movl	8(%eax,%edx), %eax
 5526 37fd 48       		decl	%eax
 5527 37fe 89440B08 		movl	%eax, 8(%ebx,%ecx)
3008:str_merge.c   ****                     fixed_id.fixed_id_flag[nStrId] = NO_TRANSLATE_FLAG;
 5529              	LM692:
 5530 3802 0FB755B2 		movzwl	-78(%ebp), %edx
 5531 3806 A1040000 		movl	_fixed_id+4, %eax
 5531      00
 5532 380b C6040201 		movb	$1, (%edx,%eax)
3009:str_merge.c   ****                 }
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 151


3010:str_merge.c   ****                 continue;
 5534              	LM693:
 5535 380f E907FEFF 		jmp	L321
 5535      FF
 5536              	L334:
3011:str_merge.c   ****             }
3012:str_merge.c   **** 
3013:str_merge.c   ****             /* decise if the read-in string is " " (blank) */
3014:str_merge.c   ****             if (tok != NULL && tok[0] == 20 && tok[1] == 0)
 5538              	LM694:
 5539 3814 837DE000 		cmpl	$0, -32(%ebp)
 5540 3818 741C     		je	L336
 5541 381a 8B45E0   		movl	-32(%ebp), %eax
 5542 381d 66833814 		cmpw	$20, (%eax)
 5543 3821 7513     		jne	L336
 5544 3823 8B45E0   		movl	-32(%ebp), %eax
 5545 3826 83C002   		addl	$2, %eax
 5546 3829 66833800 		cmpw	$0, (%eax)
 5547 382d 7507     		jne	L336
3015:str_merge.c   ****                 tok = NULL;
 5549              	LM695:
 5550 382f C745E000 		movl	$0, -32(%ebp)
 5550      000000
 5551              	L336:
3016:str_merge.c   ****             /* handling NULL read-in string, it's Ref is default value -1 */
3017:str_merge.c   ****             if (tok == NULL)
 5553              	LM696:
 5554 3836 837DE000 		cmpl	$0, -32(%ebp)
 5555 383a 7502     		jne	L337
 5556 383c EB31     		jmp	L338
 5557              	L337:
3018:str_merge.c   ****             {
3019:str_merge.c   ****                 /* nothing to be done */
3020:str_merge.c   ****             }
3021:str_merge.c   ****             else if (tok[0] == NO_TRANSLATION_MARKER && tok[1] == 0)
 5559              	LM697:
 5560 383e 8B45E0   		movl	-32(%ebp), %eax
 5561 3841 66833813 		cmpw	$19, (%eax)
 5562 3845 7528     		jne	L338
 5563 3847 8B45E0   		movl	-32(%ebp), %eax
 5564 384a 83C002   		addl	$2, %eax
 5565 384d 66833800 		cmpw	$0, (%eax)
 5566 3851 751C     		jne	L338
3022:str_merge.c   ****             {
3023:str_merge.c   ****                 /* Use English translation in ref_list */
3024:str_merge.c   ****                 if (LangIndex == 0)
 5568              	LM698:
 5569 3853 837DC400 		cmpl	$0, -60(%ebp)
 5570 3857 7510     		jne	L340
3025:str_merge.c   ****                 {
3026:str_merge.c   ****                 /* no translation for current language */
3027:str_merge.c   ****                 tok = (wchar_t *)Str[nStrId];
 5572              	LM699:
 5573 3859 0FB745B2 		movzwl	-78(%ebp), %eax
 5574 385d 8B048500 		movl	_Str(,%eax,4), %eax
 5574      000000
 5575 3864 8945E0   		movl	%eax, -32(%ebp)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 152


 5576 3867 EB06     		jmp	L338
 5577              	L340:
3028:str_merge.c   ****             }
3029:str_merge.c   ****                 else
3030:str_merge.c   ****                 {
3031:str_merge.c   ****                     tok = (wchar_t *)tok_eng;
 5579              	LM700:
 5580 3869 8B45DC   		movl	-36(%ebp), %eax
 5581 386c 8945E0   		movl	%eax, -32(%ebp)
 5582              	L338:
3032:str_merge.c   ****                 }
3033:str_merge.c   ****             }
3034:str_merge.c   **** 
3035:str_merge.c   ****             if (tok != NULL)
 5584              	LM701:
 5585 386f 837DE000 		cmpl	$0, -32(%ebp)
 5586 3873 0F84A2FD 		je	L321
 5586      FFFF
3036:str_merge.c   ****             {
3037:str_merge.c   ****                 /* transform "\""n" */
3038:str_merge.c   ****                 Trans(tok, tok);
 5588              	LM702:
 5589 3879 8B45E0   		movl	-32(%ebp), %eax
 5590 387c 89442404 		movl	%eax, 4(%esp)
 5591 3880 8B45E0   		movl	-32(%ebp), %eax
 5592 3883 890424   		movl	%eax, (%esp)
 5593 3886 E85EF0FF 		call	_Trans
 5593      FF
3039:str_merge.c   **** 
3040:str_merge.c   ****                 /* calculate hash value */
3041:str_merge.c   ****                 h = GetHashValue(tok, hash_range);
 5595              	LM703:
 5596 388b 8B45C0   		movl	-64(%ebp), %eax
 5597 388e 89442404 		movl	%eax, 4(%esp)
 5598 3892 8B45E0   		movl	-32(%ebp), %eax
 5599 3895 890424   		movl	%eax, (%esp)
 5600 3898 E8B0EFFF 		call	_GetHashValue
 5600      FF
 5601 389d 8945CC   		movl	%eax, -52(%ebp)
3042:str_merge.c   ****                 if (ht[LangIndex][h].pointer == -1)
 5603              	LM704:
 5604 38a0 8B45C4   		movl	-60(%ebp), %eax
 5605 38a3 8D1C8500 		leal	0(,%eax,4), %ebx
 5605      000000
 5606 38aa 8B4DF0   		movl	-16(%ebp), %ecx
 5607 38ad 8B45CC   		movl	-52(%ebp), %eax
 5608 38b0 8D14C500 		leal	0(,%eax,8), %edx
 5608      000000
 5609 38b7 8B0419   		movl	(%ecx,%ebx), %eax
 5610 38ba 833C10FF 		cmpl	$-1, (%eax,%edx)
 5611 38be 0F85AF01 		jne	L343
 5611      0000
3043:str_merge.c   ****                 {
3044:str_merge.c   ****                     /* no duplicate hash value */
3045:str_merge.c   ****                     ht[LangIndex][h].pointer = l;
 5613              	LM705:
 5614 38c4 8B45C4   		movl	-60(%ebp), %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 153


 5615 38c7 8D1C8500 		leal	0(,%eax,4), %ebx
 5615      000000
 5616 38ce 8B55F0   		movl	-16(%ebp), %edx
 5617 38d1 8B45CC   		movl	-52(%ebp), %eax
 5618 38d4 8D0CC500 		leal	0(,%eax,8), %ecx
 5618      000000
 5619 38db 8B141A   		movl	(%edx,%ebx), %edx
 5620 38de 8B45C8   		movl	-56(%ebp), %eax
 5621 38e1 89040A   		movl	%eax, (%edx,%ecx)
3046:str_merge.c   ****                     ht[LangIndex][h].next = NULL;
 5623              	LM706:
 5624 38e4 8B45C4   		movl	-60(%ebp), %eax
 5625 38e7 8D1C8500 		leal	0(,%eax,4), %ebx
 5625      000000
 5626 38ee 8B4DF0   		movl	-16(%ebp), %ecx
 5627 38f1 8B45CC   		movl	-52(%ebp), %eax
 5628 38f4 8D14C500 		leal	0(,%eax,8), %edx
 5628      000000
 5629 38fb 8B0419   		movl	(%ecx,%ebx), %eax
 5630 38fe C7441004 		movl	$0, 4(%eax,%edx)
 5630      00000000 
3047:str_merge.c   ****                     /* check if this is a duplicated string already in other languages */
3048:str_merge.c   ****                     if (!LookupDupStr(strres, strres_dup, LangIndex, l, ht, h, tok))
 5632              	LM707:
 5633 3906 8B45E0   		movl	-32(%ebp), %eax
 5634 3909 89442418 		movl	%eax, 24(%esp)
 5635 390d 8B45CC   		movl	-52(%ebp), %eax
 5636 3910 89442414 		movl	%eax, 20(%esp)
 5637 3914 8B45F0   		movl	-16(%ebp), %eax
 5638 3917 89442410 		movl	%eax, 16(%esp)
 5639 391b 8B45C8   		movl	-56(%ebp), %eax
 5640 391e 8944240C 		movl	%eax, 12(%esp)
 5641 3922 8B45C4   		movl	-60(%ebp), %eax
 5642 3925 89442408 		movl	%eax, 8(%esp)
 5643 3929 8B45B4   		movl	-76(%ebp), %eax
 5644 392c 89442404 		movl	%eax, 4(%esp)
 5645 3930 8B45E4   		movl	-28(%ebp), %eax
 5646 3933 890424   		movl	%eax, (%esp)
 5647 3936 E8C1F1FF 		call	_LookupDupStr
 5647      FF
 5648 393b 85C0     		testl	%eax, %eax
 5649 393d 0F85D8FC 		jne	L321
 5649      FFFF
3049:str_merge.c   ****                     {
3050:str_merge.c   ****                         /* record max offset of each language in byte */
3051:str_merge.c   ****                     strres[LangIndex].Str[i] = (wchar_t *)malloc(wcslen(tok) * 2 + 2);
 5651              	LM708:
 5652 3943 8B55C4   		movl	-60(%ebp), %edx
 5653 3946 89D0     		movl	%edx, %eax
 5654 3948 01C0     		addl	%eax, %eax
 5655 394a 01D0     		addl	%edx, %eax
 5656 394c 8D0CC500 		leal	0(,%eax,8), %ecx
 5656      000000
 5657 3953 8B55E4   		movl	-28(%ebp), %edx
 5658 3956 8B45D8   		movl	-40(%ebp), %eax
 5659 3959 8D1C8500 		leal	0(,%eax,4), %ebx
 5659      000000
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 154


 5660 3960 8B340A   		movl	(%edx,%ecx), %esi
 5661 3963 8B45E0   		movl	-32(%ebp), %eax
 5662 3966 890424   		movl	%eax, (%esp)
 5663 3969 E8000000 		call	_wcslen
 5663      00
 5664 396e 01C0     		addl	%eax, %eax
 5665 3970 83C002   		addl	$2, %eax
 5666 3973 890424   		movl	%eax, (%esp)
 5667 3976 E8000000 		call	_malloc
 5667      00
 5668 397b 89041E   		movl	%eax, (%esi,%ebx)
3052:str_merge.c   ****                     if (strres[LangIndex].Str[i] == NULL) {STRMERG_LOG_E("malloc fail strres[LangIn
 5670              	LM709:
 5671 397e 8B55C4   		movl	-60(%ebp), %edx
 5672 3981 89D0     		movl	%edx, %eax
 5673 3983 01C0     		addl	%eax, %eax
 5674 3985 01D0     		addl	%edx, %eax
 5675 3987 8D1CC500 		leal	0(,%eax,8), %ebx
 5675      000000
 5676 398e 8B4DE4   		movl	-28(%ebp), %ecx
 5677 3991 8B45D8   		movl	-40(%ebp), %eax
 5678 3994 8D148500 		leal	0(,%eax,4), %edx
 5678      000000
 5679 399b 8B0419   		movl	(%ecx,%ebx), %eax
 5680 399e 833C1000 		cmpl	$0, (%eax,%edx)
 5681 39a2 7528     		jne	L345
 5682 39a4 C7442408 		movl	$LC58, 8(%esp)
 5682      20300000 
 5683 39ac C7442404 		movl	$LC3, 4(%esp)
 5683      4B040000 
 5684 39b4 C7042403 		movl	$3, (%esp)
 5684      000000
 5685 39bb E8000000 		call	_reslog_adaptor_log
 5685      00
 5686 39c0 C7042402 		movl	$2, (%esp)
 5686      000000
 5687 39c7 E8000000 		call	_exit
 5687      00
 5688              	L345:
3053:str_merge.c   ****                     wcscpy(strres[LangIndex].Str[i], tok);
 5690              	LM710:
 5691 39cc 8B45E0   		movl	-32(%ebp), %eax
 5692 39cf 89442404 		movl	%eax, 4(%esp)
 5693 39d3 8B55C4   		movl	-60(%ebp), %edx
 5694 39d6 89D0     		movl	%edx, %eax
 5695 39d8 01C0     		addl	%eax, %eax
 5696 39da 01D0     		addl	%edx, %eax
 5697 39dc 8D1CC500 		leal	0(,%eax,8), %ebx
 5697      000000
 5698 39e3 8B4DE4   		movl	-28(%ebp), %ecx
 5699 39e6 8B45D8   		movl	-40(%ebp), %eax
 5700 39e9 8D148500 		leal	0(,%eax,4), %edx
 5700      000000
 5701 39f0 8B0419   		movl	(%ecx,%ebx), %eax
 5702 39f3 8B0410   		movl	(%eax,%edx), %eax
 5703 39f6 890424   		movl	%eax, (%esp)
 5704 39f9 E8000000 		call	_wcscpy
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 155


 5704      00
3054:str_merge.c   ****                     /* insert the string into the list */
3055:str_merge.c   ****                     strres[LangIndex].StrRef[l] = i;
 5706              	LM711:
 5707 39fe 8B55C4   		movl	-60(%ebp), %edx
 5708 3a01 89D0     		movl	%edx, %eax
 5709 3a03 01C0     		addl	%eax, %eax
 5710 3a05 01D0     		addl	%edx, %eax
 5711 3a07 8D1CC500 		leal	0(,%eax,8), %ebx
 5711      000000
 5712 3a0e 8B55E4   		movl	-28(%ebp), %edx
 5713 3a11 8B45C8   		movl	-56(%ebp), %eax
 5714 3a14 8D0C8500 		leal	0(,%eax,4), %ecx
 5714      000000
 5715 3a1b 8B541A04 		movl	4(%edx,%ebx), %edx
 5716 3a1f 8B45D8   		movl	-40(%ebp), %eax
 5717 3a22 89040A   		movl	%eax, (%edx,%ecx)
3056:str_merge.c   ****                         strres[LangIndex].TotalLength += wcslen(tok) * 2 + 2;                      
 5719              	LM712:
 5720 3a25 8B55C4   		movl	-60(%ebp), %edx
 5721 3a28 89D0     		movl	%edx, %eax
 5722 3a2a 01C0     		addl	%eax, %eax
 5723 3a2c 01D0     		addl	%edx, %eax
 5724 3a2e 8D3CC500 		leal	0(,%eax,8), %edi
 5724      000000
 5725 3a35 8B45E4   		movl	-28(%ebp), %eax
 5726 3a38 89459C   		movl	%eax, -100(%ebp)
 5727 3a3b 8B55C4   		movl	-60(%ebp), %edx
 5728 3a3e 89D0     		movl	%edx, %eax
 5729 3a40 01C0     		addl	%eax, %eax
 5730 3a42 01D0     		addl	%edx, %eax
 5731 3a44 8D1CC500 		leal	0(,%eax,8), %ebx
 5731      000000
 5732 3a4b 8B75E4   		movl	-28(%ebp), %esi
 5733 3a4e 8B45E0   		movl	-32(%ebp), %eax
 5734 3a51 890424   		movl	%eax, (%esp)
 5735 3a54 E8000000 		call	_wcslen
 5735      00
 5736 3a59 01C0     		addl	%eax, %eax
 5737 3a5b 03441E14 		addl	20(%esi,%ebx), %eax
 5738 3a5f 83C002   		addl	$2, %eax
 5739 3a62 8B559C   		movl	-100(%ebp), %edx
 5740 3a65 89443A14 		movl	%eax, 20(%edx,%edi)
3057:str_merge.c   ****                     i++;
 5742              	LM713:
 5743 3a69 8D45D8   		leal	-40(%ebp), %eax
 5744 3a6c FF00     		incl	(%eax)
 5745 3a6e E9A8FBFF 		jmp	L321
 5745      FF
 5746              	L343:
3058:str_merge.c   ****                 }
3059:str_merge.c   ****                 }
3060:str_merge.c   ****                 else
3061:str_merge.c   ****                 {
3062:str_merge.c   ****                     /* 
3063:str_merge.c   ****                      * there are duplicate hash value, check if the string 
3064:str_merge.c   ****                      * is really the same with that has the same hash value
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 156


3065:str_merge.c   ****                      */
3066:str_merge.c   ****                     int found = 0, ref_idx;
 5748              	LM714:
 5749              	LBB38:
 5750 3a73 C745AC00 		movl	$0, -84(%ebp)
 5750      000000
3067:str_merge.c   ****                     wchar_t *str;
3068:str_merge.c   ****                     ref_idx = strres[LangIndex].StrRef[ht[LangIndex][h].pointer];
 5752              	LM715:
 5753 3a7a 8B55C4   		movl	-60(%ebp), %edx
 5754 3a7d 89D0     		movl	%edx, %eax
 5755 3a7f 01C0     		addl	%eax, %eax
 5756 3a81 01D0     		addl	%edx, %eax
 5757 3a83 8D34C500 		leal	0(,%eax,8), %esi
 5757      000000
 5758 3a8a 8B7DE4   		movl	-28(%ebp), %edi
 5759 3a8d 8B45C4   		movl	-60(%ebp), %eax
 5760 3a90 8D1C8500 		leal	0(,%eax,4), %ebx
 5760      000000
 5761 3a97 8B4DF0   		movl	-16(%ebp), %ecx
 5762 3a9a 8B45CC   		movl	-52(%ebp), %eax
 5763 3a9d 8D14C500 		leal	0(,%eax,8), %edx
 5763      000000
 5764 3aa4 8B0419   		movl	(%ecx,%ebx), %eax
 5765 3aa7 8B0410   		movl	(%eax,%edx), %eax
 5766 3aaa 8D148500 		leal	0(,%eax,4), %edx
 5766      000000
 5767 3ab1 8B443704 		movl	4(%edi,%esi), %eax
 5768 3ab5 8B0410   		movl	(%eax,%edx), %eax
 5769 3ab8 8945A8   		movl	%eax, -88(%ebp)
3069:str_merge.c   ****                     str = GetStrByRef(strres, strres_dup, LangIndex, ht[LangIndex][h].pointer, ref_
 5771              	LM716:
 5772 3abb 8B45A8   		movl	-88(%ebp), %eax
 5773 3abe 89442410 		movl	%eax, 16(%esp)
 5774 3ac2 8B45C4   		movl	-60(%ebp), %eax
 5775 3ac5 8D1C8500 		leal	0(,%eax,4), %ebx
 5775      000000
 5776 3acc 8B4DF0   		movl	-16(%ebp), %ecx
 5777 3acf 8B45CC   		movl	-52(%ebp), %eax
 5778 3ad2 8D14C500 		leal	0(,%eax,8), %edx
 5778      000000
 5779 3ad9 8B0419   		movl	(%ecx,%ebx), %eax
 5780 3adc 8B0410   		movl	(%eax,%edx), %eax
 5781 3adf 8944240C 		movl	%eax, 12(%esp)
 5782 3ae3 8B45C4   		movl	-60(%ebp), %eax
 5783 3ae6 89442408 		movl	%eax, 8(%esp)
 5784 3aea 8B45B4   		movl	-76(%ebp), %eax
 5785 3aed 89442404 		movl	%eax, 4(%esp)
 5786 3af1 8B45E4   		movl	-28(%ebp), %eax
 5787 3af4 890424   		movl	%eax, (%esp)
 5788 3af7 E894EFFF 		call	_GetStrByRef
 5788      FF
 5789 3afc 8945A4   		movl	%eax, -92(%ebp)
3070:str_merge.c   ****                     if (wcscmp(tok, str) == 0)
 5791              	LM717:
 5792 3aff 8B45A4   		movl	-92(%ebp), %eax
 5793 3b02 89442404 		movl	%eax, 4(%esp)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 157


 5794 3b06 8B45E0   		movl	-32(%ebp), %eax
 5795 3b09 890424   		movl	%eax, (%esp)
 5796 3b0c E8000000 		call	_wcscmp
 5796      00
 5797 3b11 85C0     		testl	%eax, %eax
 5798 3b13 0F85F600 		jne	L347
 5798      0000
3071:str_merge.c   ****                     {
3072:str_merge.c   ****                         /* the two string is the same */
3073:str_merge.c   ****                         strres[LangIndex].StrRef[l] = ref_idx;
 5800              	LM718:
 5801 3b19 8B55C4   		movl	-60(%ebp), %edx
 5802 3b1c 89D0     		movl	%edx, %eax
 5803 3b1e 01C0     		addl	%eax, %eax
 5804 3b20 01D0     		addl	%edx, %eax
 5805 3b22 8D1CC500 		leal	0(,%eax,8), %ebx
 5805      000000
 5806 3b29 8B55E4   		movl	-28(%ebp), %edx
 5807 3b2c 8B45C8   		movl	-56(%ebp), %eax
 5808 3b2f 8D0C8500 		leal	0(,%eax,4), %ecx
 5808      000000
 5809 3b36 8B541A04 		movl	4(%edx,%ebx), %edx
 5810 3b3a 8B45A8   		movl	-88(%ebp), %eax
 5811 3b3d 89040A   		movl	%eax, (%edx,%ecx)
3074:str_merge.c   ****                         strres[LangIndex].is_dup[l] = strres[LangIndex].is_dup[ht[LangIndex][h].poi
 5813              	LM719:
 5814 3b40 8B55C4   		movl	-60(%ebp), %edx
 5815 3b43 89D0     		movl	%edx, %eax
 5816 3b45 01C0     		addl	%eax, %eax
 5817 3b47 01D0     		addl	%edx, %eax
 5818 3b49 8D0CC500 		leal	0(,%eax,8), %ecx
 5818      000000
 5819 3b50 8B55E4   		movl	-28(%ebp), %edx
 5820 3b53 8B45C8   		movl	-56(%ebp), %eax
 5821 3b56 8B7C0A10 		movl	16(%edx,%ecx), %edi
 5822 3b5a 01C7     		addl	%eax, %edi
 5823 3b5c 8B55C4   		movl	-60(%ebp), %edx
 5824 3b5f 89D0     		movl	%edx, %eax
 5825 3b61 01C0     		addl	%eax, %eax
 5826 3b63 01D0     		addl	%edx, %eax
 5827 3b65 C1E003   		sall	$3, %eax
 5828 3b68 894598   		movl	%eax, -104(%ebp)
 5829 3b6b 8B75E4   		movl	-28(%ebp), %esi
 5830 3b6e 8B45C4   		movl	-60(%ebp), %eax
 5831 3b71 8D1C8500 		leal	0(,%eax,4), %ebx
 5831      000000
 5832 3b78 8B4DF0   		movl	-16(%ebp), %ecx
 5833 3b7b 8B45CC   		movl	-52(%ebp), %eax
 5834 3b7e 8D14C500 		leal	0(,%eax,8), %edx
 5834      000000
 5835 3b85 8B0419   		movl	(%ecx,%ebx), %eax
 5836 3b88 8B0410   		movl	(%eax,%edx), %eax
 5837 3b8b 8B5598   		movl	-104(%ebp), %edx
 5838 3b8e 03441610 		addl	16(%esi,%edx), %eax
 5839 3b92 0FB600   		movzbl	(%eax), %eax
 5840 3b95 8807     		movb	%al, (%edi)
3075:str_merge.c   ****                         /* put it into linked list anyway */
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 158


3076:str_merge.c   ****                         extra = (struct HashItem *)malloc(sizeof(struct HashItem));
 5842              	LM720:
 5843 3b97 C7042408 		movl	$8, (%esp)
 5843      000000
 5844 3b9e E8000000 		call	_malloc
 5844      00
 5845 3ba3 8945EC   		movl	%eax, -20(%ebp)
3077:str_merge.c   ****                         if (extra == NULL) {STRMERG_LOG_E("malloc fail extra "); exit(2);}
 5847              	LM721:
 5848 3ba6 837DEC00 		cmpl	$0, -20(%ebp)
 5849 3baa 7528     		jne	L348
 5850 3bac C7442408 		movl	$LC59, 8(%esp)
 5850      46300000 
 5851 3bb4 C7442404 		movl	$LC3, 4(%esp)
 5851      4B040000 
 5852 3bbc C7042403 		movl	$3, (%esp)
 5852      000000
 5853 3bc3 E8000000 		call	_reslog_adaptor_log
 5853      00
 5854 3bc8 C7042402 		movl	$2, (%esp)
 5854      000000
 5855 3bcf E8000000 		call	_exit
 5855      00
 5856              	L348:
3078:str_merge.c   ****                         temp = &ht[LangIndex][h];
 5858              	LM722:
 5859 3bd4 8B45C4   		movl	-60(%ebp), %eax
 5860 3bd7 8D0C8500 		leal	0(,%eax,4), %ecx
 5860      000000
 5861 3bde 8B55F0   		movl	-16(%ebp), %edx
 5862 3be1 8B45CC   		movl	-52(%ebp), %eax
 5863 3be4 C1E003   		sall	$3, %eax
 5864 3be7 03040A   		addl	(%edx,%ecx), %eax
 5865 3bea 8945E8   		movl	%eax, -24(%ebp)
3079:str_merge.c   ****                         extra->next = temp->next;
 5867              	LM723:
 5868 3bed 8B55EC   		movl	-20(%ebp), %edx
 5869 3bf0 8B45E8   		movl	-24(%ebp), %eax
 5870 3bf3 8B4004   		movl	4(%eax), %eax
 5871 3bf6 894204   		movl	%eax, 4(%edx)
3080:str_merge.c   ****                         extra->pointer = l;
 5873              	LM724:
 5874 3bf9 8B55EC   		movl	-20(%ebp), %edx
 5875 3bfc 8B45C8   		movl	-56(%ebp), %eax
 5876 3bff 8902     		movl	%eax, (%edx)
3081:str_merge.c   ****                         temp->next = extra;                                                
 5878              	LM725:
 5879 3c01 8B55E8   		movl	-24(%ebp), %edx
 5880 3c04 8B45EC   		movl	-20(%ebp), %eax
 5881 3c07 894204   		movl	%eax, 4(%edx)
3082:str_merge.c   ****                         /* read in next string */
3083:str_merge.c   ****                         continue;
 5883              	LM726:
 5884 3c0a E90CFAFF 		jmp	L321
 5884      FF
 5885              	L347:
3084:str_merge.c   ****                     }
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 159


3085:str_merge.c   **** 
3086:str_merge.c   ****                     /* 
3087:str_merge.c   ****                      * although the two strings have the same hash value, 
3088:str_merge.c   ****                      * but they are different
3089:str_merge.c   ****                      * compare the strings in linked list...
3090:str_merge.c   ****                      */
3091:str_merge.c   ****                     temp = &ht[LangIndex][h];
 5887              	LM727:
 5888 3c0f 8B45C4   		movl	-60(%ebp), %eax
 5889 3c12 8D0C8500 		leal	0(,%eax,4), %ecx
 5889      000000
 5890 3c19 8B55F0   		movl	-16(%ebp), %edx
 5891 3c1c 8B45CC   		movl	-52(%ebp), %eax
 5892 3c1f C1E003   		sall	$3, %eax
 5893 3c22 03040A   		addl	(%edx,%ecx), %eax
 5894 3c25 8945E8   		movl	%eax, -24(%ebp)
3092:str_merge.c   ****                     while (temp->next != NULL)
 5896              	LM728:
 5897              	L349:
 5898 3c28 8B45E8   		movl	-24(%ebp), %eax
 5899 3c2b 83780400 		cmpl	$0, 4(%eax)
 5900 3c2f 7505     		jne	L351
 5901 3c31 E93D0100 		jmp	L350
 5901      00
 5902              	L351:
3093:str_merge.c   ****                     {
3094:str_merge.c   ****                         temp = temp->next;
 5904              	LM729:
 5905 3c36 8B45E8   		movl	-24(%ebp), %eax
 5906 3c39 8B4004   		movl	4(%eax), %eax
 5907 3c3c 8945E8   		movl	%eax, -24(%ebp)
3095:str_merge.c   ****                         ref_idx = strres[LangIndex].StrRef[temp->pointer];
 5909              	LM730:
 5910 3c3f 8B55C4   		movl	-60(%ebp), %edx
 5911 3c42 89D0     		movl	%edx, %eax
 5912 3c44 01C0     		addl	%eax, %eax
 5913 3c46 01D0     		addl	%edx, %eax
 5914 3c48 8D1CC500 		leal	0(,%eax,8), %ebx
 5914      000000
 5915 3c4f 8B4DE4   		movl	-28(%ebp), %ecx
 5916 3c52 8B45E8   		movl	-24(%ebp), %eax
 5917 3c55 8B00     		movl	(%eax), %eax
 5918 3c57 8D148500 		leal	0(,%eax,4), %edx
 5918      000000
 5919 3c5e 8B441904 		movl	4(%ecx,%ebx), %eax
 5920 3c62 8B0410   		movl	(%eax,%edx), %eax
 5921 3c65 8945A8   		movl	%eax, -88(%ebp)
3096:str_merge.c   ****                         str = GetStrByRef(strres, strres_dup, LangIndex, temp->pointer, ref_idx);
 5923              	LM731:
 5924 3c68 8B45A8   		movl	-88(%ebp), %eax
 5925 3c6b 89442410 		movl	%eax, 16(%esp)
 5926 3c6f 8B45E8   		movl	-24(%ebp), %eax
 5927 3c72 8B00     		movl	(%eax), %eax
 5928 3c74 8944240C 		movl	%eax, 12(%esp)
 5929 3c78 8B45C4   		movl	-60(%ebp), %eax
 5930 3c7b 89442408 		movl	%eax, 8(%esp)
 5931 3c7f 8B45B4   		movl	-76(%ebp), %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 160


 5932 3c82 89442404 		movl	%eax, 4(%esp)
 5933 3c86 8B45E4   		movl	-28(%ebp), %eax
 5934 3c89 890424   		movl	%eax, (%esp)
 5935 3c8c E8FFEDFF 		call	_GetStrByRef
 5935      FF
 5936 3c91 8945A4   		movl	%eax, -92(%ebp)
3097:str_merge.c   ****                         if (wcscmp(tok, str) == 0)
 5938              	LM732:
 5939 3c94 8B45A4   		movl	-92(%ebp), %eax
 5940 3c97 89442404 		movl	%eax, 4(%esp)
 5941 3c9b 8B45E0   		movl	-32(%ebp), %eax
 5942 3c9e 890424   		movl	%eax, (%esp)
 5943 3ca1 E8000000 		call	_wcscmp
 5943      00
 5944 3ca6 85C0     		testl	%eax, %eax
 5945 3ca8 0F857AFF 		jne	L349
 5945      FFFF
3098:str_merge.c   ****                         {
3099:str_merge.c   ****                             /* find a identical string in linked list, set the flag on */
3100:str_merge.c   ****                             found = 1;
 5947              	LM733:
 5948 3cae C745AC01 		movl	$1, -84(%ebp)
 5948      000000
3101:str_merge.c   ****                             strres[LangIndex].StrRef[l] = ref_idx;
 5950              	LM734:
 5951 3cb5 8B55C4   		movl	-60(%ebp), %edx
 5952 3cb8 89D0     		movl	%edx, %eax
 5953 3cba 01C0     		addl	%eax, %eax
 5954 3cbc 01D0     		addl	%edx, %eax
 5955 3cbe 8D1CC500 		leal	0(,%eax,8), %ebx
 5955      000000
 5956 3cc5 8B55E4   		movl	-28(%ebp), %edx
 5957 3cc8 8B45C8   		movl	-56(%ebp), %eax
 5958 3ccb 8D0C8500 		leal	0(,%eax,4), %ecx
 5958      000000
 5959 3cd2 8B541A04 		movl	4(%edx,%ebx), %edx
 5960 3cd6 8B45A8   		movl	-88(%ebp), %eax
 5961 3cd9 89040A   		movl	%eax, (%edx,%ecx)
3102:str_merge.c   ****                             strres[LangIndex].is_dup[l] = strres[LangIndex].is_dup[temp->pointer];
 5963              	LM735:
 5964 3cdc 8B55C4   		movl	-60(%ebp), %edx
 5965 3cdf 89D0     		movl	%edx, %eax
 5966 3ce1 01C0     		addl	%eax, %eax
 5967 3ce3 01D0     		addl	%edx, %eax
 5968 3ce5 8D0CC500 		leal	0(,%eax,8), %ecx
 5968      000000
 5969 3cec 8B55E4   		movl	-28(%ebp), %edx
 5970 3cef 8B45C8   		movl	-56(%ebp), %eax
 5971 3cf2 8B5C0A10 		movl	16(%edx,%ecx), %ebx
 5972 3cf6 01C3     		addl	%eax, %ebx
 5973 3cf8 8B55C4   		movl	-60(%ebp), %edx
 5974 3cfb 89D0     		movl	%edx, %eax
 5975 3cfd 01C0     		addl	%eax, %eax
 5976 3cff 01D0     		addl	%edx, %eax
 5977 3d01 8D0CC500 		leal	0(,%eax,8), %ecx
 5977      000000
 5978 3d08 8B55E4   		movl	-28(%ebp), %edx
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 161


 5979 3d0b 8B45E8   		movl	-24(%ebp), %eax
 5980 3d0e 8B00     		movl	(%eax), %eax
 5981 3d10 03440A10 		addl	16(%edx,%ecx), %eax
 5982 3d14 0FB600   		movzbl	(%eax), %eax
 5983 3d17 8803     		movb	%al, (%ebx)
3103:str_merge.c   ****                             /* put it into linked list anyway */
3104:str_merge.c   ****                             extra = (struct HashItem *)malloc(sizeof(struct HashItem));            
 5985              	LM736:
 5986 3d19 C7042408 		movl	$8, (%esp)
 5986      000000
 5987 3d20 E8000000 		call	_malloc
 5987      00
 5988 3d25 8945EC   		movl	%eax, -20(%ebp)
3105:str_merge.c   ****                             if (extra == NULL) {STRMERG_LOG_E("malloc fail extra "); exit(2);}
 5990              	LM737:
 5991 3d28 837DEC00 		cmpl	$0, -20(%ebp)
 5992 3d2c 7528     		jne	L353
 5993 3d2e C7442408 		movl	$LC59, 8(%esp)
 5993      46300000 
 5994 3d36 C7442404 		movl	$LC3, 4(%esp)
 5994      4B040000 
 5995 3d3e C7042403 		movl	$3, (%esp)
 5995      000000
 5996 3d45 E8000000 		call	_reslog_adaptor_log
 5996      00
 5997 3d4a C7042402 		movl	$2, (%esp)
 5997      000000
 5998 3d51 E8000000 		call	_exit
 5998      00
 5999              	L353:
3106:str_merge.c   ****                             extra->next = temp->next;
 6001              	LM738:
 6002 3d56 8B55EC   		movl	-20(%ebp), %edx
 6003 3d59 8B45E8   		movl	-24(%ebp), %eax
 6004 3d5c 8B4004   		movl	4(%eax), %eax
 6005 3d5f 894204   		movl	%eax, 4(%edx)
3107:str_merge.c   ****                             extra->pointer = l;
 6007              	LM739:
 6008 3d62 8B55EC   		movl	-20(%ebp), %edx
 6009 3d65 8B45C8   		movl	-56(%ebp), %eax
 6010 3d68 8902     		movl	%eax, (%edx)
3108:str_merge.c   ****                             temp->next = extra;                                                    
 6012              	LM740:
 6013 3d6a 8B55E8   		movl	-24(%ebp), %edx
 6014 3d6d 8B45EC   		movl	-20(%ebp), %eax
 6015 3d70 894204   		movl	%eax, 4(%edx)
 6016              	L350:
3109:str_merge.c   ****                             break;
3110:str_merge.c   ****                         }
3111:str_merge.c   ****                     }
3112:str_merge.c   ****                     if (found == 0)
 6018              	LM741:
 6019 3d73 837DAC00 		cmpl	$0, -84(%ebp)
 6020 3d77 0F85C501 		jne	L354
 6020      0000
3113:str_merge.c   ****                     {
3114:str_merge.c   ****                         /* 
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 162


3115:str_merge.c   ****                          * the input string is different with all other 
3116:str_merge.c   ****                          * strings in hash table, add the string in linked 
3117:str_merge.c   ****                          * list
3118:str_merge.c   ****                          */
3119:str_merge.c   ****                         extra = (struct HashItem *)malloc(sizeof(struct HashItem));
 6022              	LM742:
 6023 3d7d C7042408 		movl	$8, (%esp)
 6023      000000
 6024 3d84 E8000000 		call	_malloc
 6024      00
 6025 3d89 8945EC   		movl	%eax, -20(%ebp)
3120:str_merge.c   ****                         if (extra == NULL) {STRMERG_LOG_E("malloc fail extra "); exit(2);}
 6027              	LM743:
 6028 3d8c 837DEC00 		cmpl	$0, -20(%ebp)
 6029 3d90 7528     		jne	L355
 6030 3d92 C7442408 		movl	$LC59, 8(%esp)
 6030      46300000 
 6031 3d9a C7442404 		movl	$LC3, 4(%esp)
 6031      4B040000 
 6032 3da2 C7042403 		movl	$3, (%esp)
 6032      000000
 6033 3da9 E8000000 		call	_reslog_adaptor_log
 6033      00
 6034 3dae C7042402 		movl	$2, (%esp)
 6034      000000
 6035 3db5 E8000000 		call	_exit
 6035      00
 6036              	L355:
3121:str_merge.c   ****                         extra->next = NULL;
 6038              	LM744:
 6039 3dba 8B45EC   		movl	-20(%ebp), %eax
 6040 3dbd C7400400 		movl	$0, 4(%eax)
 6040      000000
3122:str_merge.c   ****                         extra->pointer = l;
 6042              	LM745:
 6043 3dc4 8B55EC   		movl	-20(%ebp), %edx
 6044 3dc7 8B45C8   		movl	-56(%ebp), %eax
 6045 3dca 8902     		movl	%eax, (%edx)
3123:str_merge.c   ****                         temp->next = extra;
 6047              	LM746:
 6048 3dcc 8B55E8   		movl	-24(%ebp), %edx
 6049 3dcf 8B45EC   		movl	-20(%ebp), %eax
 6050 3dd2 894204   		movl	%eax, 4(%edx)
3124:str_merge.c   ****                         if (!LookupDupStr(strres, strres_dup, LangIndex, l, ht, h, tok))
 6052              	LM747:
 6053 3dd5 8B45E0   		movl	-32(%ebp), %eax
 6054 3dd8 89442418 		movl	%eax, 24(%esp)
 6055 3ddc 8B45CC   		movl	-52(%ebp), %eax
 6056 3ddf 89442414 		movl	%eax, 20(%esp)
 6057 3de3 8B45F0   		movl	-16(%ebp), %eax
 6058 3de6 89442410 		movl	%eax, 16(%esp)
 6059 3dea 8B45C8   		movl	-56(%ebp), %eax
 6060 3ded 8944240C 		movl	%eax, 12(%esp)
 6061 3df1 8B45C4   		movl	-60(%ebp), %eax
 6062 3df4 89442408 		movl	%eax, 8(%esp)
 6063 3df8 8B45B4   		movl	-76(%ebp), %eax
 6064 3dfb 89442404 		movl	%eax, 4(%esp)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 163


 6065 3dff 8B45E4   		movl	-28(%ebp), %eax
 6066 3e02 890424   		movl	%eax, (%esp)
 6067 3e05 E8F2ECFF 		call	_LookupDupStr
 6067      FF
 6068 3e0a 85C0     		testl	%eax, %eax
 6069 3e0c 0F8509F8 		jne	L321
 6069      FFFF
3125:str_merge.c   ****                         { 
3126:str_merge.c   ****                         strres[LangIndex].Str[i] = malloc(wcslen(tok) * 2 + 2);
 6071              	LM748:
 6072 3e12 8B55C4   		movl	-60(%ebp), %edx
 6073 3e15 89D0     		movl	%edx, %eax
 6074 3e17 01C0     		addl	%eax, %eax
 6075 3e19 01D0     		addl	%edx, %eax
 6076 3e1b 8D0CC500 		leal	0(,%eax,8), %ecx
 6076      000000
 6077 3e22 8B55E4   		movl	-28(%ebp), %edx
 6078 3e25 8B45D8   		movl	-40(%ebp), %eax
 6079 3e28 8D1C8500 		leal	0(,%eax,4), %ebx
 6079      000000
 6080 3e2f 8B340A   		movl	(%edx,%ecx), %esi
 6081 3e32 8B45E0   		movl	-32(%ebp), %eax
 6082 3e35 890424   		movl	%eax, (%esp)
 6083 3e38 E8000000 		call	_wcslen
 6083      00
 6084 3e3d 01C0     		addl	%eax, %eax
 6085 3e3f 83C002   		addl	$2, %eax
 6086 3e42 890424   		movl	%eax, (%esp)
 6087 3e45 E8000000 		call	_malloc
 6087      00
 6088 3e4a 89041E   		movl	%eax, (%esi,%ebx)
3127:str_merge.c   ****                         if (strres[LangIndex].Str[i] == NULL) {STRMERG_LOG_E("malloc fail strres[La
 6090              	LM749:
 6091 3e4d 8B55C4   		movl	-60(%ebp), %edx
 6092 3e50 89D0     		movl	%edx, %eax
 6093 3e52 01C0     		addl	%eax, %eax
 6094 3e54 01D0     		addl	%edx, %eax
 6095 3e56 8D1CC500 		leal	0(,%eax,8), %ebx
 6095      000000
 6096 3e5d 8B4DE4   		movl	-28(%ebp), %ecx
 6097 3e60 8B45D8   		movl	-40(%ebp), %eax
 6098 3e63 8D148500 		leal	0(,%eax,4), %edx
 6098      000000
 6099 3e6a 8B0419   		movl	(%ecx,%ebx), %eax
 6100 3e6d 833C1000 		cmpl	$0, (%eax,%edx)
 6101 3e71 7528     		jne	L357
 6102 3e73 C7442408 		movl	$LC58, 8(%esp)
 6102      20300000 
 6103 3e7b C7442404 		movl	$LC3, 4(%esp)
 6103      4B040000 
 6104 3e83 C7042403 		movl	$3, (%esp)
 6104      000000
 6105 3e8a E8000000 		call	_reslog_adaptor_log
 6105      00
 6106 3e8f C7042402 		movl	$2, (%esp)
 6106      000000
 6107 3e96 E8000000 		call	_exit
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 164


 6107      00
 6108              	L357:
3128:str_merge.c   ****                         wcscpy(strres[LangIndex].Str[i], tok);
 6110              	LM750:
 6111 3e9b 8B45E0   		movl	-32(%ebp), %eax
 6112 3e9e 89442404 		movl	%eax, 4(%esp)
 6113 3ea2 8B55C4   		movl	-60(%ebp), %edx
 6114 3ea5 89D0     		movl	%edx, %eax
 6115 3ea7 01C0     		addl	%eax, %eax
 6116 3ea9 01D0     		addl	%edx, %eax
 6117 3eab 8D1CC500 		leal	0(,%eax,8), %ebx
 6117      000000
 6118 3eb2 8B4DE4   		movl	-28(%ebp), %ecx
 6119 3eb5 8B45D8   		movl	-40(%ebp), %eax
 6120 3eb8 8D148500 		leal	0(,%eax,4), %edx
 6120      000000
 6121 3ebf 8B0419   		movl	(%ecx,%ebx), %eax
 6122 3ec2 8B0410   		movl	(%eax,%edx), %eax
 6123 3ec5 890424   		movl	%eax, (%esp)
 6124 3ec8 E8000000 		call	_wcscpy
 6124      00
3129:str_merge.c   ****                         strres[LangIndex].StrRef[l] = i;
 6126              	LM751:
 6127 3ecd 8B55C4   		movl	-60(%ebp), %edx
 6128 3ed0 89D0     		movl	%edx, %eax
 6129 3ed2 01C0     		addl	%eax, %eax
 6130 3ed4 01D0     		addl	%edx, %eax
 6131 3ed6 8D1CC500 		leal	0(,%eax,8), %ebx
 6131      000000
 6132 3edd 8B55E4   		movl	-28(%ebp), %edx
 6133 3ee0 8B45C8   		movl	-56(%ebp), %eax
 6134 3ee3 8D0C8500 		leal	0(,%eax,4), %ecx
 6134      000000
 6135 3eea 8B541A04 		movl	4(%edx,%ebx), %edx
 6136 3eee 8B45D8   		movl	-40(%ebp), %eax
 6137 3ef1 89040A   		movl	%eax, (%edx,%ecx)
3130:str_merge.c   ****                             strres[LangIndex].TotalLength += wcslen(tok) * 2 + 2;
 6139              	LM752:
 6140 3ef4 8B55C4   		movl	-60(%ebp), %edx
 6141 3ef7 89D0     		movl	%edx, %eax
 6142 3ef9 01C0     		addl	%eax, %eax
 6143 3efb 01D0     		addl	%edx, %eax
 6144 3efd 8D3CC500 		leal	0(,%eax,8), %edi
 6144      000000
 6145 3f04 8B45E4   		movl	-28(%ebp), %eax
 6146 3f07 894594   		movl	%eax, -108(%ebp)
 6147 3f0a 8B55C4   		movl	-60(%ebp), %edx
 6148 3f0d 89D0     		movl	%edx, %eax
 6149 3f0f 01C0     		addl	%eax, %eax
 6150 3f11 01D0     		addl	%edx, %eax
 6151 3f13 8D1CC500 		leal	0(,%eax,8), %ebx
 6151      000000
 6152 3f1a 8B75E4   		movl	-28(%ebp), %esi
 6153 3f1d 8B45E0   		movl	-32(%ebp), %eax
 6154 3f20 890424   		movl	%eax, (%esp)
 6155 3f23 E8000000 		call	_wcslen
 6155      00
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 165


 6156 3f28 01C0     		addl	%eax, %eax
 6157 3f2a 03441E14 		addl	20(%esi,%ebx), %eax
 6158 3f2e 83C002   		addl	$2, %eax
 6159 3f31 8B5594   		movl	-108(%ebp), %edx
 6160 3f34 89443A14 		movl	%eax, 20(%edx,%edi)
3131:str_merge.c   ****                         i++;
 6162              	LM753:
 6163 3f38 8D45D8   		leal	-40(%ebp), %eax
 6164 3f3b FF00     		incl	(%eax)
 6165 3f3d E9D9F6FF 		jmp	L321
 6165      FF
 6166              	L354:
3132:str_merge.c   ****                     }
3133:str_merge.c   ****                     }
3134:str_merge.c   ****                     else
3135:str_merge.c   ****                         found = 0; /* reset the flag */
 6168              	LM754:
 6169 3f42 C745AC00 		movl	$0, -84(%ebp)
 6169      000000
 6170              	LBE38:
 6171 3f49 E9CDF6FF 		jmp	L321
 6171      FF
 6172              	L322:
3136:str_merge.c   ****                 }
3137:str_merge.c   ****             }
3138:str_merge.c   ****         }
3139:str_merge.c   **** 
3140:str_merge.c   ****         strres[LangIndex].MaxID = l + 1;
 6174              	LM755:
 6175 3f4e 8B55C4   		movl	-60(%ebp), %edx
 6176 3f51 89D0     		movl	%edx, %eax
 6177 3f53 01C0     		addl	%eax, %eax
 6178 3f55 01D0     		addl	%edx, %eax
 6179 3f57 8D0CC500 		leal	0(,%eax,8), %ecx
 6179      000000
 6180 3f5e 8B55E4   		movl	-28(%ebp), %edx
 6181 3f61 8B45C8   		movl	-56(%ebp), %eax
 6182 3f64 40       		incl	%eax
 6183 3f65 89440A08 		movl	%eax, 8(%edx,%ecx)
3141:str_merge.c   ****         strres[LangIndex].MaxNum = i;
 6185              	LM756:
 6186 3f69 8B55C4   		movl	-60(%ebp), %edx
 6187 3f6c 89D0     		movl	%edx, %eax
 6188 3f6e 01C0     		addl	%eax, %eax
 6189 3f70 01D0     		addl	%edx, %eax
 6190 3f72 8D0CC500 		leal	0(,%eax,8), %ecx
 6190      000000
 6191 3f79 8B55E4   		movl	-28(%ebp), %edx
 6192 3f7c 8B45D8   		movl	-40(%ebp), %eax
 6193 3f7f 89440A0C 		movl	%eax, 12(%edx,%ecx)
 6195              	LM757:
 6196              	L297:
 6197 3f83 8D45D4   		leal	-44(%ebp), %eax
 6198 3f86 FF00     		incl	(%eax)
 6199 3f88 E9EEF2FF 		jmp	L295
 6199      FF
 6200              	L296:
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 166


3142:str_merge.c   ****     }
3143:str_merge.c   ****     result->iLang = mtk_gMaxDeployedLangs;
 6202              	LM758:
 6203 3f8d 8B5508   		movl	8(%ebp), %edx
 6204 3f90 0FB70500 		movzwl	_mtk_gMaxDeployedLangs, %eax
 6204      000000
 6205 3f97 894208   		movl	%eax, 8(%edx)
3144:str_merge.c   ****     result->strres = strres;
 6207              	LM759:
 6208 3f9a 8B5508   		movl	8(%ebp), %edx
 6209 3f9d 8B45E4   		movl	-28(%ebp), %eax
 6210 3fa0 8902     		movl	%eax, (%edx)
3145:str_merge.c   ****     /* record duplicated string resource */
3146:str_merge.c   ****     result->strres_dup = strres_dup;
 6212              	LM760:
 6213 3fa2 8B5508   		movl	8(%ebp), %edx
 6214 3fa5 8B45B4   		movl	-76(%ebp), %eax
 6215 3fa8 894204   		movl	%eax, 4(%edx)
3147:str_merge.c   **** 
3148:str_merge.c   ****     return CurrMaxTransStrId;
 6217              	LM761:
 6218 3fab 0FB70500 		movzwl	_CurrMaxTransStrId, %eax
 6218      000000
3149:str_merge.c   **** }
 6220              	LM762:
 6221 3fb2 83C47C   		addl	$124, %esp
 6222 3fb5 5B       		popl	%ebx
 6223 3fb6 5E       		popl	%esi
 6224 3fb7 5F       		popl	%edi
 6225 3fb8 5D       		popl	%ebp
 6226 3fb9 C3       		ret
 6227              	LBE37:
 6252              	Lscope28:
 6254              	LC61:
 6255 3fba 776200   		.ascii "wb\0"
 6256              	LC62:
 6257 3fbd 2E5C5C64 		.ascii ".\\\\debug\\\\language_usage.txt\0"
 6257      65627567 
 6257      5C5C6C61 
 6257      6E677561 
 6257      67655F75 
 6258              		.align 2
 6259              	LC63:
 6260 3fda 4C004300 		.ascii "L\0C\0C\0\0\0"
 6260      43000000 
 6261              		.align 2
 6262              	LC64:
 6263 3fe2 53005300 		.ascii "S\0S\0C\0\0\0"
 6263      43000000 
 6264              		.align 2
 6265              	LC65:
 6266 3fea 4E006100 		.ascii "N\0a\0m\0e\0\0\0"
 6266      6D006500 
 6266      0000
 6267              		.align 2
 6268              	LC66:
 6269 3ff4 25006C00 		.ascii "%\0l\0s\0\11\0%\0l\0s\0\11\0%\0l\0s\0\12\0\0\0"
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 167


 6269      73000900 
 6269      25006C00 
 6269      73000900 
 6269      25006C00 
 6270 400e 90909090 		.align 32
 6270      90909090 
 6270      90909090 
 6270      90909090 
 6270      9090
 6271              	LC67:
 6272 4020 6F757470 		.ascii "output language_usage.txt done.\12\0"
 6272      7574206C 
 6272      616E6775 
 6272      6167655F 
 6272      75736167 
 6274              	.globl _print_language_usage
 6276              	_print_language_usage:
3150:str_merge.c   **** #else /* __MMI_RESOURCE_ENFB_SUPPORT__ */
3151:str_merge.c   **** 
3152:str_merge.c   **** /*****************************************************************************
3153:str_merge.c   ****  * FUNCTION
3154:str_merge.c   ****  *  GetStrResList
3155:str_merge.c   ****  * DESCRIPTION
3156:str_merge.c   ****  *  Generate a non-duplicate string list from input file, using hash table
3157:str_merge.c   ****  * PARAMETERS
3158:str_merge.c   ****  *  result  [OUT]
3159:str_merge.c   ****  * RETURNS
3160:str_merge.c   ****  *  Return number of all populated string IDs
3161:str_merge.c   ****  *****************************************************************************/
3162:str_merge.c   **** static int GetStrResList(StrResSet *result)
3163:str_merge.c   **** {
3164:str_merge.c   ****     /*----------------------------------------------------------------*/
3165:str_merge.c   ****     /* Local Variables                                                */
3166:str_merge.c   ****     /*----------------------------------------------------------------*/
3167:str_merge.c   ****     struct HashItem **ht = NULL, *extra = NULL, *temp = NULL;
3168:str_merge.c   ****     struct StrRes *strres = NULL;
3169:str_merge.c   ****     wchar_t *tok = NULL;
3170:str_merge.c   ****     wchar_t *tok_eng = NULL;  
3171:str_merge.c   ****     int i = 0, j = 0, k = 0, h = 0, l = 0;
3172:str_merge.c   ****     int LangIndex = 0;
3173:str_merge.c   ****     int hash_range = 0;
3174:str_merge.c   ****     int ref_item_found = 0;
3175:str_merge.c   **** #ifdef MEM_REF_LIST_OPT
3176:str_merge.c   ****     RefListItem * tmp_list_item = NULL;
3177:str_merge.c   **** #endif
3178:str_merge.c   **** 
3179:str_merge.c   ****     U16 nStrId;
3180:str_merge.c   **** 
3181:str_merge.c   ****     /*----------------------------------------------------------------*/
3182:str_merge.c   ****     /* Code Body                                                      */
3183:str_merge.c   ****     /*----------------------------------------------------------------*/
3184:str_merge.c   ****     strres = malloc(sizeof(struct StrRes) * mtk_gMaxDeployedLangs);
3185:str_merge.c   ****     ht = malloc(sizeof(struct HashItem *) * mtk_gMaxDeployedLangs);
3186:str_merge.c   **** 
3187:str_merge.c   ****     mtk_gLanguageFlag = malloc(sizeof(int) * mtk_gMaxDeployedLangs);
3188:str_merge.c   ****     for (h = 0; h < mtk_gMaxDeployedLangs; h++)
3189:str_merge.c   ****     {
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 168


3190:str_merge.c   ****         mtk_gLanguageFlag[h] = 0;
3191:str_merge.c   ****     }
3192:str_merge.c   **** 
3193:str_merge.c   ****     for (j = 0; j < nUsedLang; j++)
3194:str_merge.c   ****     {
3195:str_merge.c   ****         wcscpy(ref_tmp, filter_ref_ssc);
3196:str_merge.c   ****         tok = wcstok(ref_tmp, DELIMETER);   /* ENUM */
3197:str_merge.c   ****         tok = wcstok(NULL, DELIMETER);      /* MODULE NAME */
3198:str_merge.c   ****         tok = wcstok(NULL, DELIMETER);      /* MAX LENGTH */
3199:str_merge.c   ****         tok = wcstok(NULL, DELIMETER);      /* DESCRIPTION */
3200:str_merge.c   **** 
3201:str_merge.c   ****         /* change to corresponding language column according to j */
3202:str_merge.c   ****         for (k = 0; k < j + 1; k++)
3203:str_merge.c   ****         {
3204:str_merge.c   ****             tok = wcstok(NULL, DELIMETER);
3205:str_merge.c   ****         }
3206:str_merge.c   ****         ASSERT(tok != NULL);
3207:str_merge.c   ****         LangIndex = ifLanguageUsed(tok);
3208:str_merge.c   **** 
3209:str_merge.c   ****         if (LangIndex < 0) /* the language is not used in font resource */
3210:str_merge.c   ****             continue;
3211:str_merge.c   **** 
3212:str_merge.c   ****         mtk_gLanguageFlag[LangIndex] = 1;
3213:str_merge.c   **** 
3214:str_merge.c   ****         strres[LangIndex].Str = (wchar_t **)malloc(sizeof(wchar_t *) * CurrMaxStringId);
3215:str_merge.c   ****         strres[LangIndex].StrRef = (int *)malloc(sizeof(int) * CurrMaxStringId);
3216:str_merge.c   ****         /* set default value */
3217:str_merge.c   ****         for (l = 0; l < CurrMaxStringId; l++)
3218:str_merge.c   ****         {
3219:str_merge.c   ****             strres[LangIndex].StrRef[l] = -1;
3220:str_merge.c   ****             strres[LangIndex].TotalLength = 0;
3221:str_merge.c   ****         }
3222:str_merge.c   **** 
3223:str_merge.c   ****         /* set hash_range as maximum id times 1.1(Can be changed) */
3224:str_merge.c   ****         hash_range = (int)(CurrMaxStringId * 1.1);
3225:str_merge.c   **** 
3226:str_merge.c   ****         /* initialize hash table */
3227:str_merge.c   ****         ht[LangIndex] = (struct HashItem *)malloc(sizeof(struct HashItem) * hash_range);
3228:str_merge.c   ****         for (k = 0; k < hash_range; k++)
3229:str_merge.c   ****         {
3230:str_merge.c   ****             ht[LangIndex][k].next = NULL;
3231:str_merge.c   ****             ht[LangIndex][k].pointer = -1;
3232:str_merge.c   ****         }
3233:str_merge.c   **** 
3234:str_merge.c   ****         k = 0;
3235:str_merge.c   ****         i = 0;  /* number of Ref(non-duplicate strings, excluding NULL) */
3236:str_merge.c   ****         l = -1; /* number of ID (all strings) */
3237:str_merge.c   **** 
3238:str_merge.c   ****         while (l < CurrMaxStringId - 1)
3239:str_merge.c   ****         {
3240:str_merge.c   ****             l++;
3241:str_merge.c   ****             nStrId = StrID[l];
3242:str_merge.c   **** 
3243:str_merge.c   ****             /* check if ID already found in ref_list.txt */
3244:str_merge.c   ****             if (StrLine[nStrId] != 0)
3245:str_merge.c   ****             {
3246:str_merge.c   **** #ifndef MEM_REF_LIST_OPT
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 169


3247:str_merge.c   ****                 wcscpy(ref_tmp, ref_all + (StrLine[nStrId] - 1) * g_line_buf_act_length);
3248:str_merge.c   **** #else
3249:str_merge.c   ****                 tmp_list_item = GetRefListItem(ref_all_list,(StrLine[nStrId] - 1));
3250:str_merge.c   ****                 if(tmp_list_item != NULL)
3251:str_merge.c   ****                 {
3252:str_merge.c   ****                     ref_item_found = 1;
3253:str_merge.c   ****                     wcscpy(ref_tmp,tmp_list_item->ItemData );  
3254:str_merge.c   ****                 }else
3255:str_merge.c   ****                 {
3256:str_merge.c   ****                     ref_item_found = 0;
3257:str_merge.c   ****                     STRMERG_LOG_E("No Ref List item for %d: ",nStrId);
3258:str_merge.c   ****                     fflush(stdout);
3259:str_merge.c   ****                     wcscpy(ref_tmp,L""); 
3260:str_merge.c   ****                 }
3261:str_merge.c   **** #endif
3262:str_merge.c   ****             }
3263:str_merge.c   **** 
3264:str_merge.c   ****             if(ref_item_found == 1)
3265:str_merge.c   ****             {
3266:str_merge.c   ****                 tok = wcstok(ref_tmp, DELIMETER);
3267:str_merge.c   ****                 tok = wcstok(NULL, DELIMETER);  /* skip originally existing Module Name */
3268:str_merge.c   ****                 tok = wcstok(NULL, DELIMETER);  /* skip originally existing Max String Length */
3269:str_merge.c   ****                 tok = wcstok(NULL, DELIMETER);  /* skip originally existing Description */
3270:str_merge.c   ****                 /* change to corresponding language column according to j */
3271:str_merge.c   ****                 for (k = 0; k < j + 1; k++)
3272:str_merge.c   ****                 {
3273:str_merge.c   ****                     tok = wcstok(NULL, DELIMETER);
3274:str_merge.c   ****                     if (k == 0)
3275:str_merge.c   ****                     {
3276:str_merge.c   ****                         tok_eng = tok;
3277:str_merge.c   ****                     }
3278:str_merge.c   **** 
3279:str_merge.c   ****                     /* here possible case for tok to be NULL? */
3280:str_merge.c   **** 
3281:str_merge.c   ****                     if (tok != NULL && tok[wcslen(tok) - 1] == (wchar_t)'\n')
3282:str_merge.c   ****                     {
3283:str_merge.c   ****                         /* remove carriage-return */
3284:str_merge.c   ****                         tok[wcslen(tok) - 2] = '\0';
3285:str_merge.c   ****                     }
3286:str_merge.c   ****                 }
3287:str_merge.c   ****             }
3288:str_merge.c   ****             else
3289:str_merge.c   ****             {
3290:str_merge.c   ****                 /* no corresponding line in ref_list.txt */
3291:str_merge.c   ****                 tok = (wchar_t *)Str[nStrId];
3292:str_merge.c   ****             }
3293:str_merge.c   **** 
3294:str_merge.c   ****             /* decise if the read-in string is " " (blank) */
3295:str_merge.c   ****             if (tok != NULL && tok[0] == 20 && tok[1] == 0)
3296:str_merge.c   ****                 tok = NULL;
3297:str_merge.c   ****             /* handling NULL read-in string, it's Ref is default value -1 */
3298:str_merge.c   ****             if (tok == NULL)
3299:str_merge.c   ****             {
3300:str_merge.c   ****                 /* nothing to be done */
3301:str_merge.c   ****             }
3302:str_merge.c   ****             else if (tok[0] == NO_TRANSLATION_MARKER && tok[1] == 0)
3303:str_merge.c   ****             {
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 170


3304:str_merge.c   ****                 /* Use English translation in ref_list */
3305:str_merge.c   ****                 if (LangIndex == 0)
3306:str_merge.c   ****                 {
3307:str_merge.c   ****                 /* no translation for current language */
3308:str_merge.c   ****                 tok = (wchar_t *)Str[nStrId];
3309:str_merge.c   ****                 }
3310:str_merge.c   ****                 else
3311:str_merge.c   ****                 {
3312:str_merge.c   ****                     tok = (wchar_t *)tok_eng;
3313:str_merge.c   ****                 }
3314:str_merge.c   **** 
3315:str_merge.c   ****             }
3316:str_merge.c   **** 
3317:str_merge.c   ****             if (tok != NULL)
3318:str_merge.c   ****             {
3319:str_merge.c   ****                 /* transform "\""n" */
3320:str_merge.c   ****                 Trans(tok, tok);
3321:str_merge.c   **** 
3322:str_merge.c   ****                 /* calculate hash value */
3323:str_merge.c   ****                 h = GetHashValue(tok, hash_range);
3324:str_merge.c   ****                 if (ht[LangIndex][h].pointer == -1)
3325:str_merge.c   ****                 {
3326:str_merge.c   ****                     /* no duplicate hash value */
3327:str_merge.c   ****                     ht[LangIndex][h].pointer = i;
3328:str_merge.c   ****                     ht[LangIndex][h].next = NULL;
3329:str_merge.c   ****                     strres[LangIndex].Str[i] = (wchar_t *)malloc(wcslen(tok) * 2 + 2);
3330:str_merge.c   ****                     wcscpy(strres[LangIndex].Str[i], tok);
3331:str_merge.c   ****                     /* insert the string into the list */
3332:str_merge.c   ****                     strres[LangIndex].StrRef[l] = i;
3333:str_merge.c   ****                     strres[LangIndex].TotalLength += wcslen(tok) + 1;
3334:str_merge.c   ****                     i++;
3335:str_merge.c   ****                 }
3336:str_merge.c   ****                 else
3337:str_merge.c   ****                 {
3338:str_merge.c   ****                     /* 
3339:str_merge.c   ****                      * there are duplicate hash value, check if the string 
3340:str_merge.c   ****                      * is really the same with that has the same hash value
3341:str_merge.c   ****                      */
3342:str_merge.c   ****                     int found = 0;
3343:str_merge.c   ****                     if (wcscmp(tok, strres[LangIndex].Str[ht[LangIndex][h].pointer]) == 0)
3344:str_merge.c   ****                     {
3345:str_merge.c   ****                         /* the two string is the same */
3346:str_merge.c   ****                         strres[LangIndex].StrRef[l] = ht[LangIndex][h].pointer;
3347:str_merge.c   ****                         /* read in next string */
3348:str_merge.c   ****                         continue;
3349:str_merge.c   ****                     }
3350:str_merge.c   **** 
3351:str_merge.c   ****                     /* 
3352:str_merge.c   ****                      * although the two strings have the same hash value, 
3353:str_merge.c   ****                      * but they are different
3354:str_merge.c   ****                      * compare the strings in linked list...
3355:str_merge.c   ****                      */
3356:str_merge.c   ****                     temp = &ht[LangIndex][h];
3357:str_merge.c   ****                     while (temp->next != NULL)
3358:str_merge.c   ****                     {
3359:str_merge.c   ****                         temp = temp->next;
3360:str_merge.c   ****                         if (wcscmp(tok, strres[LangIndex].Str[temp->pointer]) == 0)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 171


3361:str_merge.c   ****                         {
3362:str_merge.c   ****                             /* find a identical string in linked list, set the flag on */
3363:str_merge.c   ****                             found = 1;
3364:str_merge.c   ****                             strres[LangIndex].StrRef[l] = temp->pointer;
3365:str_merge.c   ****                             break;
3366:str_merge.c   ****                         }
3367:str_merge.c   ****                     }
3368:str_merge.c   ****                     if (found == 0)
3369:str_merge.c   ****                     {
3370:str_merge.c   ****                         /* 
3371:str_merge.c   ****                          * the input string is different with all other 
3372:str_merge.c   ****                          * strings in hash table, add the string in linked 
3373:str_merge.c   ****                          * list
3374:str_merge.c   ****                          */
3375:str_merge.c   ****                         extra = (struct HashItem *)malloc(sizeof(struct HashItem));
3376:str_merge.c   ****                         extra->next = NULL;
3377:str_merge.c   ****                         extra->pointer = i;
3378:str_merge.c   ****                         temp->next = extra;
3379:str_merge.c   ****                         strres[LangIndex].Str[i] = malloc(wcslen(tok) * 2 + 2);
3380:str_merge.c   ****                         wcscpy(strres[LangIndex].Str[i], tok);
3381:str_merge.c   ****                         strres[LangIndex].StrRef[l] = i;
3382:str_merge.c   ****                         strres[LangIndex].TotalLength += wcslen(tok) + 1;
3383:str_merge.c   ****                         i++;
3384:str_merge.c   ****                     }
3385:str_merge.c   ****                     else
3386:str_merge.c   ****                         found = 0; /* reset the flag */
3387:str_merge.c   ****                 }
3388:str_merge.c   ****             }
3389:str_merge.c   ****         }
3390:str_merge.c   **** 
3391:str_merge.c   ****         strres[LangIndex].MaxID = l + 1;
3392:str_merge.c   ****         strres[LangIndex].MaxNum = i;
3393:str_merge.c   ****     }
3394:str_merge.c   ****     result->iLang = mtk_gMaxDeployedLangs;
3395:str_merge.c   ****     result->strres = strres;
3396:str_merge.c   **** 
3397:str_merge.c   ****     return CurrMaxStringId;
3398:str_merge.c   **** }
3399:str_merge.c   **** #endif /* __MMI_RESOURCE_ENFB_SUPPORT__*/
3400:str_merge.c   **** 
3401:str_merge.c   **** /*****************************************************************************
3402:str_merge.c   ****  * FUNCTION
3403:str_merge.c   ****  *  print_language_usage
3404:str_merge.c   ****  * DESCRIPTION
3405:str_merge.c   ****  *  dump mtk_gLanguageArray to language_usage.txt
3406:str_merge.c   ****  * PARAMETERS
3407:str_merge.c   ****  *  void
3408:str_merge.c   ****  * RETURNS
3409:str_merge.c   ****  *  void
3410:str_merge.c   ****  *****************************************************************************/
3411:str_merge.c   **** void print_language_usage(void)
3412:str_merge.c   **** {
 6278              	LM763:
 6279 4041 55       		pushl	%ebp
 6280 4042 89E5     		movl	%esp, %ebp
 6281 4044 57       		pushl	%edi
 6282 4045 83EC74   		subl	$116, %esp
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 172


3413:str_merge.c   ****     /*----------------------------------------------------------------*/
3414:str_merge.c   ****     /* Local Variables                                                */
3415:str_merge.c   ****     /*----------------------------------------------------------------*/
3416:str_merge.c   ****     FILE *fp = fopen(".\\\\debug\\\\language_usage.txt", "wb");
 6284              	LM764:
 6285              	LBB39:
 6286 4048 C7442404 		movl	$LC61, 4(%esp)
 6286      BA3F0000 
 6287 4050 C70424BD 		movl	$LC62, (%esp)
 6287      3F0000
 6288 4057 E8000000 		call	_fopen
 6288      00
 6289 405c 8945F4   		movl	%eax, -12(%ebp)
3417:str_merge.c   ****     S32 i;
3418:str_merge.c   **** 
3419:str_merge.c   ****     /*----------------------------------------------------------------*/
3420:str_merge.c   ****     /* Code Body                                                      */
3421:str_merge.c   ****     /*----------------------------------------------------------------*/
3422:str_merge.c   ****     if (fp != NULL)
 6291              	LM765:
 6292 405f 837DF400 		cmpl	$0, -12(%ebp)
 6293 4063 0F847601 		je	L359
 6293      0000
3423:str_merge.c   ****     {
3424:str_merge.c   ****         fwprintf(fp, L"%ls\t%ls\t%ls\n", L"Name", L"SSC", L"LCC");
 6295              	LM766:
 6296 4069 C7442410 		movl	$LC63, 16(%esp)
 6296      DA3F0000 
 6297 4071 C744240C 		movl	$LC64, 12(%esp)
 6297      E23F0000 
 6298 4079 C7442408 		movl	$LC65, 8(%esp)
 6298      EA3F0000 
 6299 4081 C7442404 		movl	$LC66, 4(%esp)
 6299      F43F0000 
 6300 4089 8B45F4   		movl	-12(%ebp), %eax
 6301 408c 890424   		movl	%eax, (%esp)
 6302 408f E8000000 		call	_fwprintf
 6302      00
3425:str_merge.c   ****         for (i = 0 ; i < mtk_gMaxDeployedLangs ; i++)
 6304              	LM767:
 6305 4094 C745F000 		movl	$0, -16(%ebp)
 6305      000000
 6306              	L361:
 6307 409b 0FB70500 		movzwl	_mtk_gMaxDeployedLangs, %eax
 6307      000000
 6308 40a2 3945F0   		cmpl	%eax, -16(%ebp)
 6309 40a5 7C05     		jl	L364
 6310 40a7 E9100100 		jmp	L362
 6310      00
 6311              	L364:
3426:str_merge.c   ****         {
3427:str_merge.c   ****             S8 ssc[SSC_SIZE*2] = {0}, lcc[LCC_SIZE*2] = {0};
 6313              	LM768:
 6314              	LBB40:
 6315 40ac 8D7DC8   		leal	-56(%ebp), %edi
 6316 40af FC       		cld
 6317 40b0 BA000000 		movl	$0, %edx
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 173


 6317      00
 6318 40b5 B8050000 		movl	$5, %eax
 6318      00
 6319 40ba 89C1     		movl	%eax, %ecx
 6320 40bc 89D0     		movl	%edx, %eax
 6321 40be F3       		rep
 6322 40bf AB       		stosl
 6323 40c0 8D7DB8   		leal	-72(%ebp), %edi
 6324 40c3 FC       		cld
 6325 40c4 BA000000 		movl	$0, %edx
 6325      00
 6326 40c9 B8040000 		movl	$4, %eax
 6326      00
 6327 40ce 89C1     		movl	%eax, %ecx
 6328 40d0 89D0     		movl	%edx, %eax
 6329 40d2 F3       		rep
 6330 40d3 AB       		stosl
3428:str_merge.c   ****             S32 j;
3429:str_merge.c   **** 
3430:str_merge.c   ****             for (j = 0 ; j < strlen(mtk_gLanguageArray[i].aLangSSC) ; j++)
 6332              	LM769:
 6333 40d4 C745B400 		movl	$0, -76(%ebp)
 6333      000000
 6334              	L365:
 6335 40db 8B55F0   		movl	-16(%ebp), %edx
 6336 40de 89D0     		movl	%edx, %eax
 6337 40e0 C1E005   		sall	$5, %eax
 6338 40e3 29D0     		subl	%edx, %eax
 6339 40e5 01C0     		addl	%eax, %eax
 6340 40e7 05280000 		addl	$_mtk_gLanguageArray+40, %eax
 6340      00
 6341 40ec 890424   		movl	%eax, (%esp)
 6342 40ef E8000000 		call	_strlen
 6342      00
 6343 40f4 3945B4   		cmpl	%eax, -76(%ebp)
 6344 40f7 7202     		jb	L368
 6345 40f9 EB2D     		jmp	L366
 6346              	L368:
3431:str_merge.c   ****                 ssc[2*j] = (mtk_gLanguageArray[i].aLangSSC[j]), ssc[2*j + 1] = 0;
 6348              	LM770:
 6349 40fb 8B4DB4   		movl	-76(%ebp), %ecx
 6350 40fe 8B55F0   		movl	-16(%ebp), %edx
 6351 4101 89D0     		movl	%edx, %eax
 6352 4103 C1E005   		sall	$5, %eax
 6353 4106 29D0     		subl	%edx, %eax
 6354 4108 01C0     		addl	%eax, %eax
 6355 410a 0345B4   		addl	-76(%ebp), %eax
 6356 410d 05280000 		addl	$_mtk_gLanguageArray+40, %eax
 6356      00
 6357 4112 0FB600   		movzbl	(%eax), %eax
 6358 4115 88444DC8 		movb	%al, -56(%ebp,%ecx,2)
 6359 4119 8B45B4   		movl	-76(%ebp), %eax
 6360 411c C64445C9 		movb	$0, -55(%ebp,%eax,2)
 6360      00
 6362              	LM771:
 6363 4121 8D45B4   		leal	-76(%ebp), %eax
 6364 4124 FF00     		incl	(%eax)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 174


 6365 4126 EBB3     		jmp	L365
 6366              	L366:
3432:str_merge.c   ****             for (j = 0 ; j < strlen(mtk_gLanguageArray[i].aLangCountryCode) ; j++)
 6368              	LM772:
 6369 4128 C745B400 		movl	$0, -76(%ebp)
 6369      000000
 6370              	L369:
 6371 412f 8B55F0   		movl	-16(%ebp), %edx
 6372 4132 89D0     		movl	%edx, %eax
 6373 4134 C1E005   		sall	$5, %eax
 6374 4137 29D0     		subl	%edx, %eax
 6375 4139 01C0     		addl	%eax, %eax
 6376 413b 05320000 		addl	$_mtk_gLanguageArray+50, %eax
 6376      00
 6377 4140 890424   		movl	%eax, (%esp)
 6378 4143 E8000000 		call	_strlen
 6378      00
 6379 4148 3945B4   		cmpl	%eax, -76(%ebp)
 6380 414b 7202     		jb	L372
 6381 414d EB2D     		jmp	L370
 6382              	L372:
3433:str_merge.c   ****                 lcc[2*j] = (mtk_gLanguageArray[i].aLangCountryCode[j]), lcc[2*j + 1] = 0;
 6384              	LM773:
 6385 414f 8B4DB4   		movl	-76(%ebp), %ecx
 6386 4152 8B55F0   		movl	-16(%ebp), %edx
 6387 4155 89D0     		movl	%edx, %eax
 6388 4157 C1E005   		sall	$5, %eax
 6389 415a 29D0     		subl	%edx, %eax
 6390 415c 01C0     		addl	%eax, %eax
 6391 415e 0345B4   		addl	-76(%ebp), %eax
 6392 4161 05320000 		addl	$_mtk_gLanguageArray+50, %eax
 6392      00
 6393 4166 0FB600   		movzbl	(%eax), %eax
 6394 4169 88444DB8 		movb	%al, -72(%ebp,%ecx,2)
 6395 416d 8B45B4   		movl	-76(%ebp), %eax
 6396 4170 C64445B9 		movb	$0, -71(%ebp,%eax,2)
 6396      00
 6398              	LM774:
 6399 4175 8D45B4   		leal	-76(%ebp), %eax
 6400 4178 FF00     		incl	(%eax)
 6401 417a EBB3     		jmp	L369
 6402              	L370:
3434:str_merge.c   ****             fwprintf(fp, L"%ls\t%ls\t%ls\n", mtk_gLanguageArray[i].aName, ssc, lcc);
 6404              	LM775:
 6405 417c 8D45B8   		leal	-72(%ebp), %eax
 6406 417f 89442410 		movl	%eax, 16(%esp)
 6407 4183 8D45C8   		leal	-56(%ebp), %eax
 6408 4186 8944240C 		movl	%eax, 12(%esp)
 6409 418a 8B55F0   		movl	-16(%ebp), %edx
 6410 418d 89D0     		movl	%edx, %eax
 6411 418f C1E005   		sall	$5, %eax
 6412 4192 29D0     		subl	%edx, %eax
 6413 4194 01C0     		addl	%eax, %eax
 6414 4196 05000000 		addl	$_mtk_gLanguageArray, %eax
 6414      00
 6415 419b 89442408 		movl	%eax, 8(%esp)
 6416 419f C7442404 		movl	$LC66, 4(%esp)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 175


 6416      F43F0000 
 6417 41a7 8B45F4   		movl	-12(%ebp), %eax
 6418 41aa 890424   		movl	%eax, (%esp)
 6419 41ad E8000000 		call	_fwprintf
 6419      00
 6421              	LM776:
 6422 41b2 8D45F0   		leal	-16(%ebp), %eax
 6423              	LBE40:
 6424 41b5 FF00     		incl	(%eax)
 6425 41b7 E9DFFEFF 		jmp	L361
 6425      FF
 6426              	L362:
3435:str_merge.c   ****         }
3436:str_merge.c   ****         fclose(fp);
 6428              	LM777:
 6429 41bc 8B45F4   		movl	-12(%ebp), %eax
 6430 41bf 890424   		movl	%eax, (%esp)
 6431 41c2 E8000000 		call	_fclose
 6431      00
3437:str_merge.c   **** 
3438:str_merge.c   ****         fprintf(stderr, "output language_usage.txt done.\n");
 6433              	LM778:
 6434 41c7 C7442404 		movl	$LC67, 4(%esp)
 6434      20400000 
 6435 41cf A1000000 		movl	__imp___iob, %eax
 6435      00
 6436 41d4 83C040   		addl	$64, %eax
 6437 41d7 890424   		movl	%eax, (%esp)
 6438 41da E8000000 		call	_fprintf
 6438      00
3439:str_merge.c   ****     }
3440:str_merge.c   **** }
 6440              	LM779:
 6441              	L359:
 6442 41df 83C474   		addl	$116, %esp
 6443 41e2 5F       		popl	%edi
 6444 41e3 5D       		popl	%ebp
 6445 41e4 C3       		ret
 6446              	LBE39:
 6456              	Lscope29:
 6458              	LC68:
 6459 41e5 0900     		.ascii "\11\0"
 6465              	_GetItemAsc:
3441:str_merge.c   **** 
3442:str_merge.c   **** 
3443:str_merge.c   **** /*****************************************************************************
3444:str_merge.c   ****  * FUNCTION
3445:str_merge.c   **** *  GetItemAsc
3446:str_merge.c   **** * DESCRIPTION
3447:str_merge.c   **** *  Get token between index and index+1 DELIMETER
3448:str_merge.c   **** * PARAMETERS
3449:str_merge.c   **** *  string  [IN]
3450:str_merge.c   **** *  index   [IN]
3451:str_merge.c   **** *  buf     [OUT]
3452:str_merge.c   **** * RETURNS
3453:str_merge.c   **** *  void
3454:str_merge.c   **** *****************************************************************************/
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 176


3455:str_merge.c   **** static void GetItemAsc(char *string, int index, char *buf)
3456:str_merge.c   **** {
 6467              	LM780:
 6468 41e7 55       		pushl	%ebp
 6469 41e8 89E5     		movl	%esp, %ebp
 6470 41ea 83EC18   		subl	$24, %esp
3457:str_merge.c   ****     /*----------------------------------------------------------------*/
3458:str_merge.c   ****     /* Local Variables                                                */
3459:str_merge.c   ****     /*----------------------------------------------------------------*/
3460:str_merge.c   ****     char *p1 = string;
 6472              	LM781:
 6473              	LBB41:
 6474 41ed 8B4508   		movl	8(%ebp), %eax
 6475 41f0 8945FC   		movl	%eax, -4(%ebp)
3461:str_merge.c   ****     char *p2 = strstr(string, "\t");
 6477              	LM782:
 6478 41f3 C7442404 		movl	$LC68, 4(%esp)
 6478      E5410000 
 6479 41fb 8B4508   		movl	8(%ebp), %eax
 6480 41fe 890424   		movl	%eax, (%esp)
 6481 4201 E8000000 		call	_strstr
 6481      00
 6482 4206 8945F8   		movl	%eax, -8(%ebp)
3462:str_merge.c   ****     int n = p2 - p1;
 6484              	LM783:
 6485 4209 8B55FC   		movl	-4(%ebp), %edx
 6486 420c 8B45F8   		movl	-8(%ebp), %eax
 6487 420f 29D0     		subl	%edx, %eax
 6488 4211 8945F4   		movl	%eax, -12(%ebp)
3463:str_merge.c   ****     
3464:str_merge.c   ****     /*----------------------------------------------------------------*/
3465:str_merge.c   ****     /* Code Body                                                      */
3466:str_merge.c   ****     /*----------------------------------------------------------------*/
3467:str_merge.c   ****     ASSERT(p2 != NULL);
 6490              	LM784:
 6491 4214 837DF800 		cmpl	$0, -8(%ebp)
 6492 4218 7502     		jne	L378
 6493              	L375:
 6494 421a EBFE     		jmp	L375
 6495              	L378:
 6496 421c 90       		nop
3468:str_merge.c   **** 
3469:str_merge.c   ****     while (index > 0)
 6498              	LM785:
 6499              	L379:
 6500 421d 837D0C00 		cmpl	$0, 12(%ebp)
 6501 4221 7F02     		jg	L381
 6502 4223 EB33     		jmp	L380
 6503              	L381:
3470:str_merge.c   ****     {
3471:str_merge.c   ****         p1 = p2 + 1;
 6505              	LM786:
 6506 4225 8B45F8   		movl	-8(%ebp), %eax
 6507 4228 40       		incl	%eax
 6508 4229 8945FC   		movl	%eax, -4(%ebp)
3472:str_merge.c   ****         p2 = strstr(p1, "\t");
 6510              	LM787:
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 177


 6511 422c C7442404 		movl	$LC68, 4(%esp)
 6511      E5410000 
 6512 4234 8B45FC   		movl	-4(%ebp), %eax
 6513 4237 890424   		movl	%eax, (%esp)
 6514 423a E8000000 		call	_strstr
 6514      00
 6515 423f 8945F8   		movl	%eax, -8(%ebp)
3473:str_merge.c   ****         n = p2 - p1;
 6517              	LM788:
 6518 4242 8B55FC   		movl	-4(%ebp), %edx
 6519 4245 8B45F8   		movl	-8(%ebp), %eax
 6520 4248 29D0     		subl	%edx, %eax
 6521 424a 8945F4   		movl	%eax, -12(%ebp)
3474:str_merge.c   ****         index--;
 6523              	LM789:
 6524 424d 8D450C   		leal	12(%ebp), %eax
 6525 4250 FF08     		decl	(%eax)
3475:str_merge.c   ****         if (p2 == NULL)
 6527              	LM790:
 6528 4252 837DF800 		cmpl	$0, -8(%ebp)
 6529 4256 75C5     		jne	L379
 6530              	L380:
3476:str_merge.c   ****             break;
3477:str_merge.c   ****     }
3478:str_merge.c   ****     
3479:str_merge.c   ****     if (index > 0)
 6532              	LM791:
 6533 4258 837D0C00 		cmpl	$0, 12(%ebp)
 6534 425c 7E08     		jle	L383
3480:str_merge.c   ****     {
3481:str_merge.c   ****         buf[0] = '\0';
 6536              	LM792:
 6537 425e 8B4510   		movl	16(%ebp), %eax
 6538 4261 C60000   		movb	$0, (%eax)
 6539 4264 EB32     		jmp	L373
 6540              	L383:
3482:str_merge.c   ****     }
3483:str_merge.c   ****     else if (p2 == NULL)
 6542              	LM793:
 6543 4266 837DF800 		cmpl	$0, -8(%ebp)
 6544 426a 7502     		jne	L385
 6545 426c EB2A     		jmp	L373
 6546              	L385:
3484:str_merge.c   ****     {
3485:str_merge.c   ****         /*
3486:str_merge.c   ****         strcpy(buf, p1);
3487:str_merge.c   ****         n = strstr(p1, "\n") - p1;
3488:str_merge.c   ****         buf[n] = '\0';
3489:str_merge.c   ****         */
3490:str_merge.c   ****     }
3491:str_merge.c   ****     else
3492:str_merge.c   ****     {
3493:str_merge.c   ****         ASSERT(p1 != NULL);
 6548              	LM794:
 6549 426e 837DFC00 		cmpl	$0, -4(%ebp)
 6550 4272 7502     		jne	L391
 6551              	L388:
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 178


 6552 4274 EBFE     		jmp	L388
 6553              	L391:
3494:str_merge.c   ****         strncpy(buf, p1, n);
 6555              	LM795:
 6556 4276 8B45F4   		movl	-12(%ebp), %eax
 6557 4279 89442408 		movl	%eax, 8(%esp)
 6558 427d 8B45FC   		movl	-4(%ebp), %eax
 6559 4280 89442404 		movl	%eax, 4(%esp)
 6560 4284 8B4510   		movl	16(%ebp), %eax
 6561 4287 890424   		movl	%eax, (%esp)
 6562 428a E8000000 		call	_strncpy
 6562      00
3495:str_merge.c   ****         buf[n] = '\0';
 6564              	LM796:
 6565 428f 8B45F4   		movl	-12(%ebp), %eax
 6566 4292 034510   		addl	16(%ebp), %eax
 6567 4295 C60000   		movb	$0, (%eax)
3496:str_merge.c   ****     }
3497:str_merge.c   **** }
 6569              	LM797:
 6570              	L373:
 6571 4298 C9       		leave
 6572 4299 C3       		ret
 6573              	LBE41:
 6579              	Lscope30:
 6585              	_append_cat_padding_bytes:
3498:str_merge.c   **** 
3499:str_merge.c   **** // Add margin size only when __CAT_SUPPORT__ is defined
3500:str_merge.c   **** static void append_cat_padding_bytes(FILE * file, long originalElementNumber){
 6587              	LM798:
 6588 429a 55       		pushl	%ebp
 6589 429b 89E5     		movl	%esp, %ebp
 6590 429d 83EC18   		subl	$24, %esp
3501:str_merge.c   **** #if defined(__CAT_SUPPORT__) && defined (MMIRESOURCE_CAT_STR_COMPRESS_RESERVED_MARGIN_SIZE_BYTE) &&
3502:str_merge.c   ****     str_add_pedding_bytes(file, 0xFF, MMIRESOURCE_CAT_STR_COMPRESS_RESERVED_MARGIN_SIZE_BYTE, origi
 6592              	LM799:
 6593              	LBB42:
 6594 42a0 8B450C   		movl	12(%ebp), %eax
 6595 42a3 8944240C 		movl	%eax, 12(%esp)
 6596 42a7 C7442408 		movl	$20, 8(%esp)
 6596      14000000 
 6597 42af C7442404 		movl	$255, 4(%esp)
 6597      FF000000 
 6598 42b7 8B4508   		movl	8(%ebp), %eax
 6599 42ba 890424   		movl	%eax, (%esp)
 6600 42bd E80B0000 		call	_str_add_pedding_bytes
 6600      00
3503:str_merge.c   **** #endif //CAT_STR_COMPRESS_MARGIN_SIZE
3504:str_merge.c   **** }
 6602              	LM800:
 6603 42c2 C9       		leave
 6604 42c3 C3       		ret
 6605              	LBE42:
 6606              	Lscope31:
 6608              	LC69:
 6609 42c4 30782530 		.ascii "0x%02X, \0"
 6609      32582C20 
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 179


 6609      00
 6615              	.globl _str_add_pedding_bytes
 6617              	_str_add_pedding_bytes:
3505:str_merge.c   **** 
3506:str_merge.c   **** void str_add_pedding_bytes(FILE * file, int peddingValue, int peddingSize, long originalElementNumb
 6619              	LM801:
 6620 42cd 55       		pushl	%ebp
 6621 42ce 89E5     		movl	%esp, %ebp
 6622 42d0 83EC28   		subl	$40, %esp
3507:str_merge.c   ****     int z = 0;
 6624              	LM802:
 6625              	LBB43:
 6626 42d3 C745FC00 		movl	$0, -4(%ebp)
 6626      000000
3508:str_merge.c   ****     int formattingOffset = originalElementNumber %16;
 6628              	LM803:
 6629 42da 8B4514   		movl	20(%ebp), %eax
 6630 42dd 8945F4   		movl	%eax, -12(%ebp)
 6631 42e0 8B55F4   		movl	-12(%ebp), %edx
 6632 42e3 8955F0   		movl	%edx, -16(%ebp)
 6633 42e6 837DF000 		cmpl	$0, -16(%ebp)
 6634 42ea 7904     		jns	L394
 6635 42ec 8345F00F 		addl	$15, -16(%ebp)
 6636              	L394:
 6637 42f0 8B45F0   		movl	-16(%ebp), %eax
 6638 42f3 C1F804   		sarl	$4, %eax
 6639 42f6 C1E004   		sall	$4, %eax
 6640 42f9 8B55F4   		movl	-12(%ebp), %edx
 6641 42fc 29C2     		subl	%eax, %edx
 6642 42fe 89D0     		movl	%edx, %eax
 6643 4300 8945F8   		movl	%eax, -8(%ebp)
3509:str_merge.c   ****     fprintf(file, "\n");
 6645              	LM804:
 6646 4303 C7442404 		movl	$LC34, 4(%esp)
 6646      30160000 
 6647 430b 8B4508   		movl	8(%ebp), %eax
 6648 430e 890424   		movl	%eax, (%esp)
 6649 4311 E8000000 		call	_fprintf
 6649      00
3510:str_merge.c   ****     for (z = 0; z < peddingSize; z++)
 6651              	LM805:
 6652 4316 C745FC00 		movl	$0, -4(%ebp)
 6652      000000
 6653              	L395:
 6654 431d 8B45FC   		movl	-4(%ebp), %eax
 6655 4320 3B4510   		cmpl	16(%ebp), %eax
 6656 4323 7C02     		jl	L398
 6657 4325 EB3F     		jmp	L393
 6658              	L398:
3511:str_merge.c   ****     {
3512:str_merge.c   ****       fprintf(file, "0x%02X, ", peddingValue);
 6660              	LM806:
 6661 4327 8B450C   		movl	12(%ebp), %eax
 6662 432a 89442408 		movl	%eax, 8(%esp)
 6663 432e C7442404 		movl	$LC69, 4(%esp)
 6663      C4420000 
 6664 4336 8B4508   		movl	8(%ebp), %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 180


 6665 4339 890424   		movl	%eax, (%esp)
 6666 433c E8000000 		call	_fprintf
 6666      00
3513:str_merge.c   ****       if ((z+1)%16 == 0)
 6668              	LM807:
 6669 4341 8B45FC   		movl	-4(%ebp), %eax
 6670 4344 40       		incl	%eax
 6671 4345 83E00F   		andl	$15, %eax
 6672 4348 85C0     		testl	%eax, %eax
 6673 434a 7513     		jne	L397
3514:str_merge.c   ****       {
3515:str_merge.c   ****         fprintf(file, "\n");
 6675              	LM808:
 6676 434c C7442404 		movl	$LC34, 4(%esp)
 6676      30160000 
 6677 4354 8B4508   		movl	8(%ebp), %eax
 6678 4357 890424   		movl	%eax, (%esp)
 6679 435a E8000000 		call	_fprintf
 6679      00
 6681              	LM809:
 6682              	L397:
 6683 435f 8D45FC   		leal	-4(%ebp), %eax
 6684 4362 FF00     		incl	(%eax)
 6685 4364 EBB7     		jmp	L395
3516:str_merge.c   ****       }
3517:str_merge.c   ****     }
3518:str_merge.c   **** 
3519:str_merge.c   **** }
 6687              	LM810:
 6688              	L393:
 6689 4366 C9       		leave
 6690 4367 C3       		ret
 6691              	LBE43:
 6696              	Lscope32:
 6698 4368 90909090 		.align 32
 6698      90909090 
 6698      90909090 
 6698      90909090 
 6698      90909090 
 6699              	LC70:
 6700 4380 5B4D454D 		.ascii "[MEM]Free ref_all_list: (%lu) bytes \0"
 6700      5D467265 
 6700      65207265 
 6700      665F616C 
 6700      6C5F6C69 
 6701 43a5 90909090 		.align 32
 6701      90909090 
 6701      90909090 
 6701      90909090 
 6701      90909090 
 6702              	LC71:
 6703 43c0 2E2E5C2E 		.ascii "..\\..\\Customer\\CustResource\\CustStrRes.c\0"
 6703      2E5C4375 
 6703      73746F6D 
 6703      65725C43 
 6703      75737452 
 6704 43e9 90909090 		.align 32
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 181


 6704      90909090 
 6704      90909090 
 6704      90909090 
 6704      90909090 
 6705              	LC72:
 6706 4400 2E2E5C2E 		.ascii "..\\..\\Customer\\CustResource\\CustStrMap.c\0"
 6706      2E5C4375 
 6706      73746F6D 
 6706      65725C43 
 6706      75737452 
 6707 4429 90909090 		.align 32
 6707      90909090 
 6707      90909090 
 6707      90909090 
 6707      90909090 
 6708              	LC73:
 6709 4440 2E2E5C2E 		.ascii "..\\..\\Customer\\CustResource\\CustStrResMeta.txt\0"
 6709      2E5C4375 
 6709      73746F6D 
 6709      65725C43 
 6709      75737452 
 6710 446f 90909090 		.align 32
 6710      90909090 
 6710      90909090 
 6710      90909090 
 6710      90
 6711              	LC74:
 6712 4480 2E2E5C2E 		.ascii "..\\..\\Customer\\CustResource\\CustStrMapMeta.txt\0"
 6712      2E5C4375 
 6712      73746F6D 
 6712      65725C43 
 6712      75737452 
 6713 44af 90909090 		.align 32
 6713      90909090 
 6713      90909090 
 6713      90909090 
 6713      90
 6714              	LC75:
 6715 44c0 666F7574 		.ascii "fout_res or fout_map open error (%d)(%d) ...!\0"
 6715      5F726573 
 6715      206F7220 
 6715      666F7574 
 6715      5F6D6170 
 6716              	LC76:
 6717 44ee 23696E63 		.ascii "#include \"mmi_features.h\"\12\0"
 6717      6C756465 
 6717      20226D6D 
 6717      695F6665 
 6717      61747572 
 6718 4509 90909090 		.align 32
 6718      90909090 
 6718      90909090 
 6718      90909090 
 6718      90909090 
 6719              	LC77:
 6720 4520 23696E63 		.ascii "#include \"CompressResUtil.h\"\12\12\12\0"
 6720      6C756465 
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 182


 6720      2022436F 
 6720      6D707265 
 6720      73735265 
 6721              	LC78:
 6722 4540 23696E63 		.ascii "#include \"CustDataRes.h\"\12\0"
 6722      6C756465 
 6722      20224375 
 6722      73744461 
 6722      74615265 
 6723              	LC79:
 6724 455a 23696E63 		.ascii "#include \"FontDCl.h\"\12\12\12\0"
 6724      6C756465 
 6724      2022466F 
 6724      6E744443 
 6724      6C2E6822 
 6725 4572 8DB42600 		.align 32
 6725      0000008D 
 6725      BC270000 
 6725      0000
 6726              	LC80:
 6727 4580 23696620 		.ascii "#if (!defined (__MTK_TARGET__))\12\11#define __align(x)\12#endif\12\12\12\0"
 6727      28216465 
 6727      66696E65 
 6727      6420285F 
 6727      5F4D544B 
 6728 45be 89F6     		.align 32
 6729              	LC81:
 6730 45c0 23696620 		.ascii "#if !defined(__MMI_RESOURCE_STR_LZMA_COMPRESS__) && !defined(__MMI_RESOURCE_STR_THIRD_ROM_
 6730      21646566 
 6730      696E6564 
 6730      285F5F4D 
 6730      4D495F52 
 6731 461e 89F6     		.align 32
 6732              	LC82:
 6733 4620 5B4D454D 		.ascii "[MEM]StrRes_Dup: Started fout_res output\0"
 6733      5D537472 
 6733      5265735F 
 6733      4475703A 
 6733      20537461 
 6734 4649 90909090 		.align 32
 6734      90909090 
 6734      90909090 
 6734      90909090 
 6734      90909090 
 6735              	LC83:
 6736 4660 5F5F616C 		.ascii "__align(4) const CUSTOM_STRING StrRes_Dup[] = {\12\0"
 6736      69676E28 
 6736      34292063 
 6736      6F6E7374 
 6736      20435553 
 6737 4691 EB0D9090 		.align 32
 6737      90909090 
 6737      90909090 
 6737      909090
 6738              	LC84:
 6739 46a0 23232323 		.ascii "########################################################\12\0"
 6739      23232323 
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 183


 6739      23232323 
 6739      23232323 
 6739      23232323 
 6740              	LC85:
 6741 46da 54595045 		.ascii "TYPE: RES\12\0"
 6741      3A205245 
 6741      530A00
 6742              	LC86:
 6743 46e5 4C414E47 		.ascii "LANG: DUP\12\0"
 6743      3A204455 
 6743      500A00
 6744              	LC87:
 6745 46f0 4D41584E 		.ascii "MAXNUM: %d\12\0"
 6745      554D3A20 
 6745      25640A00 
 6746              	LC88:
 6747 46fc 4D415849 		.ascii "MAXID: %d\12\0"
 6747      443A2025 
 6747      640A00
 6748 4707 90909090 		.align 32
 6748      90909090 
 6748      90909090 
 6748      90909090 
 6748      90909090 
 6749              	LC89:
 6750 4720 44415441 		.ascii "DATA:\12__align(4) const CUSTOM_STRING StrRes_Dup[] = {\12\0"
 6750      3A0A5F5F 
 6750      616C6967 
 6750      6E283429 
 6750      20636F6E 
 6751              	LC90:
 6752 4757 30783030 		.ascii "0x00, 0x00,\12\0"
 6752      2C203078 
 6752      30302C0A 
 6752      00
 6753              	LC91:
 6754 4764 30782558 		.ascii "0x%X, \0"
 6754      2C2000
 6755              	LC92:
 6756 476b 7D3B0A00 		.ascii "};\12\0"
 6757 476f 90909090 		.align 32
 6757      90909090 
 6757      90909090 
 6757      90909090 
 6757      90
 6758              	LC93:
 6759 4780 5B4D454D 		.ascii "[MEM]StrRes_Dup: Finished fout_res output\0"
 6759      5D537472 
 6759      5265735F 
 6759      4475703A 
 6759      2046696E 
 6760 47aa 90909090 		.align 32
 6760      90909090 
 6760      90909090 
 6760      90909090 
 6760      90909090 
 6761              	LC94:
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 184


 6762 47c0 5B4D454D 		.ascii "[MEM]MAX Total length of each language: %d \0"
 6762      5D4D4158 
 6762      20546F74 
 6762      616C206C 
 6762      656E6774 
 6763 47ec 90909090 		.align 32
 6763      90909090 
 6763      90909090 
 6763      90909090 
 6763      90909090 
 6764              	LC95:
 6765 4800 44006500 		.ascii "D\0e\0p\0l\0o\0y\0e\0d\0 \0l\0a\0n\0g\0u\0a\0g\0e\0s\0 \0n\0o\0t\0 \0f\0o\0u\0n\0d\0 \0i\0
 6765      70006C00 
 6765      6F007900 
 6765      65006400 
 6765      20006C00 
 6766 4876 8D76008D 		.align 32
 6766      BC270000 
 6766      0000
 6767              	LC96:
 6768 4880 5B4D454D 		.ascii "[MEM]Please provide translated strings of %s in ref_list.txt !!!\0"
 6768      5D506C65 
 6768      61736520 
 6768      70726F76 
 6768      69646520 
 6769 48c1 90909090 		.align 32
 6769      90909090 
 6769      90909090 
 6769      90909090 
 6769      90909090 
 6770              	LC97:
 6771 48e0 5F5F616C 		.ascii "__align(4) const CUSTOM_STRING StrRes_%d[] = {\12\0"
 6771      69676E28 
 6771      34292063 
 6771      6F6E7374 
 6771      20435553 
 6772              	LC98:
 6773 4910 4C414E47 		.ascii "LANG: %d\12\0"
 6773      3A202564 
 6773      0A00
 6774              	LC99:
 6775 491a 44415441 		.ascii "DATA:\12\0"
 6775      3A0A00
 6776              	LC100:
 6777 4921 54595045 		.ascii "TYPE: MAP\12\0"
 6777      3A204D41 
 6777      500A00
 6778 492c 90909090 		.align 32
 6778      90909090 
 6778      90909090 
 6778      90909090 
 6778      90909090 
 6779              	LC101:
 6780 4940 5F5F616C 		.ascii "__align(4) const CUSTOM_STRING_MAP_16 StrMap_%d[] = {\12\0"
 6780      69676E28 
 6780      34292063 
 6780      6F6E7374 
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 185


 6780      20435553 
 6781              	LC102:
 6782 4977 4249545F 		.ascii "BIT_MODE: 16\12\0"
 6782      4D4F4445 
 6782      3A203136 
 6782      0A00
 6783 4985 90909090 		.align 32
 6783      90909090 
 6783      90909090 
 6783      90909090 
 6783      90909090 
 6784              	LC103:
 6785 49a0 636F6E73 		.ascii "const CUSTOM_STRING_MAP StrMap_%d[] = {\12\0"
 6785      74204355 
 6785      53544F4D 
 6785      5F535452 
 6785      494E475F 
 6786              	LC104:
 6787 49c9 4249545F 		.ascii "BIT_MODE: 32\12\0"
 6787      4D4F4445 
 6787      3A203332 
 6787      0A00
 6788              	LC105:
 6789 49d7 09256C64 		.ascii "\11%ld,\12\0"
 6789      2C0A00
 6790 49de 89F6     		.align 32
 6791              	LC106:
 6792 49e0 65787465 		.ascii "extern const CUSTOM_STRING_MAP_16 StrMap_%d[];\12\12\0"
 6792      726E2063 
 6792      6F6E7374 
 6792      20435553 
 6792      544F4D5F 
 6793 4a11 EB0D9090 		.align 32
 6793      90909090 
 6793      90909090 
 6793      909090
 6794              	LC107:
 6795 4a20 65787465 		.ascii "extern const CUSTOM_STRING_MAP StrMap_%d[];\12\12\0"
 6795      726E2063 
 6795      6F6E7374 
 6795      20435553 
 6795      544F4D5F 
 6796              	LC108:
 6797 4a4e 54595045 		.ascii "TYPE: VALUE\12\0"
 6797      3A205641 
 6797      4C55450A 
 6797      00
 6798 4a5b 908D7426 		.align 32
 6798      00
 6799              	LC109:
 6800 4a60 4E414D45 		.ascii "NAME: mtk_gTrans_string_count\12\0"
 6800      3A206D74 
 6800      6B5F6754 
 6800      72616E73 
 6800      5F737472 
 6801              	LC110:
 6802 4a7f 56414C55 		.ascii "VALUE: %d\12\0"
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 186


 6802      453A2025 
 6802      640A00
 6803              	LC111:
 6804 4a8a 4E414D45 		.ascii "NAME: mtk_gMaxDeployedLangs\12\0"
 6804      3A206D74 
 6804      6B5F674D 
 6804      61784465 
 6804      706C6F79 
 6805              	LC112:
 6806 4aa7 4E414D45 		.ascii "NAME: max_total_len\12\0"
 6806      3A206D61 
 6806      785F746F 
 6806      74616C5F 
 6806      6C656E0A 
 6807 4abc 8D742600 		.align 32
 6808              	LC113:
 6809 4ac0 2369666E 		.ascii "#ifndef __MMI_RESOURCE_ENFB_SUPPORT__\12\11const U16 mtk_gTrans_string_count = %d;\12#endi
 6809      64656620 
 6809      5F5F4D4D 
 6809      495F5245 
 6809      534F5552 
 6810 4b18 908DB426 		.align 32
 6810      00000000 
 6811              	LC114:
 6812 4b20 6F757470 		.ascii "output language list array (strres, strres_dup, num_map_search) \0"
 6812      7574206C 
 6812      616E6775 
 6812      61676520 
 6812      6C697374 
 6813 4b61 90909090 		.align 32
 6813      90909090 
 6813      90909090 
 6813      90909090 
 6813      90909090 
 6814              	LC115:
 6815 4b80 4661696C 		.ascii "Failed to output generate_language_list_array:                 num_map_search = %d, max_to
 6815      65642074 
 6815      6F206F75 
 6815      74707574 
 6815      2067656E 
 6816 4c1b 908D7426 		.align 32
 6816      00
 6817              	LC116:
 6818 4c20 0A23656E 		.ascii "\12#endif //!(__MMI_RESOURCE_STR_LZMA_COMPRESS__) && !(__MMI_RESOURCE_STR_THIRD_ROM__)\0"
 6818      64696620 
 6818      2F2F2128 
 6818      5F5F4D4D 
 6818      495F5245 
 6819              	LC117:
 6820 4c75 47656E65 		.ascii "GenerateStrResFile succeeded\0"
 6820      72617465 
 6820      53747252 
 6820      65734669 
 6820      6C652073 
 6821              	LC118:
 6822 4c92 47454E5F 		.ascii "GEN_STR_ERR_RET handling\0"
 6822      5354525F 
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 187


 6822      4552525F 
 6822      52455420 
 6822      68616E64 
 6824              	.globl _GenerateStrResFile
 6826              	_GenerateStrResFile:
3520:str_merge.c   **** 
3521:str_merge.c   **** 
3522:str_merge.c   **** /*****************************************************************************
3523:str_merge.c   ****  * FUNCTION
3524:str_merge.c   ****  *  GenerateStrResFile
3525:str_merge.c   ****  * DESCRIPTION
3526:str_merge.c   ****  *  Generate string resource C files
3527:str_merge.c   ****  * PARAMETERS
3528:str_merge.c   ****  *  void
3529:str_merge.c   ****  * RETURNS
3530:str_merge.c   ****  *  Return 0 on success, otherwise, return -1
3531:str_merge.c   ****  *****************************************************************************/
3532:str_merge.c   **** int GenerateStrResFile(void)
3533:str_merge.c   **** {
 6828              	LM811:
 6829 4cab 55       		pushl	%ebp
 6830 4cac 89E5     		movl	%esp, %ebp
 6831 4cae 53       		pushl	%ebx
 6832 4caf B8B42000 		movl	$8372, %eax
 6832      00
 6833 4cb4 E8000000 		call	__alloca
 6833      00
3534:str_merge.c   ****     /*----------------------------------------------------------------*/
3535:str_merge.c   ****     /* Local Variables                                                */
3536:str_merge.c   ****     /*----------------------------------------------------------------*/
3537:str_merge.c   ****     FILE *fout_res = NULL;
 6835              	LM812:
 6836              	LBB44:
 6837 4cb9 C745F400 		movl	$0, -12(%ebp)
 6837      000000
3538:str_merge.c   ****     FILE *fout_map = NULL;
 6839              	LM813:
 6840 4cc0 C745F000 		movl	$0, -16(%ebp)
 6840      000000
3539:str_merge.c   ****     FILE *fout_meta_res = NULL;
 6842              	LM814:
 6843 4cc7 C745EC00 		movl	$0, -20(%ebp)
 6843      000000
3540:str_merge.c   ****     FILE *fout_meta_map = NULL;
 6845              	LM815:
 6846 4cce C745E800 		movl	$0, -24(%ebp)
 6846      000000
3541:str_merge.c   **** 	
3542:str_merge.c   ****     int i = 0, MaxID = 0, str_res_id = 0;
 6848              	LM816:
 6849 4cd5 C745E400 		movl	$0, -28(%ebp)
 6849      000000
 6850 4cdc C745E000 		movl	$0, -32(%ebp)
 6850      000000
 6851 4ce3 C745DC00 		movl	$0, -36(%ebp)
 6851      000000
3543:str_merge.c   ****     unsigned short z = 0;
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 188


 6853              	LM817:
 6854 4cea 66C745DA 		movw	$0, -38(%ebp)
 6854      0000
3544:str_merge.c   ****     int start = 0, index_map = 0, index = 0, num_map_search = 0;
 6856              	LM818:
 6857 4cf0 C745D400 		movl	$0, -44(%ebp)
 6857      000000
 6858 4cf7 C745D000 		movl	$0, -48(%ebp)
 6858      000000
 6859 4cfe C745CC00 		movl	$0, -52(%ebp)
 6859      000000
 6860 4d05 C745C800 		movl	$0, -56(%ebp)
 6860      000000
3545:str_merge.c   ****     int min_id = 0, max_id = 0;
 6862              	LM819:
 6863 4d0c C745C400 		movl	$0, -60(%ebp)
 6863      000000
 6864 4d13 C745C000 		movl	$0, -64(%ebp)
 6864      000000
3546:str_merge.c   ****     struct StrRes *strres = NULL;
 6866              	LM820:
 6867 4d1a C745BC00 		movl	$0, -68(%ebp)
 6867      000000
3547:str_merge.c   ****     struct StrResSet Strresset;
3548:str_merge.c   **** 
3549:str_merge.c   ****     U32 res_size[512];
3550:str_merge.c   ****     U32 map_size[512];
3551:str_merge.c   ****     U32 reszip_size[512];
3552:str_merge.c   ****     U32 mapzip_size[512];
3553:str_merge.c   ****     FILE *pFile;
3554:str_merge.c   **** 
3555:str_merge.c   **** #ifndef __MMI_RESOURCE_ENFB_SUPPORT__
3556:str_merge.c   ****     /* add DupStrRes and max_total_len */
3557:str_merge.c   ****     struct DupStrRes *strres_dup = NULL;
 6869              	LM821:
 6870 4d21 C785A0DF 		movl	$0, -8288(%ebp)
 6870      FFFF0000 
 6870      0000
3558:str_merge.c   ****     int max_total_len = 0;
 6872              	LM822:
 6873 4d2b C7859CDF 		movl	$0, -8292(%ebp)
 6873      FFFF0000 
 6873      0000
3559:str_merge.c   **** #endif /* __MMI_RESOURCE_ENFB_SUPPORT__ */
3560:str_merge.c   ****     int max_zip_len = 0;
 6875              	LM823:
 6876 4d35 C78598DF 		movl	$0, -8296(%ebp)
 6876      FFFF0000 
 6876      0000
3561:str_merge.c   **** 
3562:str_merge.c   **** #ifdef __MMI_RESOURCE_ENFB_SUPPORT__
3563:str_merge.c   ****     FILE *fout_enfb = NULL;
3564:str_merge.c   ****     U32 enfb_size = 0, enfb_offset = 0;
3565:str_merge.c   ****     U32 enfb_str_mem_size, enfb_max_mem_size = 0;
3566:str_merge.c   **** #endif /* __MMI_RESOURCE_ENFB_SUPPORT__ */
3567:str_merge.c   **** 
3568:str_merge.c   ****     /*----------------------------------------------------------------*/
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 189


3569:str_merge.c   ****     /* Code Body                                                      */
3570:str_merge.c   ****     /*----------------------------------------------------------------*/
3571:str_merge.c   ****     print_language_usage();
 6878              	LM824:
 6879 4d3f E8FDF2FF 		call	_print_language_usage
 6879      FF
3572:str_merge.c   **** 
3573:str_merge.c   ****     memset(StrSize, 0, sizeof(U16) * MAX_STRING_MAP_SIZE);
 6881              	LM825:
 6882 4d44 C7442408 		movl	$131070, 8(%esp)
 6882      FEFF0100 
 6883 4d4c C7442404 		movl	$0, 4(%esp)
 6883      00000000 
 6884 4d54 C70424D8 		movl	$_StrSize, (%esp)
 6884      000200
 6885 4d5b E8000000 		call	_memset
 6885      00
3574:str_merge.c   **** 
3575:str_merge.c   **** #ifndef __MMI_RESOURCE_ENFB_SUPPORT__
3576:str_merge.c   ****     memset(&fixed_result, 0, sizeof(FixedResult));
 6887              	LM826:
 6888 4d60 C7442408 		movl	$8, 8(%esp)
 6888      08000000 
 6889 4d68 C7442404 		movl	$0, 4(%esp)
 6889      00000000 
 6890 4d70 C7042400 		movl	$_fixed_result, (%esp)
 6890      000000
 6891 4d77 E8000000 		call	_memset
 6891      00
3577:str_merge.c   ****     /* init */
3578:str_merge.c   ****     Strresset.strres_dup = NULL;
 6893              	LM827:
 6894 4d7c C745AC00 		movl	$0, -84(%ebp)
 6894      000000
3579:str_merge.c   **** #endif /* __MMI_RESOURCE_ENFB_SUPPORT__ */
3580:str_merge.c   **** 
3581:str_merge.c   ****     /* get string table */
3582:str_merge.c   ****     MaxID = GetStrResList(&Strresset);
 6896              	LM828:
 6897 4d83 8D45A8   		leal	-88(%ebp), %eax
 6898 4d86 890424   		movl	%eax, (%esp)
 6899 4d89 E8DAE2FF 		call	_GetStrResList
 6899      FF
 6900 4d8e 8945E0   		movl	%eax, -32(%ebp)
3583:str_merge.c   **** 
3584:str_merge.c   **** #ifndef MEM_REF_LIST_OPT
3585:str_merge.c   ****     if (ref_all)
3586:str_merge.c   ****         free(ref_all);
3587:str_merge.c   **** #else
3588:str_merge.c   ****     if(ref_all_list){
 6902              	LM829:
 6903 4d91 833D4800 		cmpl	$0, _ref_all_list
 6903      000000
 6904 4d98 7435     		je	L401
3589:str_merge.c   ****         STRMERG_LOG_V(STRMERG_SUB_TAG_MEM "Free ref_all_list: (%lu) bytes ",ref_all_list->Allocated
 6906              	LM830:
 6907 4d9a A1480000 		movl	_ref_all_list, %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 190


 6907      00
 6908 4d9f 8B400C   		movl	12(%eax), %eax
 6909 4da2 8944240C 		movl	%eax, 12(%esp)
 6910 4da6 C7442408 		movl	$LC70, 8(%esp)
 6910      80430000 
 6911 4dae C7442404 		movl	$LC3, 4(%esp)
 6911      4B040000 
 6912 4db6 C7042401 		movl	$1, (%esp)
 6912      000000
 6913 4dbd E8000000 		call	_reslog_adaptor_log
 6913      00
3590:str_merge.c   ****         DeleteRefList(ref_all_list);
 6915              	LM831:
 6916 4dc2 A1480000 		movl	_ref_all_list, %eax
 6916      00
 6917 4dc7 890424   		movl	%eax, (%esp)
 6918 4dca E8E92B00 		call	_DeleteRefList
 6918      00
 6919              	L401:
3591:str_merge.c   ****   }
3592:str_merge.c   **** #endif
3593:str_merge.c   **** 
3594:str_merge.c   ****     /* open output file */
3595:str_merge.c   ****     fout_res = fopen(STR_DATA_FILENAME, "wb");
 6921              	LM832:
 6922 4dcf C7442404 		movl	$LC61, 4(%esp)
 6922      BA3F0000 
 6923 4dd7 C70424C0 		movl	$LC71, (%esp)
 6923      430000
 6924 4dde E8000000 		call	_fopen
 6924      00
 6925 4de3 8945F4   		movl	%eax, -12(%ebp)
3596:str_merge.c   ****     fout_map = fopen(STR_MAP_FILENAME, "wb");
 6927              	LM833:
 6928 4de6 C7442404 		movl	$LC61, 4(%esp)
 6928      BA3F0000 
 6929 4dee C7042400 		movl	$LC72, (%esp)
 6929      440000
 6930 4df5 E8000000 		call	_fopen
 6930      00
 6931 4dfa 8945F0   		movl	%eax, -16(%ebp)
3597:str_merge.c   ****     /* Meta file for string compression */
3598:str_merge.c   ****     fout_meta_res = fopen(STR_DATA_META_FILENAME, "wb");
 6933              	LM834:
 6934 4dfd C7442404 		movl	$LC61, 4(%esp)
 6934      BA3F0000 
 6935 4e05 C7042440 		movl	$LC73, (%esp)
 6935      440000
 6936 4e0c E8000000 		call	_fopen
 6936      00
 6937 4e11 8945EC   		movl	%eax, -20(%ebp)
3599:str_merge.c   ****     fout_meta_map = fopen(STR_MAP_META_FILENAME, "wb");
 6939              	LM835:
 6940 4e14 C7442404 		movl	$LC61, 4(%esp)
 6940      BA3F0000 
 6941 4e1c C7042480 		movl	$LC74, (%esp)
 6941      440000
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 191


 6942 4e23 E8000000 		call	_fopen
 6942      00
 6943 4e28 8945E8   		movl	%eax, -24(%ebp)
3600:str_merge.c   **** 	
3601:str_merge.c   ****     if (fout_res == NULL || fout_map == NULL ||fout_meta_res == NULL || fout_meta_map == NULL)
 6945              	LM836:
 6946 4e2b 837DF400 		cmpl	$0, -12(%ebp)
 6947 4e2f 7412     		je	L403
 6948 4e31 837DF000 		cmpl	$0, -16(%ebp)
 6949 4e35 740C     		je	L403
 6950 4e37 837DEC00 		cmpl	$0, -20(%ebp)
 6951 4e3b 7406     		je	L403
 6952 4e3d 837DE800 		cmpl	$0, -24(%ebp)
 6953 4e41 752F     		jne	L402
 6954              	L403:
3602:str_merge.c   ****     {
3603:str_merge.c   ****         STRMERG_LOG_E("fout_res or fout_map open error (%d)(%d) ...!", fout_res, fout_map);
 6956              	LM837:
 6957 4e43 8B45F0   		movl	-16(%ebp), %eax
 6958 4e46 89442410 		movl	%eax, 16(%esp)
 6959 4e4a 8B45F4   		movl	-12(%ebp), %eax
 6960 4e4d 8944240C 		movl	%eax, 12(%esp)
 6961 4e51 C7442408 		movl	$LC75, 8(%esp)
 6961      C0440000 
 6962 4e59 C7442404 		movl	$LC3, 4(%esp)
 6962      4B040000 
 6963 4e61 C7042403 		movl	$3, (%esp)
 6963      000000
 6964 4e68 E8000000 		call	_reslog_adaptor_log
 6964      00
3604:str_merge.c   ****         goto GEN_STR_ERR_RET;
 6966              	LM838:
 6967 4e6d E9EC1000 		jmp	L404
 6967      00
 6968              	L402:
3605:str_merge.c   ****     }
3606:str_merge.c   ****     strres = Strresset.strres;
 6970              	LM839:
 6971 4e72 8B45A8   		movl	-88(%ebp), %eax
 6972 4e75 8945BC   		movl	%eax, -68(%ebp)
3607:str_merge.c   **** #ifndef __MMI_RESOURCE_ENFB_SUPPORT__
3608:str_merge.c   ****     /* assign */
3609:str_merge.c   ****     strres_dup = Strresset.strres_dup;
 6974              	LM840:
 6975 4e78 8B45AC   		movl	-84(%ebp), %eax
 6976 4e7b 8985A0DF 		movl	%eax, -8288(%ebp)
 6976      FFFF
3610:str_merge.c   **** #endif
3611:str_merge.c   **** 
3612:str_merge.c   **** #ifdef __MMI_RESOURCE_ENFB_SUPPORT__
3613:str_merge.c   ****     fout_enfb = fopen(ENFB_STRING_DATA_FILENAME, "wb");
3614:str_merge.c   ****     if (fout_enfb == NULL)
3615:str_merge.c   ****     {
3616:str_merge.c   ****         STRMERG_LOG_E("File open error (%s) ...!", ENFB_STRING_DATA_FILENAME);
3617:str_merge.c   ****         goto GEN_STR_ERR_RET;
3618:str_merge.c   ****     }
3619:str_merge.c   **** #endif /* __MMI_RESOURCE_ENFB_SUPPORT__ */
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 192


3620:str_merge.c   **** 
3621:str_merge.c   ****     /* print output file header */
3622:str_merge.c   ****     fprintf(fout_res, "#include \"mmi_features.h\"\n");
 6978              	LM841:
 6979 4e81 C7442404 		movl	$LC76, 4(%esp)
 6979      EE440000 
 6980 4e89 8B45F4   		movl	-12(%ebp), %eax
 6981 4e8c 890424   		movl	%eax, (%esp)
 6982 4e8f E8000000 		call	_fprintf
 6982      00
3623:str_merge.c   ****     fprintf(fout_res, "#include \"CompressResUtil.h\"\n\n\n");
 6984              	LM842:
 6985 4e94 C7442404 		movl	$LC77, 4(%esp)
 6985      20450000 
 6986 4e9c 8B45F4   		movl	-12(%ebp), %eax
 6987 4e9f 890424   		movl	%eax, (%esp)
 6988 4ea2 E8000000 		call	_fprintf
 6988      00
3624:str_merge.c   ****     fprintf(fout_res, "#include \"CustDataRes.h\"\n");
 6990              	LM843:
 6991 4ea7 C7442404 		movl	$LC78, 4(%esp)
 6991      40450000 
 6992 4eaf 8B45F4   		movl	-12(%ebp), %eax
 6993 4eb2 890424   		movl	%eax, (%esp)
 6994 4eb5 E8000000 		call	_fprintf
 6994      00
3625:str_merge.c   ****     fprintf(fout_res, "#include \"FontDCl.h\"\n\n\n");
 6996              	LM844:
 6997 4eba C7442404 		movl	$LC79, 4(%esp)
 6997      5A450000 
 6998 4ec2 8B45F4   		movl	-12(%ebp), %eax
 6999 4ec5 890424   		movl	%eax, (%esp)
 7000 4ec8 E8000000 		call	_fprintf
 7000      00
3626:str_merge.c   ****     fprintf(fout_res, "#if (!defined (__MTK_TARGET__))\n\t#define __align(x)\n#endif\n\n\n");
 7002              	LM845:
 7003 4ecd C7442404 		movl	$LC80, 4(%esp)
 7003      80450000 
 7004 4ed5 8B45F4   		movl	-12(%ebp), %eax
 7005 4ed8 890424   		movl	%eax, (%esp)
 7006 4edb E8000000 		call	_fprintf
 7006      00
3627:str_merge.c   ****     fprintf(fout_res, "#if !defined(__MMI_RESOURCE_STR_LZMA_COMPRESS__) && !defined(__MMI_RESOURCE_
 7008              	LM846:
 7009 4ee0 C7442404 		movl	$LC81, 4(%esp)
 7009      C0450000 
 7010 4ee8 8B45F4   		movl	-12(%ebp), %eax
 7011 4eeb 890424   		movl	%eax, (%esp)
 7012 4eee E8000000 		call	_fprintf
 7012      00
3628:str_merge.c   ****     fprintf(fout_map, "#include \"mmi_features.h\"\n");
 7014              	LM847:
 7015 4ef3 C7442404 		movl	$LC76, 4(%esp)
 7015      EE440000 
 7016 4efb 8B45F0   		movl	-16(%ebp), %eax
 7017 4efe 890424   		movl	%eax, (%esp)
 7018 4f01 E8000000 		call	_fprintf
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 193


 7018      00
3629:str_merge.c   ****     fprintf(fout_map, "#include \"CompressResUtil.h\"\n\n\n");
 7020              	LM848:
 7021 4f06 C7442404 		movl	$LC77, 4(%esp)
 7021      20450000 
 7022 4f0e 8B45F0   		movl	-16(%ebp), %eax
 7023 4f11 890424   		movl	%eax, (%esp)
 7024 4f14 E8000000 		call	_fprintf
 7024      00
3630:str_merge.c   ****     fprintf(fout_map, "#if !defined(__MMI_RESOURCE_STR_LZMA_COMPRESS__) && !defined(__MMI_RESOURCE_
 7026              	LM849:
 7027 4f19 C7442404 		movl	$LC81, 4(%esp)
 7027      C0450000 
 7028 4f21 8B45F0   		movl	-16(%ebp), %eax
 7029 4f24 890424   		movl	%eax, (%esp)
 7030 4f27 E8000000 		call	_fprintf
 7030      00
3631:str_merge.c   ****     fprintf(fout_map, "#include \"CustDataRes.h\"\n");
 7032              	LM850:
 7033 4f2c C7442404 		movl	$LC78, 4(%esp)
 7033      40450000 
 7034 4f34 8B45F0   		movl	-16(%ebp), %eax
 7035 4f37 890424   		movl	%eax, (%esp)
 7036 4f3a E8000000 		call	_fprintf
 7036      00
3632:str_merge.c   ****     fprintf(fout_map, "#if (!defined (__MTK_TARGET__))\n\t#define __align(x)\n#endif\n\n\n");
 7038              	LM851:
 7039 4f3f C7442404 		movl	$LC80, 4(%esp)
 7039      80450000 
 7040 4f47 8B45F0   		movl	-16(%ebp), %eax
 7041 4f4a 890424   		movl	%eax, (%esp)
 7042 4f4d E8000000 		call	_fprintf
 7042      00
3633:str_merge.c   **** #ifdef __CAT_SUPPORT__
3634:str_merge.c   ****     fprintf(fout_map, ResgenCATGetRegionStartStatment(MMIRESOURCE_CAT_RES_TYPE_ID_STR));
 7044              	LM852:
 7045 4f52 C7042402 		movl	$2, (%esp)
 7045      000000
 7046 4f59 E8000000 		call	_ResgenCATGetRegionStartStatment
 7046      00
 7047 4f5e 89442404 		movl	%eax, 4(%esp)
 7048 4f62 8B45F0   		movl	-16(%ebp), %eax
 7049 4f65 890424   		movl	%eax, (%esp)
 7050 4f68 E8000000 		call	_fprintf
 7050      00
3635:str_merge.c   ****     fprintf(fout_res, ResgenCATGetRegionStartStatment(MMIRESOURCE_CAT_RES_TYPE_ID_STR));
 7052              	LM853:
 7053 4f6d C7042402 		movl	$2, (%esp)
 7053      000000
 7054 4f74 E8000000 		call	_ResgenCATGetRegionStartStatment
 7054      00
 7055 4f79 89442404 		movl	%eax, 4(%esp)
 7056 4f7d 8B45F4   		movl	-12(%ebp), %eax
 7057 4f80 890424   		movl	%eax, (%esp)
 7058 4f83 E8000000 		call	_fprintf
 7058      00
3636:str_merge.c   **** #endif //__CAT_SUPPORT__
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 194


3637:str_merge.c   **** 
3638:str_merge.c   **** #ifndef __MMI_RESOURCE_ENFB_SUPPORT__
3639:str_merge.c   ****     /* generate duplicated string resource */
3640:str_merge.c   ****     if (strres_dup->MaxNum > 0)
 7060              	LM854:
 7061 4f88 8B85A0DF 		movl	-8288(%ebp), %eax
 7061      FFFF
 7062 4f8e 83780400 		cmpl	$0, 4(%eax)
 7063 4f92 0F8EB502 		jle	L405
 7063      0000
3641:str_merge.c   ****     {
3642:str_merge.c   **** 
3643:str_merge.c   **** #if defined(__MMI_RESOURCE_STR_ZLIB_COMPRESS__)
3644:str_merge.c   ****     if (mmi_res_zip_language[MAX_LANGUAGES] == 1)
3645:str_merge.c   ****     {
3646:str_merge.c   ****         /* The len for compresss2 function must be unsigned long*/
3647:str_merge.c   ****         unsigned long array_size = 0, dest_size = 0, input_buf_size = 0;
3648:str_merge.c   ****         U8 *buffer = NULL;
3649:str_merge.c   ****         U8 *dest_buf = NULL;
3650:str_merge.c   ****         U8 *p = NULL;
3651:str_merge.c   ****         U16 strsize = 0;
3652:str_merge.c   **** 
3653:str_merge.c   ****         array_size = 2; /* for  buffer[0] and buffer[1] */
3654:str_merge.c   ****         for (str_res_id = 0; str_res_id < strres_dup->MaxNum; str_res_id++)
3655:str_merge.c   ****         {
3656:str_merge.c   ****             array_size += ((wcslen(strres_dup->Str[str_res_id])+1)*2);
3657:str_merge.c   ****         }
3658:str_merge.c   ****         dest_size = compressBound(array_size);
3659:str_merge.c   **** 
3660:str_merge.c   ****         buffer = malloc(array_size);
3661:str_merge.c   ****         dest_buf = malloc(dest_size);
3662:str_merge.c   ****         buffer[0] = '\0';
3663:str_merge.c   ****         buffer[1] = '\0';
3664:str_merge.c   **** 
3665:str_merge.c   ****         p = buffer+2;
3666:str_merge.c   ****         /* copy string to buffer */
3667:str_merge.c   ****         for (str_res_id = 0; str_res_id < strres_dup->MaxNum; str_res_id++)
3668:str_merge.c   ****         {
3669:str_merge.c   ****             strsize = (wcslen(strres_dup->Str[str_res_id]) + 1) * 2;
3670:str_merge.c   ****             memcpy(p, strres_dup->Str[str_res_id], strsize);
3671:str_merge.c   ****             p += strsize;
3672:str_merge.c   ****         }
3673:str_merge.c   **** 
3674:str_merge.c   ****         STRMERG_LOG_V(STRMERG_SUB_TAG_MEM "StrRes_zip_Dup: compress2 input: dest_size=%lu, array_si
3675:str_merge.c   ****         STRMERG_LOG_V(STRMERG_SUB_TAG_MEM "Total size of compressing data= %d bytes (p-buffer), siz
3676:str_merge.c   **** 
3677:str_merge.c   ****         compress2(dest_buf, &dest_size, buffer, array_size, Z_BEST_COMPRESSION);
3678:str_merge.c   **** 
3679:str_merge.c   ****         STRMERG_LOG_V(STRMERG_SUB_TAG_MEM "StrRes_zip_Dup: compress2 output: dest_size=%lu, array_s
3680:str_merge.c   **** 
3681:str_merge.c   ****         /* output CustStrRes.c */
3682:str_merge.c   ****         STRMERG_LOG_V(STRMERG_SUB_TAG_MEM "StrRes_zip_Dup: Start to fout_res output");
3683:str_merge.c   ****         fprintf(fout_res, "//__align(4) CUSTOM_STRING StrRes_Dup[%lu];\n", array_size);
3684:str_merge.c   ****         fprintf(fout_res, "// StrRes_zip_Dup, DATA SIZE = %lu\n", dest_size);
3685:str_merge.c   ****         fprintf(fout_res, "__align(4) const CUSTOM_STRING StrRes_zip_Dup[] = {\n");
3686:str_merge.c   **** 
3687:str_merge.c   ****         for (z = 0; z < dest_size-1; ++z)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 195


3688:str_merge.c   ****         {
3689:str_merge.c   ****             if (z%16 == 0)
3690:str_merge.c   ****             {
3691:str_merge.c   ****                 fprintf(fout_res, "\n");
3692:str_merge.c   ****             }
3693:str_merge.c   ****             fprintf(fout_res, "0x%02X, ", dest_buf[z]);
3694:str_merge.c   **** 
3695:str_merge.c   ****         }
3696:str_merge.c   ****         fprintf(fout_res, "0x%02X, ", dest_buf[z]);
3697:str_merge.c   ****         
3698:str_merge.c   ****         append_cat_padding_bytes(fout_res, dest_size);
3699:str_merge.c   ****         
3700:str_merge.c   ****         fprintf(fout_res, "};\n");
3701:str_merge.c   **** 
3702:str_merge.c   ****         STRMERG_LOG_V(STRMERG_SUB_TAG_MEM "StrRes_zip_Dup: Finish fout_res output");
3703:str_merge.c   **** 
3704:str_merge.c   ****         res_size[511] = array_size;
3705:str_merge.c   ****         reszip_size[511] = dest_size;
3706:str_merge.c   **** 
3707:str_merge.c   ****         free(buffer);
3708:str_merge.c   ****         free(dest_buf);  
3709:str_merge.c   **** 
3710:str_merge.c   ****         array_size = 0;
3711:str_merge.c   ****         dest_size = 0;
3712:str_merge.c   ****            
3713:str_merge.c   ****     }
3714:str_merge.c   ****     else
3715:str_merge.c   **** #endif /* __MMI_RESOURCE_STR_ZLIB_COMPRESS__ */
3716:str_merge.c   ****     {
3717:str_merge.c   ****         /* output language structure title */
3718:str_merge.c   ****         STRMERG_LOG_V(STRMERG_SUB_TAG_MEM "StrRes_Dup: Started fout_res output");
 7065              	LM855:
 7066 4f98 C7442408 		movl	$LC82, 8(%esp)
 7066      20460000 
 7067 4fa0 C7442404 		movl	$LC3, 4(%esp)
 7067      4B040000 
 7068 4fa8 C7042401 		movl	$1, (%esp)
 7068      000000
 7069 4faf E8000000 		call	_reslog_adaptor_log
 7069      00
3719:str_merge.c   **** 
3720:str_merge.c   ****         fprintf(fout_res, "__align(4) const CUSTOM_STRING StrRes_Dup[] = {\n");
 7071              	LM856:
 7072 4fb4 C7442404 		movl	$LC83, 4(%esp)
 7072      60460000 
 7073 4fbc 8B45F4   		movl	-12(%ebp), %eax
 7074 4fbf 890424   		movl	%eax, (%esp)
 7075 4fc2 E8000000 		call	_fprintf
 7075      00
3721:str_merge.c   ****         fprintf(fout_meta_res, "########################################################\n");
 7077              	LM857:
 7078 4fc7 C7442404 		movl	$LC84, 4(%esp)
 7078      A0460000 
 7079 4fcf 8B45EC   		movl	-20(%ebp), %eax
 7080 4fd2 890424   		movl	%eax, (%esp)
 7081 4fd5 E8000000 		call	_fprintf
 7081      00
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 196


3722:str_merge.c   ****         fprintf(fout_meta_res, "TYPE: RES\n");
 7083              	LM858:
 7084 4fda C7442404 		movl	$LC85, 4(%esp)
 7084      DA460000 
 7085 4fe2 8B45EC   		movl	-20(%ebp), %eax
 7086 4fe5 890424   		movl	%eax, (%esp)
 7087 4fe8 E8000000 		call	_fprintf
 7087      00
3723:str_merge.c   ****         fprintf(fout_meta_res, "LANG: DUP\n");
 7089              	LM859:
 7090 4fed C7442404 		movl	$LC86, 4(%esp)
 7090      E5460000 
 7091 4ff5 8B45EC   		movl	-20(%ebp), %eax
 7092 4ff8 890424   		movl	%eax, (%esp)
 7093 4ffb E8000000 		call	_fprintf
 7093      00
3724:str_merge.c   ****         fprintf(fout_meta_res, "MAXNUM: %d\n",strres_dup->MaxNum -1);
 7095              	LM860:
 7096 5000 8B85A0DF 		movl	-8288(%ebp), %eax
 7096      FFFF
 7097 5006 8B4004   		movl	4(%eax), %eax
 7098 5009 48       		decl	%eax
 7099 500a 89442408 		movl	%eax, 8(%esp)
 7100 500e C7442404 		movl	$LC87, 4(%esp)
 7100      F0460000 
 7101 5016 8B45EC   		movl	-20(%ebp), %eax
 7102 5019 890424   		movl	%eax, (%esp)
 7103 501c E8000000 		call	_fprintf
 7103      00
3725:str_merge.c   ****         fprintf(fout_meta_res, "MAXID: %d\n", 1);
 7105              	LM861:
 7106 5021 C7442408 		movl	$1, 8(%esp)
 7106      01000000 
 7107 5029 C7442404 		movl	$LC88, 4(%esp)
 7107      FC460000 
 7108 5031 8B45EC   		movl	-20(%ebp), %eax
 7109 5034 890424   		movl	%eax, (%esp)
 7110 5037 E8000000 		call	_fprintf
 7110      00
3726:str_merge.c   ****         fprintf(fout_meta_res, "DATA:\n__align(4) const CUSTOM_STRING StrRes_Dup[] = {\n");
 7112              	LM862:
 7113 503c C7442404 		movl	$LC89, 4(%esp)
 7113      20470000 
 7114 5044 8B45EC   		movl	-20(%ebp), %eax
 7115 5047 890424   		movl	%eax, (%esp)
 7116 504a E8000000 		call	_fprintf
 7116      00
3727:str_merge.c   **** 
3728:str_merge.c   ****         fputs("0x00, 0x00,\n", fout_res);
 7118              	LM863:
 7119 504f 8B45F4   		movl	-12(%ebp), %eax
 7120 5052 89442404 		movl	%eax, 4(%esp)
 7121 5056 C7042457 		movl	$LC90, (%esp)
 7121      470000
 7122 505d E8000000 		call	_fputs
 7122      00
3729:str_merge.c   ****         fputs("0x00, 0x00,\n", fout_meta_res);
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 197


 7124              	LM864:
 7125 5062 8B45EC   		movl	-20(%ebp), %eax
 7126 5065 89442404 		movl	%eax, 4(%esp)
 7127 5069 C7042457 		movl	$LC90, (%esp)
 7127      470000
 7128 5070 E8000000 		call	_fputs
 7128      00
3730:str_merge.c   ****     
3731:str_merge.c   ****         for (str_res_id = 0; str_res_id < strres_dup->MaxNum; str_res_id++)
 7130              	LM865:
 7131 5075 C745DC00 		movl	$0, -36(%ebp)
 7131      000000
 7132              	L406:
 7133 507c 8B95A0DF 		movl	-8288(%ebp), %edx
 7133      FFFF
 7134 5082 8B45DC   		movl	-36(%ebp), %eax
 7135 5085 3B4204   		cmpl	4(%edx), %eax
 7136 5088 7C05     		jl	L409
 7137 508a E9E90000 		jmp	L407
 7137      00
 7138              	L409:
3732:str_merge.c   ****         {
3733:str_merge.c   ****             unsigned short nStringLen = 0;
 7140              	LM866:
 7141              	LBB45:
 7142 508f 66C78596 		movw	$0, -8298(%ebp)
 7142      DFFFFF00 
 7142      00
3734:str_merge.c   ****             
3735:str_merge.c   ****         #ifndef __UCS2_ENCODING
3736:str_merge.c   ****             fprintf(fout_res, "\"%s\",\n", strres_dup.Str[str_res_id]);
3737:str_merge.c   ****             fprintf(fout_meta_res, "\"%s\",\n", strres_dup.Str[str_res_id]);
3738:str_merge.c   ****         #else /* __UCS2_ENCODING */
3739:str_merge.c   ****             nStringLen = wcslen(strres_dup->Str[str_res_id]);
 7144              	LM867:
 7145 5098 8B8DA0DF 		movl	-8288(%ebp), %ecx
 7145      FFFF
 7146 509e 8B45DC   		movl	-36(%ebp), %eax
 7147 50a1 8D148500 		leal	0(,%eax,4), %edx
 7147      000000
 7148 50a8 8B01     		movl	(%ecx), %eax
 7149 50aa 8B0410   		movl	(%eax,%edx), %eax
 7150 50ad 890424   		movl	%eax, (%esp)
 7151 50b0 E8000000 		call	_wcslen
 7151      00
 7152 50b5 66898596 		movw	%ax, -8298(%ebp)
 7152      DFFFFF
3740:str_merge.c   **** 
3741:str_merge.c   ****             for (z = 0; z < nStringLen * 2; ++z)
 7154              	LM868:
 7155 50bc 66C745DA 		movw	$0, -38(%ebp)
 7155      0000
 7156              	L410:
 7157 50c2 0FB755DA 		movzwl	-38(%ebp), %edx
 7158 50c6 0FB78596 		movzwl	-8298(%ebp), %eax
 7158      DFFFFF
 7159 50cd 01C0     		addl	%eax, %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 198


 7160 50cf 39C2     		cmpl	%eax, %edx
 7161 50d1 7C02     		jl	L413
 7162 50d3 EB73     		jmp	L411
 7163              	L413:
3742:str_merge.c   ****             {
3743:str_merge.c   ****                 unsigned char *abc = (unsigned char*)strres_dup->Str[str_res_id];
 7165              	LM869:
 7166              	LBB46:
 7167 50d5 8B8DA0DF 		movl	-8288(%ebp), %ecx
 7167      FFFF
 7168 50db 8B45DC   		movl	-36(%ebp), %eax
 7169 50de 8D148500 		leal	0(,%eax,4), %edx
 7169      000000
 7170 50e5 8B01     		movl	(%ecx), %eax
 7171 50e7 8B0410   		movl	(%eax,%edx), %eax
 7172 50ea 898590DF 		movl	%eax, -8304(%ebp)
 7172      FFFF
3744:str_merge.c   **** 
3745:str_merge.c   ****                 fprintf(fout_res, "0x%X, ", abc[z]);
 7174              	LM870:
 7175 50f0 0FB755DA 		movzwl	-38(%ebp), %edx
 7176 50f4 8B8590DF 		movl	-8304(%ebp), %eax
 7176      FFFF
 7177 50fa 0FB60402 		movzbl	(%edx,%eax), %eax
 7178 50fe 89442408 		movl	%eax, 8(%esp)
 7179 5102 C7442404 		movl	$LC91, 4(%esp)
 7179      64470000 
 7180 510a 8B45F4   		movl	-12(%ebp), %eax
 7181 510d 890424   		movl	%eax, (%esp)
 7182 5110 E8000000 		call	_fprintf
 7182      00
3746:str_merge.c   ****                 fprintf(fout_meta_res, "0x%X, ", abc[z]);
 7184              	LM871:
 7185 5115 0FB755DA 		movzwl	-38(%ebp), %edx
 7186 5119 8B8590DF 		movl	-8304(%ebp), %eax
 7186      FFFF
 7187 511f 0FB60402 		movzbl	(%edx,%eax), %eax
 7188 5123 89442408 		movl	%eax, 8(%esp)
 7189 5127 C7442404 		movl	$LC91, 4(%esp)
 7189      64470000 
 7190 512f 8B45EC   		movl	-20(%ebp), %eax
 7191 5132 890424   		movl	%eax, (%esp)
 7192 5135 E8000000 		call	_fprintf
 7192      00
 7194              	LM872:
 7195              	LBE46:
 7196 513a 0FB745DA 		movzwl	-38(%ebp), %eax
 7197 513e 40       		incl	%eax
 7198 513f 668945DA 		movw	%ax, -38(%ebp)
 7199 5143 E97AFFFF 		jmp	L410
 7199      FF
 7200              	L411:
3747:str_merge.c   ****             }
3748:str_merge.c   **** 
3749:str_merge.c   ****             fputs("0x00, 0x00,\n", fout_res);
 7202              	LM873:
 7203 5148 8B45F4   		movl	-12(%ebp), %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 199


 7204 514b 89442404 		movl	%eax, 4(%esp)
 7205 514f C7042457 		movl	$LC90, (%esp)
 7205      470000
 7206 5156 E8000000 		call	_fputs
 7206      00
3750:str_merge.c   ****             fputs("0x00, 0x00,\n", fout_meta_res);
 7208              	LM874:
 7209 515b 8B45EC   		movl	-20(%ebp), %eax
 7210 515e 89442404 		movl	%eax, 4(%esp)
 7211 5162 C7042457 		movl	$LC90, (%esp)
 7211      470000
 7212 5169 E8000000 		call	_fputs
 7212      00
 7214              	LM875:
 7215 516e 8D45DC   		leal	-36(%ebp), %eax
 7216              	LBE45:
 7217 5171 FF00     		incl	(%eax)
 7218 5173 E904FFFF 		jmp	L406
 7218      FF
 7219              	L407:
3751:str_merge.c   **** 
3752:str_merge.c   ****          #endif /* __UCS2_ENCODING */
3753:str_merge.c   ****         }
3754:str_merge.c   ****         fprintf(fout_res, "};\n");
 7221              	LM876:
 7222 5178 C7442404 		movl	$LC92, 4(%esp)
 7222      6B470000 
 7223 5180 8B45F4   		movl	-12(%ebp), %eax
 7224 5183 890424   		movl	%eax, (%esp)
 7225 5186 E8000000 		call	_fprintf
 7225      00
3755:str_merge.c   ****         fprintf(fout_meta_res, "};\n");
 7227              	LM877:
 7228 518b C7442404 		movl	$LC92, 4(%esp)
 7228      6B470000 
 7229 5193 8B45EC   		movl	-20(%ebp), %eax
 7230 5196 890424   		movl	%eax, (%esp)
 7231 5199 E8000000 		call	_fprintf
 7231      00
3756:str_merge.c   **** 
3757:str_merge.c   ****         STRMERG_LOG_V(STRMERG_SUB_TAG_MEM "StrRes_Dup: Finished fout_res output");
 7233              	LM878:
 7234 519e C7442408 		movl	$LC93, 8(%esp)
 7234      80470000 
 7235 51a6 C7442404 		movl	$LC3, 4(%esp)
 7235      4B040000 
 7236 51ae C7042401 		movl	$1, (%esp)
 7236      000000
 7237 51b5 E8000000 		call	_reslog_adaptor_log
 7237      00
3758:str_merge.c   ****     }
3759:str_merge.c   **** 
3760:str_merge.c   ****         /* look for a max value of TotalLength in each language */
3761:str_merge.c   ****         for (i = 0; i < mtk_gMaxDeployedLangs; i++)
 7239              	LM879:
 7240 51ba C745E400 		movl	$0, -28(%ebp)
 7240      000000
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 200


 7241              	L414:
 7242 51c1 0FB70500 		movzwl	_mtk_gMaxDeployedLangs, %eax
 7242      000000
 7243 51c8 3945E4   		cmpl	%eax, -28(%ebp)
 7244 51cb 7C02     		jl	L417
 7245 51cd EB58     		jmp	L415
 7246              	L417:
3762:str_merge.c   ****         {
3763:str_merge.c   ****             if (mtk_gLanguageFlag[i])
 7248              	LM880:
 7249 51cf 8B45E4   		movl	-28(%ebp), %eax
 7250 51d2 8D148500 		leal	0(,%eax,4), %edx
 7250      000000
 7251 51d9 A1B80000 		movl	_mtk_gLanguageFlag, %eax
 7251      00
 7252 51de 833C1000 		cmpl	$0, (%eax,%edx)
 7253 51e2 743C     		je	L416
3764:str_merge.c   ****             {
3765:str_merge.c   ****                 if (strres[i].TotalLength > max_total_len)
 7255              	LM881:
 7256 51e4 8B55E4   		movl	-28(%ebp), %edx
 7257 51e7 89D0     		movl	%edx, %eax
 7258 51e9 01C0     		addl	%eax, %eax
 7259 51eb 01D0     		addl	%edx, %eax
 7260 51ed 8D14C500 		leal	0(,%eax,8), %edx
 7260      000000
 7261 51f4 8B45BC   		movl	-68(%ebp), %eax
 7262 51f7 8B441014 		movl	20(%eax,%edx), %eax
 7263 51fb 3B859CDF 		cmpl	-8292(%ebp), %eax
 7263      FFFF
 7264 5201 7E1D     		jle	L416
3766:str_merge.c   ****                 {
3767:str_merge.c   ****                     max_total_len = strres[i].TotalLength;
 7266              	LM882:
 7267 5203 8B55E4   		movl	-28(%ebp), %edx
 7268 5206 89D0     		movl	%edx, %eax
 7269 5208 01C0     		addl	%eax, %eax
 7270 520a 01D0     		addl	%edx, %eax
 7271 520c 8D14C500 		leal	0(,%eax,8), %edx
 7271      000000
 7272 5213 8B45BC   		movl	-68(%ebp), %eax
 7273 5216 8B441014 		movl	20(%eax,%edx), %eax
 7274 521a 89859CDF 		movl	%eax, -8292(%ebp)
 7274      FFFF
 7276              	LM883:
 7277              	L416:
 7278 5220 8D45E4   		leal	-28(%ebp), %eax
 7279 5223 FF00     		incl	(%eax)
 7280 5225 EB9A     		jmp	L414
 7281              	L415:
3768:str_merge.c   ****                 }
3769:str_merge.c   ****             }
3770:str_merge.c   ****         }
3771:str_merge.c   ****         STRMERG_LOG_V(STRMERG_SUB_TAG_MEM "MAX Total length of each language: %d ", max_total_len);
 7283              	LM884:
 7284 5227 8B859CDF 		movl	-8292(%ebp), %eax
 7284      FFFF
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 201


 7285 522d 8944240C 		movl	%eax, 12(%esp)
 7286 5231 C7442408 		movl	$LC94, 8(%esp)
 7286      C0470000 
 7287 5239 C7442404 		movl	$LC3, 4(%esp)
 7287      4B040000 
 7288 5241 C7042401 		movl	$1, (%esp)
 7288      000000
 7289 5248 E8000000 		call	_reslog_adaptor_log
 7289      00
 7290              	L405:
3772:str_merge.c   ****     }
3773:str_merge.c   **** #endif /* __MMI_RESOURCE_ENFB_SUPPORT__ */
3774:str_merge.c   **** 
3775:str_merge.c   ****     is16bit = malloc(sizeof(MMI_BOOL) * mtk_gMaxDeployedLangs);
 7292              	LM885:
 7293 524d 0FB70500 		movzwl	_mtk_gMaxDeployedLangs, %eax
 7293      000000
 7294 5254 C1E002   		sall	$2, %eax
 7295 5257 890424   		movl	%eax, (%esp)
 7296 525a E8000000 		call	_malloc
 7296      00
 7297 525f A3C80000 		movl	%eax, _is16bit
 7297      00
3776:str_merge.c   ****     ASSERT(is16bit != NULL);
 7299              	LM886:
 7300 5264 833DC800 		cmpl	$0, _is16bit
 7300      000000
 7301 526b 7502     		jne	L424
 7302              	L421:
 7303 526d EBFE     		jmp	L421
 7304              	L424:
3777:str_merge.c   ****     /* output string resource file */
3778:str_merge.c   ****     for (i = 0; i < mtk_gMaxDeployedLangs; i++)
 7306              	LM887:
 7307 526f C745E400 		movl	$0, -28(%ebp)
 7307      000000
 7308              	L425:
 7309 5276 0FB70500 		movzwl	_mtk_gMaxDeployedLangs, %eax
 7309      000000
 7310 527d 3945E4   		cmpl	%eax, -28(%ebp)
 7311 5280 7C05     		jl	L428
 7312 5282 E9EA0900 		jmp	L426
 7312      00
 7313              	L428:
3779:str_merge.c   ****     {
3780:str_merge.c   ****         int old_i = i;
 7315              	LM888:
 7316              	LBB47:
 7317 5287 8B45E4   		movl	-28(%ebp), %eax
 7318 528a 898590DF 		movl	%eax, -8304(%ebp)
 7318      FFFF
3781:str_merge.c   ****         unsigned long nTotalLen = 0;
 7320              	LM889:
 7321 5290 C7858CDF 		movl	$0, -8308(%ebp)
 7321      FFFF0000 
 7321      0000
3782:str_merge.c   **** 
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 202


3783:str_merge.c   **** #ifdef __MMI_RESOURCE_ENFB_SUPPORT__
3784:str_merge.c   ****         is16bit[i] = MMI_FALSE;
3785:str_merge.c   **** #else
3786:str_merge.c   ****         is16bit[i] = MMI_TRUE;
 7323              	LM890:
 7324 529a 8B45E4   		movl	-28(%ebp), %eax
 7325 529d 8D148500 		leal	0(,%eax,4), %edx
 7325      000000
 7326 52a4 A1C80000 		movl	_is16bit, %eax
 7326      00
 7327 52a9 C7041001 		movl	$1, (%eax,%edx)
 7327      000000
3787:str_merge.c   **** #endif
3788:str_merge.c   **** 
3789:str_merge.c   ****         if (mtk_gLanguageFlag[i] == 0)
 7329              	LM891:
 7330 52b0 8B45E4   		movl	-28(%ebp), %eax
 7331 52b3 8D148500 		leal	0(,%eax,4), %edx
 7331      000000
 7332 52ba A1B80000 		movl	_mtk_gLanguageFlag, %eax
 7332      00
 7333 52bf 833C1000 		cmpl	$0, (%eax,%edx)
 7334 52c3 0F858400 		jne	L429
 7334      0000
3790:str_merge.c   ****         {
3791:str_merge.c   ****             wchar_t * err_msg = malloc((STRMERGE_ERR_MSG_LEN_MAX+1) * sizeof(wchar_t));
 7336              	LM892:
 7337              	LBB48:
 7338 52c9 C7042492 		movl	$402, (%esp)
 7338      010000
 7339 52d0 E8000000 		call	_malloc
 7339      00
 7340 52d5 898588DF 		movl	%eax, -8312(%ebp)
 7340      FFFF
3792:str_merge.c   ****             swprintf(err_msg,L"Deployed languages not found in ref_list_translation.txt!\n");
 7342              	LM893:
 7343 52db C7442404 		movl	$LC95, 4(%esp)
 7343      00480000 
 7344 52e3 8B8588DF 		movl	-8312(%ebp), %eax
 7344      FFFF
 7345 52e9 890424   		movl	%eax, (%esp)
 7346 52ec E8000000 		call	_swprintf
 7346      00
3793:str_merge.c   ****             str_merge_set_err(STRMERGE_LOAD_SSC_ERR, err_msg);
 7348              	LM894:
 7349 52f1 8B8588DF 		movl	-8312(%ebp), %eax
 7349      FFFF
 7350 52f7 89442404 		movl	%eax, 4(%esp)
 7351 52fb C7042402 		movl	$2, (%esp)
 7351      000000
 7352 5302 E8F9ACFF 		call	_str_merge_set_err
 7352      FF
3794:str_merge.c   ****             STRMERG_LOG_E(STRMERG_SUB_TAG_MEM "Please provide translated strings of %s in ref_list.
 7354              	LM895:
 7355 5307 8B55E4   		movl	-28(%ebp), %edx
 7356 530a 89D0     		movl	%edx, %eax
 7357 530c C1E005   		sall	$5, %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 203


 7358 530f 29D0     		subl	%edx, %eax
 7359 5311 01C0     		addl	%eax, %eax
 7360 5313 05280000 		addl	$_mtk_gLanguageArray+40, %eax
 7360      00
 7361 5318 8944240C 		movl	%eax, 12(%esp)
 7362 531c C7442408 		movl	$LC96, 8(%esp)
 7362      80480000 
 7363 5324 C7442404 		movl	$LC3, 4(%esp)
 7363      4B040000 
 7364 532c C7042403 		movl	$3, (%esp)
 7364      000000
 7365 5333 E8000000 		call	_reslog_adaptor_log
 7365      00
3795:str_merge.c   ****             free(err_msg);
 7367              	LM896:
 7368 5338 8B8588DF 		movl	-8312(%ebp), %eax
 7368      FFFF
 7369 533e 890424   		movl	%eax, (%esp)
 7370 5341 E8000000 		call	_free
 7370      00
3796:str_merge.c   ****             i = 0;
 7372              	LM897:
 7373 5346 C745E400 		movl	$0, -28(%ebp)
 7373      000000
 7374              	L429:
3797:str_merge.c   ****         }
3798:str_merge.c   **** 
3799:str_merge.c   **** 
3800:str_merge.c   **** 
3801:str_merge.c   **** #if defined(__MMI_RESOURCE_STR_ZLIB_COMPRESS__)
3802:str_merge.c   ****     if (mmi_res_zip_language[i] == 1)
3803:str_merge.c   ****     {
3804:str_merge.c   ****         // The parameter for compress 2 must be type of ulong
3805:str_merge.c   ****         unsigned long array_size = 0, dest_size = 0;
3806:str_merge.c   ****         U8 *buffer = NULL;
3807:str_merge.c   ****         U8 *dest_buf = NULL;
3808:str_merge.c   ****         U8 *p = NULL;
3809:str_merge.c   ****         U16 strsize = 0;
3810:str_merge.c   **** 
3811:str_merge.c   ****         
3812:str_merge.c   ****         /*------ output CustStrRes.c ------*/
3813:str_merge.c   ****         array_size = 2;
3814:str_merge.c   ****         /* Calculate Size of Current string */
3815:str_merge.c   ****         for (str_res_id = 0; str_res_id < strres[i].MaxNum; str_res_id++)
3816:str_merge.c   ****         {
3817:str_merge.c   ****             /* check if it is a dup str */
3818:str_merge.c   ****             if (strres[i].Str[str_res_id] == NULL) 
3819:str_merge.c   ****                 continue;
3820:str_merge.c   **** 
3821:str_merge.c   ****             array_size += ((wcslen(strres[i].Str[str_res_id])+1)*2);
3822:str_merge.c   ****         }
3823:str_merge.c   ****         if(max_zip_len < array_size)
3824:str_merge.c   ****         {
3825:str_merge.c   ****             max_zip_len = array_size;
3826:str_merge.c   ****         }
3827:str_merge.c   **** 
3828:str_merge.c   ****         // Calculate the dest_size, since the dest_size is in-out parameter
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 204


3829:str_merge.c   ****         // The size must be large enough. (ulong)
3830:str_merge.c   ****         dest_size = compressBound(array_size);
3831:str_merge.c   **** 
3832:str_merge.c   ****         buffer = malloc(array_size);
3833:str_merge.c   ****         dest_buf = malloc(dest_size);
3834:str_merge.c   ****         buffer[0] = '\0';
3835:str_merge.c   ****         buffer[1] = '\0';
3836:str_merge.c   **** 
3837:str_merge.c   ****         p = buffer+2;
3838:str_merge.c   ****         /* copy string to buffer */
3839:str_merge.c   ****         for (str_res_id = 0; str_res_id < strres[i].MaxNum; str_res_id++)
3840:str_merge.c   ****         {
3841:str_merge.c   ****             /* check if it is a dup str */
3842:str_merge.c   ****             if (strres[i].Str[str_res_id] == NULL) continue;
3843:str_merge.c   ****             
3844:str_merge.c   ****             strsize = (wcslen(strres[i].Str[str_res_id]) + 1) * 2;
3845:str_merge.c   ****             memcpy(p, strres[i].Str[str_res_id], strsize);
3846:str_merge.c   ****             p += strsize;
3847:str_merge.c   ****         }
3848:str_merge.c   ****         
3849:str_merge.c   ****         STRMERG_LOG_V(STRMERG_SUB_TAG_MEM "StrRes_zip_%d[%lu]: compress2 input: dest_size=%lu, arra
3850:str_merge.c   ****         STRMERG_LOG_V(STRMERG_SUB_TAG_MEM "Total size of compressing data= %lu bytes (p-buffer), si
3851:str_merge.c   ****         
3852:str_merge.c   ****         compress2(dest_buf, &dest_size, buffer, array_size, Z_BEST_COMPRESSION);
3853:str_merge.c   **** 
3854:str_merge.c   ****         STRMERG_LOG_V(STRMERG_SUB_TAG_MEM "StrRes_zip_%d[%lu]: compress2 output: dest_size=%lu, arr
3855:str_merge.c   **** 
3856:str_merge.c   ****         //fprintf(fout_res, "__align(4) CUSTOM_STRING StrRes_%d[%d];\n", old_i + 1, array_size);
3857:str_merge.c   ****         fprintf(fout_res, "// StrRes_zip_%d, DATA SIZE = %d \n", old_i + 1, dest_size);
3858:str_merge.c   ****         fprintf(fout_res, "__align(4) const U8 StrRes_zip_%d[] = {\n", old_i + 1);
3859:str_merge.c   ****         
3860:str_merge.c   **** 
3861:str_merge.c   ****         STRMERG_LOG_V(STRMERG_SUB_TAG_MEM "StrRes_zip_%d[%lu]: Started fout_res output",old_i + 1, 
3862:str_merge.c   **** 
3863:str_merge.c   ****         for (z = 0; z < dest_size-1; ++z)
3864:str_merge.c   ****         {
3865:str_merge.c   ****             if (z %16 == 0)
3866:str_merge.c   ****             {
3867:str_merge.c   ****                 fprintf(fout_res, "\n");
3868:str_merge.c   ****             }
3869:str_merge.c   ****             fprintf(fout_res, "0x%02X, ", dest_buf[z]);
3870:str_merge.c   ****         }
3871:str_merge.c   ****         
3872:str_merge.c   ****         fprintf(fout_res, "0x%02X, ", dest_buf[z]);
3873:str_merge.c   **** 
3874:str_merge.c   ****         append_cat_padding_bytes(fout_res, dest_size);
3875:str_merge.c   **** 
3876:str_merge.c   ****         
3877:str_merge.c   ****         fprintf(fout_res, "};\n");
3878:str_merge.c   **** 
3879:str_merge.c   ****         fprintf(fout_res, "extern const U8 StrMap_zip_%d[];\n\n", old_i + 1);
3880:str_merge.c   **** 
3881:str_merge.c   ****         STRMERG_LOG_V(STRMERG_SUB_TAG_MEM "StrRes_zip_%d[%lu]: Finished fout_res output",old_i + 1,
3882:str_merge.c   **** 
3883:str_merge.c   ****         res_size[i] = array_size;
3884:str_merge.c   ****         reszip_size[i] = dest_size;
3885:str_merge.c   **** 
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 205


3886:str_merge.c   ****         free(buffer);
3887:str_merge.c   ****         free(dest_buf);  
3888:str_merge.c   **** 
3889:str_merge.c   ****         array_size = 0;
3890:str_merge.c   ****         dest_size = 0;
3891:str_merge.c   **** 
3892:str_merge.c   ****         /*------ output CustStrMap.c ------*/
3893:str_merge.c   **** 
3894:str_merge.c   ****         /* Get 16bit or 32 bit ----Start */
3895:str_merge.c   ****         for (str_res_id = 0; str_res_id < strres[i].MaxID; str_res_id++)
3896:str_merge.c   ****         {
3897:str_merge.c   ****             unsigned int nStringLen = 0;
3898:str_merge.c   ****             int iterator = 0;
3899:str_merge.c   ****             wchar_t *wcString;
3900:str_merge.c   **** 
3901:str_merge.c   ****             if (strres[i].StrRef[str_res_id] == -1)
3902:str_merge.c   ****             {
3903:str_merge.c   ****                 nTotalLen = 0;
3904:str_merge.c   ****             }
3905:str_merge.c   ****             else
3906:str_merge.c   ****             {
3907:str_merge.c   ****                 nTotalLen = 2;
3908:str_merge.c   ****             }
3909:str_merge.c   ****             /* check if it is duplicated */ 
3910:str_merge.c   ****             if (strres[i].is_dup[str_res_id])
3911:str_merge.c   ****             {
3912:str_merge.c   ****                 for (iterator = 0; iterator < strres[i].StrRef[str_res_id]; iterator++)
3913:str_merge.c   ****                 {
3914:str_merge.c   ****                     nStringLen = 0;
3915:str_merge.c   ****                     nStringLen = wcslen(strres_dup->Str[iterator]);
3916:str_merge.c   ****                     wcString = NULL;
3917:str_merge.c   ****                     nTotalLen += ((nStringLen + 1) * 2);
3918:str_merge.c   ****                 }
3919:str_merge.c   ****                 /* add max_total_len offset to nTotalLen */
3920:str_merge.c   ****                 nTotalLen += max_total_len;
3921:str_merge.c   ****             }
3922:str_merge.c   ****             else
3923:str_merge.c   ****             {
3924:str_merge.c   ****                 for (iterator = 0; iterator < strres[i].StrRef[str_res_id]; iterator++)
3925:str_merge.c   ****                 {
3926:str_merge.c   ****                     /* ignore dup str */
3927:str_merge.c   ****                     if (strres[i].Str[iterator])
3928:str_merge.c   ****                     {
3929:str_merge.c   ****                         nStringLen = 0;
3930:str_merge.c   ****                         nStringLen = wcslen(strres[i].Str[iterator]);
3931:str_merge.c   ****                         wcString = NULL;
3932:str_merge.c   ****                         nTotalLen += ((nStringLen + 1) * 2);
3933:str_merge.c   ****                     }
3934:str_merge.c   ****                 }
3935:str_merge.c   ****             }
3936:str_merge.c   **** 
3937:str_merge.c   **** #ifndef __MMI_RESOURCE_ENFB_SUPPORT__
3938:str_merge.c   ****             if (nTotalLen/2 > 0xFFFF)
3939:str_merge.c   ****             {
3940:str_merge.c   ****                 is16bit[i] = MMI_FALSE;
3941:str_merge.c   ****             }
3942:str_merge.c   **** #endif
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 206


3943:str_merge.c   ****         }
3944:str_merge.c   ****         /* Get 16bit or 32 bit -----END*/
3945:str_merge.c   ****         
3946:str_merge.c   ****         if (is16bit[i])        
3947:str_merge.c   ****         {
3948:str_merge.c   **** #if !defined(__MMI_RESOURCE_STR_ZLIB_COMPRESS__)
3949:str_merge.c   ****             fprintf(fout_res, "extern const CUSTOM_STRING_MAP_16 StrMap_%d[];\n\n", old_i + 1);
3950:str_merge.c   **** #else
3951:str_merge.c   ****             fprintf(fout_res, "//extern const CUSTOM_STRING_MAP_16 StrMap_%d[];\n\n", old_i + 1);
3952:str_merge.c   **** #endif //__MMI_RESOURCE_STR_ZLIB_COMPRESS__
3953:str_merge.c   ****             array_size = strres[i].MaxID * sizeof(U16);
3954:str_merge.c   ****         }
3955:str_merge.c   ****         else
3956:str_merge.c   ****         {
3957:str_merge.c   **** #if !defined(__MMI_RESOURCE_STR_ZLIB_COMPRESS__)
3958:str_merge.c   ****             fprintf(fout_res, "extern const CUSTOM_STRING_MAP StrMap_%d[];\n\n", old_i + 1);
3959:str_merge.c   **** #else
3960:str_merge.c   ****             fprintf(fout_res, "//extern const CUSTOM_STRING_MAP StrMap_%d[];\n\n", old_i + 1);
3961:str_merge.c   **** #endif //__MMI_RESOURCE_STR_ZLIB_COMPRESS__
3962:str_merge.c   ****             array_size = strres[i].MaxID * sizeof(U32);
3963:str_merge.c   ****         }             
3964:str_merge.c   ****         
3965:str_merge.c   ****         dest_size = compressBound(array_size);
3966:str_merge.c   ****         buffer = malloc(array_size);
3967:str_merge.c   ****         dest_buf = malloc(dest_size);
3968:str_merge.c   ****         
3969:str_merge.c   ****         p = buffer;
3970:str_merge.c   **** 
3971:str_merge.c   ****         /* Write data to buffer */
3972:str_merge.c   ****         for (str_res_id = 0; str_res_id < strres[i].MaxID; str_res_id++)
3973:str_merge.c   ****         {
3974:str_merge.c   ****             unsigned int nStringLen = 0;
3975:str_merge.c   ****             int iterator = 0;
3976:str_merge.c   ****             wchar_t *wcString;
3977:str_merge.c   ****             U32 res;
3978:str_merge.c   ****             U16 res_u16;
3979:str_merge.c   **** 
3980:str_merge.c   ****             if (strres[i].StrRef[str_res_id] == -1)
3981:str_merge.c   ****             {
3982:str_merge.c   ****                 nTotalLen = 0;
3983:str_merge.c   ****             }
3984:str_merge.c   ****             else
3985:str_merge.c   ****             {
3986:str_merge.c   ****                 nTotalLen = 2;
3987:str_merge.c   ****             }
3988:str_merge.c   **** 
3989:str_merge.c   ****             /* check if it is duplicated */ 
3990:str_merge.c   ****             if (strres[i].is_dup[str_res_id])
3991:str_merge.c   ****             {
3992:str_merge.c   ****                 for (iterator = 0; iterator < strres[i].StrRef[str_res_id]; iterator++)
3993:str_merge.c   ****                 {
3994:str_merge.c   ****                     nStringLen = 0;
3995:str_merge.c   ****                     nStringLen = wcslen(strres_dup->Str[iterator]);
3996:str_merge.c   ****                     wcString = NULL;
3997:str_merge.c   ****                     nTotalLen += ((nStringLen + 1) * 2);
3998:str_merge.c   ****                 }
3999:str_merge.c   ****                 /* add max_total_len offset to nTotalLen */
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 207


4000:str_merge.c   ****                 nTotalLen += max_total_len;
4001:str_merge.c   ****             }
4002:str_merge.c   ****             else
4003:str_merge.c   ****             {
4004:str_merge.c   ****                 for (iterator = 0; iterator < strres[i].StrRef[str_res_id]; iterator++)
4005:str_merge.c   ****                 {
4006:str_merge.c   ****                     /* ignore dup str */
4007:str_merge.c   ****                     if (strres[i].Str[iterator])
4008:str_merge.c   ****                     {
4009:str_merge.c   ****                         nStringLen = 0;
4010:str_merge.c   ****                         nStringLen = wcslen(strres[i].Str[iterator]);
4011:str_merge.c   ****                         wcString = NULL;
4012:str_merge.c   ****                         nTotalLen += ((nStringLen + 1) * 2);
4013:str_merge.c   ****                     }
4014:str_merge.c   ****                 }
4015:str_merge.c   ****             }
4016:str_merge.c   **** 
4017:str_merge.c   ****             
4018:str_merge.c   ****             if (is16bit[i])        
4019:str_merge.c   ****             {            
4020:str_merge.c   ****                 res_u16 = nTotalLen / 2;
4021:str_merge.c   ****                 memcpy(p, &res_u16, sizeof(U16));
4022:str_merge.c   ****                 p+=sizeof(U16);
4023:str_merge.c   ****             }
4024:str_merge.c   ****             else
4025:str_merge.c   ****             {
4026:str_merge.c   ****                 res = nTotalLen / 2;
4027:str_merge.c   ****                 memcpy(p, &res, sizeof(U32));
4028:str_merge.c   ****                 p+=sizeof(U32);                
4029:str_merge.c   ****             }
4030:str_merge.c   ****         }
4031:str_merge.c   **** 
4032:str_merge.c   ****         /* compresss data to dest_buf */
4033:str_merge.c   ****         STRMERG_LOG_V(STRMERG_SUB_TAG_MEM "StrMap_zip_%d: compress2 input: dest_size=%lu, array_siz
4034:str_merge.c   ****         STRMERG_LOG_V(STRMERG_SUB_TAG_MEM "Total size of compressing data= %lu bytes (p-buffer), si
4035:str_merge.c   **** 
4036:str_merge.c   ****         compress2(dest_buf, &dest_size, buffer, array_size, Z_BEST_COMPRESSION);
4037:str_merge.c   ****         STRMERG_LOG_V(STRMERG_SUB_TAG_MEM "StrMap_zip_%d compress2 output: dest_size=%lu, array_siz
4038:str_merge.c   **** 
4039:str_merge.c   ****         STRMERG_LOG_V(STRMERG_SUB_TAG_MEM "StrMap_%d[%lu]: Started fout_res output",old_i + 1, arra
4040:str_merge.c   **** 
4041:str_merge.c   ****         /* Write compressed data to file */
4042:str_merge.c   ****         if (is16bit[i])        
4043:str_merge.c   ****         {
4044:str_merge.c   ****             fprintf(fout_map, "//__align(4) CUSTOM_STRING_MAP_16 StrMap_%d[%d];\n", old_i + 1, arra
4045:str_merge.c   ****         }
4046:str_merge.c   ****         else
4047:str_merge.c   ****         {
4048:str_merge.c   ****             fprintf(fout_map, "//CUSTOM_STRING_MAP StrMap_%d[%d];\n", old_i + 1, array_size/sizeof(
4049:str_merge.c   ****         }
4050:str_merge.c   **** 
4051:str_merge.c   ****         fprintf(fout_map, "// StrMap_zip_%d, DATA SIZE = %d\n", old_i + 1, dest_size);        
4052:str_merge.c   ****         fprintf(fout_map, "__align(4) const U8 StrMap_zip_%d[] = {\n", old_i + 1);
4053:str_merge.c   **** 
4054:str_merge.c   ****         for (z = 0; z < dest_size-1; ++z)
4055:str_merge.c   ****         {
4056:str_merge.c   **** 
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 208


4057:str_merge.c   ****             if ((z+1)%16 == 0)
4058:str_merge.c   ****             {
4059:str_merge.c   ****                 fprintf(fout_map, "\n");
4060:str_merge.c   ****             }
4061:str_merge.c   ****             fprintf(fout_map, "0x%02X, ", dest_buf[z]);
4062:str_merge.c   ****         }
4063:str_merge.c   ****         fprintf(fout_map, "0x%02X, ", dest_buf[z]);
4064:str_merge.c   **** 
4065:str_merge.c   ****         append_cat_padding_bytes(fout_map, dest_size);
4066:str_merge.c   **** 
4067:str_merge.c   ****         fprintf(fout_map, "};\n");
4068:str_merge.c   ****         
4069:str_merge.c   ****         
4070:str_merge.c   ****         STRMERG_LOG_V(STRMERG_SUB_TAG_MEM "StrMap_%d[%lu]: Finished fout_res output",old_i + 1, arr
4071:str_merge.c   ****         
4072:str_merge.c   ****         map_size[i] = array_size;
4073:str_merge.c   ****         mapzip_size[i] = dest_size;   
4074:str_merge.c   ****         
4075:str_merge.c   ****         free(buffer);
4076:str_merge.c   ****         free(dest_buf);     
4077:str_merge.c   **** 
4078:str_merge.c   ****         array_size = 0;
4079:str_merge.c   ****         dest_size = 0;        
4080:str_merge.c   ****     }
4081:str_merge.c   ****     else
4082:str_merge.c   **** #endif /* __MMI_RESOURCE_STR_ZLIB_COMPRESS__ */
4083:str_merge.c   ****     {
4084:str_merge.c   ****         for (str_res_id = 0; str_res_id < strres[i].MaxID; str_res_id++)
 7376              	LM898:
 7377              	LBE48:
 7378 534d C745DC00 		movl	$0, -36(%ebp)
 7378      000000
 7379              	L430:
 7380 5354 8B55E4   		movl	-28(%ebp), %edx
 7381 5357 89D0     		movl	%edx, %eax
 7382 5359 01C0     		addl	%eax, %eax
 7383 535b 01D0     		addl	%edx, %eax
 7384 535d 8D0CC500 		leal	0(,%eax,8), %ecx
 7384      000000
 7385 5364 8B55BC   		movl	-68(%ebp), %edx
 7386 5367 8B45DC   		movl	-36(%ebp), %eax
 7387 536a 3B440A08 		cmpl	8(%edx,%ecx), %eax
 7388 536e 7C05     		jl	L433
 7389 5370 E91C0200 		jmp	L431
 7389      00
 7390              	L433:
4085:str_merge.c   ****         {
4086:str_merge.c   ****             unsigned int nStringLen = 0;
 7392              	LM899:
 7393              	LBB49:
 7394 5375 C78588DF 		movl	$0, -8312(%ebp)
 7394      FFFF0000 
 7394      0000
4087:str_merge.c   ****             int iterator = 0;
 7396              	LM900:
 7397 537f C78584DF 		movl	$0, -8316(%ebp)
 7397      FFFF0000 
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 209


 7397      0000
4088:str_merge.c   ****             wchar_t *wcString;
4089:str_merge.c   **** 
4090:str_merge.c   ****             if (strres[i].StrRef[str_res_id] == -1)
 7399              	LM901:
 7400 5389 8B55E4   		movl	-28(%ebp), %edx
 7401 538c 89D0     		movl	%edx, %eax
 7402 538e 01C0     		addl	%eax, %eax
 7403 5390 01D0     		addl	%edx, %eax
 7404 5392 8D1CC500 		leal	0(,%eax,8), %ebx
 7404      000000
 7405 5399 8B4DBC   		movl	-68(%ebp), %ecx
 7406 539c 8B45DC   		movl	-36(%ebp), %eax
 7407 539f 8D148500 		leal	0(,%eax,4), %edx
 7407      000000
 7408 53a6 8B441904 		movl	4(%ecx,%ebx), %eax
 7409 53aa 833C10FF 		cmpl	$-1, (%eax,%edx)
 7410 53ae 750C     		jne	L434
4091:str_merge.c   ****             {
4092:str_merge.c   ****                 nTotalLen = 0;
 7412              	LM902:
 7413 53b0 C7858CDF 		movl	$0, -8308(%ebp)
 7413      FFFF0000 
 7413      0000
 7414 53ba EB0A     		jmp	L435
 7415              	L434:
4093:str_merge.c   ****             }
4094:str_merge.c   ****             else
4095:str_merge.c   ****             {
4096:str_merge.c   ****                 nTotalLen = 2;
 7417              	LM903:
 7418 53bc C7858CDF 		movl	$2, -8308(%ebp)
 7418      FFFF0200 
 7418      0000
 7419              	L435:
4097:str_merge.c   ****             }
4098:str_merge.c   **** #ifndef __MMI_RESOURCE_ENFB_SUPPORT__
4099:str_merge.c   ****             /* check if it is duplicated */ 
4100:str_merge.c   ****             if (strres[i].is_dup[str_res_id])
 7421              	LM904:
 7422 53c6 8B55E4   		movl	-28(%ebp), %edx
 7423 53c9 89D0     		movl	%edx, %eax
 7424 53cb 01C0     		addl	%eax, %eax
 7425 53cd 01D0     		addl	%edx, %eax
 7426 53cf 8D0CC500 		leal	0(,%eax,8), %ecx
 7426      000000
 7427 53d6 8B55BC   		movl	-68(%ebp), %edx
 7428 53d9 8B45DC   		movl	-36(%ebp), %eax
 7429 53dc 03440A10 		addl	16(%edx,%ecx), %eax
 7430 53e0 803800   		cmpb	$0, (%eax)
 7431 53e3 0F84A900 		je	L436
 7431      0000
4101:str_merge.c   ****             {
4102:str_merge.c   ****                 for (iterator = 0; iterator < strres[i].StrRef[str_res_id]; iterator++)
 7433              	LM905:
 7434 53e9 C78584DF 		movl	$0, -8316(%ebp)
 7434      FFFF0000 
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 210


 7434      0000
 7435              	L437:
 7436 53f3 8B55E4   		movl	-28(%ebp), %edx
 7437 53f6 89D0     		movl	%edx, %eax
 7438 53f8 01C0     		addl	%eax, %eax
 7439 53fa 01D0     		addl	%edx, %eax
 7440 53fc 8D1CC500 		leal	0(,%eax,8), %ebx
 7440      000000
 7441 5403 8B55BC   		movl	-68(%ebp), %edx
 7442 5406 8B45DC   		movl	-36(%ebp), %eax
 7443 5409 8D0C8500 		leal	0(,%eax,4), %ecx
 7443      000000
 7444 5410 8B541A04 		movl	4(%edx,%ebx), %edx
 7445 5414 8B8584DF 		movl	-8316(%ebp), %eax
 7445      FFFF
 7446 541a 3B040A   		cmpl	(%edx,%ecx), %eax
 7447 541d 7C02     		jl	L440
 7448 541f EB5E     		jmp	L438
 7449              	L440:
4103:str_merge.c   ****                 {
4104:str_merge.c   ****                     nStringLen = 0;
 7451              	LM906:
 7452 5421 C78588DF 		movl	$0, -8312(%ebp)
 7452      FFFF0000 
 7452      0000
4105:str_merge.c   ****                     nStringLen = wcslen(strres_dup->Str[iterator]);
 7454              	LM907:
 7455 542b 8B8DA0DF 		movl	-8288(%ebp), %ecx
 7455      FFFF
 7456 5431 8B8584DF 		movl	-8316(%ebp), %eax
 7456      FFFF
 7457 5437 8D148500 		leal	0(,%eax,4), %edx
 7457      000000
 7458 543e 8B01     		movl	(%ecx), %eax
 7459 5440 8B0410   		movl	(%eax,%edx), %eax
 7460 5443 890424   		movl	%eax, (%esp)
 7461 5446 E8000000 		call	_wcslen
 7461      00
 7462 544b 898588DF 		movl	%eax, -8312(%ebp)
 7462      FFFF
4106:str_merge.c   ****                     wcString = NULL;
 7464              	LM908:
 7465 5451 C78580DF 		movl	$0, -8320(%ebp)
 7465      FFFF0000 
 7465      0000
4107:str_merge.c   ****                     nTotalLen += ((nStringLen + 1) * 2);
 7467              	LM909:
 7468 545b 8B8588DF 		movl	-8312(%ebp), %eax
 7468      FFFF
 7469 5461 01C0     		addl	%eax, %eax
 7470 5463 03858CDF 		addl	-8308(%ebp), %eax
 7470      FFFF
 7471 5469 83C002   		addl	$2, %eax
 7472 546c 89858CDF 		movl	%eax, -8308(%ebp)
 7472      FFFF
 7474              	LM910:
 7475 5472 8D8584DF 		leal	-8316(%ebp), %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 211


 7475      FFFF
 7476 5478 FF00     		incl	(%eax)
 7477 547a E974FFFF 		jmp	L437
 7477      FF
 7478              	L438:
4108:str_merge.c   ****                 }
4109:str_merge.c   ****                 /* add max_total_len offset to nTotalLen */
4110:str_merge.c   ****                 nTotalLen += max_total_len;
 7480              	LM911:
 7481 547f 8B959CDF 		movl	-8292(%ebp), %edx
 7481      FFFF
 7482 5485 8D858CDF 		leal	-8308(%ebp), %eax
 7482      FFFF
 7483 548b 0110     		addl	%edx, (%eax)
 7484 548d E9D00000 		jmp	L441
 7484      00
 7485              	L436:
4111:str_merge.c   ****             }
4112:str_merge.c   ****             else
4113:str_merge.c   ****             {
4114:str_merge.c   ****                 for (iterator = 0; iterator < strres[i].StrRef[str_res_id]; iterator++)
 7487              	LM912:
 7488 5492 C78584DF 		movl	$0, -8316(%ebp)
 7488      FFFF0000 
 7488      0000
 7489              	L442:
 7490 549c 8B55E4   		movl	-28(%ebp), %edx
 7491 549f 89D0     		movl	%edx, %eax
 7492 54a1 01C0     		addl	%eax, %eax
 7493 54a3 01D0     		addl	%edx, %eax
 7494 54a5 8D1CC500 		leal	0(,%eax,8), %ebx
 7494      000000
 7495 54ac 8B55BC   		movl	-68(%ebp), %edx
 7496 54af 8B45DC   		movl	-36(%ebp), %eax
 7497 54b2 8D0C8500 		leal	0(,%eax,4), %ecx
 7497      000000
 7498 54b9 8B541A04 		movl	4(%edx,%ebx), %edx
 7499 54bd 8B8584DF 		movl	-8316(%ebp), %eax
 7499      FFFF
 7500 54c3 3B040A   		cmpl	(%edx,%ecx), %eax
 7501 54c6 7C05     		jl	L445
 7502 54c8 E9950000 		jmp	L441
 7502      00
 7503              	L445:
4115:str_merge.c   ****                 {
4116:str_merge.c   ****                     /* ignore dup str */
4117:str_merge.c   ****                     if (strres[i].Str[iterator])
 7505              	LM913:
 7506 54cd 8B55E4   		movl	-28(%ebp), %edx
 7507 54d0 89D0     		movl	%edx, %eax
 7508 54d2 01C0     		addl	%eax, %eax
 7509 54d4 01D0     		addl	%edx, %eax
 7510 54d6 8D1CC500 		leal	0(,%eax,8), %ebx
 7510      000000
 7511 54dd 8B4DBC   		movl	-68(%ebp), %ecx
 7512 54e0 8B8584DF 		movl	-8316(%ebp), %eax
 7512      FFFF
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 212


 7513 54e6 8D148500 		leal	0(,%eax,4), %edx
 7513      000000
 7514 54ed 8B0419   		movl	(%ecx,%ebx), %eax
 7515 54f0 833C1000 		cmpl	$0, (%eax,%edx)
 7516 54f4 745F     		je	L444
4118:str_merge.c   ****                     {
4119:str_merge.c   ****                         nStringLen = 0;
 7518              	LM914:
 7519 54f6 C78588DF 		movl	$0, -8312(%ebp)
 7519      FFFF0000 
 7519      0000
4120:str_merge.c   ****                         nStringLen = wcslen(strres[i].Str[iterator]);
 7521              	LM915:
 7522 5500 8B55E4   		movl	-28(%ebp), %edx
 7523 5503 89D0     		movl	%edx, %eax
 7524 5505 01C0     		addl	%eax, %eax
 7525 5507 01D0     		addl	%edx, %eax
 7526 5509 8D1CC500 		leal	0(,%eax,8), %ebx
 7526      000000
 7527 5510 8B4DBC   		movl	-68(%ebp), %ecx
 7528 5513 8B8584DF 		movl	-8316(%ebp), %eax
 7528      FFFF
 7529 5519 8D148500 		leal	0(,%eax,4), %edx
 7529      000000
 7530 5520 8B0419   		movl	(%ecx,%ebx), %eax
 7531 5523 8B0410   		movl	(%eax,%edx), %eax
 7532 5526 890424   		movl	%eax, (%esp)
 7533 5529 E8000000 		call	_wcslen
 7533      00
 7534 552e 898588DF 		movl	%eax, -8312(%ebp)
 7534      FFFF
4121:str_merge.c   ****                         wcString = NULL;
 7536              	LM916:
 7537 5534 C78580DF 		movl	$0, -8320(%ebp)
 7537      FFFF0000 
 7537      0000
4122:str_merge.c   ****                         nTotalLen += ((nStringLen + 1) * 2);
 7539              	LM917:
 7540 553e 8B8588DF 		movl	-8312(%ebp), %eax
 7540      FFFF
 7541 5544 01C0     		addl	%eax, %eax
 7542 5546 03858CDF 		addl	-8308(%ebp), %eax
 7542      FFFF
 7543 554c 83C002   		addl	$2, %eax
 7544 554f 89858CDF 		movl	%eax, -8308(%ebp)
 7544      FFFF
 7546              	LM918:
 7547              	L444:
 7548 5555 8D8584DF 		leal	-8316(%ebp), %eax
 7548      FFFF
 7549 555b FF00     		incl	(%eax)
 7550 555d E93AFFFF 		jmp	L442
 7550      FF
 7551              	L441:
4123:str_merge.c   ****                     }
4124:str_merge.c   ****                 }
4125:str_merge.c   ****             }
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 213


4126:str_merge.c   **** 
4127:str_merge.c   ****             if (nTotalLen/2 > 0xFFFF)
 7553              	LM919:
 7554 5562 8B858CDF 		movl	-8308(%ebp), %eax
 7554      FFFF
 7555 5568 D1E8     		shrl	%eax
 7556 556a 3DFFFF00 		cmpl	$65535, %eax
 7556      00
 7557 556f 7616     		jbe	L432
4128:str_merge.c   ****             {
4129:str_merge.c   ****                 is16bit[i] = MMI_FALSE;
 7559              	LM920:
 7560 5571 8B45E4   		movl	-28(%ebp), %eax
 7561 5574 8D148500 		leal	0(,%eax,4), %edx
 7561      000000
 7562 557b A1C80000 		movl	_is16bit, %eax
 7562      00
 7563 5580 C7041000 		movl	$0, (%eax,%edx)
 7563      000000
 7565              	LM921:
 7566              	L432:
 7567 5587 8D45DC   		leal	-36(%ebp), %eax
 7568              	LBE49:
 7569 558a FF00     		incl	(%eax)
 7570 558c E9C3FDFF 		jmp	L430
 7570      FF
 7571              	L431:
4130:str_merge.c   ****             }
4131:str_merge.c   **** #else /* __MMI_RESOURCE_ENFB_SUPPORT__ */
4132:str_merge.c   ****             for (iterator = 0; iterator < strres[i].StrRef[str_res_id]; iterator++)
4133:str_merge.c   ****             {
4134:str_merge.c   ****                 nStringLen = 0;
4135:str_merge.c   ****                 nStringLen = wcslen(strres[i].Str[iterator]);
4136:str_merge.c   ****                 wcString = NULL;
4137:str_merge.c   ****                 nTotalLen += ((nStringLen + 1) * 2);
4138:str_merge.c   ****             }
4139:str_merge.c   **** #endif /* __MMI_RESOURCE_ENFB_SUPPORT__ */
4140:str_merge.c   **** 
4141:str_merge.c   ****         }
4142:str_merge.c   **** 
4143:str_merge.c   ****         /* output language structure title */
4144:str_merge.c   ****         fprintf(fout_res, "__align(4) const CUSTOM_STRING StrRes_%d[] = {\n", old_i + 1);
 7573              	LM922:
 7574 5591 8B8590DF 		movl	-8304(%ebp), %eax
 7574      FFFF
 7575 5597 40       		incl	%eax
 7576 5598 89442408 		movl	%eax, 8(%esp)
 7577 559c C7442404 		movl	$LC97, 4(%esp)
 7577      E0480000 
 7578 55a4 8B45F4   		movl	-12(%ebp), %eax
 7579 55a7 890424   		movl	%eax, (%esp)
 7580 55aa E8000000 		call	_fprintf
 7580      00
4145:str_merge.c   ****         fprintf(fout_meta_res,  "########################################################\n");
 7582              	LM923:
 7583 55af C7442404 		movl	$LC84, 4(%esp)
 7583      A0460000 
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 214


 7584 55b7 8B45EC   		movl	-20(%ebp), %eax
 7585 55ba 890424   		movl	%eax, (%esp)
 7586 55bd E8000000 		call	_fprintf
 7586      00
4146:str_merge.c   ****         fprintf(fout_meta_res,  "TYPE: RES\n");
 7588              	LM924:
 7589 55c2 C7442404 		movl	$LC85, 4(%esp)
 7589      DA460000 
 7590 55ca 8B45EC   		movl	-20(%ebp), %eax
 7591 55cd 890424   		movl	%eax, (%esp)
 7592 55d0 E8000000 		call	_fprintf
 7592      00
4147:str_merge.c   ****         fprintf(fout_meta_res,  "LANG: %d\n", old_i + 1);
 7594              	LM925:
 7595 55d5 8B8590DF 		movl	-8304(%ebp), %eax
 7595      FFFF
 7596 55db 40       		incl	%eax
 7597 55dc 89442408 		movl	%eax, 8(%esp)
 7598 55e0 C7442404 		movl	$LC98, 4(%esp)
 7598      10490000 
 7599 55e8 8B45EC   		movl	-20(%ebp), %eax
 7600 55eb 890424   		movl	%eax, (%esp)
 7601 55ee E8000000 		call	_fprintf
 7601      00
4148:str_merge.c   ****         fprintf(fout_meta_res,  "MAXNUM: %d\n",strres[old_i].MaxNum);
 7603              	LM926:
 7604 55f3 8B9590DF 		movl	-8304(%ebp), %edx
 7604      FFFF
 7605 55f9 89D0     		movl	%edx, %eax
 7606 55fb 01C0     		addl	%eax, %eax
 7607 55fd 01D0     		addl	%edx, %eax
 7608 55ff 8D14C500 		leal	0(,%eax,8), %edx
 7608      000000
 7609 5606 8B45BC   		movl	-68(%ebp), %eax
 7610 5609 8B44100C 		movl	12(%eax,%edx), %eax
 7611 560d 89442408 		movl	%eax, 8(%esp)
 7612 5611 C7442404 		movl	$LC87, 4(%esp)
 7612      F0460000 
 7613 5619 8B45EC   		movl	-20(%ebp), %eax
 7614 561c 890424   		movl	%eax, (%esp)
 7615 561f E8000000 		call	_fprintf
 7615      00
4149:str_merge.c   ****         fprintf(fout_meta_res,  "MAXID: %d\n", strres[old_i].MaxID);
 7617              	LM927:
 7618 5624 8B9590DF 		movl	-8304(%ebp), %edx
 7618      FFFF
 7619 562a 89D0     		movl	%edx, %eax
 7620 562c 01C0     		addl	%eax, %eax
 7621 562e 01D0     		addl	%edx, %eax
 7622 5630 8D14C500 		leal	0(,%eax,8), %edx
 7622      000000
 7623 5637 8B45BC   		movl	-68(%ebp), %eax
 7624 563a 8B441008 		movl	8(%eax,%edx), %eax
 7625 563e 89442408 		movl	%eax, 8(%esp)
 7626 5642 C7442404 		movl	$LC88, 4(%esp)
 7626      FC460000 
 7627 564a 8B45EC   		movl	-20(%ebp), %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 215


 7628 564d 890424   		movl	%eax, (%esp)
 7629 5650 E8000000 		call	_fprintf
 7629      00
4150:str_merge.c   ****         fprintf(fout_meta_res,  "DATA:\n");
 7631              	LM928:
 7632 5655 C7442404 		movl	$LC99, 4(%esp)
 7632      1A490000 
 7633 565d 8B45EC   		movl	-20(%ebp), %eax
 7634 5660 890424   		movl	%eax, (%esp)
 7635 5663 E8000000 		call	_fprintf
 7635      00
4151:str_merge.c   ****         fprintf(fout_meta_res,  "__align(4) const CUSTOM_STRING StrRes_%d[] = {\n", old_i + 1);
 7637              	LM929:
 7638 5668 8B8590DF 		movl	-8304(%ebp), %eax
 7638      FFFF
 7639 566e 40       		incl	%eax
 7640 566f 89442408 		movl	%eax, 8(%esp)
 7641 5673 C7442404 		movl	$LC97, 4(%esp)
 7641      E0480000 
 7642 567b 8B45EC   		movl	-20(%ebp), %eax
 7643 567e 890424   		movl	%eax, (%esp)
 7644 5681 E8000000 		call	_fprintf
 7644      00
4152:str_merge.c   **** 				
4153:str_merge.c   **** 
4154:str_merge.c   ****         /* output language map meta file*/
4155:str_merge.c   ****         fprintf(fout_meta_map,  "########################################################\n");
 7646              	LM930:
 7647 5686 C7442404 		movl	$LC84, 4(%esp)
 7647      A0460000 
 7648 568e 8B45E8   		movl	-24(%ebp), %eax
 7649 5691 890424   		movl	%eax, (%esp)
 7650 5694 E8000000 		call	_fprintf
 7650      00
4156:str_merge.c   ****         fprintf(fout_meta_map,  "TYPE: MAP\n"); 
 7652              	LM931:
 7653 5699 C7442404 		movl	$LC100, 4(%esp)
 7653      21490000 
 7654 56a1 8B45E8   		movl	-24(%ebp), %eax
 7655 56a4 890424   		movl	%eax, (%esp)
 7656 56a7 E8000000 		call	_fprintf
 7656      00
4157:str_merge.c   **** 		fprintf(fout_meta_map,  "LANG: %d\n", old_i + 1);           
 7658              	LM932:
 7659 56ac 8B8590DF 		movl	-8304(%ebp), %eax
 7659      FFFF
 7660 56b2 40       		incl	%eax
 7661 56b3 89442408 		movl	%eax, 8(%esp)
 7662 56b7 C7442404 		movl	$LC98, 4(%esp)
 7662      10490000 
 7663 56bf 8B45E8   		movl	-24(%ebp), %eax
 7664 56c2 890424   		movl	%eax, (%esp)
 7665 56c5 E8000000 		call	_fprintf
 7665      00
4158:str_merge.c   ****         if (is16bit[i])        
 7667              	LM933:
 7668 56ca 8B45E4   		movl	-28(%ebp), %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 216


 7669 56cd 8D148500 		leal	0(,%eax,4), %edx
 7669      000000
 7670 56d4 A1C80000 		movl	_is16bit, %eax
 7670      00
 7671 56d9 833C1000 		cmpl	$0, (%eax,%edx)
 7672 56dd 7464     		je	L448
4159:str_merge.c   ****         {
4160:str_merge.c   ****             fprintf(fout_map, "__align(4) const CUSTOM_STRING_MAP_16 StrMap_%d[] = {\n", old_i + 1)
 7674              	LM934:
 7675 56df 8B8590DF 		movl	-8304(%ebp), %eax
 7675      FFFF
 7676 56e5 40       		incl	%eax
 7677 56e6 89442408 		movl	%eax, 8(%esp)
 7678 56ea C7442404 		movl	$LC101, 4(%esp)
 7678      40490000 
 7679 56f2 8B45F0   		movl	-16(%ebp), %eax
 7680 56f5 890424   		movl	%eax, (%esp)
 7681 56f8 E8000000 		call	_fprintf
 7681      00
4161:str_merge.c   ****            fprintf(fout_meta_map, "BIT_MODE: 16\n");
 7683              	LM935:
 7684 56fd C7442404 		movl	$LC102, 4(%esp)
 7684      77490000 
 7685 5705 8B45E8   		movl	-24(%ebp), %eax
 7686 5708 890424   		movl	%eax, (%esp)
 7687 570b E8000000 		call	_fprintf
 7687      00
4162:str_merge.c   ****            fprintf(fout_meta_map, "DATA:\n");
 7689              	LM936:
 7690 5710 C7442404 		movl	$LC99, 4(%esp)
 7690      1A490000 
 7691 5718 8B45E8   		movl	-24(%ebp), %eax
 7692 571b 890424   		movl	%eax, (%esp)
 7693 571e E8000000 		call	_fprintf
 7693      00
4163:str_merge.c   ****            fprintf(fout_meta_map, "__align(4) const CUSTOM_STRING_MAP_16 StrMap_%d[] = {\n", old_i 
 7695              	LM937:
 7696 5723 8B8590DF 		movl	-8304(%ebp), %eax
 7696      FFFF
 7697 5729 40       		incl	%eax
 7698 572a 89442408 		movl	%eax, 8(%esp)
 7699 572e C7442404 		movl	$LC101, 4(%esp)
 7699      40490000 
 7700 5736 8B45E8   		movl	-24(%ebp), %eax
 7701 5739 890424   		movl	%eax, (%esp)
 7702 573c E8000000 		call	_fprintf
 7702      00
 7703 5741 EB62     		jmp	L449
 7704              	L448:
4164:str_merge.c   ****            
4165:str_merge.c   ****         }
4166:str_merge.c   ****         else
4167:str_merge.c   ****         {
4168:str_merge.c   ****             fprintf(fout_map, "const CUSTOM_STRING_MAP StrMap_%d[] = {\n", old_i + 1);
 7706              	LM938:
 7707 5743 8B8590DF 		movl	-8304(%ebp), %eax
 7707      FFFF
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 217


 7708 5749 40       		incl	%eax
 7709 574a 89442408 		movl	%eax, 8(%esp)
 7710 574e C7442404 		movl	$LC103, 4(%esp)
 7710      A0490000 
 7711 5756 8B45F0   		movl	-16(%ebp), %eax
 7712 5759 890424   		movl	%eax, (%esp)
 7713 575c E8000000 		call	_fprintf
 7713      00
4169:str_merge.c   ****             fprintf(fout_meta_map, "BIT_MODE: 32\n");			
 7715              	LM939:
 7716 5761 C7442404 		movl	$LC104, 4(%esp)
 7716      C9490000 
 7717 5769 8B45E8   		movl	-24(%ebp), %eax
 7718 576c 890424   		movl	%eax, (%esp)
 7719 576f E8000000 		call	_fprintf
 7719      00
4170:str_merge.c   ****             fprintf(fout_meta_map, "DATA:\n");			
 7721              	LM940:
 7722 5774 C7442404 		movl	$LC99, 4(%esp)
 7722      1A490000 
 7723 577c 8B45E8   		movl	-24(%ebp), %eax
 7724 577f 890424   		movl	%eax, (%esp)
 7725 5782 E8000000 		call	_fprintf
 7725      00
4171:str_merge.c   ****             fprintf(fout_meta_map, "const CUSTOM_STRING_MAP StrMap_%d[] = {\n", old_i + 1);
 7727              	LM941:
 7728 5787 8B8590DF 		movl	-8304(%ebp), %eax
 7728      FFFF
 7729 578d 40       		incl	%eax
 7730 578e 89442408 		movl	%eax, 8(%esp)
 7731 5792 C7442404 		movl	$LC103, 4(%esp)
 7731      A0490000 
 7732 579a 8B45E8   		movl	-24(%ebp), %eax
 7733 579d 890424   		movl	%eax, (%esp)
 7734 57a0 E8000000 		call	_fprintf
 7734      00
 7735              	L449:
4172:str_merge.c   ****         }
4173:str_merge.c   **** 
4174:str_merge.c   ****     #ifdef __MMI_RESOURCE_ENFB_SUPPORT__
4175:str_merge.c   ****         enfb_size = 0;
4176:str_merge.c   ****         enfb_str_mem_size = 0;
4177:str_merge.c   ****     #endif /* __MMI_RESOURCE_ENFB_SUPPORT__ */
4178:str_merge.c   **** 
4179:str_merge.c   ****         /* output string resource header */
4180:str_merge.c   ****     #ifdef __MMI_RESOURCE_ENFB_SUPPORT__
4181:str_merge.c   ****         fputc(0, fout_enfb);
4182:str_merge.c   ****         fputc(0, fout_enfb);
4183:str_merge.c   ****         enfb_size += 2;
4184:str_merge.c   ****     #else /* __MMI_RESOURCE_ENFB_SUPPORT__ */
4185:str_merge.c   ****         fputs("0x00, 0x00,\n", fout_res);
 7737              	LM942:
 7738 57a5 8B45F4   		movl	-12(%ebp), %eax
 7739 57a8 89442404 		movl	%eax, 4(%esp)
 7740 57ac C7042457 		movl	$LC90, (%esp)
 7740      470000
 7741 57b3 E8000000 		call	_fputs
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 218


 7741      00
4186:str_merge.c   ****         fputs("0x00, 0x00,\n", fout_meta_res);
 7743              	LM943:
 7744 57b8 8B45EC   		movl	-20(%ebp), %eax
 7745 57bb 89442404 		movl	%eax, 4(%esp)
 7746 57bf C7042457 		movl	$LC90, (%esp)
 7746      470000
 7747 57c6 E8000000 		call	_fputs
 7747      00
4187:str_merge.c   ****         
4188:str_merge.c   ****     #endif /* __MMI_RESOURCE_ENFB_SUPPORT__ */
4189:str_merge.c   **** 
4190:str_merge.c   ****         /* output CustStrRes.c */
4191:str_merge.c   ****         for (str_res_id = 0; str_res_id < strres[i].MaxNum; str_res_id++)
 7749              	LM944:
 7750 57cb C745DC00 		movl	$0, -36(%ebp)
 7750      000000
 7751              	L450:
 7752 57d2 8B55E4   		movl	-28(%ebp), %edx
 7753 57d5 89D0     		movl	%edx, %eax
 7754 57d7 01C0     		addl	%eax, %eax
 7755 57d9 01D0     		addl	%edx, %eax
 7756 57db 8D0CC500 		leal	0(,%eax,8), %ecx
 7756      000000
 7757 57e2 8B55BC   		movl	-68(%ebp), %edx
 7758 57e5 8B45DC   		movl	-36(%ebp), %eax
 7759 57e8 3B440A0C 		cmpl	12(%edx,%ecx), %eax
 7760 57ec 7C05     		jl	L453
 7761 57ee E9330100 		jmp	L451
 7761      00
 7762              	L453:
4192:str_merge.c   ****         {
4193:str_merge.c   ****             unsigned short nStringLen = 0;
 7764              	LM945:
 7765              	LBB50:
 7766 57f3 66C78596 		movw	$0, -8298(%ebp)
 7766      DFFFFF00 
 7766      00
4194:str_merge.c   **** 
4195:str_merge.c   **** #ifndef __MMI_RESOURCE_ENFB_SUPPORT__            
4196:str_merge.c   ****             /* check if it is a dup str */
4197:str_merge.c   ****             if (strres[i].Str[str_res_id] == NULL) continue;
 7768              	LM946:
 7769 57fc 8B55E4   		movl	-28(%ebp), %edx
 7770 57ff 89D0     		movl	%edx, %eax
 7771 5801 01C0     		addl	%eax, %eax
 7772 5803 01D0     		addl	%edx, %eax
 7773 5805 8D1CC500 		leal	0(,%eax,8), %ebx
 7773      000000
 7774 580c 8B4DBC   		movl	-68(%ebp), %ecx
 7775 580f 8B45DC   		movl	-36(%ebp), %eax
 7776 5812 8D148500 		leal	0(,%eax,4), %edx
 7776      000000
 7777 5819 8B0419   		movl	(%ecx,%ebx), %eax
 7778 581c 833C1000 		cmpl	$0, (%eax,%edx)
 7779 5820 7505     		jne	L454
 7780 5822 E9F50000 		jmp	L452
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 219


 7780      00
 7781              	L454:
4198:str_merge.c   **** #endif /* __MMI_RESOURCE_ENFB_SUPPORT__ */
4199:str_merge.c   ****         #ifndef __UCS2_ENCODING
4200:str_merge.c   ****             fprintf(fout_res, "\"%s\",\n", strres[i].Str[str_res_id]);
4201:str_merge.c   ****             fprintf(fout_meta_res, "\"%s\",\n", strres[i].Str[str_res_id]);
4202:str_merge.c   ****         #else /* __UCS2_ENCODING */
4203:str_merge.c   ****             nStringLen = wcslen(strres[i].Str[str_res_id]);
 7783              	LM947:
 7784 5827 8B55E4   		movl	-28(%ebp), %edx
 7785 582a 89D0     		movl	%edx, %eax
 7786 582c 01C0     		addl	%eax, %eax
 7787 582e 01D0     		addl	%edx, %eax
 7788 5830 8D1CC500 		leal	0(,%eax,8), %ebx
 7788      000000
 7789 5837 8B4DBC   		movl	-68(%ebp), %ecx
 7790 583a 8B45DC   		movl	-36(%ebp), %eax
 7791 583d 8D148500 		leal	0(,%eax,4), %edx
 7791      000000
 7792 5844 8B0419   		movl	(%ecx,%ebx), %eax
 7793 5847 8B0410   		movl	(%eax,%edx), %eax
 7794 584a 890424   		movl	%eax, (%esp)
 7795 584d E8000000 		call	_wcslen
 7795      00
 7796 5852 66898596 		movw	%ax, -8298(%ebp)
 7796      DFFFFF
4204:str_merge.c   **** 
4205:str_merge.c   ****             for (z = 0; z < nStringLen * 2; ++z)
 7798              	LM948:
 7799 5859 66C745DA 		movw	$0, -38(%ebp)
 7799      0000
 7800              	L455:
 7801 585f 0FB755DA 		movzwl	-38(%ebp), %edx
 7802 5863 0FB78596 		movzwl	-8298(%ebp), %eax
 7802      DFFFFF
 7803 586a 01C0     		addl	%eax, %eax
 7804 586c 39C2     		cmpl	%eax, %edx
 7805 586e 7C05     		jl	L458
 7806 5870 E9810000 		jmp	L456
 7806      00
 7807              	L458:
4206:str_merge.c   ****             {
4207:str_merge.c   ****                 unsigned char *abc = (unsigned char*)strres[i].Str[str_res_id];
 7809              	LM949:
 7810              	LBB51:
 7811 5875 8B55E4   		movl	-28(%ebp), %edx
 7812 5878 89D0     		movl	%edx, %eax
 7813 587a 01C0     		addl	%eax, %eax
 7814 587c 01D0     		addl	%edx, %eax
 7815 587e 8D1CC500 		leal	0(,%eax,8), %ebx
 7815      000000
 7816 5885 8B4DBC   		movl	-68(%ebp), %ecx
 7817 5888 8B45DC   		movl	-36(%ebp), %eax
 7818 588b 8D148500 		leal	0(,%eax,4), %edx
 7818      000000
 7819 5892 8B0419   		movl	(%ecx,%ebx), %eax
 7820 5895 8B0410   		movl	(%eax,%edx), %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 220


 7821 5898 898580DF 		movl	%eax, -8320(%ebp)
 7821      FFFF
4208:str_merge.c   **** 
4209:str_merge.c   ****             #ifdef __MMI_RESOURCE_ENFB_SUPPORT__
4210:str_merge.c   ****                 fputc(abc[z], fout_enfb);
4211:str_merge.c   ****                 enfb_size++;
4212:str_merge.c   ****             #else /* __MMI_RESOURCE_ENFB_SUPPORT__ */
4213:str_merge.c   ****                 fprintf(fout_res, "0x%X, ", abc[z]);
 7823              	LM950:
 7824 589e 0FB755DA 		movzwl	-38(%ebp), %edx
 7825 58a2 8B8580DF 		movl	-8320(%ebp), %eax
 7825      FFFF
 7826 58a8 0FB60402 		movzbl	(%edx,%eax), %eax
 7827 58ac 89442408 		movl	%eax, 8(%esp)
 7828 58b0 C7442404 		movl	$LC91, 4(%esp)
 7828      64470000 
 7829 58b8 8B45F4   		movl	-12(%ebp), %eax
 7830 58bb 890424   		movl	%eax, (%esp)
 7831 58be E8000000 		call	_fprintf
 7831      00
4214:str_merge.c   ****                 fprintf(fout_meta_res, "0x%X, ", abc[z]);                
 7833              	LM951:
 7834 58c3 0FB755DA 		movzwl	-38(%ebp), %edx
 7835 58c7 8B8580DF 		movl	-8320(%ebp), %eax
 7835      FFFF
 7836 58cd 0FB60402 		movzbl	(%edx,%eax), %eax
 7837 58d1 89442408 		movl	%eax, 8(%esp)
 7838 58d5 C7442404 		movl	$LC91, 4(%esp)
 7838      64470000 
 7839 58dd 8B45EC   		movl	-20(%ebp), %eax
 7840 58e0 890424   		movl	%eax, (%esp)
 7841 58e3 E8000000 		call	_fprintf
 7841      00
 7843              	LM952:
 7844              	LBE51:
 7845 58e8 0FB745DA 		movzwl	-38(%ebp), %eax
 7846 58ec 40       		incl	%eax
 7847 58ed 668945DA 		movw	%ax, -38(%ebp)
 7848 58f1 E969FFFF 		jmp	L455
 7848      FF
 7849              	L456:
4215:str_merge.c   ****             #endif /* __MMI_RESOURCE_ENFB_SUPPORT__ */
4216:str_merge.c   ****             }
4217:str_merge.c   **** 
4218:str_merge.c   ****         #ifdef __MMI_RESOURCE_ENFB_SUPPORT__
4219:str_merge.c   ****             fputc(0, fout_enfb);
4220:str_merge.c   ****             fputc(0, fout_enfb);
4221:str_merge.c   ****             enfb_size += 2;
4222:str_merge.c   ****         #else /* __MMI_RESOURCE_ENFB_SUPPORT__ */
4223:str_merge.c   ****             fputs("0x00, 0x00,\n", fout_res);
 7851              	LM953:
 7852 58f6 8B45F4   		movl	-12(%ebp), %eax
 7853 58f9 89442404 		movl	%eax, 4(%esp)
 7854 58fd C7042457 		movl	$LC90, (%esp)
 7854      470000
 7855 5904 E8000000 		call	_fputs
 7855      00
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 221


4224:str_merge.c   ****             fputs("0x00, 0x00,\n", fout_meta_res);
 7857              	LM954:
 7858 5909 8B45EC   		movl	-20(%ebp), %eax
 7859 590c 89442404 		movl	%eax, 4(%esp)
 7860 5910 C7042457 		movl	$LC90, (%esp)
 7860      470000
 7861 5917 E8000000 		call	_fputs
 7861      00
 7863              	LM955:
 7864              	L452:
 7865 591c 8D45DC   		leal	-36(%ebp), %eax
 7866              	LBE50:
 7867 591f FF00     		incl	(%eax)
 7868 5921 E9ACFEFF 		jmp	L450
 7868      FF
 7869              	L451:
4225:str_merge.c   ****         #endif /* __MMI_RESOURCE_ENFB_SUPPORT__ */
4226:str_merge.c   ****     #endif /* __UCS2_ENCODING */
4227:str_merge.c   ****         }
4228:str_merge.c   **** 
4229:str_merge.c   ****         /* output ENFB string resource header */
4230:str_merge.c   ****     #ifdef __MMI_RESOURCE_ENFB_SUPPORT__
4231:str_merge.c   ****         fprintf(fout_res,
4232:str_merge.c   ****                 "\t0x%02X, 0x%02X, 0x%02X, 0x%02X, 0x%02X, 0x%02X, 0x%02X, 0x%02X, 0x%02X, 0x%02X, 
4233:str_merge.c   ****                 (U8)255,    /* type */
4234:str_merge.c   ****                 (U8)0,      /* reserved */
4235:str_merge.c   ****                 (U8)0,      /* reserved */
4236:str_merge.c   ****                 (U8)0,      /* reserved */
4237:str_merge.c   ****                 (U8)(enfb_offset & 0xFF),
4238:str_merge.c   ****                 (U8)((enfb_offset >> 8) & 0xFF),
4239:str_merge.c   ****                 (U8)((enfb_offset >> 16) & 0xFF),
4240:str_merge.c   ****                 (U8)((enfb_offset >> 24) & 0xFF),
4241:str_merge.c   ****                 (U8)(enfb_size & 0xFF),
4242:str_merge.c   ****                 (U8)((enfb_size >> 8) & 0xFF),
4243:str_merge.c   ****                 (U8)((enfb_size >> 16) & 0xFF),
4244:str_merge.c   ****                 (U8)((enfb_size >> 24) & 0xFF));
4245:str_merge.c   ****         enfb_offset += enfb_size;
4246:str_merge.c   ****         enfb_str_mem_size += enfb_size;
4247:str_merge.c   ****     #endif /* __MMI_RESOURCE_ENFB_SUPPORT__ */
4248:str_merge.c   **** 
4249:str_merge.c   ****     #ifdef __MMI_RESOURCE_ENFB_SUPPORT__
4250:str_merge.c   ****         enfb_size = 0;
4251:str_merge.c   ****     #endif /* __MMI_RESOURCE_ENFB_SUPPORT__ */
4252:str_merge.c   **** 
4253:str_merge.c   ****         /* output CustStrMap.c */
4254:str_merge.c   ****         for (str_res_id = 0; str_res_id < strres[i].MaxID; str_res_id++)
 7871              	LM956:
 7872 5926 C745DC00 		movl	$0, -36(%ebp)
 7872      000000
 7873              	L459:
 7874 592d 8B55E4   		movl	-28(%ebp), %edx
 7875 5930 89D0     		movl	%edx, %eax
 7876 5932 01C0     		addl	%eax, %eax
 7877 5934 01D0     		addl	%edx, %eax
 7878 5936 8D0CC500 		leal	0(,%eax,8), %ecx
 7878      000000
 7879 593d 8B55BC   		movl	-68(%ebp), %edx
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 222


 7880 5940 8B45DC   		movl	-36(%ebp), %eax
 7881 5943 3B440A08 		cmpl	8(%edx,%ecx), %eax
 7882 5947 7C05     		jl	L462
 7883 5949 E9710200 		jmp	L460
 7883      00
 7884              	L462:
4255:str_merge.c   ****         {
4256:str_merge.c   ****             unsigned int nStringLen = 0;
 7886              	LM957:
 7887              	LBB52:
 7888 594e C78580DF 		movl	$0, -8320(%ebp)
 7888      FFFF0000 
 7888      0000
4257:str_merge.c   ****             int iterator = 0;
 7890              	LM958:
 7891 5958 C78584DF 		movl	$0, -8316(%ebp)
 7891      FFFF0000 
 7891      0000
4258:str_merge.c   ****             wchar_t *wcString;
4259:str_merge.c   **** 
4260:str_merge.c   ****             if (strres[i].StrRef[str_res_id] == -1)
 7893              	LM959:
 7894 5962 8B55E4   		movl	-28(%ebp), %edx
 7895 5965 89D0     		movl	%edx, %eax
 7896 5967 01C0     		addl	%eax, %eax
 7897 5969 01D0     		addl	%edx, %eax
 7898 596b 8D1CC500 		leal	0(,%eax,8), %ebx
 7898      000000
 7899 5972 8B4DBC   		movl	-68(%ebp), %ecx
 7900 5975 8B45DC   		movl	-36(%ebp), %eax
 7901 5978 8D148500 		leal	0(,%eax,4), %edx
 7901      000000
 7902 597f 8B441904 		movl	4(%ecx,%ebx), %eax
 7903 5983 833C10FF 		cmpl	$-1, (%eax,%edx)
 7904 5987 750C     		jne	L463
4261:str_merge.c   ****             {
4262:str_merge.c   ****                 nTotalLen = 0;
 7906              	LM960:
 7907 5989 C7858CDF 		movl	$0, -8308(%ebp)
 7907      FFFF0000 
 7907      0000
 7908 5993 EB0A     		jmp	L464
 7909              	L463:
4263:str_merge.c   ****             }
4264:str_merge.c   ****             else
4265:str_merge.c   ****             {
4266:str_merge.c   ****                 nTotalLen = 2;
 7911              	LM961:
 7912 5995 C7858CDF 		movl	$2, -8308(%ebp)
 7912      FFFF0200 
 7912      0000
 7913              	L464:
4267:str_merge.c   ****             }
4268:str_merge.c   **** #ifndef __MMI_RESOURCE_ENFB_SUPPORT__
4269:str_merge.c   ****             /* check if it is duplicated */ 
4270:str_merge.c   ****             if (strres[i].is_dup[str_res_id])
 7915              	LM962:
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 223


 7916 599f 8B55E4   		movl	-28(%ebp), %edx
 7917 59a2 89D0     		movl	%edx, %eax
 7918 59a4 01C0     		addl	%eax, %eax
 7919 59a6 01D0     		addl	%edx, %eax
 7920 59a8 8D0CC500 		leal	0(,%eax,8), %ecx
 7920      000000
 7921 59af 8B55BC   		movl	-68(%ebp), %edx
 7922 59b2 8B45DC   		movl	-36(%ebp), %eax
 7923 59b5 03440A10 		addl	16(%edx,%ecx), %eax
 7924 59b9 803800   		cmpb	$0, (%eax)
 7925 59bc 0F84A900 		je	L465
 7925      0000
4271:str_merge.c   ****             {
4272:str_merge.c   ****                 for (iterator = 0; iterator < strres[i].StrRef[str_res_id]; iterator++)
 7927              	LM963:
 7928 59c2 C78584DF 		movl	$0, -8316(%ebp)
 7928      FFFF0000 
 7928      0000
 7929              	L466:
 7930 59cc 8B55E4   		movl	-28(%ebp), %edx
 7931 59cf 89D0     		movl	%edx, %eax
 7932 59d1 01C0     		addl	%eax, %eax
 7933 59d3 01D0     		addl	%edx, %eax
 7934 59d5 8D1CC500 		leal	0(,%eax,8), %ebx
 7934      000000
 7935 59dc 8B55BC   		movl	-68(%ebp), %edx
 7936 59df 8B45DC   		movl	-36(%ebp), %eax
 7937 59e2 8D0C8500 		leal	0(,%eax,4), %ecx
 7937      000000
 7938 59e9 8B541A04 		movl	4(%edx,%ebx), %edx
 7939 59ed 8B8584DF 		movl	-8316(%ebp), %eax
 7939      FFFF
 7940 59f3 3B040A   		cmpl	(%edx,%ecx), %eax
 7941 59f6 7C02     		jl	L469
 7942 59f8 EB5E     		jmp	L467
 7943              	L469:
4273:str_merge.c   ****                 {
4274:str_merge.c   ****                     nStringLen = 0;
 7945              	LM964:
 7946 59fa C78580DF 		movl	$0, -8320(%ebp)
 7946      FFFF0000 
 7946      0000
4275:str_merge.c   ****                     nStringLen = wcslen(strres_dup->Str[iterator]);
 7948              	LM965:
 7949 5a04 8B8DA0DF 		movl	-8288(%ebp), %ecx
 7949      FFFF
 7950 5a0a 8B8584DF 		movl	-8316(%ebp), %eax
 7950      FFFF
 7951 5a10 8D148500 		leal	0(,%eax,4), %edx
 7951      000000
 7952 5a17 8B01     		movl	(%ecx), %eax
 7953 5a19 8B0410   		movl	(%eax,%edx), %eax
 7954 5a1c 890424   		movl	%eax, (%esp)
 7955 5a1f E8000000 		call	_wcslen
 7955      00
 7956 5a24 898580DF 		movl	%eax, -8320(%ebp)
 7956      FFFF
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 224


4276:str_merge.c   ****                     wcString = NULL;
 7958              	LM966:
 7959 5a2a C78588DF 		movl	$0, -8312(%ebp)
 7959      FFFF0000 
 7959      0000
4277:str_merge.c   ****                     nTotalLen += ((nStringLen + 1) * 2);
 7961              	LM967:
 7962 5a34 8B8580DF 		movl	-8320(%ebp), %eax
 7962      FFFF
 7963 5a3a 01C0     		addl	%eax, %eax
 7964 5a3c 03858CDF 		addl	-8308(%ebp), %eax
 7964      FFFF
 7965 5a42 83C002   		addl	$2, %eax
 7966 5a45 89858CDF 		movl	%eax, -8308(%ebp)
 7966      FFFF
 7968              	LM968:
 7969 5a4b 8D8584DF 		leal	-8316(%ebp), %eax
 7969      FFFF
 7970 5a51 FF00     		incl	(%eax)
 7971 5a53 E974FFFF 		jmp	L466
 7971      FF
 7972              	L467:
4278:str_merge.c   ****                 }
4279:str_merge.c   ****                 /* add max_total_len offset to nTotalLen */
4280:str_merge.c   ****                 nTotalLen += max_total_len;
 7974              	LM969:
 7975 5a58 8B959CDF 		movl	-8292(%ebp), %edx
 7975      FFFF
 7976 5a5e 8D858CDF 		leal	-8308(%ebp), %eax
 7976      FFFF
 7977 5a64 0110     		addl	%edx, (%eax)
 7978 5a66 E9D00000 		jmp	L470
 7978      00
 7979              	L465:
4281:str_merge.c   ****             }
4282:str_merge.c   ****             else
4283:str_merge.c   ****             {
4284:str_merge.c   ****                 for (iterator = 0; iterator < strres[i].StrRef[str_res_id]; iterator++)
 7981              	LM970:
 7982 5a6b C78584DF 		movl	$0, -8316(%ebp)
 7982      FFFF0000 
 7982      0000
 7983              	L471:
 7984 5a75 8B55E4   		movl	-28(%ebp), %edx
 7985 5a78 89D0     		movl	%edx, %eax
 7986 5a7a 01C0     		addl	%eax, %eax
 7987 5a7c 01D0     		addl	%edx, %eax
 7988 5a7e 8D1CC500 		leal	0(,%eax,8), %ebx
 7988      000000
 7989 5a85 8B55BC   		movl	-68(%ebp), %edx
 7990 5a88 8B45DC   		movl	-36(%ebp), %eax
 7991 5a8b 8D0C8500 		leal	0(,%eax,4), %ecx
 7991      000000
 7992 5a92 8B541A04 		movl	4(%edx,%ebx), %edx
 7993 5a96 8B8584DF 		movl	-8316(%ebp), %eax
 7993      FFFF
 7994 5a9c 3B040A   		cmpl	(%edx,%ecx), %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 225


 7995 5a9f 7C05     		jl	L474
 7996 5aa1 E9950000 		jmp	L470
 7996      00
 7997              	L474:
4285:str_merge.c   ****                 {
4286:str_merge.c   ****                     /* ignore dup str */
4287:str_merge.c   ****                     if (strres[i].Str[iterator])
 7999              	LM971:
 8000 5aa6 8B55E4   		movl	-28(%ebp), %edx
 8001 5aa9 89D0     		movl	%edx, %eax
 8002 5aab 01C0     		addl	%eax, %eax
 8003 5aad 01D0     		addl	%edx, %eax
 8004 5aaf 8D1CC500 		leal	0(,%eax,8), %ebx
 8004      000000
 8005 5ab6 8B4DBC   		movl	-68(%ebp), %ecx
 8006 5ab9 8B8584DF 		movl	-8316(%ebp), %eax
 8006      FFFF
 8007 5abf 8D148500 		leal	0(,%eax,4), %edx
 8007      000000
 8008 5ac6 8B0419   		movl	(%ecx,%ebx), %eax
 8009 5ac9 833C1000 		cmpl	$0, (%eax,%edx)
 8010 5acd 745F     		je	L473
4288:str_merge.c   ****                     {
4289:str_merge.c   ****                     nStringLen = 0;
 8012              	LM972:
 8013 5acf C78580DF 		movl	$0, -8320(%ebp)
 8013      FFFF0000 
 8013      0000
4290:str_merge.c   ****                     nStringLen = wcslen(strres[i].Str[iterator]);
 8015              	LM973:
 8016 5ad9 8B55E4   		movl	-28(%ebp), %edx
 8017 5adc 89D0     		movl	%edx, %eax
 8018 5ade 01C0     		addl	%eax, %eax
 8019 5ae0 01D0     		addl	%edx, %eax
 8020 5ae2 8D1CC500 		leal	0(,%eax,8), %ebx
 8020      000000
 8021 5ae9 8B4DBC   		movl	-68(%ebp), %ecx
 8022 5aec 8B8584DF 		movl	-8316(%ebp), %eax
 8022      FFFF
 8023 5af2 8D148500 		leal	0(,%eax,4), %edx
 8023      000000
 8024 5af9 8B0419   		movl	(%ecx,%ebx), %eax
 8025 5afc 8B0410   		movl	(%eax,%edx), %eax
 8026 5aff 890424   		movl	%eax, (%esp)
 8027 5b02 E8000000 		call	_wcslen
 8027      00
 8028 5b07 898580DF 		movl	%eax, -8320(%ebp)
 8028      FFFF
4291:str_merge.c   ****                     wcString = NULL;
 8030              	LM974:
 8031 5b0d C78588DF 		movl	$0, -8312(%ebp)
 8031      FFFF0000 
 8031      0000
4292:str_merge.c   ****                     nTotalLen += ((nStringLen + 1) * 2);
 8033              	LM975:
 8034 5b17 8B8580DF 		movl	-8320(%ebp), %eax
 8034      FFFF
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 226


 8035 5b1d 01C0     		addl	%eax, %eax
 8036 5b1f 03858CDF 		addl	-8308(%ebp), %eax
 8036      FFFF
 8037 5b25 83C002   		addl	$2, %eax
 8038 5b28 89858CDF 		movl	%eax, -8308(%ebp)
 8038      FFFF
 8040              	LM976:
 8041              	L473:
 8042 5b2e 8D8584DF 		leal	-8316(%ebp), %eax
 8042      FFFF
 8043 5b34 FF00     		incl	(%eax)
 8044 5b36 E93AFFFF 		jmp	L471
 8044      FF
 8045              	L470:
4293:str_merge.c   ****                     }
4294:str_merge.c   ****                 }
4295:str_merge.c   ****             }
4296:str_merge.c   **** #else /* __MMI_RESOURCE_ENFB_SUPPORT__ */
4297:str_merge.c   **** 
4298:str_merge.c   ****             for (iterator = 0; iterator < strres[i].StrRef[str_res_id]; iterator++)
4299:str_merge.c   ****             {
4300:str_merge.c   ****                 nStringLen = 0;
4301:str_merge.c   ****                 nStringLen = wcslen(strres[i].Str[iterator]);
4302:str_merge.c   ****                 wcString = NULL;
4303:str_merge.c   ****                 nTotalLen += ((nStringLen + 1) * 2);
4304:str_merge.c   ****             }
4305:str_merge.c   **** #endif /* __MMI_RESOURCE_ENFB_SUPPORT__ */
4306:str_merge.c   ****         StrSize[StrID[str_res_id]] += ((nStringLen + 1) * 2);
 8047              	LM977:
 8048 5b3b 8B45DC   		movl	-36(%ebp), %eax
 8049 5b3e 8D1400   		leal	(%eax,%eax), %edx
 8050 5b41 A1180000 		movl	_StrID, %eax
 8050      00
 8051 5b46 0FB70C10 		movzwl	(%eax,%edx), %ecx
 8052 5b4a 8B45DC   		movl	-36(%ebp), %eax
 8053 5b4d 8D1400   		leal	(%eax,%eax), %edx
 8054 5b50 A1180000 		movl	_StrID, %eax
 8054      00
 8055 5b55 0FB71410 		movzwl	(%eax,%edx), %edx
 8056 5b59 8B8580DF 		movl	-8320(%ebp), %eax
 8056      FFFF
 8057 5b5f 01C0     		addl	%eax, %eax
 8058 5b61 0FB79412 		movzwl	_StrSize(%edx,%edx), %edx
 8058      D8000200 
 8059 5b69 8D0410   		leal	(%eax,%edx), %eax
 8060 5b6c 83C002   		addl	$2, %eax
 8061 5b6f 66898409 		movw	%ax, _StrSize(%ecx,%ecx)
 8061      D8000200 
4307:str_merge.c   **** 
4308:str_merge.c   ****         #ifdef __MMI_RESOURCE_ENFB_SUPPORT__
4309:str_merge.c   ****             fputc(((nTotalLen / 2) & 0xFF), fout_enfb);
4310:str_merge.c   ****             fputc((((nTotalLen / 2) >> 8) & 0xFF), fout_enfb);
4311:str_merge.c   ****             fputc((((nTotalLen / 2) >> 16) & 0xFF), fout_enfb);
4312:str_merge.c   ****             fputc((((nTotalLen / 2) >> 24) & 0xFF), fout_enfb);
4313:str_merge.c   ****             enfb_size += 4;
4314:str_merge.c   ****         #else /* __MMI_RESOURCE_ENFB_SUPPORT__ */
4315:str_merge.c   ****             fprintf(fout_map, "\t%ld,\n", nTotalLen / 2);
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 227


 8063              	LM978:
 8064 5b77 8B858CDF 		movl	-8308(%ebp), %eax
 8064      FFFF
 8065 5b7d D1E8     		shrl	%eax
 8066 5b7f 89442408 		movl	%eax, 8(%esp)
 8067 5b83 C7442404 		movl	$LC105, 4(%esp)
 8067      D7490000 
 8068 5b8b 8B45F0   		movl	-16(%ebp), %eax
 8069 5b8e 890424   		movl	%eax, (%esp)
 8070 5b91 E8000000 		call	_fprintf
 8070      00
4316:str_merge.c   ****             fprintf(fout_meta_map, "\t%ld,\n", nTotalLen / 2);
 8072              	LM979:
 8073 5b96 8B858CDF 		movl	-8308(%ebp), %eax
 8073      FFFF
 8074 5b9c D1E8     		shrl	%eax
 8075 5b9e 89442408 		movl	%eax, 8(%esp)
 8076 5ba2 C7442404 		movl	$LC105, 4(%esp)
 8076      D7490000 
 8077 5baa 8B45E8   		movl	-24(%ebp), %eax
 8078 5bad 890424   		movl	%eax, (%esp)
 8079 5bb0 E8000000 		call	_fprintf
 8079      00
 8081              	LM980:
 8082 5bb5 8D45DC   		leal	-36(%ebp), %eax
 8083              	LBE52:
 8084 5bb8 FF00     		incl	(%eax)
 8085 5bba E96EFDFF 		jmp	L459
 8085      FF
 8086              	L460:
4317:str_merge.c   ****         #endif /* __MMI_RESOURCE_ENFB_SUPPORT__ */
4318:str_merge.c   ****         }
4319:str_merge.c   **** 
4320:str_merge.c   ****     #ifdef __MMI_RESOURCE_ENFB_SUPPORT__
4321:str_merge.c   ****         fprintf(fout_map, "\t%d, %d\n", enfb_offset, enfb_size);
4322:str_merge.c   ****         enfb_offset += enfb_size;
4323:str_merge.c   ****         enfb_str_mem_size += enfb_size;
4324:str_merge.c   ****         if (enfb_str_mem_size > enfb_max_mem_size)
4325:str_merge.c   ****         {
4326:str_merge.c   ****             enfb_max_mem_size = enfb_str_mem_size;
4327:str_merge.c   ****         }
4328:str_merge.c   ****     #endif /* __MMI_RESOURCE_ENFB_SUPPORT__ */
4329:str_merge.c   **** 
4330:str_merge.c   ****         fprintf(fout_res, "};\n");
 8088              	LM981:
 8089 5bbf C7442404 		movl	$LC92, 4(%esp)
 8089      6B470000 
 8090 5bc7 8B45F4   		movl	-12(%ebp), %eax
 8091 5bca 890424   		movl	%eax, (%esp)
 8092 5bcd E8000000 		call	_fprintf
 8092      00
4331:str_merge.c   ****         fprintf(fout_meta_res, "};\n");
 8094              	LM982:
 8095 5bd2 C7442404 		movl	$LC92, 4(%esp)
 8095      6B470000 
 8096 5bda 8B45EC   		movl	-20(%ebp), %eax
 8097 5bdd 890424   		movl	%eax, (%esp)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 228


 8098 5be0 E8000000 		call	_fprintf
 8098      00
4332:str_merge.c   ****         fprintf(fout_map, "};\n");
 8100              	LM983:
 8101 5be5 C7442404 		movl	$LC92, 4(%esp)
 8101      6B470000 
 8102 5bed 8B45F0   		movl	-16(%ebp), %eax
 8103 5bf0 890424   		movl	%eax, (%esp)
 8104 5bf3 E8000000 		call	_fprintf
 8104      00
4333:str_merge.c   ****         fprintf(fout_meta_map, "};\n");
 8106              	LM984:
 8107 5bf8 C7442404 		movl	$LC92, 4(%esp)
 8107      6B470000 
 8108 5c00 8B45E8   		movl	-24(%ebp), %eax
 8109 5c03 890424   		movl	%eax, (%esp)
 8110 5c06 E8000000 		call	_fprintf
 8110      00
4334:str_merge.c   ****         
4335:str_merge.c   ****         if (is16bit[i])        
 8112              	LM985:
 8113 5c0b 8B45E4   		movl	-28(%ebp), %eax
 8114 5c0e 8D148500 		leal	0(,%eax,4), %edx
 8114      000000
 8115 5c15 A1C80000 		movl	_is16bit, %eax
 8115      00
 8116 5c1a 833C1000 		cmpl	$0, (%eax,%edx)
 8117 5c1e 7420     		je	L476
4336:str_merge.c   ****         {
4337:str_merge.c   ****         #if !defined(__MMI_RESOURCE_STR_ZLIB_COMPRESS__)
4338:str_merge.c   ****             fprintf(fout_res, "extern const CUSTOM_STRING_MAP_16 StrMap_%d[];\n\n", old_i + 1);
 8119              	LM986:
 8120 5c20 8B8590DF 		movl	-8304(%ebp), %eax
 8120      FFFF
 8121 5c26 40       		incl	%eax
 8122 5c27 89442408 		movl	%eax, 8(%esp)
 8123 5c2b C7442404 		movl	$LC106, 4(%esp)
 8123      E0490000 
 8124 5c33 8B45F4   		movl	-12(%ebp), %eax
 8125 5c36 890424   		movl	%eax, (%esp)
 8126 5c39 E8000000 		call	_fprintf
 8126      00
 8127 5c3e EB1E     		jmp	L477
 8128              	L476:
4339:str_merge.c   ****         #else
4340:str_merge.c   ****             fprintf(fout_res, "//extern const CUSTOM_STRING_MAP_16 StrMap_%d[];\n\n", old_i + 1);
4341:str_merge.c   ****         #endif // __MMI_RESOURCE_STR_ZLIB_COMPRESS__
4342:str_merge.c   ****         }
4343:str_merge.c   ****         else
4344:str_merge.c   ****         {
4345:str_merge.c   ****       	#if !defined(__MMI_RESOURCE_STR_ZLIB_COMPRESS__)
4346:str_merge.c   ****             fprintf(fout_res, "extern const CUSTOM_STRING_MAP StrMap_%d[];\n\n", old_i + 1);
 8130              	LM987:
 8131 5c40 8B8590DF 		movl	-8304(%ebp), %eax
 8131      FFFF
 8132 5c46 40       		incl	%eax
 8133 5c47 89442408 		movl	%eax, 8(%esp)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 229


 8134 5c4b C7442404 		movl	$LC107, 4(%esp)
 8134      204A0000 
 8135 5c53 8B45F4   		movl	-12(%ebp), %eax
 8136 5c56 890424   		movl	%eax, (%esp)
 8137 5c59 E8000000 		call	_fprintf
 8137      00
 8138              	L477:
4347:str_merge.c   ****         #else
4348:str_merge.c   ****             fprintf(fout_res, "//extern const CUSTOM_STRING_MAP StrMap_%d[];\n\n", old_i + 1);
4349:str_merge.c   ****         #endif
4350:str_merge.c   ****         }        
4351:str_merge.c   ****         }
4352:str_merge.c   ****         i = old_i;
 8140              	LM988:
 8141 5c5e 8B8590DF 		movl	-8304(%ebp), %eax
 8141      FFFF
 8142 5c64 8945E4   		movl	%eax, -28(%ebp)
 8144              	LM989:
 8145 5c67 8D45E4   		leal	-28(%ebp), %eax
 8146              	LBE47:
 8147 5c6a FF00     		incl	(%eax)
 8148 5c6c E905F6FF 		jmp	L425
 8148      FF
 8149              	L426:
4353:str_merge.c   ****     }
4354:str_merge.c   **** #if defined(__MMI_RESOURCE_STR_ZLIB_COMPRESS__)
4355:str_merge.c   ****     fprintf(fout_res, "//__align(4) CUSTOM_STRING StrRes[%d];\n", max_zip_len);
4356:str_merge.c   **** #endif /* __MMI_RESOURCE_STR_ZLIB_COMPRESS__ */
4357:str_merge.c   **** 
4358:str_merge.c   **** #ifdef __MMI_RESOURCE_ENFB_SUPPORT__
4359:str_merge.c   ****     {   /* output ENFB string resource header for RESMEM */
4360:str_merge.c   ****         FILE *fp = fopen(ENFB_STRING_HEADER_FILENAME, "w");
4361:str_merge.c   **** 
4362:str_merge.c   ****         if (fp == NULL)
4363:str_merge.c   ****         {
4364:str_merge.c   ****             STRMERG_LOG_E("File open error (%s) ...!", ENFB_STRING_HEADER_FILENAME);
4365:str_merge.c   ****             goto GEN_STR_ERR_RET;
4366:str_merge.c   ****         }
4367:str_merge.c   ****         fprintf(fp, "\n#ifdef __MMI_RESOURCE_ENFB_SUPPORT__\n");
4368:str_merge.c   ****         fprintf(fp, "#define MaxENFBStringSize\t%d\n", enfb_max_mem_size);
4369:str_merge.c   ****         fprintf(fp, "#endif /* __MMI_RESOURCE_ENFB_SUPPORT__ */\n\n");
4370:str_merge.c   ****         fclose(fp);
4371:str_merge.c   ****     }
4372:str_merge.c   **** #else /* __MMI_RESOURCE_ENFB_SUPPORT__ */
4373:str_merge.c   ****     /* here we generate strings that not support multi-language */
4374:str_merge.c   ****     if(generate_fixed_str(fout_res, fout_map,fout_meta_res, fout_meta_map, &fixed_id) < 0)
 8151              	LM990:
 8152 5c71 C7442410 		movl	$_fixed_id, 16(%esp)
 8152      00000000 
 8153 5c79 8B45E8   		movl	-24(%ebp), %eax
 8154 5c7c 8944240C 		movl	%eax, 12(%esp)
 8155 5c80 8B45EC   		movl	-20(%ebp), %eax
 8156 5c83 89442408 		movl	%eax, 8(%esp)
 8157 5c87 8B45F0   		movl	-16(%ebp), %eax
 8158 5c8a 89442404 		movl	%eax, 4(%esp)
 8159 5c8e 8B45F4   		movl	-12(%ebp), %eax
 8160 5c91 890424   		movl	%eax, (%esp)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 230


 8161 5c94 E8D71100 		call	_generate_fixed_str
 8161      00
 8162 5c99 85C0     		testl	%eax, %eax
 8163 5c9b 7905     		jns	L478
4375:str_merge.c   ****     {
4376:str_merge.c   ****         goto GEN_STR_ERR_RET;
 8165              	LM991:
 8166 5c9d E9BC0200 		jmp	L404
 8166      00
 8167              	L478:
4377:str_merge.c   ****     }
4378:str_merge.c   ****     
4379:str_merge.c   ****     fprintf(fout_meta_map,"########################################################\n");
 8169              	LM992:
 8170 5ca2 C7442404 		movl	$LC84, 4(%esp)
 8170      A0460000 
 8171 5caa 8B45E8   		movl	-24(%ebp), %eax
 8172 5cad 890424   		movl	%eax, (%esp)
 8173 5cb0 E8000000 		call	_fprintf
 8173      00
4380:str_merge.c   ****     fprintf(fout_meta_map,"TYPE: VALUE\n");
 8175              	LM993:
 8176 5cb5 C7442404 		movl	$LC108, 4(%esp)
 8176      4E4A0000 
 8177 5cbd 8B45E8   		movl	-24(%ebp), %eax
 8178 5cc0 890424   		movl	%eax, (%esp)
 8179 5cc3 E8000000 		call	_fprintf
 8179      00
4381:str_merge.c   ****     fprintf(fout_meta_map,"NAME: mtk_gTrans_string_count\n");
 8181              	LM994:
 8182 5cc8 C7442404 		movl	$LC109, 4(%esp)
 8182      604A0000 
 8183 5cd0 8B45E8   		movl	-24(%ebp), %eax
 8184 5cd3 890424   		movl	%eax, (%esp)
 8185 5cd6 E8000000 		call	_fprintf
 8185      00
4382:str_merge.c   ****     fprintf(fout_meta_map,"VALUE: %d\n", CurrMaxStringId - fixed_id.id_count);
 8187              	LM995:
 8188 5cdb 0FB71500 		movzwl	_CurrMaxStringId, %edx
 8188      000000
 8189 5ce2 0FB70500 		movzwl	_fixed_id, %eax
 8189      000000
 8190 5ce9 29C2     		subl	%eax, %edx
 8191 5ceb 89D0     		movl	%edx, %eax
 8192 5ced 89442408 		movl	%eax, 8(%esp)
 8193 5cf1 C7442404 		movl	$LC110, 4(%esp)
 8193      7F4A0000 
 8194 5cf9 8B45E8   		movl	-24(%ebp), %eax
 8195 5cfc 890424   		movl	%eax, (%esp)
 8196 5cff E8000000 		call	_fprintf
 8196      00
4383:str_merge.c   **** 
4384:str_merge.c   ****     fprintf(fout_meta_map,"########################################################\n");
 8198              	LM996:
 8199 5d04 C7442404 		movl	$LC84, 4(%esp)
 8199      A0460000 
 8200 5d0c 8B45E8   		movl	-24(%ebp), %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 231


 8201 5d0f 890424   		movl	%eax, (%esp)
 8202 5d12 E8000000 		call	_fprintf
 8202      00
4385:str_merge.c   ****     fprintf(fout_meta_map,"TYPE: VALUE\n");
 8204              	LM997:
 8205 5d17 C7442404 		movl	$LC108, 4(%esp)
 8205      4E4A0000 
 8206 5d1f 8B45E8   		movl	-24(%ebp), %eax
 8207 5d22 890424   		movl	%eax, (%esp)
 8208 5d25 E8000000 		call	_fprintf
 8208      00
4386:str_merge.c   ****     fprintf(fout_meta_map,"NAME: mtk_gMaxDeployedLangs\n");
 8210              	LM998:
 8211 5d2a C7442404 		movl	$LC111, 4(%esp)
 8211      8A4A0000 
 8212 5d32 8B45E8   		movl	-24(%ebp), %eax
 8213 5d35 890424   		movl	%eax, (%esp)
 8214 5d38 E8000000 		call	_fprintf
 8214      00
4387:str_merge.c   ****     fprintf(fout_meta_map,"VALUE: %d\n", mtk_gMaxDeployedLangs);
 8216              	LM999:
 8217 5d3d 0FB70500 		movzwl	_mtk_gMaxDeployedLangs, %eax
 8217      000000
 8218 5d44 89442408 		movl	%eax, 8(%esp)
 8219 5d48 C7442404 		movl	$LC110, 4(%esp)
 8219      7F4A0000 
 8220 5d50 8B45E8   		movl	-24(%ebp), %eax
 8221 5d53 890424   		movl	%eax, (%esp)
 8222 5d56 E8000000 		call	_fprintf
 8222      00
4388:str_merge.c   **** 
4389:str_merge.c   **** 
4390:str_merge.c   ****     fprintf(fout_meta_map,"########################################################\n");
 8224              	LM1000:
 8225 5d5b C7442404 		movl	$LC84, 4(%esp)
 8225      A0460000 
 8226 5d63 8B45E8   		movl	-24(%ebp), %eax
 8227 5d66 890424   		movl	%eax, (%esp)
 8228 5d69 E8000000 		call	_fprintf
 8228      00
4391:str_merge.c   ****     fprintf(fout_meta_map,"TYPE: VALUE\n");
 8230              	LM1001:
 8231 5d6e C7442404 		movl	$LC108, 4(%esp)
 8231      4E4A0000 
 8232 5d76 8B45E8   		movl	-24(%ebp), %eax
 8233 5d79 890424   		movl	%eax, (%esp)
 8234 5d7c E8000000 		call	_fprintf
 8234      00
4392:str_merge.c   ****     fprintf(fout_meta_map,"NAME: max_total_len\n");
 8236              	LM1002:
 8237 5d81 C7442404 		movl	$LC112, 4(%esp)
 8237      A74A0000 
 8238 5d89 8B45E8   		movl	-24(%ebp), %eax
 8239 5d8c 890424   		movl	%eax, (%esp)
 8240 5d8f E8000000 		call	_fprintf
 8240      00
4393:str_merge.c   ****     fprintf(fout_meta_map,"VALUE: %d\n", max_total_len);
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 232


 8242              	LM1003:
 8243 5d94 8B859CDF 		movl	-8292(%ebp), %eax
 8243      FFFF
 8244 5d9a 89442408 		movl	%eax, 8(%esp)
 8245 5d9e C7442404 		movl	$LC110, 4(%esp)
 8245      7F4A0000 
 8246 5da6 8B45E8   		movl	-24(%ebp), %eax
 8247 5da9 890424   		movl	%eax, (%esp)
 8248 5dac E8000000 		call	_fprintf
 8248      00
4394:str_merge.c   **** 
4395:str_merge.c   **** 
4396:str_merge.c   **** #ifdef __CAT_SUPPORT__    
4397:str_merge.c   ****     fprintf(fout_map, ResgenCATGetRegionEndStatment());
 8250              	LM1004:
 8251 5db1 E8000000 		call	_ResgenCATGetRegionEndStatment
 8251      00
 8252 5db6 89442404 		movl	%eax, 4(%esp)
 8253 5dba 8B45F0   		movl	-16(%ebp), %eax
 8254 5dbd 890424   		movl	%eax, (%esp)
 8255 5dc0 E8000000 		call	_fprintf
 8255      00
4398:str_merge.c   **** #endif //__CAT_SUPPORT__
4399:str_merge.c   ****     /* record translated string id count for no-translate string */
4400:str_merge.c   ****     fprintf(fout_map, "#ifndef __MMI_RESOURCE_ENFB_SUPPORT__\n\tconst U16 mtk_gTrans_string_count =
 8257              	LM1005:
 8258 5dc5 0FB71500 		movzwl	_CurrMaxStringId, %edx
 8258      000000
 8259 5dcc 0FB70500 		movzwl	_fixed_id, %eax
 8259      000000
 8260 5dd3 29C2     		subl	%eax, %edx
 8261 5dd5 89D0     		movl	%edx, %eax
 8262 5dd7 89442408 		movl	%eax, 8(%esp)
 8263 5ddb C7442404 		movl	$LC113, 4(%esp)
 8263      C04A0000 
 8264 5de3 8B45F0   		movl	-16(%ebp), %eax
 8265 5de6 890424   		movl	%eax, (%esp)
 8266 5de9 E8000000 		call	_fprintf
 8266      00
4401:str_merge.c   **** #endif /* __MMI_RESOURCE_ENFB_SUPPORT__ */
4402:str_merge.c   **** 
4403:str_merge.c   **** #ifdef __CAT_SUPPORT__    
4404:str_merge.c   ****     fprintf(fout_res, ResgenCATGetRegionEndStatment());
 8268              	LM1006:
 8269 5dee E8000000 		call	_ResgenCATGetRegionEndStatment
 8269      00
 8270 5df3 89442404 		movl	%eax, 4(%esp)
 8271 5df7 8B45F4   		movl	-12(%ebp), %eax
 8272 5dfa 890424   		movl	%eax, (%esp)
 8273 5dfd E8000000 		call	_fprintf
 8273      00
4405:str_merge.c   **** #endif //__CAT_SUPPORT__
4406:str_merge.c   **** 
4407:str_merge.c   ****     /* output STRMAP_SEARCH array */
4408:str_merge.c   ****     num_map_search = generate_strmap_search(fout_res, fout_meta_res);
 8275              	LM1007:
 8276 5e02 8B45EC   		movl	-20(%ebp), %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 233


 8277 5e05 89442404 		movl	%eax, 4(%esp)
 8278 5e09 8B45F4   		movl	-12(%ebp), %eax
 8279 5e0c 890424   		movl	%eax, (%esp)
 8280 5e0f E86D0400 		call	_generate_strmap_search
 8280      00
 8281 5e14 8945C8   		movl	%eax, -56(%ebp)
4409:str_merge.c   ****     if(num_map_search <= 0)
 8283              	LM1008:
 8284 5e17 837DC800 		cmpl	$0, -56(%ebp)
 8285 5e1b 7F05     		jg	L479
4410:str_merge.c   ****     {
4411:str_merge.c   ****         goto GEN_STR_ERR_RET;
 8287              	LM1009:
 8288 5e1d E93C0100 		jmp	L404
 8288      00
 8289              	L479:
4412:str_merge.c   ****     }
4413:str_merge.c   **** 
4414:str_merge.c   **** #ifndef __MMI_RESOURCE_ENFB_SUPPORT__
4415:str_merge.c   ****     /* output language list array */
4416:str_merge.c   ****     STRMERG_LOG_V("output language list array (strres, strres_dup, num_map_search) ");
 8291              	LM1010:
 8292 5e22 C7442408 		movl	$LC114, 8(%esp)
 8292      204B0000 
 8293 5e2a C7442404 		movl	$LC3, 4(%esp)
 8293      4B040000 
 8294 5e32 C7042401 		movl	$1, (%esp)
 8294      000000
 8295 5e39 E8000000 		call	_reslog_adaptor_log
 8295      00
4417:str_merge.c   ****     if(!generate_language_list_array(fout_res, strres, strres_dup, num_map_search, max_total_len, r
 8297              	LM1011:
 8298 5e3e 8D85A8DF 		leal	-8280(%ebp), %eax
 8298      FFFF
 8299 5e44 89442420 		movl	%eax, 32(%esp)
 8300 5e48 8D85A8E7 		leal	-6232(%ebp), %eax
 8300      FFFF
 8301 5e4e 8944241C 		movl	%eax, 28(%esp)
 8302 5e52 8D85A8EF 		leal	-4184(%ebp), %eax
 8302      FFFF
 8303 5e58 89442418 		movl	%eax, 24(%esp)
 8304 5e5c 8D85A8F7 		leal	-2136(%ebp), %eax
 8304      FFFF
 8305 5e62 89442414 		movl	%eax, 20(%esp)
 8306 5e66 8B859CDF 		movl	-8292(%ebp), %eax
 8306      FFFF
 8307 5e6c 89442410 		movl	%eax, 16(%esp)
 8308 5e70 8B45C8   		movl	-56(%ebp), %eax
 8309 5e73 8944240C 		movl	%eax, 12(%esp)
 8310 5e77 8B85A0DF 		movl	-8288(%ebp), %eax
 8310      FFFF
 8311 5e7d 89442408 		movl	%eax, 8(%esp)
 8312 5e81 8B45BC   		movl	-68(%ebp), %eax
 8313 5e84 89442404 		movl	%eax, 4(%esp)
 8314 5e88 8B45F4   		movl	-12(%ebp), %eax
 8315 5e8b 890424   		movl	%eax, (%esp)
 8316 5e8e E8630700 		call	_generate_language_list_array
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 234


 8316      00
 8317 5e93 85C0     		testl	%eax, %eax
 8318 5e95 754D     		jne	L480
4418:str_merge.c   ****     {
4419:str_merge.c   ****         STRMERG_LOG_E("Failed to output generate_language_list_array: \
 8320              	LM1012:
 8321 5e97 8D85A8DF 		leal	-8280(%ebp), %eax
 8321      FFFF
 8322 5e9d 8944241C 		movl	%eax, 28(%esp)
 8323 5ea1 8D85A8E7 		leal	-6232(%ebp), %eax
 8323      FFFF
 8324 5ea7 89442418 		movl	%eax, 24(%esp)
 8325 5eab 8D85A8EF 		leal	-4184(%ebp), %eax
 8325      FFFF
 8326 5eb1 89442414 		movl	%eax, 20(%esp)
 8327 5eb5 8B859CDF 		movl	-8292(%ebp), %eax
 8327      FFFF
 8328 5ebb 89442410 		movl	%eax, 16(%esp)
 8329 5ebf 8B45C8   		movl	-56(%ebp), %eax
 8330 5ec2 8944240C 		movl	%eax, 12(%esp)
 8331 5ec6 C7442408 		movl	$LC115, 8(%esp)
 8331      804B0000 
 8332 5ece C7442404 		movl	$LC3, 4(%esp)
 8332      4B040000 
 8333 5ed6 C7042403 		movl	$3, (%esp)
 8333      000000
 8334 5edd E8000000 		call	_reslog_adaptor_log
 8334      00
4420:str_merge.c   ****                 num_map_search = %d, max_total_len = %d, map_size=%lu ,reszip_size = %lu, mapzip_si
4421:str_merge.c   **** 	        num_map_search, max_total_len, map_size, reszip_size,mapzip_size);
4422:str_merge.c   ****         goto GEN_STR_ERR_RET;
 8336              	LM1013:
 8337 5ee2 EB7A     		jmp	L404
 8338              	L480:
4423:str_merge.c   ****     }
4424:str_merge.c   **** #else
4425:str_merge.c   ****     if(!generate_language_list_array(fout_res, strres, num_map_search, res_size, map_size, reszip_s
4426:str_merge.c   ****     {
4427:str_merge.c   ****         STRMERG_LOG_E("Failed to output generate_language_list_array: \
4428:str_merge.c   ****                        num_map_search = %d, map_size=%lu ,reszip_size = %lu, mapzip_size = %lu", \
4429:str_merge.c   ****                        num_map_search, map_size, reszip_size,mapzip_size);
4430:str_merge.c   ****         goto GEN_STR_ERR_RET;
4431:str_merge.c   ****     }
4432:str_merge.c   **** #endif
4433:str_merge.c   **** 
4434:str_merge.c   ****     fprintf(fout_res, "\n#endif //!(__MMI_RESOURCE_STR_LZMA_COMPRESS__) && !(__MMI_RESOURCE_STR_THI
 8340              	LM1014:
 8341 5ee4 C7442404 		movl	$LC116, 4(%esp)
 8341      204C0000 
 8342 5eec 8B45F4   		movl	-12(%ebp), %eax
 8343 5eef 890424   		movl	%eax, (%esp)
 8344 5ef2 E8000000 		call	_fprintf
 8344      00
4435:str_merge.c   ****     fprintf(fout_map, "\n#endif //!(__MMI_RESOURCE_STR_LZMA_COMPRESS__) && !(__MMI_RESOURCE_STR_THI
 8346              	LM1015:
 8347 5ef7 C7442404 		movl	$LC116, 4(%esp)
 8347      204C0000 
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 235


 8348 5eff 8B45F0   		movl	-16(%ebp), %eax
 8349 5f02 890424   		movl	%eax, (%esp)
 8350 5f05 E8000000 		call	_fprintf
 8350      00
4436:str_merge.c   ****     fclose(fout_res);
 8352              	LM1016:
 8353 5f0a 8B45F4   		movl	-12(%ebp), %eax
 8354 5f0d 890424   		movl	%eax, (%esp)
 8355 5f10 E8000000 		call	_fclose
 8355      00
4437:str_merge.c   ****     fclose(fout_meta_res);
 8357              	LM1017:
 8358 5f15 8B45EC   		movl	-20(%ebp), %eax
 8359 5f18 890424   		movl	%eax, (%esp)
 8360 5f1b E8000000 		call	_fclose
 8360      00
4438:str_merge.c   ****     fclose(fout_map);
 8362              	LM1018:
 8363 5f20 8B45F0   		movl	-16(%ebp), %eax
 8364 5f23 890424   		movl	%eax, (%esp)
 8365 5f26 E8000000 		call	_fclose
 8365      00
4439:str_merge.c   ****     fclose(fout_meta_map);
 8367              	LM1019:
 8368 5f2b 8B45E8   		movl	-24(%ebp), %eax
 8369 5f2e 890424   		movl	%eax, (%esp)
 8370 5f31 E8000000 		call	_fclose
 8370      00
4440:str_merge.c   ****     
4441:str_merge.c   **** #ifdef __MMI_RESOURCE_ENFB_SUPPORT__
4442:str_merge.c   ****     fclose(fout_enfb);
4443:str_merge.c   **** #endif
4444:str_merge.c   **** 
4445:str_merge.c   **** 
4446:str_merge.c   **** #if 0  /* Add size to usage for debug */
4447:str_merge.c   **** /* under construction !*/
4448:str_merge.c   **** /* under construction !*/
4449:str_merge.c   **** /* under construction !*/
4450:str_merge.c   **** /* under construction !*/
4451:str_merge.c   **** /* under construction !*/
4452:str_merge.c   **** /* under construction !*/
4453:str_merge.c   **** /* under construction !*/
4454:str_merge.c   **** /* under construction !*/
4455:str_merge.c   **** /* under construction !*/
4456:str_merge.c   **** /* under construction !*/
4457:str_merge.c   **** /* under construction !*/
4458:str_merge.c   **** /* under construction !*/
4459:str_merge.c   **** /* under construction !*/
4460:str_merge.c   **** /* under construction !*/
4461:str_merge.c   **** /* under construction !*/
4462:str_merge.c   **** /* under construction !*/
4463:str_merge.c   **** /* under construction !*/
4464:str_merge.c   **** /* under construction !*/
4465:str_merge.c   **** /* under construction !*/
4466:str_merge.c   **** /* under construction !*/
4467:str_merge.c   **** /* under construction !*/
4468:str_merge.c   **** /* under construction !*/
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 236


4469:str_merge.c   **** /* under construction !*/
4470:str_merge.c   **** /* under construction !*/
4471:str_merge.c   **** /* under construction !*/
4472:str_merge.c   **** /* under construction !*/
4473:str_merge.c   **** /* under construction !*/
4474:str_merge.c   **** /* under construction !*/
4475:str_merge.c   **** /* under construction !*/
4476:str_merge.c   **** /* under construction !*/
4477:str_merge.c   **** /* under construction !*/
4478:str_merge.c   **** /* under construction !*/
4479:str_merge.c   **** /* under construction !*/
4480:str_merge.c   **** /* under construction !*/
4481:str_merge.c   **** /* under construction !*/
4482:str_merge.c   **** /* under construction !*/
4483:str_merge.c   **** /* under construction !*/
4484:str_merge.c   **** /* under construction !*/
4485:str_merge.c   **** /* under construction !*/
4486:str_merge.c   **** /* under construction !*/
4487:str_merge.c   **** /* under construction !*/
4488:str_merge.c   **** /* under construction !*/
4489:str_merge.c   **** /* under construction !*/
4490:str_merge.c   **** /* under construction !*/
4491:str_merge.c   **** /* under construction !*/
4492:str_merge.c   **** /* under construction !*/
4493:str_merge.c   **** /* under construction !*/
4494:str_merge.c   **** #endif
4495:str_merge.c   ****     STRMERG_LOG_V("GenerateStrResFile succeeded");
 8372              	LM1020:
 8373 5f36 C7442408 		movl	$LC117, 8(%esp)
 8373      754C0000 
 8374 5f3e C7442404 		movl	$LC3, 4(%esp)
 8374      4B040000 
 8375 5f46 C7042401 		movl	$1, (%esp)
 8375      000000
 8376 5f4d E8000000 		call	_reslog_adaptor_log
 8376      00
4496:str_merge.c   ****     return 0;
 8378              	LM1021:
 8379 5f52 C7857CDF 		movl	$0, -8324(%ebp)
 8379      FFFF0000 
 8379      0000
 8380 5f5c EB6A     		jmp	L400
 8381              	L404:
4497:str_merge.c   **** 
4498:str_merge.c   **** GEN_STR_ERR_RET:
4499:str_merge.c   ****     STRMERG_LOG_E("GEN_STR_ERR_RET handling");
 8383              	LM1022:
 8384 5f5e C7442408 		movl	$LC118, 8(%esp)
 8384      924C0000 
 8385 5f66 C7442404 		movl	$LC3, 4(%esp)
 8385      4B040000 
 8386 5f6e C7042403 		movl	$3, (%esp)
 8386      000000
 8387 5f75 E8000000 		call	_reslog_adaptor_log
 8387      00
4500:str_merge.c   ****     if (fout_res)fclose(fout_res);
 8389              	LM1023:
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 237


 8390 5f7a 837DF400 		cmpl	$0, -12(%ebp)
 8391 5f7e 740B     		je	L481
 8392 5f80 8B45F4   		movl	-12(%ebp), %eax
 8393 5f83 890424   		movl	%eax, (%esp)
 8394 5f86 E8000000 		call	_fclose
 8394      00
 8395              	L481:
4501:str_merge.c   ****     if (fout_map)fclose(fout_map);
 8397              	LM1024:
 8398 5f8b 837DF000 		cmpl	$0, -16(%ebp)
 8399 5f8f 740B     		je	L482
 8400 5f91 8B45F0   		movl	-16(%ebp), %eax
 8401 5f94 890424   		movl	%eax, (%esp)
 8402 5f97 E8000000 		call	_fclose
 8402      00
 8403              	L482:
4502:str_merge.c   ****     if (fout_meta_res)fclose(fout_map);
 8405              	LM1025:
 8406 5f9c 837DEC00 		cmpl	$0, -20(%ebp)
 8407 5fa0 740B     		je	L483
 8408 5fa2 8B45F0   		movl	-16(%ebp), %eax
 8409 5fa5 890424   		movl	%eax, (%esp)
 8410 5fa8 E8000000 		call	_fclose
 8410      00
 8411              	L483:
4503:str_merge.c   ****     if (fout_meta_map)fclose(fout_map);
 8413              	LM1026:
 8414 5fad 837DE800 		cmpl	$0, -24(%ebp)
 8415 5fb1 740B     		je	L484
 8416 5fb3 8B45F0   		movl	-16(%ebp), %eax
 8417 5fb6 890424   		movl	%eax, (%esp)
 8418 5fb9 E8000000 		call	_fclose
 8418      00
 8419              	L484:
4504:str_merge.c   ****     
4505:str_merge.c   **** #ifdef __MMI_RESOURCE_ENFB_SUPPORT__
4506:str_merge.c   ****     if (fout_enfb)fclose(fout_enfb);
4507:str_merge.c   **** #endif    
4508:str_merge.c   ****     return -1;
 8421              	LM1027:
 8422 5fbe C7857CDF 		movl	$-1, -8324(%ebp)
 8422      FFFFFFFF 
 8422      FFFF
4509:str_merge.c   **** }
 8424              	LM1028:
 8425              	L400:
 8426              	LBE44:
 8427 5fc8 8B857CDF 		movl	-8324(%ebp), %eax
 8427      FFFF
 8428 5fce 81C4B420 		addl	$8372, %esp
 8428      0000
 8429 5fd4 5B       		popl	%ebx
 8430 5fd5 5D       		popl	%ebp
 8431 5fd6 C3       		ret
 8487              	Lscope33:
 8489              	LC119:
 8490 5fd7 097B2564 		.ascii "\11{%d, %d, %d},\12\0"
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 238


 8490      2C202564 
 8490      2C202564 
 8490      7D2C0A00 
 8497              	.globl _generate_map2
 8499              	_generate_map2:
4510:str_merge.c   **** 
4511:str_merge.c   **** 
4512:str_merge.c   **** #ifdef __MMI_RESOURCE_ENFB_SUPPORT__
4513:str_merge.c   **** int generate_map(FILE *map, U16 *arr, int len)
4514:str_merge.c   **** {
4515:str_merge.c   ****     /*----------------------------------------------------------------*/
4516:str_merge.c   ****     /* Local Variables                                                */
4517:str_merge.c   ****     /*----------------------------------------------------------------*/
4518:str_merge.c   ****     int s = 0;
4519:str_merge.c   ****     int map_count = 0;
4520:str_merge.c   ****     int i = 0;
4521:str_merge.c   ****     
4522:str_merge.c   ****     /*----------------------------------------------------------------*/
4523:str_merge.c   ****     /* Code Body                                                      */
4524:str_merge.c   ****     /*----------------------------------------------------------------*/
4525:str_merge.c   ****     if(map == 0 || arr == 0 || len <= 0)
4526:str_merge.c   ****     {
4527:str_merge.c   ****         return -1;
4528:str_merge.c   ****     }
4529:str_merge.c   **** 
4530:str_merge.c   ****     for(i = 0; i < len - 1; ++i)
4531:str_merge.c   ****     {
4532:str_merge.c   ****         if(arr[i] + 1 != arr[i+1])
4533:str_merge.c   ****         {
4534:str_merge.c   ****             fprintf(map, "\t{%d, %d, %d},\n", arr[s], arr[i], s);
4535:str_merge.c   ****             s = i + 1;
4536:str_merge.c   ****             map_count++;
4537:str_merge.c   ****         }
4538:str_merge.c   ****     }
4539:str_merge.c   **** 
4540:str_merge.c   ****     fprintf(map, "\t{%d, %d, %d},\n", arr[s], arr[i], s);
4541:str_merge.c   ****     map_count++;
4542:str_merge.c   **** 
4543:str_merge.c   ****     return map_count;
4544:str_merge.c   **** }
4545:str_merge.c   **** #else /* __MMI_RESOURCE_ENFB_SUPPORT__ */
4546:str_merge.c   **** int generate_map2(FILE *map,FILE *mapMeta, U8 *ispop, FixedID *fixed, int len)
4547:str_merge.c   **** {
 8501              	LM1029:
 8502 5fe7 55       		pushl	%ebp
 8503 5fe8 89E5     		movl	%esp, %ebp
 8504 5fea 83EC38   		subl	$56, %esp
4548:str_merge.c   ****     /*----------------------------------------------------------------*/
4549:str_merge.c   ****     /* Local Variables                                                */
4550:str_merge.c   ****     /*----------------------------------------------------------------*/
4551:str_merge.c   ****     int mapIndex = 0; /* offset */
 8506              	LM1030:
 8507              	LBB53:
 8508 5fed C745FC00 		movl	$0, -4(%ebp)
 8508      000000
4552:str_merge.c   ****     int new_flag = 0; /* new item or not */
 8510              	LM1031:
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 239


 8511 5ff4 C745F800 		movl	$0, -8(%ebp)
 8511      000000
4553:str_merge.c   ****     int minId = 0;    /* minmum id */
 8513              	LM1032:
 8514 5ffb C745F400 		movl	$0, -12(%ebp)
 8514      000000
4554:str_merge.c   ****     int map_count = 0;
 8516              	LM1033:
 8517 6002 C745F000 		movl	$0, -16(%ebp)
 8517      000000
4555:str_merge.c   ****     int i = 0;
 8519              	LM1034:
 8520 6009 C745EC00 		movl	$0, -20(%ebp)
 8520      000000
4556:str_merge.c   ****     U16 trans_count = CurrMaxStringId - fixed->id_count; /* translated string count */
 8522              	LM1035:
 8523 6010 8B4514   		movl	20(%ebp), %eax
 8524 6013 0FB71500 		movzwl	_CurrMaxStringId, %edx
 8524      000000
 8525 601a 0FB700   		movzwl	(%eax), %eax
 8526 601d 89D1     		movl	%edx, %ecx
 8527 601f 29C1     		subl	%eax, %ecx
 8528 6021 89C8     		movl	%ecx, %eax
 8529 6023 668945EA 		movw	%ax, -22(%ebp)
4557:str_merge.c   ****     U16 curr_trans = 0;
 8531              	LM1036:
 8532 6027 66C745E8 		movw	$0, -24(%ebp)
 8532      0000
4558:str_merge.c   ****     U16 curr_no_trans = 0;
 8534              	LM1037:
 8535 602d 66C745E6 		movw	$0, -26(%ebp)
 8535      0000
4559:str_merge.c   ****     U16 curr_type = 0;
 8537              	LM1038:
 8538 6033 66C745E4 		movw	$0, -28(%ebp)
 8538      0000
4560:str_merge.c   **** 
4561:str_merge.c   ****     /*----------------------------------------------------------------*/
4562:str_merge.c   ****     /* Code Body                                                      */
4563:str_merge.c   ****     /*----------------------------------------------------------------*/
4564:str_merge.c   ****     if(map == 0 || ispop == 0 || fixed == 0 || len <= 0)
 8540              	LM1039:
 8541 6039 837D0800 		cmpl	$0, 8(%ebp)
 8542 603d 7414     		je	L487
 8543 603f 837D1000 		cmpl	$0, 16(%ebp)
 8544 6043 740E     		je	L487
 8545 6045 837D1400 		cmpl	$0, 20(%ebp)
 8546 6049 7408     		je	L487
 8547 604b 837D1800 		cmpl	$0, 24(%ebp)
 8548 604f 7E02     		jle	L487
 8549 6051 EB0C     		jmp	L486
 8550              	L487:
4565:str_merge.c   ****     {
4566:str_merge.c   ****         return -1;
 8552              	LM1040:
 8553 6053 C745E0FF 		movl	$-1, -32(%ebp)
 8553      FFFFFF
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 240


 8554 605a E9D40100 		jmp	L485
 8554      00
 8555              	L486:
4567:str_merge.c   ****     }
4568:str_merge.c   ****     
4569:str_merge.c   ****     for(i = 0; i < len; ++i)
 8557              	LM1041:
 8558 605f C745EC00 		movl	$0, -20(%ebp)
 8558      000000
 8559              	L488:
 8560 6066 8B45EC   		movl	-20(%ebp), %eax
 8561 6069 3B4518   		cmpl	24(%ebp), %eax
 8562 606c 7C05     		jl	L491
 8563 606e E9570100 		jmp	L489
 8563      00
 8564              	L491:
4570:str_merge.c   ****     {
4571:str_merge.c   ****         if(new_flag == 0)
 8566              	LM1042:
 8567 6073 837DF800 		cmpl	$0, -8(%ebp)
 8568 6077 7553     		jne	L492
4572:str_merge.c   ****         {
4573:str_merge.c   ****             if(ispop[i])
 8570              	LM1043:
 8571 6079 8B45EC   		movl	-20(%ebp), %eax
 8572 607c 034510   		addl	16(%ebp), %eax
 8573 607f 803800   		cmpb	$0, (%eax)
 8574 6082 0F841301 		je	L496
 8574      0000
4574:str_merge.c   ****             {
4575:str_merge.c   ****                 new_flag = 1;
 8576              	LM1044:
 8577 6088 C745F801 		movl	$1, -8(%ebp)
 8577      000000
4576:str_merge.c   ****                 if(fixed->fixed_id_flag[i] == TRANSLATE_FLAG)
 8579              	LM1045:
 8580 608f 8B4514   		movl	20(%ebp), %eax
 8581 6092 8B55EC   		movl	-20(%ebp), %edx
 8582 6095 8B4004   		movl	4(%eax), %eax
 8583 6098 01D0     		addl	%edx, %eax
 8584 609a 803802   		cmpb	$2, (%eax)
 8585 609d 750F     		jne	L494
4577:str_merge.c   ****                 {
4578:str_merge.c   ****                     mapIndex = curr_trans;
 8587              	LM1046:
 8588 609f 0FB745E8 		movzwl	-24(%ebp), %eax
 8589 60a3 8945FC   		movl	%eax, -4(%ebp)
4579:str_merge.c   ****                     curr_type = TRANSLATE_FLAG;
 8591              	LM1047:
 8592 60a6 66C745E4 		movw	$2, -28(%ebp)
 8592      0200
 8593 60ac EB13     		jmp	L495
 8594              	L494:
4580:str_merge.c   ****                 }
4581:str_merge.c   ****                 else
4582:str_merge.c   ****                 {
4583:str_merge.c   ****                     mapIndex = curr_no_trans + trans_count;
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 241


 8596              	LM1048:
 8597 60ae 0FB745E6 		movzwl	-26(%ebp), %eax
 8598 60b2 0FB755EA 		movzwl	-22(%ebp), %edx
 8599 60b6 01D0     		addl	%edx, %eax
 8600 60b8 8945FC   		movl	%eax, -4(%ebp)
4584:str_merge.c   ****                     curr_type = NO_TRANSLATE_FLAG;
 8602              	LM1049:
 8603 60bb 66C745E4 		movw	$1, -28(%ebp)
 8603      0100
 8604              	L495:
4585:str_merge.c   ****                 }
4586:str_merge.c   ****                 minId = i;
 8606              	LM1050:
 8607 60c1 8B45EC   		movl	-20(%ebp), %eax
 8608 60c4 8945F4   		movl	%eax, -12(%ebp)
 8609 60c7 E9CF0000 		jmp	L496
 8609      00
 8610              	L492:
4587:str_merge.c   ****             }
4588:str_merge.c   ****         }
4589:str_merge.c   ****         else
4590:str_merge.c   ****         {
4591:str_merge.c   ****             if(ispop[i] == 0 || fixed->fixed_id_flag[i - 1] != fixed->fixed_id_flag[i])
 8612              	LM1051:
 8613 60cc 8B45EC   		movl	-20(%ebp), %eax
 8614 60cf 034510   		addl	16(%ebp), %eax
 8615 60d2 803800   		cmpb	$0, (%eax)
 8616 60d5 7423     		je	L498
 8617 60d7 8B5514   		movl	20(%ebp), %edx
 8618 60da 8B45EC   		movl	-20(%ebp), %eax
 8619 60dd 034204   		addl	4(%edx), %eax
 8620 60e0 8D48FF   		leal	-1(%eax), %ecx
 8621 60e3 8B5514   		movl	20(%ebp), %edx
 8622 60e6 8B45EC   		movl	-20(%ebp), %eax
 8623 60e9 8B5204   		movl	4(%edx), %edx
 8624 60ec 01C2     		addl	%eax, %edx
 8625 60ee 0FB601   		movzbl	(%ecx), %eax
 8626 60f1 3A02     		cmpb	(%edx), %al
 8627 60f3 7505     		jne	L498
 8628 60f5 E9A10000 		jmp	L496
 8628      00
 8629              	L498:
4592:str_merge.c   ****             {
4593:str_merge.c   ****                 fprintf(map, "\t{%d, %d, %d},\n", minId, i - 1, mapIndex);
 8631              	LM1052:
 8632 60fa 8B45FC   		movl	-4(%ebp), %eax
 8633 60fd 89442410 		movl	%eax, 16(%esp)
 8634 6101 8B45EC   		movl	-20(%ebp), %eax
 8635 6104 48       		decl	%eax
 8636 6105 8944240C 		movl	%eax, 12(%esp)
 8637 6109 8B45F4   		movl	-12(%ebp), %eax
 8638 610c 89442408 		movl	%eax, 8(%esp)
 8639 6110 C7442404 		movl	$LC119, 4(%esp)
 8639      D75F0000 
 8640 6118 8B4508   		movl	8(%ebp), %eax
 8641 611b 890424   		movl	%eax, (%esp)
 8642 611e E8000000 		call	_fprintf
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 242


 8642      00
4594:str_merge.c   **** 		fprintf(mapMeta, "\t{%d, %d, %d},\n", minId, i - 1, mapIndex);
 8644              	LM1053:
 8645 6123 8B45FC   		movl	-4(%ebp), %eax
 8646 6126 89442410 		movl	%eax, 16(%esp)
 8647 612a 8B45EC   		movl	-20(%ebp), %eax
 8648 612d 48       		decl	%eax
 8649 612e 8944240C 		movl	%eax, 12(%esp)
 8650 6132 8B45F4   		movl	-12(%ebp), %eax
 8651 6135 89442408 		movl	%eax, 8(%esp)
 8652 6139 C7442404 		movl	$LC119, 4(%esp)
 8652      D75F0000 
 8653 6141 8B450C   		movl	12(%ebp), %eax
 8654 6144 890424   		movl	%eax, (%esp)
 8655 6147 E8000000 		call	_fprintf
 8655      00
4595:str_merge.c   ****                 if(ispop[i] == 0)
 8657              	LM1054:
 8658 614c 8B45EC   		movl	-20(%ebp), %eax
 8659 614f 034510   		addl	16(%ebp), %eax
 8660 6152 803800   		cmpb	$0, (%eax)
 8661 6155 7509     		jne	L499
4596:str_merge.c   ****                 {
4597:str_merge.c   ****                     new_flag = 0;
 8663              	LM1055:
 8664 6157 C745F800 		movl	$0, -8(%ebp)
 8664      000000
 8665 615e EB36     		jmp	L500
 8666              	L499:
4598:str_merge.c   ****             }
4599:str_merge.c   ****             else
4600:str_merge.c   ****             {
4601:str_merge.c   ****                     minId = i;
 8668              	LM1056:
 8669 6160 8B45EC   		movl	-20(%ebp), %eax
 8670 6163 8945F4   		movl	%eax, -12(%ebp)
4602:str_merge.c   ****                     if(fixed->fixed_id_flag[i] == TRANSLATE_FLAG)
 8672              	LM1057:
 8673 6166 8B5514   		movl	20(%ebp), %edx
 8674 6169 8B45EC   		movl	-20(%ebp), %eax
 8675 616c 034204   		addl	4(%edx), %eax
 8676 616f 803802   		cmpb	$2, (%eax)
 8677 6172 750F     		jne	L501
4603:str_merge.c   ****                     {
4604:str_merge.c   ****                         mapIndex = curr_trans;
 8679              	LM1058:
 8680 6174 0FB745E8 		movzwl	-24(%ebp), %eax
 8681 6178 8945FC   		movl	%eax, -4(%ebp)
4605:str_merge.c   ****                         curr_type = TRANSLATE_FLAG;
 8683              	LM1059:
 8684 617b 66C745E4 		movw	$2, -28(%ebp)
 8684      0200
 8685 6181 EB13     		jmp	L500
 8686              	L501:
4606:str_merge.c   ****                     }
4607:str_merge.c   ****                     else
4608:str_merge.c   ****                     {
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 243


4609:str_merge.c   ****                         mapIndex = curr_no_trans + trans_count;
 8688              	LM1060:
 8689 6183 0FB745E6 		movzwl	-26(%ebp), %eax
 8690 6187 0FB755EA 		movzwl	-22(%ebp), %edx
 8691 618b 01D0     		addl	%edx, %eax
 8692 618d 8945FC   		movl	%eax, -4(%ebp)
4610:str_merge.c   ****                         curr_type = NO_TRANSLATE_FLAG;
 8694              	LM1061:
 8695 6190 66C745E4 		movw	$1, -28(%ebp)
 8695      0100
 8696              	L500:
4611:str_merge.c   ****                     }
4612:str_merge.c   ****                 }
4613:str_merge.c   ****                 map_count++;
 8698              	LM1062:
 8699 6196 8D45F0   		leal	-16(%ebp), %eax
 8700 6199 FF00     		incl	(%eax)
 8701              	L496:
4614:str_merge.c   ****             }
4615:str_merge.c   ****         }
4616:str_merge.c   **** 
4617:str_merge.c   ****         if(ispop[i])
 8703              	LM1063:
 8704 619b 8B45EC   		movl	-20(%ebp), %eax
 8705 619e 034510   		addl	16(%ebp), %eax
 8706 61a1 803800   		cmpb	$0, (%eax)
 8707 61a4 741A     		je	L490
4618:str_merge.c   ****         {
4619:str_merge.c   ****             if(curr_type == TRANSLATE_FLAG)
 8709              	LM1064:
 8710 61a6 66837DE4 		cmpw	$2, -28(%ebp)
 8710      02
 8711 61ab 750A     		jne	L504
4620:str_merge.c   ****             {
4621:str_merge.c   ****                 curr_trans++;
 8713              	LM1065:
 8714 61ad 8B45E8   		movl	-24(%ebp), %eax
 8715 61b0 40       		incl	%eax
 8716 61b1 668945E8 		movw	%ax, -24(%ebp)
 8717 61b5 EB09     		jmp	L490
 8718              	L504:
4622:str_merge.c   ****             }
4623:str_merge.c   ****             else
4624:str_merge.c   ****             {
4625:str_merge.c   ****                 curr_no_trans++;
 8720              	LM1066:
 8721 61b7 0FB745E6 		movzwl	-26(%ebp), %eax
 8722 61bb 40       		incl	%eax
 8723 61bc 668945E6 		movw	%ax, -26(%ebp)
 8725              	LM1067:
 8726              	L490:
 8727 61c0 8D45EC   		leal	-20(%ebp), %eax
 8728 61c3 FF00     		incl	(%eax)
 8729 61c5 E99CFEFF 		jmp	L488
 8729      FF
 8730              	L489:
4626:str_merge.c   ****             }
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 244


4627:str_merge.c   ****         }
4628:str_merge.c   ****     }
4629:str_merge.c   **** 
4630:str_merge.c   ****     if(ispop[i - 1])
 8732              	LM1068:
 8733 61ca 8B45EC   		movl	-20(%ebp), %eax
 8734 61cd 034510   		addl	16(%ebp), %eax
 8735 61d0 48       		decl	%eax
 8736 61d1 803800   		cmpb	$0, (%eax)
 8737 61d4 7457     		je	L506
4631:str_merge.c   ****     {
4632:str_merge.c   ****         fprintf(map, "\t{%d, %d, %d},\n", minId, i - 1, mapIndex);
 8739              	LM1069:
 8740 61d6 8B45FC   		movl	-4(%ebp), %eax
 8741 61d9 89442410 		movl	%eax, 16(%esp)
 8742 61dd 8B45EC   		movl	-20(%ebp), %eax
 8743 61e0 48       		decl	%eax
 8744 61e1 8944240C 		movl	%eax, 12(%esp)
 8745 61e5 8B45F4   		movl	-12(%ebp), %eax
 8746 61e8 89442408 		movl	%eax, 8(%esp)
 8747 61ec C7442404 		movl	$LC119, 4(%esp)
 8747      D75F0000 
 8748 61f4 8B4508   		movl	8(%ebp), %eax
 8749 61f7 890424   		movl	%eax, (%esp)
 8750 61fa E8000000 		call	_fprintf
 8750      00
4633:str_merge.c   **** 	fprintf(mapMeta, "\t{%d, %d, %d},\n", minId, i - 1, mapIndex);
 8752              	LM1070:
 8753 61ff 8B45FC   		movl	-4(%ebp), %eax
 8754 6202 89442410 		movl	%eax, 16(%esp)
 8755 6206 8B45EC   		movl	-20(%ebp), %eax
 8756 6209 48       		decl	%eax
 8757 620a 8944240C 		movl	%eax, 12(%esp)
 8758 620e 8B45F4   		movl	-12(%ebp), %eax
 8759 6211 89442408 		movl	%eax, 8(%esp)
 8760 6215 C7442404 		movl	$LC119, 4(%esp)
 8760      D75F0000 
 8761 621d 8B450C   		movl	12(%ebp), %eax
 8762 6220 890424   		movl	%eax, (%esp)
 8763 6223 E8000000 		call	_fprintf
 8763      00
4634:str_merge.c   ****         map_count++;
 8765              	LM1071:
 8766 6228 8D45F0   		leal	-16(%ebp), %eax
 8767 622b FF00     		incl	(%eax)
 8768              	L506:
4635:str_merge.c   ****     }
4636:str_merge.c   **** 
4637:str_merge.c   ****     return map_count;
 8770              	LM1072:
 8771 622d 8B45F0   		movl	-16(%ebp), %eax
 8772 6230 8945E0   		movl	%eax, -32(%ebp)
4638:str_merge.c   **** }
 8774              	LM1073:
 8775              	L485:
 8776              	LBE53:
 8777 6233 8B45E0   		movl	-32(%ebp), %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 245


 8778 6236 C9       		leave
 8779 6237 C3       		ret
 8791              	Lscope34:
 8793 6238 908DB426 		.align 32
 8793      00000000 
 8794              	LC120:
 8795 6240 636F6E73 		.ascii "const CUSTOM_STRMAP_SEARCH StrMapSearch[] = {\12\0"
 8795      74204355 
 8795      53544F4D 
 8795      5F535452 
 8795      4D41505F 
 8796              	LC121:
 8797 626f 54595045 		.ascii "TYPE: SEARCH_MAP\12\0"
 8797      3A205345 
 8797      41524348 
 8797      5F4D4150 
 8797      0A00
 8802              	_generate_strmap_search:
4639:str_merge.c   **** #endif /* __MMI_RESOURCE_ENFB_SUPPORT__ */
4640:str_merge.c   **** 
4641:str_merge.c   **** 
4642:str_merge.c   **** static int generate_strmap_search(FILE *res, FILE *resMeta)
4643:str_merge.c   **** {
 8804              	LM1074:
 8805 6281 55       		pushl	%ebp
 8806 6282 89E5     		movl	%esp, %ebp
 8807 6284 83EC28   		subl	$40, %esp
4644:str_merge.c   ****     /*----------------------------------------------------------------*/
4645:str_merge.c   ****     /* Local Variables                                                */
4646:str_merge.c   ****     /*----------------------------------------------------------------*/
4647:str_merge.c   ****     int ret = -1;
 8809              	LM1075:
 8810              	LBB54:
 8811 6287 C745FCFF 		movl	$-1, -4(%ebp)
 8811      FFFFFF
4648:str_merge.c   ****     
4649:str_merge.c   ****     /*----------------------------------------------------------------*/
4650:str_merge.c   ****     /* Code Body                                                      */
4651:str_merge.c   ****     /*----------------------------------------------------------------*/
4652:str_merge.c   ****     if(res == 0)
 8813              	LM1076:
 8814 628e 837D0800 		cmpl	$0, 8(%ebp)
 8815 6292 750C     		jne	L508
4653:str_merge.c   ****     {
4654:str_merge.c   ****         return -1; /* invalid input */
 8817              	LM1077:
 8818 6294 C745F8FF 		movl	$-1, -8(%ebp)
 8818      FFFFFF
 8819 629b E9B80000 		jmp	L507
 8819      00
 8820              	L508:
4655:str_merge.c   ****     }
4656:str_merge.c   **** 
4657:str_merge.c   ****     fprintf(res, "const CUSTOM_STRMAP_SEARCH StrMapSearch[] = {\n");
 8822              	LM1078:
 8823 62a0 C7442404 		movl	$LC120, 4(%esp)
 8823      40620000 
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 246


 8824 62a8 8B4508   		movl	8(%ebp), %eax
 8825 62ab 890424   		movl	%eax, (%esp)
 8826 62ae E8000000 		call	_fprintf
 8826      00
4658:str_merge.c   ****     fprintf(resMeta, "########################################################\n");
 8828              	LM1079:
 8829 62b3 C7442404 		movl	$LC84, 4(%esp)
 8829      A0460000 
 8830 62bb 8B450C   		movl	12(%ebp), %eax
 8831 62be 890424   		movl	%eax, (%esp)
 8832 62c1 E8000000 		call	_fprintf
 8832      00
4659:str_merge.c   ****     fprintf(resMeta, "TYPE: SEARCH_MAP\n");
 8834              	LM1080:
 8835 62c6 C7442404 		movl	$LC121, 4(%esp)
 8835      6F620000 
 8836 62ce 8B450C   		movl	12(%ebp), %eax
 8837 62d1 890424   		movl	%eax, (%esp)
 8838 62d4 E8000000 		call	_fprintf
 8838      00
4660:str_merge.c   ****     fprintf(resMeta, "DATA:\n");
 8840              	LM1081:
 8841 62d9 C7442404 		movl	$LC99, 4(%esp)
 8841      1A490000 
 8842 62e1 8B450C   		movl	12(%ebp), %eax
 8843 62e4 890424   		movl	%eax, (%esp)
 8844 62e7 E8000000 		call	_fprintf
 8844      00
4661:str_merge.c   ****     fprintf(resMeta, "const CUSTOM_STRMAP_SEARCH StrMapSearch[] = {\n");
 8846              	LM1082:
 8847 62ec C7442404 		movl	$LC120, 4(%esp)
 8847      40620000 
 8848 62f4 8B450C   		movl	12(%ebp), %eax
 8849 62f7 890424   		movl	%eax, (%esp)
 8850 62fa E8000000 		call	_fprintf
 8850      00
4662:str_merge.c   **** #ifdef __MMI_RESOURCE_ENFB_SUPPORT__
4663:str_merge.c   ****     ret = generate_map(res, StrID, CurrMaxStringId);
4664:str_merge.c   **** #else
4665:str_merge.c   ****     ret = generate_map2(res, resMeta, StrIsPopulate, &fixed_id, MAX_STRING_MAP_SIZE);
 8852              	LM1083:
 8853 62ff C7442410 		movl	$65535, 16(%esp)
 8853      FFFF0000 
 8854 6307 C744240C 		movl	$_fixed_id, 12(%esp)
 8854      00000000 
 8855 630f C7442408 		movl	$_StrIsPopulate, 8(%esp)
 8855      00000000 
 8856 6317 8B450C   		movl	12(%ebp), %eax
 8857 631a 89442404 		movl	%eax, 4(%esp)
 8858 631e 8B4508   		movl	8(%ebp), %eax
 8859 6321 890424   		movl	%eax, (%esp)
 8860 6324 E8BEFCFF 		call	_generate_map2
 8860      FF
 8861 6329 8945FC   		movl	%eax, -4(%ebp)
4666:str_merge.c   **** #endif /* __MMI_RESOURCE_ENFB_SUPPORT__ */
4667:str_merge.c   ****     fprintf(res, "};\n");
 8863              	LM1084:
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 247


 8864 632c C7442404 		movl	$LC92, 4(%esp)
 8864      6B470000 
 8865 6334 8B4508   		movl	8(%ebp), %eax
 8866 6337 890424   		movl	%eax, (%esp)
 8867 633a E8000000 		call	_fprintf
 8867      00
4668:str_merge.c   ****     fprintf(resMeta, "};\n");
 8869              	LM1085:
 8870 633f C7442404 		movl	$LC92, 4(%esp)
 8870      6B470000 
 8871 6347 8B450C   		movl	12(%ebp), %eax
 8872 634a 890424   		movl	%eax, (%esp)
 8873 634d E8000000 		call	_fprintf
 8873      00
4669:str_merge.c   **** 
4670:str_merge.c   **** 
4671:str_merge.c   ****     return ret;
 8875              	LM1086:
 8876 6352 8B45FC   		movl	-4(%ebp), %eax
 8877 6355 8945F8   		movl	%eax, -8(%ebp)
4672:str_merge.c   **** }
 8879              	LM1087:
 8880              	L507:
 8881              	LBE54:
 8882 6358 8B45F8   		movl	-8(%ebp), %eax
 8883 635b C9       		leave
 8884 635c C3       		ret
 8888              	Lscope35:
 8890              	LC122:
 8891 635d 00       		.ascii "\0"
 8892 635e 00000000 		.space 127
 8892      00000000 
 8892      00000000 
 8892      00000000 
 8892      00000000 
 8893 63dd 8D7600   		.align 32
 8894              	LC123:
 8895 63e0 636F6E73 		.ascii "const StringResList mtk_gStringList[] = {\12\0"
 8895      74205374 
 8895      72696E67 
 8895      5265734C 
 8895      69737420 
 8896 640b 90909090 		.align 32
 8896      90909090 
 8896      90909090 
 8896      90909090 
 8896      90909090 
 8897              	LC124:
 8898 6420 7B284355 		.ascii "{(CUSTOM_STRING*)StrRes_%d, %d, (void*)StrMap_%d, %d, (CUSTOM_STRMAP_SEARCH *)StrMapSearch
 8898      53544F4D 
 8898      5F535452 
 8898      494E472A 
 8898      29537472 
 8899 6490 90909090 		.align 32
 8899      90909090 
 8899      90909090 
 8899      90909090 
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 248


 8900              	LC125:
 8901 64a0 7B284355 		.ascii "{(CUSTOM_STRING*)StrRes_Dup, %d, (void*)NULL, %d, (CUSTOM_STRMAP_SEARCH *)NULL, %d, (MMI_B
 8901      53544F4D 
 8901      5F535452 
 8901      494E472A 
 8901      29537472 
 8902 6503 90909090 		.align 32
 8902      90909090 
 8902      90909090 
 8902      90909090 
 8902      90909090 
 8903              	LC126:
 8904 6520 7B284355 		.ascii "{(CUSTOM_STRING*)NULL, 0, (void*)NULL, 0, (CUSTOM_STRMAP_SEARCH *)NULL, 0, 0},\12\0"
 8904      53544F4D 
 8904      5F535452 
 8904      494E472A 
 8904      294E554C 
 8905 6570 90909090 		.align 32
 8905      90909090 
 8905      90909090 
 8905      90909090 
 8906              	LC127:
 8907 6580 7B284355 		.ascii "{(CUSTOM_STRING*)StrRes_Fixed, %d, (void*)StrMap_Fixed, %d, (CUSTOM_STRMAP_SEARCH *)StrMap
 8907      53544F4D 
 8907      5F535452 
 8907      494E472A 
 8907      29537472 
 8919              	_generate_language_list_array:
4673:str_merge.c   **** 
4674:str_merge.c   **** #ifndef __MMI_RESOURCE_ENFB_SUPPORT__
4675:str_merge.c   **** static MMI_BOOL generate_language_list_array(FILE *res, StrRes *strres, DupStrRes *strres_dup, int 
4676:str_merge.c   **** #else
4677:str_merge.c   **** static MMI_BOOL generate_language_list_array(FILE *res, StrRes *strres, int num_map_search, U32 *re
4678:str_merge.c   **** #endif /* __MMI_RESOURCE_ENFB_SUPPORT__ */
4679:str_merge.c   **** {
 8921              	LM1088:
 8922 65f6 55       		pushl	%ebp
 8923 65f7 89E5     		movl	%esp, %ebp
 8924 65f9 57       		pushl	%edi
 8925 65fa 81EC4401 		subl	$324, %esp
 8925      0000
4680:str_merge.c   ****     FILE *pFile = 0;
 8927              	LM1089:
 8928              	LBB55:
 8929 6600 C745F400 		movl	$0, -12(%ebp)
 8929      000000
4681:str_merge.c   ****     int i = 0;
 8931              	LM1090:
 8932 6607 C745F000 		movl	$0, -16(%ebp)
 8932      000000
4682:str_merge.c   ****     char strResZiSymbol[STR_RESOURCE_MAX_SYMBOL_LEN] = "";
 8934              	LM1091:
 8935 660e 0FB6055D 		movzbl	LC122, %eax
 8935      630000
 8936 6615 888568FF 		movb	%al, -152(%ebp)
 8936      FFFF
 8937 661b 8DBD69FF 		leal	-151(%ebp), %edi
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 249


 8937      FFFF
 8938 6621 FC       		cld
 8939 6622 B97F0000 		movl	$127, %ecx
 8939      00
 8940 6627 B000     		movb	$0, %al
 8941 6629 F3       		rep
 8942 662a AA       		stosb
4683:str_merge.c   ****     char strMapZiSymbol[STR_RESOURCE_MAX_SYMBOL_LEN] = "";
 8944              	LM1092:
 8945 662b 0FB6055D 		movzbl	LC122, %eax
 8945      630000
 8946 6632 8885E8FE 		movb	%al, -280(%ebp)
 8946      FFFF
 8947 6638 8DBDE9FE 		leal	-279(%ebp), %edi
 8947      FFFF
 8948 663e FC       		cld
 8949 663f B97F0000 		movl	$127, %ecx
 8949      00
 8950 6644 B000     		movb	$0, %al
 8951 6646 F3       		rep
 8952 6647 AA       		stosb
4684:str_merge.c   ****     char * statementStr = NULL ;
 8954              	LM1093:
 8955 6648 C785E4FE 		movl	$0, -284(%ebp)
 8955      FFFF0000 
 8955      0000
4685:str_merge.c   ****    
4686:str_merge.c   ****     if(res == 0)
 8957              	LM1094:
 8958 6652 837D0800 		cmpl	$0, 8(%ebp)
 8959 6656 750F     		jne	L510
4687:str_merge.c   ****     {
4688:str_merge.c   ****         return MMI_FALSE;
 8961              	LM1095:
 8962 6658 C785DCFE 		movl	$0, -292(%ebp)
 8962      FFFF0000 
 8962      0000
 8963 6662 E9AE0100 		jmp	L509
 8963      00
 8964              	L510:
4689:str_merge.c   ****     }
4690:str_merge.c   **** 
4691:str_merge.c   **** #ifdef __MMI_RESOURCE_STR_ZLIB_COMPRESS__
4692:str_merge.c   ****     InitStrDeCompressionBufferCreator();
4693:str_merge.c   ****     launchStrDeCompressionBufferCreator(strres, strres_dup, res_size, map_size);
4694:str_merge.c   ****     statementStr = StrDeCompressBufGetDefinitionStatements(MMIRESORUCE_CAT_STR_COMPRESS_RESERVED_ZI
4695:str_merge.c   ****     fprintf(res, "%s\n", statementStr);
4696:str_merge.c   ****     statementStr = StrDeCompressBufGetDeclartionStatements();
4697:str_merge.c   ****     fprintf(res, "%s\n", statementStr);
4698:str_merge.c   **** #endif// __MMI_RESOURCE_STR_ZLIB_COMPRESS__
4699:str_merge.c   **** 
4700:str_merge.c   ****     fprintf(res, "const StringResList mtk_gStringList[] = {\n");
 8966              	LM1096:
 8967 6667 C7442404 		movl	$LC123, 4(%esp)
 8967      E0630000 
 8968 666f 8B4508   		movl	8(%ebp), %eax
 8969 6672 890424   		movl	%eax, (%esp)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 250


 8970 6675 E8000000 		call	_fprintf
 8970      00
4701:str_merge.c   ****     for (i = 0; i < mtk_gMaxDeployedLangs; i++)
 8972              	LM1097:
 8973 667a C745F000 		movl	$0, -16(%ebp)
 8973      000000
 8974              	L511:
 8975 6681 0FB70500 		movzwl	_mtk_gMaxDeployedLangs, %eax
 8975      000000
 8976 6688 3945F0   		cmpl	%eax, -16(%ebp)
 8977 668b 7C05     		jl	L514
 8978 668d E9B60000 		jmp	L512
 8978      00
 8979              	L514:
4702:str_merge.c   ****     {
4703:str_merge.c   ****         int old_i = i;
 8981              	LM1098:
 8982              	LBB56:
 8983 6692 8B45F0   		movl	-16(%ebp), %eax
 8984 6695 8985E0FE 		movl	%eax, -288(%ebp)
 8984      FFFF
4704:str_merge.c   **** 
4705:str_merge.c   ****         if (mtk_gLanguageFlag[i] == 0)
 8986              	LM1099:
 8987 669b 8B45F0   		movl	-16(%ebp), %eax
 8988 669e 8D148500 		leal	0(,%eax,4), %edx
 8988      000000
 8989 66a5 A1B80000 		movl	_mtk_gLanguageFlag, %eax
 8989      00
 8990 66aa 833C1000 		cmpl	$0, (%eax,%edx)
 8991 66ae 7507     		jne	L515
4706:str_merge.c   ****         {
4707:str_merge.c   ****             i = 0;
 8993              	LM1100:
 8994 66b0 C745F000 		movl	$0, -16(%ebp)
 8994      000000
 8995              	L515:
4708:str_merge.c   ****         }
4709:str_merge.c   **** #ifdef __MMI_RESOURCE_STR_ZLIB_COMPRESS__
4710:str_merge.c   ****         if (mmi_res_zip_language[i] == 1)
4711:str_merge.c   ****         {
4712:str_merge.c   ****             if(pFile = fopen(ZIP_OUTPUT_FILE, "a"))
4713:str_merge.c   ****             {
4714:str_merge.c   ****                 fprintf(pFile, "StrRes_%d,%d,%d,%d,Yes\n", old_i + 1, res_size[i], reszip_size[i], 
4715:str_merge.c   ****                 fprintf(pFile, "StrMap_%d,%d,%d,%d,Yes\n", old_i + 1, map_size[i], mapzip_size[i], 
4716:str_merge.c   ****                 fprintf(pFile, "Language_%d_Total,%d,%d,%d,Yes\n", old_i + 1, res_size[i] + map_siz
4717:str_merge.c   ****                 fclose(pFile);
4718:str_merge.c   ****             }
4719:str_merge.c   ****             StrDeCompressBufGetStrResSymbol(old_i, strResZiSymbol, STR_RESOURCE_MAX_SYMBOL_LEN);
4720:str_merge.c   ****             StrDeCompressBufGetStrMapSymbol(old_i, strMapZiSymbol, STR_RESOURCE_MAX_SYMBOL_LEN);
4721:str_merge.c   **** 
4722:str_merge.c   ****             fprintf(res, "{%s, %d, %s, %d, (CUSTOM_STRMAP_SEARCH *)StrMapSearch, %d, %d, (U8*)StrRe
4723:str_merge.c   ****                 strResZiSymbol, strres[i].MaxNum + 1,strMapZiSymbol, strres[i].MaxID + 1, num_map_s
4724:str_merge.c   ****         }
4725:str_merge.c   ****         else
4726:str_merge.c   ****         {
4727:str_merge.c   ****             fprintf(res, "{(CUSTOM_STRING*)StrRes_%d, %d, (void*)StrMap_%d, %d, (CUSTOM_STRMAP_SEAR
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 251


4728:str_merge.c   ****                     old_i + 1, strres[i].MaxNum + 1, old_i + 1, strres[i].MaxID + 1, num_map_search
4729:str_merge.c   ****         }
4730:str_merge.c   **** #else
4731:str_merge.c   ****         fprintf(res, "{(CUSTOM_STRING*)StrRes_%d, %d, (void*)StrMap_%d, %d, (CUSTOM_STRMAP_SEARCH *
 8997              	LM1101:
 8998 66b7 8B45F0   		movl	-16(%ebp), %eax
 8999 66ba 8D148500 		leal	0(,%eax,4), %edx
 8999      000000
 9000 66c1 A1C80000 		movl	_is16bit, %eax
 9000      00
 9001 66c6 8B0410   		movl	(%eax,%edx), %eax
 9002 66c9 8944241C 		movl	%eax, 28(%esp)
 9003 66cd 8B4514   		movl	20(%ebp), %eax
 9004 66d0 89442418 		movl	%eax, 24(%esp)
 9005 66d4 8B55F0   		movl	-16(%ebp), %edx
 9006 66d7 89D0     		movl	%edx, %eax
 9007 66d9 01C0     		addl	%eax, %eax
 9008 66db 01D0     		addl	%edx, %eax
 9009 66dd 8D14C500 		leal	0(,%eax,8), %edx
 9009      000000
 9010 66e4 8B450C   		movl	12(%ebp), %eax
 9011 66e7 8B441008 		movl	8(%eax,%edx), %eax
 9012 66eb 40       		incl	%eax
 9013 66ec 89442414 		movl	%eax, 20(%esp)
 9014 66f0 8B85E0FE 		movl	-288(%ebp), %eax
 9014      FFFF
 9015 66f6 40       		incl	%eax
 9016 66f7 89442410 		movl	%eax, 16(%esp)
 9017 66fb 8B55F0   		movl	-16(%ebp), %edx
 9018 66fe 89D0     		movl	%edx, %eax
 9019 6700 01C0     		addl	%eax, %eax
 9020 6702 01D0     		addl	%edx, %eax
 9021 6704 8D14C500 		leal	0(,%eax,8), %edx
 9021      000000
 9022 670b 8B450C   		movl	12(%ebp), %eax
 9023 670e 8B44100C 		movl	12(%eax,%edx), %eax
 9024 6712 40       		incl	%eax
 9025 6713 8944240C 		movl	%eax, 12(%esp)
 9026 6717 8B85E0FE 		movl	-288(%ebp), %eax
 9026      FFFF
 9027 671d 40       		incl	%eax
 9028 671e 89442408 		movl	%eax, 8(%esp)
 9029 6722 C7442404 		movl	$LC124, 4(%esp)
 9029      20640000 
 9030 672a 8B4508   		movl	8(%ebp), %eax
 9031 672d 890424   		movl	%eax, (%esp)
 9032 6730 E8000000 		call	_fprintf
 9032      00
4732:str_merge.c   ****                 old_i + 1, strres[i].MaxNum + 1, old_i + 1, strres[i].MaxID + 1, num_map_search, is
4733:str_merge.c   **** #endif
4734:str_merge.c   **** 
4735:str_merge.c   ****         i = old_i;
 9034              	LM1102:
 9035 6735 8B85E0FE 		movl	-288(%ebp), %eax
 9035      FFFF
 9036 673b 8945F0   		movl	%eax, -16(%ebp)
 9038              	LM1103:
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 252


 9039 673e 8D45F0   		leal	-16(%ebp), %eax
 9040              	LBE56:
 9041 6741 FF00     		incl	(%eax)
 9042 6743 E939FFFF 		jmp	L511
 9042      FF
 9043              	L512:
4736:str_merge.c   ****     }
4737:str_merge.c   **** 
4738:str_merge.c   **** #ifndef __MMI_RESOURCE_ENFB_SUPPORT__
4739:str_merge.c   **** 
4740:str_merge.c   **** #ifdef __MMI_RESOURCE_STR_ZLIB_COMPRESS__
4741:str_merge.c   **** 
4742:str_merge.c   ****     if (strres_dup->MaxNum > 0)
4743:str_merge.c   ****     {
4744:str_merge.c   ****         if (mmi_res_zip_language[MAX_LANGUAGES] == 1)
4745:str_merge.c   ****         {            
4746:str_merge.c   ****             if(pFile = fopen(ZIP_OUTPUT_FILE, "a"))
4747:str_merge.c   ****             {
4748:str_merge.c   ****                 fprintf(pFile, "StrRes_Dup,%d,%d,%d,Yes\n", res_size[511], reszip_size[511], res_si
4749:str_merge.c   ****                 fclose(pFile);
4750:str_merge.c   ****             }
4751:str_merge.c   ****                         
4752:str_merge.c   ****             StrDeCompressBufGetDupStrResSymbol(strResZiSymbol, STR_RESOURCE_MAX_SYMBOL_LEN);
4753:str_merge.c   **** 
4754:str_merge.c   ****             fprintf(res, "{%s, %d, (void*)NULL, %d, (CUSTOM_STRMAP_SEARCH *)NULL, %d, 0, (U8*)StrRe
4755:str_merge.c   ****                 strResZiSymbol, strres_dup->MaxNum, (U16)((max_total_len >> 16) & 0xFFFF), (U16)(ma
4756:str_merge.c   ****         }
4757:str_merge.c   ****         else
4758:str_merge.c   ****         {
4759:str_merge.c   ****             fprintf(res, "{(CUSTOM_STRING*)StrRes_Dup, %d, (void*)NULL, %d, (CUSTOM_STRMAP_SEARCH *
4760:str_merge.c   ****                     strres_dup->MaxNum, (U16)((max_total_len >> 16) & 0xFFFF), (U16)(max_total_len 
4761:str_merge.c   ****         }            
4762:str_merge.c   ****     }
4763:str_merge.c   ****     else
4764:str_merge.c   ****     {
4765:str_merge.c   ****         fprintf(res, "{(CUSTOM_STRING*)NULL, 0, (void*)NULL, 0, (CUSTOM_STRMAP_SEARCH *)NULL, 0, 0,
4766:str_merge.c   ****     }
4767:str_merge.c   **** 
4768:str_merge.c   ****     /* fixed string information */
4769:str_merge.c   ****     if(fixed_id.id_count > 0)
4770:str_merge.c   ****     {
4771:str_merge.c   **** 
4772:str_merge.c   ****         StrDeCompressBufGetFixedStrResSymbol(strResZiSymbol, STR_RESOURCE_MAX_SYMBOL_LEN);
4773:str_merge.c   ****         StrDeCompressBufGetFixedStrMapSymbol(strMapZiSymbol, STR_RESOURCE_MAX_SYMBOL_LEN);
4774:str_merge.c   ****         fprintf(res, "{%s, %d, %s, %d, (CUSTOM_STRMAP_SEARCH *)StrMapSearch, %d, %d, (U8*)StrRes_zi
4775:str_merge.c   ****             strResZiSymbol,fixed_result.nTotalStrRes,strMapZiSymbol, fixed_id.id_count, num_map_sea
4776:str_merge.c   ****     }
4777:str_merge.c   ****     else
4778:str_merge.c   ****     {
4779:str_merge.c   ****         fprintf(res, "{(CUSTOM_STRING*)NULL, 0, (void*)NULL, 0, (CUSTOM_STRMAP_SEARCH *)NULL, 0, 0,
4780:str_merge.c   ****     }
4781:str_merge.c   **** #else /* __MMI_RESOURCE_STR_ZLIB_COMPRESS__ */
4782:str_merge.c   ****     /* duplicate string information */
4783:str_merge.c   ****     if (strres_dup->MaxNum > 0)
 9045              	LM1104:
 9046 6748 8B4510   		movl	16(%ebp), %eax
 9047 674b 83780400 		cmpl	$0, 4(%eax)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 253


 9048 674f 7E34     		jle	L516
4784:str_merge.c   ****     {
4785:str_merge.c   ****         fprintf(res, "{(CUSTOM_STRING*)StrRes_Dup, %d, (void*)NULL, %d, (CUSTOM_STRMAP_SEARCH *)NUL
 9050              	LM1105:
 9051 6751 0FB74518 		movzwl	24(%ebp), %eax
 9052 6755 89442410 		movl	%eax, 16(%esp)
 9053 6759 8B4518   		movl	24(%ebp), %eax
 9054 675c C1F810   		sarl	$16, %eax
 9055 675f 0FB7C0   		movzwl	%ax, %eax
 9056 6762 8944240C 		movl	%eax, 12(%esp)
 9057 6766 8B4510   		movl	16(%ebp), %eax
 9058 6769 8B4004   		movl	4(%eax), %eax
 9059 676c 89442408 		movl	%eax, 8(%esp)
 9060 6770 C7442404 		movl	$LC125, 4(%esp)
 9060      A0640000 
 9061 6778 8B4508   		movl	8(%ebp), %eax
 9062 677b 890424   		movl	%eax, (%esp)
 9063 677e E8000000 		call	_fprintf
 9063      00
 9064 6783 EB13     		jmp	L517
 9065              	L516:
4786:str_merge.c   ****     }
4787:str_merge.c   ****     else
4788:str_merge.c   ****     {
4789:str_merge.c   ****         fprintf(res, "{(CUSTOM_STRING*)NULL, 0, (void*)NULL, 0, (CUSTOM_STRMAP_SEARCH *)NULL, 0, 0}
 9067              	LM1106:
 9068 6785 C7442404 		movl	$LC126, 4(%esp)
 9068      20650000 
 9069 678d 8B4508   		movl	8(%ebp), %eax
 9070 6790 890424   		movl	%eax, (%esp)
 9071 6793 E8000000 		call	_fprintf
 9071      00
 9072              	L517:
4790:str_merge.c   ****     }
4791:str_merge.c   **** 
4792:str_merge.c   ****     /* fixed string id information */
4793:str_merge.c   ****     if(fixed_id.id_count > 0)
 9074              	LM1107:
 9075 6798 66833D00 		cmpw	$0, _fixed_id
 9075      00000000 
 9076 67a0 7443     		je	L518
4794:str_merge.c   ****     {
4795:str_merge.c   ****         fprintf(res, "{(CUSTOM_STRING*)StrRes_Fixed, %d, (void*)StrMap_Fixed, %d, (CUSTOM_STRMAP_SE
 9078              	LM1108:
 9079 67a2 833D0400 		cmpl	$0, _fixed_result+4
 9079      000000
 9080 67a9 0F95C0   		setne	%al
 9081 67ac 0FB6C0   		movzbl	%al, %eax
 9082 67af 89442414 		movl	%eax, 20(%esp)
 9083 67b3 8B4514   		movl	20(%ebp), %eax
 9084 67b6 89442410 		movl	%eax, 16(%esp)
 9085 67ba 0FB70500 		movzwl	_fixed_id, %eax
 9085      000000
 9086 67c1 8944240C 		movl	%eax, 12(%esp)
 9087 67c5 0FB70500 		movzwl	_fixed_result, %eax
 9087      000000
 9088 67cc 89442408 		movl	%eax, 8(%esp)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 254


 9089 67d0 C7442404 		movl	$LC127, 4(%esp)
 9089      80650000 
 9090 67d8 8B4508   		movl	8(%ebp), %eax
 9091 67db 890424   		movl	%eax, (%esp)
 9092 67de E8000000 		call	_fprintf
 9092      00
 9093 67e3 EB13     		jmp	L519
 9094              	L518:
4796:str_merge.c   ****         fixed_result.nTotalStrRes, fixed_id.id_count, num_map_search, fixed_result.is16bit ? 1 : 0)
4797:str_merge.c   ****     }
4798:str_merge.c   ****     else
4799:str_merge.c   ****     {
4800:str_merge.c   ****         fprintf(res, "{(CUSTOM_STRING*)NULL, 0, (void*)NULL, 0, (CUSTOM_STRMAP_SEARCH *)NULL, 0, 0}
 9096              	LM1109:
 9097 67e5 C7442404 		movl	$LC126, 4(%esp)
 9097      20650000 
 9098 67ed 8B4508   		movl	8(%ebp), %eax
 9099 67f0 890424   		movl	%eax, (%esp)
 9100 67f3 E8000000 		call	_fprintf
 9100      00
 9101              	L519:
4801:str_merge.c   ****     }
4802:str_merge.c   **** #endif /* #ifdef __MMI_RESOURCE_STR_ZLIB_COMPRESS__ */
4803:str_merge.c   ****     
4804:str_merge.c   **** #endif /* __MMI_RESOURCE_ENFB_SUPPORT__ */
4805:str_merge.c   **** 
4806:str_merge.c   ****     fprintf(res, "};\n");
 9103              	LM1110:
 9104 67f8 C7442404 		movl	$LC92, 4(%esp)
 9104      6B470000 
 9105 6800 8B4508   		movl	8(%ebp), %eax
 9106 6803 890424   		movl	%eax, (%esp)
 9107 6806 E8000000 		call	_fprintf
 9107      00
4807:str_merge.c   **** 
4808:str_merge.c   **** #ifdef __MMI_RESOURCE_STR_ZLIB_COMPRESS__
4809:str_merge.c   ****     DenitStrDeCompressionBufferCreator();
4810:str_merge.c   **** #endif// __MMI_RESOURCE_STR_ZLIB_COMPRESS__
4811:str_merge.c   **** 
4812:str_merge.c   ****     return MMI_TRUE;
 9109              	LM1111:
 9110 680b C785DCFE 		movl	$1, -292(%ebp)
 9110      FFFF0100 
 9110      0000
4813:str_merge.c   **** }
 9112              	LM1112:
 9113              	L509:
 9114              	LBE55:
 9115 6815 8B85DCFE 		movl	-292(%ebp), %eax
 9115      FFFF
 9116 681b 81C44401 		addl	$324, %esp
 9116      0000
 9117 6821 5F       		popl	%edi
 9118 6822 5D       		popl	%ebp
 9119 6823 C3       		ret
 9130              	Lscope36:
 9132 6824 90909090 		.align 32
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 255


 9132      90909090 
 9132      90909090 
 9132      90909090 
 9132      90909090 
 9133              	LC128:
 9134 6840 63726561 		.ascii "create hash table fixed->enum_id_tb failed.\12\0"
 9134      74652068 
 9134      61736820 
 9134      7461626C 
 9134      65206669 
 9135 686d 90909090 		.align 32
 9135      90909090 
 9135      90909090 
 9135      90909090 
 9135      909090
 9136              	LC129:
 9137 6880 63726561 		.ascii "create hash table fixed->str_id_tb failed.\12\0"
 9137      74652068 
 9137      61736820 
 9137      7461626C 
 9137      65206669 
 9142              	_init_fixed_id:
4814:str_merge.c   **** 
4815:str_merge.c   **** 
4816:str_merge.c   **** #ifndef __MMI_RESOURCE_ENFB_SUPPORT__
4817:str_merge.c   **** /*****************************************************************************
4818:str_merge.c   ****  * FUNCTION
4819:str_merge.c   ****  *  init_fixed_id
4820:str_merge.c   ****  * DESCRIPTION
4821:str_merge.c   ****  *  initialize fixed id
4822:str_merge.c   ****  * PARAMETERS
4823:str_merge.c   ****  *  fixed           :[IN/OUT] fixed id will be initialized
4824:str_merge.c   ****  *  table_size    :[IN] hash table size
4825:str_merge.c   ****  * RETURNS
4826:str_merge.c   ****  *   0 if initialize success
4827:str_merge.c   ****  *****************************************************************************/
4828:str_merge.c   **** int init_fixed_id(FixedID *fixed, int table_size)
4829:str_merge.c   **** {
 9144              	LM1113:
 9145 68ac 55       		pushl	%ebp
 9146 68ad 89E5     		movl	%esp, %ebp
 9147 68af 53       		pushl	%ebx
 9148 68b0 83EC14   		subl	$20, %esp
4830:str_merge.c   ****     /*----------------------------------------------------------------*/
4831:str_merge.c   ****     /* Local Variables                                                */
4832:str_merge.c   ****     /*----------------------------------------------------------------*/
4833:str_merge.c   ****     int i = 0;
 9150              	LM1114:
 9151              	LBB57:
 9152 68b3 C745F800 		movl	$0, -8(%ebp)
 9152      000000
4834:str_merge.c   ****     
4835:str_merge.c   ****     /*----------------------------------------------------------------*/
4836:str_merge.c   ****     /* Code Body                                                      */
4837:str_merge.c   ****     /*----------------------------------------------------------------*/
4838:str_merge.c   ****     if(fixed == 0)
 9154              	LM1115:
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 256


 9155 68ba 837D0800 		cmpl	$0, 8(%ebp)
 9156 68be 750C     		jne	L521
4839:str_merge.c   ****     {
4840:str_merge.c   ****         return -1; /* invalid input */
 9158              	LM1116:
 9159 68c0 C745F4FF 		movl	$-1, -12(%ebp)
 9159      FFFFFF
 9160 68c7 E9E40000 		jmp	L520
 9160      00
 9161              	L521:
4841:str_merge.c   ****     }
4842:str_merge.c   **** 
4843:str_merge.c   ****     memset(fixed, 0, sizeof(FixedID));
 9163              	LM1117:
 9164 68cc C7442408 		movl	$16, 8(%esp)
 9164      10000000 
 9165 68d4 C7442404 		movl	$0, 4(%esp)
 9165      00000000 
 9166 68dc 8B4508   		movl	8(%ebp), %eax
 9167 68df 890424   		movl	%eax, (%esp)
 9168 68e2 E8000000 		call	_memset
 9168      00
4844:str_merge.c   **** 
4845:str_merge.c   ****     fixed->fixed_id_flag = (U8*)malloc(sizeof(U8) * MAX_STRING_MAP_SIZE);
 9170              	LM1118:
 9171 68e7 8B5D08   		movl	8(%ebp), %ebx
 9172 68ea C70424FF 		movl	$65535, (%esp)
 9172      FF0000
 9173 68f1 E8000000 		call	_malloc
 9173      00
 9174 68f6 894304   		movl	%eax, 4(%ebx)
4846:str_merge.c   ****     if(fixed->fixed_id_flag == 0)
 9176              	LM1119:
 9177 68f9 8B4508   		movl	8(%ebp), %eax
 9178 68fc 83780400 		cmpl	$0, 4(%eax)
 9179 6900 750C     		jne	L522
4847:str_merge.c   ****     {
4848:str_merge.c   ****         return -2; /* malloc failed */
 9181              	LM1120:
 9182 6902 C745F4FE 		movl	$-2, -12(%ebp)
 9182      FFFFFF
 9183 6909 E9A20000 		jmp	L520
 9183      00
 9184              	L522:
4849:str_merge.c   ****     }
4850:str_merge.c   ****     for(i = 0; i < MAX_STRING_MAP_SIZE; ++i)
 9186              	LM1121:
 9187 690e C745F800 		movl	$0, -8(%ebp)
 9187      000000
 9188              	L523:
 9189 6915 817DF8FE 		cmpl	$65534, -8(%ebp)
 9189      FF0000
 9190 691c 7E02     		jle	L526
 9191 691e EB13     		jmp	L524
 9192              	L526:
4851:str_merge.c   ****         fixed->fixed_id_flag[i] = NO_TRANSLATE_FLAG;
 9194              	LM1122:
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 257


 9195 6920 8B5508   		movl	8(%ebp), %edx
 9196 6923 8B45F8   		movl	-8(%ebp), %eax
 9197 6926 034204   		addl	4(%edx), %eax
 9198 6929 C60001   		movb	$1, (%eax)
 9200              	LM1123:
 9201 692c 8D45F8   		leal	-8(%ebp), %eax
 9202 692f FF00     		incl	(%eax)
 9203 6931 EBE2     		jmp	L523
 9204              	L524:
4852:str_merge.c   **** 
4853:str_merge.c   ****     fixed->enum_id_tb = CreateHashTable(table_size);
 9206              	LM1124:
 9207 6933 8B5D08   		movl	8(%ebp), %ebx
 9208 6936 8B450C   		movl	12(%ebp), %eax
 9209 6939 890424   		movl	%eax, (%esp)
 9210 693c E80F97FF 		call	_CreateHashTable
 9210      FF
 9211 6941 894308   		movl	%eax, 8(%ebx)
4854:str_merge.c   ****     if(fixed->enum_id_tb == 0)
 9213              	LM1125:
 9214 6944 8B4508   		movl	8(%ebp), %eax
 9215 6947 83780800 		cmpl	$0, 8(%eax)
 9216 694b 7521     		jne	L527
4855:str_merge.c   ****     {
4856:str_merge.c   ****         fprintf(stderr, "create hash table fixed->enum_id_tb failed.\n");
 9218              	LM1126:
 9219 694d C7442404 		movl	$LC128, 4(%esp)
 9219      40680000 
 9220 6955 A1000000 		movl	__imp___iob, %eax
 9220      00
 9221 695a 83C040   		addl	$64, %eax
 9222 695d 890424   		movl	%eax, (%esp)
 9223 6960 E8000000 		call	_fprintf
 9223      00
4857:str_merge.c   ****         return -3;
 9225              	LM1127:
 9226 6965 C745F4FD 		movl	$-3, -12(%ebp)
 9226      FFFFFF
 9227 696c EB42     		jmp	L520
 9228              	L527:
4858:str_merge.c   ****     }
4859:str_merge.c   **** 
4860:str_merge.c   ****     fixed->str_id_tb = CreateHashTable(table_size);
 9230              	LM1128:
 9231 696e 8B5D08   		movl	8(%ebp), %ebx
 9232 6971 8B450C   		movl	12(%ebp), %eax
 9233 6974 890424   		movl	%eax, (%esp)
 9234 6977 E8D496FF 		call	_CreateHashTable
 9234      FF
 9235 697c 89430C   		movl	%eax, 12(%ebx)
4861:str_merge.c   ****     if(fixed->str_id_tb == 0)
 9237              	LM1129:
 9238 697f 8B4508   		movl	8(%ebp), %eax
 9239 6982 83780C00 		cmpl	$0, 12(%eax)
 9240 6986 7521     		jne	L528
4862:str_merge.c   ****     {
4863:str_merge.c   ****         fprintf(stderr, "create hash table fixed->str_id_tb failed.\n");
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 258


 9242              	LM1130:
 9243 6988 C7442404 		movl	$LC129, 4(%esp)
 9243      80680000 
 9244 6990 A1000000 		movl	__imp___iob, %eax
 9244      00
 9245 6995 83C040   		addl	$64, %eax
 9246 6998 890424   		movl	%eax, (%esp)
 9247 699b E8000000 		call	_fprintf
 9247      00
4864:str_merge.c   ****         return -3;
 9249              	LM1131:
 9250 69a0 C745F4FD 		movl	$-3, -12(%ebp)
 9250      FFFFFF
 9251 69a7 EB07     		jmp	L520
 9252              	L528:
4865:str_merge.c   ****     }
4866:str_merge.c   **** 
4867:str_merge.c   ****     return 0;
 9254              	LM1132:
 9255 69a9 C745F400 		movl	$0, -12(%ebp)
 9255      000000
4868:str_merge.c   **** }
 9257              	LM1133:
 9258              	L520:
 9259              	LBE57:
 9260 69b0 8B45F4   		movl	-12(%ebp), %eax
 9261 69b3 83C414   		addl	$20, %esp
 9262 69b6 5B       		popl	%ebx
 9263 69b7 5D       		popl	%ebp
 9264 69b8 C3       		ret
 9268              	Lscope37:
 9274              	_set_fixed_str_flag:
4869:str_merge.c   **** 
4870:str_merge.c   **** 
4871:str_merge.c   **** int set_fixed_str_flag(FixedID *fixed, wchar_t* id)
4872:str_merge.c   **** {
 9276              	LM1134:
 9277 69b9 55       		pushl	%ebp
 9278 69ba 89E5     		movl	%esp, %ebp
 9279 69bc 83EC18   		subl	$24, %esp
4873:str_merge.c   ****     /*----------------------------------------------------------------*/
4874:str_merge.c   ****     /* Local Variables                                                */
4875:str_merge.c   ****     /*----------------------------------------------------------------*/
4876:str_merge.c   ****     StrIDNode *node = 0;
 9281              	LM1135:
 9282              	LBB58:
 9283 69bf C745FC00 		movl	$0, -4(%ebp)
 9283      000000
4877:str_merge.c   ****     
4878:str_merge.c   ****     /*----------------------------------------------------------------*/
4879:str_merge.c   ****     /* Code Body                                                      */
4880:str_merge.c   ****     /*----------------------------------------------------------------*/
4881:str_merge.c   ****     if(fixed == 0 || id == 0 || id[0] == '\0')
 9285              	LM1136:
 9286 69c6 837D0800 		cmpl	$0, 8(%ebp)
 9287 69ca 740F     		je	L531
 9288 69cc 837D0C00 		cmpl	$0, 12(%ebp)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 259


 9289 69d0 7409     		je	L531
 9290 69d2 8B450C   		movl	12(%ebp), %eax
 9291 69d5 66833800 		cmpw	$0, (%eax)
 9292 69d9 7509     		jne	L530
 9293              	L531:
4882:str_merge.c   ****     {
4883:str_merge.c   ****         return -1; /* invalid input */
 9295              	LM1137:
 9296 69db C745F8FF 		movl	$-1, -8(%ebp)
 9296      FFFFFF
 9297 69e2 EB57     		jmp	L529
 9298              	L530:
4884:str_merge.c   ****     }
4885:str_merge.c   **** 
4886:str_merge.c   ****     node = hash_search(fixed->enum_id_tb, id);
 9300              	LM1138:
 9301 69e4 8B450C   		movl	12(%ebp), %eax
 9302 69e7 89442404 		movl	%eax, 4(%esp)
 9303 69eb 8B4508   		movl	8(%ebp), %eax
 9304 69ee 8B4008   		movl	8(%eax), %eax
 9305 69f1 890424   		movl	%eax, (%esp)
 9306 69f4 E8C398FF 		call	_hash_search
 9306      FF
 9307 69f9 8945FC   		movl	%eax, -4(%ebp)
4887:str_merge.c   ****     if(node != 0)
 9309              	LM1139:
 9310 69fc 837DFC00 		cmpl	$0, -4(%ebp)
 9311 6a00 7432     		je	L532
4888:str_merge.c   ****     {
4889:str_merge.c   ****     	if(fixed->fixed_id_flag[node->id] != TRANSLATE_FLAG)
 9313              	LM1140:
 9314 6a02 8B4D08   		movl	8(%ebp), %ecx
 9315 6a05 8B45FC   		movl	-4(%ebp), %eax
 9316 6a08 0FB75004 		movzwl	4(%eax), %edx
 9317 6a0c 8B4104   		movl	4(%ecx), %eax
 9318 6a0f 803C0202 		cmpb	$2, (%edx,%eax)
 9319 6a13 741F     		je	L532
4890:str_merge.c   ****         {
4891:str_merge.c   ****             ++CurrMaxTransStrId;
 9321              	LM1141:
 9322 6a15 0FB70500 		movzwl	_CurrMaxTransStrId, %eax
 9322      000000
 9323 6a1c 40       		incl	%eax
 9324 6a1d 66A30000 		movw	%ax, _CurrMaxTransStrId
 9324      0000
4892:str_merge.c   ****             fixed->fixed_id_flag[node->id] = TRANSLATE_FLAG;
 9326              	LM1142:
 9327 6a23 8B4D08   		movl	8(%ebp), %ecx
 9328 6a26 8B45FC   		movl	-4(%ebp), %eax
 9329 6a29 0FB75004 		movzwl	4(%eax), %edx
 9330 6a2d 8B4104   		movl	4(%ecx), %eax
 9331 6a30 C6040202 		movb	$2, (%edx,%eax)
 9332              	L532:
4893:str_merge.c   ****         }
4894:str_merge.c   ****     }
4895:str_merge.c   **** 
4896:str_merge.c   ****     return 0;
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 260


 9334              	LM1143:
 9335 6a34 C745F800 		movl	$0, -8(%ebp)
 9335      000000
4897:str_merge.c   **** }
 9337              	LM1144:
 9338              	L529:
 9339              	LBE58:
 9340 6a3b 8B45F8   		movl	-8(%ebp), %eax
 9341 6a3e C9       		leave
 9342 6a3f C3       		ret
 9346              	Lscope38:
 9353              	_generate_enum_hash:
4898:str_merge.c   **** 
4899:str_merge.c   **** 
4900:str_merge.c   **** int generate_enum_hash(StrHashTable *table, U8 *isPop, wchar_t *str[])
4901:str_merge.c   **** {
 9355              	LM1145:
 9356 6a40 55       		pushl	%ebp
 9357 6a41 89E5     		movl	%esp, %ebp
 9358 6a43 83EC48   		subl	$72, %esp
4902:str_merge.c   ****     /*----------------------------------------------------------------*/
4903:str_merge.c   ****     /* Local Variables                                                */
4904:str_merge.c   ****     /*----------------------------------------------------------------*/
4905:str_merge.c   ****     int i = 0, ret = 0;
 9360              	LM1146:
 9361              	LBB59:
 9362 6a46 C745F400 		movl	$0, -12(%ebp)
 9362      000000
 9363 6a4d C745F000 		movl	$0, -16(%ebp)
 9363      000000
4906:str_merge.c   ****     StrIDNode node;
4907:str_merge.c   **** 
4908:str_merge.c   ****     /*----------------------------------------------------------------*/
4909:str_merge.c   ****     /* Code Body                                                      */
4910:str_merge.c   ****     /*----------------------------------------------------------------*/
4911:str_merge.c   ****     if(table == 0 || isPop == 0 || str == 0)
 9365              	LM1147:
 9366 6a54 837D0800 		cmpl	$0, 8(%ebp)
 9367 6a58 740C     		je	L536
 9368 6a5a 837D0C00 		cmpl	$0, 12(%ebp)
 9369 6a5e 7406     		je	L536
 9370 6a60 837D1000 		cmpl	$0, 16(%ebp)
 9371 6a64 7509     		jne	L535
 9372              	L536:
4912:str_merge.c   ****     {
4913:str_merge.c   ****         return -1; /* invalid input */
 9374              	LM1148:
 9375 6a66 C745D4FF 		movl	$-1, -44(%ebp)
 9375      FFFFFF
 9376 6a6d EB70     		jmp	L534
 9377              	L535:
4914:str_merge.c   ****     }
4915:str_merge.c   **** 
4916:str_merge.c   ****     for(i = 0; i < MAX_STRING_MAP_SIZE; ++i)
 9379              	LM1149:
 9380 6a6f C745F400 		movl	$0, -12(%ebp)
 9380      000000
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 261


 9381              	L537:
 9382 6a76 817DF4FE 		cmpl	$65534, -12(%ebp)
 9382      FF0000
 9383 6a7d 7E02     		jle	L540
 9384 6a7f EB57     		jmp	L538
 9385              	L540:
4917:str_merge.c   ****     {
4918:str_merge.c   ****         if(isPop[i])
 9387              	LM1150:
 9388 6a81 8B45F4   		movl	-12(%ebp), %eax
 9389 6a84 03450C   		addl	12(%ebp), %eax
 9390 6a87 803800   		cmpb	$0, (%eax)
 9391 6a8a 7445     		je	L539
4919:str_merge.c   ****         {
4920:str_merge.c   ****             node.id = i;
 9393              	LM1151:
 9394 6a8c 8B45F4   		movl	-12(%ebp), %eax
 9395 6a8f 668945DC 		movw	%ax, -36(%ebp)
4921:str_merge.c   ****             node.str = str[i];
 9397              	LM1152:
 9398 6a93 8B45F4   		movl	-12(%ebp), %eax
 9399 6a96 8D148500 		leal	0(,%eax,4), %edx
 9399      000000
 9400 6a9d 8B4510   		movl	16(%ebp), %eax
 9401 6aa0 8B0410   		movl	(%eax,%edx), %eax
 9402 6aa3 8945D8   		movl	%eax, -40(%ebp)
4922:str_merge.c   ****             node.next = 0;
 9404              	LM1153:
 9405 6aa6 C745E000 		movl	$0, -32(%ebp)
 9405      000000
4923:str_merge.c   ****             
4924:str_merge.c   ****             ret = hash_add(table, &node);
 9407              	LM1154:
 9408 6aad 8D45D8   		leal	-40(%ebp), %eax
 9409 6ab0 89442404 		movl	%eax, 4(%esp)
 9410 6ab4 8B4508   		movl	8(%ebp), %eax
 9411 6ab7 890424   		movl	%eax, (%esp)
 9412 6aba E88496FF 		call	_hash_add
 9412      FF
 9413 6abf 8945F0   		movl	%eax, -16(%ebp)
4925:str_merge.c   ****             if(ret < 0)
 9415              	LM1155:
 9416 6ac2 837DF000 		cmpl	$0, -16(%ebp)
 9417 6ac6 7909     		jns	L539
4926:str_merge.c   ****             {
4927:str_merge.c   ****                 return -2; /* hash add failed */
 9419              	LM1156:
 9420 6ac8 C745D4FE 		movl	$-2, -44(%ebp)
 9420      FFFFFF
 9421 6acf EB0E     		jmp	L534
 9423              	LM1157:
 9424              	L539:
 9425 6ad1 8D45F4   		leal	-12(%ebp), %eax
 9426 6ad4 FF00     		incl	(%eax)
 9427 6ad6 EB9E     		jmp	L537
 9428              	L538:
4928:str_merge.c   ****             }
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 262


4929:str_merge.c   ****         }
4930:str_merge.c   ****     }
4931:str_merge.c   **** 
4932:str_merge.c   ****     return 1;
 9430              	LM1158:
 9431 6ad8 C745D401 		movl	$1, -44(%ebp)
 9431      000000
4933:str_merge.c   **** }
 9433              	LM1159:
 9434              	L534:
 9435              	LBE59:
 9436 6adf 8B45D4   		movl	-44(%ebp), %eax
 9437 6ae2 C9       		leave
 9438 6ae3 C3       		ret
 9444              	Lscope39:
 9448              	.globl _get_fixed_string_total_len
 9450              	_get_fixed_string_total_len:
4934:str_merge.c   **** 
4935:str_merge.c   **** 
4936:str_merge.c   **** /*****************************************************************************
4937:str_merge.c   ****  * FUNCTION
4938:str_merge.c   ****  *  get_fixed_string_total_len
4939:str_merge.c   ****  * DESCRIPTION
4940:str_merge.c   ****  *  get the total length of fixed string
4941:str_merge.c   ****  * PARAMETERS
4942:str_merge.c   ****  *  void
4943:str_merge.c   ****  * RETURNS
4944:str_merge.c   ****  *   length of all the fixed string
4945:str_merge.c   ****  *****************************************************************************/
4946:str_merge.c   **** int get_fixed_string_total_len(FixedID *fixed)
4947:str_merge.c   **** {
 9452              	LM1160:
 9453 6ae4 55       		pushl	%ebp
 9454 6ae5 89E5     		movl	%esp, %ebp
 9455 6ae7 83EC18   		subl	$24, %esp
4948:str_merge.c   ****     /*----------------------------------------------------------------*/
4949:str_merge.c   ****     /* Local Variables                                                */
4950:str_merge.c   ****     /*----------------------------------------------------------------*/
4951:str_merge.c   ****     int i = 0, len = 0;
 9457              	LM1161:
 9458              	LBB60:
 9459 6aea C745FC00 		movl	$0, -4(%ebp)
 9459      000000
 9460 6af1 C745F800 		movl	$0, -8(%ebp)
 9460      000000
4952:str_merge.c   ****     
4953:str_merge.c   ****     /*----------------------------------------------------------------*/
4954:str_merge.c   ****     /* Code Body                                                      */
4955:str_merge.c   ****     /*----------------------------------------------------------------*/
4956:str_merge.c   ****     for(i = 0; i < MAX_STRING_MAP_SIZE; ++i)
 9462              	LM1162:
 9463 6af8 C745FC00 		movl	$0, -4(%ebp)
 9463      000000
 9464              	L544:
 9465 6aff 817DFCFE 		cmpl	$65534, -4(%ebp)
 9465      FF0000
 9466 6b06 7E02     		jle	L547
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 263


 9467 6b08 EB5C     		jmp	L545
 9468              	L547:
4957:str_merge.c   ****     {
4958:str_merge.c   ****         if(StrIsPopulate[i] && fixed->fixed_id_flag[i] == NO_TRANSLATE_FLAG)
 9470              	LM1163:
 9471 6b0a 8B45FC   		movl	-4(%ebp), %eax
 9472 6b0d 05000000 		addl	$_StrIsPopulate, %eax
 9472      00
 9473 6b12 803800   		cmpb	$0, (%eax)
 9474 6b15 7448     		je	L546
 9475 6b17 8B4508   		movl	8(%ebp), %eax
 9476 6b1a 8B55FC   		movl	-4(%ebp), %edx
 9477 6b1d 8B4004   		movl	4(%eax), %eax
 9478 6b20 01D0     		addl	%edx, %eax
 9479 6b22 803801   		cmpb	$1, (%eax)
 9480 6b25 7538     		jne	L546
4959:str_merge.c   ****         {
4960:str_merge.c   ****             if(Str[i][0] != '\0')
 9482              	LM1164:
 9483 6b27 8B45FC   		movl	-4(%ebp), %eax
 9484 6b2a 8B048500 		movl	_Str(,%eax,4), %eax
 9484      000000
 9485 6b31 803800   		cmpb	$0, (%eax)
 9486 6b34 7429     		je	L546
4961:str_merge.c   ****             {
4962:str_merge.c   ****                 int l = wcslen((wchar_t*)Str[i]);
 9488              	LM1165:
 9489              	LBB61:
 9490 6b36 8B45FC   		movl	-4(%ebp), %eax
 9491 6b39 8B048500 		movl	_Str(,%eax,4), %eax
 9491      000000
 9492 6b40 890424   		movl	%eax, (%esp)
 9493 6b43 E8000000 		call	_wcslen
 9493      00
 9494 6b48 8945F4   		movl	%eax, -12(%ebp)
4963:str_merge.c   ****                 if(l > 0)
 9496              	LM1166:
 9497 6b4b 837DF400 		cmpl	$0, -12(%ebp)
 9498 6b4f 7E0E     		jle	L546
4964:str_merge.c   ****                 {
4965:str_merge.c   ****                     len += (l + 1)*2;
 9500              	LM1167:
 9501 6b51 8B45F4   		movl	-12(%ebp), %eax
 9502 6b54 01C0     		addl	%eax, %eax
 9503 6b56 0345F8   		addl	-8(%ebp), %eax
 9504 6b59 83C002   		addl	$2, %eax
 9505 6b5c 8945F8   		movl	%eax, -8(%ebp)
 9507              	LM1168:
 9508              	L546:
 9509 6b5f 8D45FC   		leal	-4(%ebp), %eax
 9510              	LBE61:
 9511 6b62 FF00     		incl	(%eax)
 9512 6b64 EB99     		jmp	L544
 9513              	L545:
4966:str_merge.c   ****                 }
4967:str_merge.c   ****             }
4968:str_merge.c   ****         }
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 264


4969:str_merge.c   ****     }
4970:str_merge.c   **** 
4971:str_merge.c   ****     return len;
 9515              	LM1169:
 9516 6b66 8B45F8   		movl	-8(%ebp), %eax
4972:str_merge.c   **** }
 9518              	LM1170:
 9519 6b69 C9       		leave
 9520 6b6a C3       		ret
 9521              	LBE60:
 9529              	Lscope40:
 9531 6b6b 90909090 		.align 32
 9531      90909090 
 9531      90909090 
 9531      90909090 
 9531      90909090 
 9532              	LC130:
 9533 6b80 2A2A2A2A 		.ascii "********start run generate_fixed_str1************\12\0"
 9533      2A2A2A2A 
 9533      73746172 
 9533      74207275 
 9533      6E206765 
 9534 6bb3 8DB60000 		.align 32
 9534      00008DBC 
 9534      27000000 
 9534      00
 9535              	LC131:
 9536 6bc0 2A2A2A2A 		.ascii "********start run generate_fixed_str2************\12\0"
 9536      2A2A2A2A 
 9536      73746172 
 9536      74207275 
 9536      6E206765 
 9537 6bf3 8DB60000 		.align 32
 9537      00008DBC 
 9537      27000000 
 9537      00
 9538              	LC132:
 9539 6c00 2E2E5C2E 		.ascii "..\\..\\Customer\\ResGenerator\\debug\\no_translate_string.txt\0"
 9539      2E5C4375 
 9539      73746F6D 
 9539      65725C52 
 9539      65734765 
 9540 6c3a 8DB60000 		.align 32
 9540      0000
 9541              	LC133:
 9542 6c40 6F70656E 		.ascii "open ResGenerator\\debug\\fixed_string.txt failed!\0"
 9542      20526573 
 9542      47656E65 
 9542      7261746F 
 9542      725C6465 
 9543 6c71 EB0D9090 		.align 32
 9543      90909090 
 9543      90909090 
 9543      909090
 9544              	LC134:
 9545 6c80 4552524F 		.ascii "ERROR:open ResGenerator\\debug\\fixed_string.txt failed!!\12\0"
 9545      523A6F70 
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 265


 9545      656E2052 
 9545      65734765 
 9545      6E657261 
 9546 6cb9 8DB42600 		.align 32
 9546      000000
 9547              	LC135:
 9548 6cc0 454E554D 		.ascii "ENUM_ID\11ID_VALUE\11ID_STR\11STR LENGTH\11duplicate ID\12\0"
 9548      5F494409 
 9548      49445F56 
 9548      414C5545 
 9548      0949445F 
 9549 6cf1 EB0D9090 		.align 32
 9549      90909090 
 9549      90909090 
 9549      909090
 9550              	LC136:
 9551 6d00 5F5F616C 		.ascii "__align(4) const CUSTOM_STRING StrRes_Fixed[] = {\12\0"
 9551      69676E28 
 9551      34292063 
 9551      6F6E7374 
 9551      20435553 
 9552              	LC137:
 9553 6d33 4C414E47 		.ascii "LANG: FIXED\12\0"
 9553      3A204649 
 9553      5845440A 
 9553      00
 9554              		.align 32
 9555              	LC138:
 9556 6d40 44415441 		.ascii "DATA:\12__align(4) const CUSTOM_STRING StrRes_Fixed[] = {\12\0"
 9556      3A0A5F5F 
 9556      616C6967 
 9556      6E283429 
 9556      20636F6E 
 9557 6d79 8DB42600 		.align 32
 9557      000000
 9558              	LC139:
 9559 6d80 636F6E73 		.ascii "const CUSTOM_STRING_MAP_16 StrMap_Fixed[] = {\12\0"
 9559      74204355 
 9559      53544F4D 
 9559      5F535452 
 9559      494E475F 
 9560 6daf 90909090 		.align 32
 9560      90909090 
 9560      90909090 
 9560      90909090 
 9560      90
 9561              	LC140:
 9562 6dc0 636F6E73 		.ascii "const CUSTOM_STRING_MAP StrMap_Fixed[] = {\12\0"
 9562      74204355 
 9562      53544F4D 
 9562      5F535452 
 9562      494E475F 
 9563              	LC141:
 9564 6dec 7D3B0A0A 		.ascii "};\12\12\0"
 9564      00
 9565 6df1 EB0D9090 		.align 32
 9565      90909090 
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 266


 9565      90909090 
 9565      909090
 9566              	LC142:
 9567 6e00 65787465 		.ascii "extern const CUSTOM_STRING_MAP_16 StrMap_Fixed[];\12\0"
 9567      726E2063 
 9567      6F6E7374 
 9567      20435553 
 9567      544F4D5F 
 9568 6e33 8DB60000 		.align 32
 9568      00008DBC 
 9568      27000000 
 9568      00
 9569              	LC143:
 9570 6e40 65787465 		.ascii "extern const CUSTOM_STRING_MAP StrMap_Fixed[];\12\0"
 9570      726E2063 
 9570      6F6E7374 
 9570      20435553 
 9570      544F4D5F 
 9578              	_generate_fixed_str:
4973:str_merge.c   **** 
4974:str_merge.c   **** 
4975:str_merge.c   **** /*****************************************************************************
4976:str_merge.c   ****  * FUNCTION
4977:str_merge.c   ****  *  generate_fixed_str
4978:str_merge.c   ****  * DESCRIPTION
4979:str_merge.c   ****  *  fixed string id populate function
4980:str_merge.c   ****  * PARAMETERS
4981:str_merge.c   ****  *  res      :[IN] CustStrRes.c file handle
4982:str_merge.c   ****  *  map    :[IN] CustStrMap.c file handle
4983:str_merge.c   ****  *  fixed    :[IN] fixed string id information
4984:str_merge.c   ****  * RETURNS
4985:str_merge.c   ****  *  Return 1 on success, return -1 if input is invalid, return-2 if malloc faileds
4986:str_merge.c   ****  *****************************************************************************/
4987:str_merge.c   **** static int generate_fixed_str(FILE *res, FILE *map, FILE *resMeta, FILE *mapMeta ,FixedID *fixed)
4988:str_merge.c   **** {
 9580              	LM1171:
 9581 6e70 55       		pushl	%ebp
 9582 6e71 89E5     		movl	%esp, %ebp
 9583 6e73 83EC68   		subl	$104, %esp
4989:str_merge.c   ****     /*----------------------------------------------------------------*/
4990:str_merge.c   ****     /* Local Variables                                                */
4991:str_merge.c   ****     /*----------------------------------------------------------------*/
4992:str_merge.c   ****     U16 did = 0;
 9585              	LM1172:
 9586              	LBB62:
 9587 6e76 66C745F6 		movw	$0, -10(%ebp)
 9587      0000
4993:str_merge.c   ****     int i = 0, total_len = 0;
 9589              	LM1173:
 9590 6e7c C745F000 		movl	$0, -16(%ebp)
 9590      000000
 9591 6e83 C745EC00 		movl	$0, -20(%ebp)
 9591      000000
4994:str_merge.c   ****     FILE *log = 0;
 9593              	LM1174:
 9594 6e8a C745E800 		movl	$0, -24(%ebp)
 9594      000000
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 267


4995:str_merge.c   ****     int str_count = 0; /* total string count */
 9596              	LM1175:
 9597 6e91 C745E400 		movl	$0, -28(%ebp)
 9597      000000
4996:str_merge.c   ****     int *offset = 0; /* offset array for each ID */
 9599              	LM1176:
 9600 6e98 C745E000 		movl	$0, -32(%ebp)
 9600      000000
4997:str_merge.c   ****     int curr_pos = 2; /* current max offset value */
 9602              	LM1177:
 9603 6e9f C745DC02 		movl	$2, -36(%ebp)
 9603      000000
4998:str_merge.c   ****     StrIDNode *node = 0, tmp;
 9605              	LM1178:
 9606 6ea6 C745D800 		movl	$0, -40(%ebp)
 9606      000000
4999:str_merge.c   **** #if defined(__MMI_RESOURCE_STR_ZLIB_COMPRESS__)
5000:str_merge.c   ****     U8 *data = 0, *p = 0;
5001:str_merge.c   **** #endif /* __MMI_RESOURCE_STR_ZLIB_COMPRESS__ */
5002:str_merge.c   **** 
5003:str_merge.c   ****     /*----------------------------------------------------------------*/
5004:str_merge.c   ****     /* Code Body                                                      */
5005:str_merge.c   ****     /*----------------------------------------------------------------*/
5006:str_merge.c   ****     fprintf(stderr, "********start run generate_fixed_str1************\n");
 9608              	LM1179:
 9609 6ead C7442404 		movl	$LC130, 4(%esp)
 9609      806B0000 
 9610 6eb5 A1000000 		movl	__imp___iob, %eax
 9610      00
 9611 6eba 83C040   		addl	$64, %eax
 9612 6ebd 890424   		movl	%eax, (%esp)
 9613 6ec0 E8000000 		call	_fprintf
 9613      00
5007:str_merge.c   ****     if(res == 0 || map == 0 || resMeta==0 || fixed == 0 || mapMeta ==0 || fixed->enum_id_tb == 0 ||
 9615              	LM1180:
 9616 6ec5 837D0800 		cmpl	$0, 8(%ebp)
 9617 6ec9 742A     		je	L553
 9618 6ecb 837D0C00 		cmpl	$0, 12(%ebp)
 9619 6ecf 7424     		je	L553
 9620 6ed1 837D1000 		cmpl	$0, 16(%ebp)
 9621 6ed5 741E     		je	L553
 9622 6ed7 837D1800 		cmpl	$0, 24(%ebp)
 9623 6edb 7418     		je	L553
 9624 6edd 837D1400 		cmpl	$0, 20(%ebp)
 9625 6ee1 7412     		je	L553
 9626 6ee3 8B4518   		movl	24(%ebp), %eax
 9627 6ee6 83780800 		cmpl	$0, 8(%eax)
 9628 6eea 7409     		je	L553
 9629 6eec 8B4518   		movl	24(%ebp), %eax
 9630 6eef 83780C00 		cmpl	$0, 12(%eax)
 9631 6ef3 750C     		jne	L552
 9632              	L553:
5008:str_merge.c   ****     {
5009:str_merge.c   ****         return -1; /* invalid input */
 9634              	LM1181:
 9635 6ef5 C745C4FF 		movl	$-1, -60(%ebp)
 9635      FFFFFF
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 268


 9636 6efc E92B0500 		jmp	L551
 9636      00
 9637              	L552:
5010:str_merge.c   ****     }
5011:str_merge.c   ****     fprintf(stderr, "********start run generate_fixed_str2************\n");
 9639              	LM1182:
 9640 6f01 C7442404 		movl	$LC131, 4(%esp)
 9640      C06B0000 
 9641 6f09 A1000000 		movl	__imp___iob, %eax
 9641      00
 9642 6f0e 83C040   		addl	$64, %eax
 9643 6f11 890424   		movl	%eax, (%esp)
 9644 6f14 E8000000 		call	_fprintf
 9644      00
5012:str_merge.c   **** 
5013:str_merge.c   ****     /* get the total length of fixed string id */
5014:str_merge.c   ****     total_len = get_fixed_string_total_len(fixed);
 9646              	LM1183:
 9647 6f19 8B4518   		movl	24(%ebp), %eax
 9648 6f1c 890424   		movl	%eax, (%esp)
 9649 6f1f E8C0FBFF 		call	_get_fixed_string_total_len
 9649      FF
 9650 6f24 8945EC   		movl	%eax, -20(%ebp)
5015:str_merge.c   ****     if(total_len/2 > 0xFFFF)
 9652              	LM1184:
 9653 6f27 8B55EC   		movl	-20(%ebp), %edx
 9654 6f2a 89D0     		movl	%edx, %eax
 9655 6f2c C1F81F   		sarl	$31, %eax
 9656 6f2f C1E81F   		shrl	$31, %eax
 9657 6f32 8D0410   		leal	(%eax,%edx), %eax
 9658 6f35 D1F8     		sarl	%eax
 9659 6f37 3DFFFF00 		cmpl	$65535, %eax
 9659      00
 9660 6f3c 7E0C     		jle	L554
5016:str_merge.c   ****     {
5017:str_merge.c   ****         fixed_result.is16bit = MMI_FALSE;
 9662              	LM1185:
 9663 6f3e C7050400 		movl	$0, _fixed_result+4
 9663      00000000 
 9663      0000
 9664 6f48 EB0A     		jmp	L555
 9665              	L554:
5018:str_merge.c   ****     }
5019:str_merge.c   ****     else
5020:str_merge.c   ****     {
5021:str_merge.c   ****         fixed_result.is16bit = MMI_TRUE;
 9667              	LM1186:
 9668 6f4a C7050400 		movl	$1, _fixed_result+4
 9668      00000100 
 9668      0000
 9669              	L555:
5022:str_merge.c   ****     }
5023:str_merge.c   **** 
5024:str_merge.c   ****     /* open log file */
5025:str_merge.c   ****     log = fopen(FIXED_STRING_LOG, "w");
 9671              	LM1187:
 9672 6f54 C7442404 		movl	$LC26, 4(%esp)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 269


 9672      7F150000 
 9673 6f5c C7042400 		movl	$LC132, (%esp)
 9673      6C0000
 9674 6f63 E8000000 		call	_fopen
 9674      00
 9675 6f68 8945E8   		movl	%eax, -24(%ebp)
5026:str_merge.c   ****     if(log == NULL)
 9677              	LM1188:
 9678 6f6b 837DE800 		cmpl	$0, -24(%ebp)
 9679 6f6f 7536     		jne	L556
5027:str_merge.c   ****     {
5028:str_merge.c   ****         STRMERG_LOG_E("open ResGenerator\\debug\\fixed_string.txt failed!");
 9681              	LM1189:
 9682 6f71 C7442408 		movl	$LC133, 8(%esp)
 9682      406C0000 
 9683 6f79 C7442404 		movl	$LC3, 4(%esp)
 9683      4B040000 
 9684 6f81 C7042403 		movl	$3, (%esp)
 9684      000000
 9685 6f88 E8000000 		call	_reslog_adaptor_log
 9685      00
5029:str_merge.c   ****         fprintf(stderr, "ERROR:open ResGenerator\\debug\\fixed_string.txt failed!!\n");
 9687              	LM1190:
 9688 6f8d C7442404 		movl	$LC134, 4(%esp)
 9688      806C0000 
 9689 6f95 A1000000 		movl	__imp___iob, %eax
 9689      00
 9690 6f9a 83C040   		addl	$64, %eax
 9691 6f9d 890424   		movl	%eax, (%esp)
 9692 6fa0 E8000000 		call	_fprintf
 9692      00
 9693 6fa5 EB13     		jmp	L557
 9694              	L556:
5030:str_merge.c   ****     }
5031:str_merge.c   ****     else
5032:str_merge.c   ****     {
5033:str_merge.c   ****         fprintf(log, "ENUM_ID\tID_VALUE\tID_STR\tSTR LENGTH\tduplicate ID\n");
 9696              	LM1191:
 9697 6fa7 C7442404 		movl	$LC135, 4(%esp)
 9697      C06C0000 
 9698 6faf 8B45E8   		movl	-24(%ebp), %eax
 9699 6fb2 890424   		movl	%eax, (%esp)
 9700 6fb5 E8000000 		call	_fprintf
 9700      00
 9701              	L557:
5034:str_merge.c   ****     }
5035:str_merge.c   ****     
5036:str_merge.c   ****     /* initialize offset */
5037:str_merge.c   ****     offset = (int*)malloc(sizeof(int) * MAX_STRING_MAP_SIZE);
 9703              	LM1192:
 9704 6fba C70424FC 		movl	$262140, (%esp)
 9704      FF0300
 9705 6fc1 E8000000 		call	_malloc
 9705      00
 9706 6fc6 8945E0   		movl	%eax, -32(%ebp)
5038:str_merge.c   ****     if(offset == 0)
 9708              	LM1193:
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 270


 9709 6fc9 837DE000 		cmpl	$0, -32(%ebp)
 9710 6fcd 7517     		jne	L558
5039:str_merge.c   ****     {
5040:str_merge.c   ****         fclose(log);
 9712              	LM1194:
 9713 6fcf 8B45E8   		movl	-24(%ebp), %eax
 9714 6fd2 890424   		movl	%eax, (%esp)
 9715 6fd5 E8000000 		call	_fclose
 9715      00
5041:str_merge.c   ****         return -2; /* malloc memory failed */
 9717              	LM1195:
 9718 6fda C745C4FE 		movl	$-2, -60(%ebp)
 9718      FFFFFF
 9719 6fe1 E9460400 		jmp	L551
 9719      00
 9720              	L558:
5042:str_merge.c   ****     }
5043:str_merge.c   ****     for(i = 0; i < MAX_STRING_MAP_SIZE; ++i)
 9722              	LM1196:
 9723 6fe6 C745F000 		movl	$0, -16(%ebp)
 9723      000000
 9724              	L559:
 9725 6fed 817DF0FE 		cmpl	$65534, -16(%ebp)
 9725      FF0000
 9726 6ff4 7E02     		jle	L562
 9727 6ff6 EB1B     		jmp	L560
 9728              	L562:
5044:str_merge.c   ****     {
5045:str_merge.c   ****         offset[i] = -1;
 9730              	LM1197:
 9731 6ff8 8B45F0   		movl	-16(%ebp), %eax
 9732 6ffb 8D148500 		leal	0(,%eax,4), %edx
 9732      000000
 9733 7002 8B45E0   		movl	-32(%ebp), %eax
 9734 7005 C70410FF 		movl	$-1, (%eax,%edx)
 9734      FFFFFF
 9736              	LM1198:
 9737 700c 8D45F0   		leal	-16(%ebp), %eax
 9738 700f FF00     		incl	(%eax)
 9739 7011 EBDA     		jmp	L559
 9740              	L560:
5046:str_merge.c   ****     }
5047:str_merge.c   ****     
5048:str_merge.c   **** #if defined(__MMI_RESOURCE_STR_ZLIB_COMPRESS__)
5049:str_merge.c   ****     data = (U8*)malloc((total_len + 4) * sizeof(U8));
5050:str_merge.c   ****     if(data == 0)
5051:str_merge.c   ****     {
5052:str_merge.c   ****         fclose(log);
5053:str_merge.c   ****         free(offset);
5054:str_merge.c   ****         return -2; 
5055:str_merge.c   ****     }
5056:str_merge.c   ****     data[0] = '\0';
5057:str_merge.c   ****     data[1] = '\0';
5058:str_merge.c   ****     p = data + 2;
5059:str_merge.c   **** #else /* __MMI_RESOURCE_STR_ZLIB_COMPRESS__ */
5060:str_merge.c   ****     /* write the head of the data and map array */
5061:str_merge.c   ****     fprintf(res, "__align(4) const CUSTOM_STRING StrRes_Fixed[] = {\n");
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 271


 9742              	LM1199:
 9743 7013 C7442404 		movl	$LC136, 4(%esp)
 9743      006D0000 
 9744 701b 8B4508   		movl	8(%ebp), %eax
 9745 701e 890424   		movl	%eax, (%esp)
 9746 7021 E8000000 		call	_fprintf
 9746      00
5062:str_merge.c   ****     fprintf(res, "0x00, 0x00,\n");
 9748              	LM1200:
 9749 7026 C7442404 		movl	$LC90, 4(%esp)
 9749      57470000 
 9750 702e 8B4508   		movl	8(%ebp), %eax
 9751 7031 890424   		movl	%eax, (%esp)
 9752 7034 E8000000 		call	_fprintf
 9752      00
5063:str_merge.c   ****     
5064:str_merge.c   ****     
5065:str_merge.c   ****     /* output language map meta file*/
5066:str_merge.c   ****     fprintf(resMeta, "########################################################\n");
 9754              	LM1201:
 9755 7039 C7442404 		movl	$LC84, 4(%esp)
 9755      A0460000 
 9756 7041 8B4510   		movl	16(%ebp), %eax
 9757 7044 890424   		movl	%eax, (%esp)
 9758 7047 E8000000 		call	_fprintf
 9758      00
5067:str_merge.c   ****     fprintf(resMeta, "TYPE: RES\n");    
 9760              	LM1202:
 9761 704c C7442404 		movl	$LC85, 4(%esp)
 9761      DA460000 
 9762 7054 8B4510   		movl	16(%ebp), %eax
 9763 7057 890424   		movl	%eax, (%esp)
 9764 705a E8000000 		call	_fprintf
 9764      00
5068:str_merge.c   ****     fprintf(resMeta, "LANG: FIXED\n"); 
 9766              	LM1203:
 9767 705f C7442404 		movl	$LC137, 4(%esp)
 9767      336D0000 
 9768 7067 8B4510   		movl	16(%ebp), %eax
 9769 706a 890424   		movl	%eax, (%esp)
 9770 706d E8000000 		call	_fprintf
 9770      00
5069:str_merge.c   ****     fprintf(resMeta, "DATA:\n__align(4) const CUSTOM_STRING StrRes_Fixed[] = {\n");
 9772              	LM1204:
 9773 7072 C7442404 		movl	$LC138, 4(%esp)
 9773      406D0000 
 9774 707a 8B4510   		movl	16(%ebp), %eax
 9775 707d 890424   		movl	%eax, (%esp)
 9776 7080 E8000000 		call	_fprintf
 9776      00
5070:str_merge.c   ****     fprintf(resMeta, "0x00, 0x00,\n");
 9778              	LM1205:
 9779 7085 C7442404 		movl	$LC90, 4(%esp)
 9779      57470000 
 9780 708d 8B4510   		movl	16(%ebp), %eax
 9781 7090 890424   		movl	%eax, (%esp)
 9782 7093 E8000000 		call	_fprintf
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 272


 9782      00
5071:str_merge.c   ****     
5072:str_merge.c   ****     fprintf(mapMeta, "########################################################\n");
 9784              	LM1206:
 9785 7098 C7442404 		movl	$LC84, 4(%esp)
 9785      A0460000 
 9786 70a0 8B4514   		movl	20(%ebp), %eax
 9787 70a3 890424   		movl	%eax, (%esp)
 9788 70a6 E8000000 		call	_fprintf
 9788      00
5073:str_merge.c   ****     fprintf(mapMeta, "TYPE: MAP\n");
 9790              	LM1207:
 9791 70ab C7442404 		movl	$LC100, 4(%esp)
 9791      21490000 
 9792 70b3 8B4514   		movl	20(%ebp), %eax
 9793 70b6 890424   		movl	%eax, (%esp)
 9794 70b9 E8000000 		call	_fprintf
 9794      00
5074:str_merge.c   ****     fprintf(mapMeta, "LANG: FIXED\n");
 9796              	LM1208:
 9797 70be C7442404 		movl	$LC137, 4(%esp)
 9797      336D0000 
 9798 70c6 8B4514   		movl	20(%ebp), %eax
 9799 70c9 890424   		movl	%eax, (%esp)
 9800 70cc E8000000 		call	_fprintf
 9800      00
5075:str_merge.c   ****     if(fixed_result.is16bit)
 9802              	LM1209:
 9803 70d1 833D0400 		cmpl	$0, _fixed_result+4
 9803      000000
 9804 70d8 744E     		je	L563
5076:str_merge.c   ****     {
5077:str_merge.c   ****         fprintf(map, "const CUSTOM_STRING_MAP_16 StrMap_Fixed[] = {\n");
 9806              	LM1210:
 9807 70da C7442404 		movl	$LC139, 4(%esp)
 9807      806D0000 
 9808 70e2 8B450C   		movl	12(%ebp), %eax
 9809 70e5 890424   		movl	%eax, (%esp)
 9810 70e8 E8000000 		call	_fprintf
 9810      00
5078:str_merge.c   ****         fprintf(mapMeta, "BIT_MODE: 16\n");
 9812              	LM1211:
 9813 70ed C7442404 		movl	$LC102, 4(%esp)
 9813      77490000 
 9814 70f5 8B4514   		movl	20(%ebp), %eax
 9815 70f8 890424   		movl	%eax, (%esp)
 9816 70fb E8000000 		call	_fprintf
 9816      00
5079:str_merge.c   ****         fprintf(mapMeta, "DATA:\n");
 9818              	LM1212:
 9819 7100 C7442404 		movl	$LC99, 4(%esp)
 9819      1A490000 
 9820 7108 8B4514   		movl	20(%ebp), %eax
 9821 710b 890424   		movl	%eax, (%esp)
 9822 710e E8000000 		call	_fprintf
 9822      00
5080:str_merge.c   ****         fprintf(mapMeta, "const CUSTOM_STRING_MAP_16 StrMap_Fixed[] = {\n");
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 273


 9824              	LM1213:
 9825 7113 C7442404 		movl	$LC139, 4(%esp)
 9825      806D0000 
 9826 711b 8B4514   		movl	20(%ebp), %eax
 9827 711e 890424   		movl	%eax, (%esp)
 9828 7121 E8000000 		call	_fprintf
 9828      00
 9829 7126 EB4C     		jmp	L564
 9830              	L563:
5081:str_merge.c   ****     }
5082:str_merge.c   ****     else
5083:str_merge.c   ****     {
5084:str_merge.c   ****         fprintf(map, "const CUSTOM_STRING_MAP StrMap_Fixed[] = {\n");
 9832              	LM1214:
 9833 7128 C7442404 		movl	$LC140, 4(%esp)
 9833      C06D0000 
 9834 7130 8B450C   		movl	12(%ebp), %eax
 9835 7133 890424   		movl	%eax, (%esp)
 9836 7136 E8000000 		call	_fprintf
 9836      00
5085:str_merge.c   ****         fprintf(mapMeta, "BIT_MODE: 32\n");
 9838              	LM1215:
 9839 713b C7442404 		movl	$LC104, 4(%esp)
 9839      C9490000 
 9840 7143 8B4514   		movl	20(%ebp), %eax
 9841 7146 890424   		movl	%eax, (%esp)
 9842 7149 E8000000 		call	_fprintf
 9842      00
5086:str_merge.c   ****         fprintf(mapMeta, "DATA:\n");
 9844              	LM1216:
 9845 714e C7442404 		movl	$LC99, 4(%esp)
 9845      1A490000 
 9846 7156 8B4514   		movl	20(%ebp), %eax
 9847 7159 890424   		movl	%eax, (%esp)
 9848 715c E8000000 		call	_fprintf
 9848      00
5087:str_merge.c   ****         fprintf(mapMeta, "const CUSTOM_STRING_MAP StrMap_Fixed[] = {\n");
 9850              	LM1217:
 9851 7161 C7442404 		movl	$LC140, 4(%esp)
 9851      C06D0000 
 9852 7169 8B4514   		movl	20(%ebp), %eax
 9853 716c 890424   		movl	%eax, (%esp)
 9854 716f E8000000 		call	_fprintf
 9854      00
 9855              	L564:
5088:str_merge.c   ****     }
5089:str_merge.c   **** #endif /* __MMI_RESOURCE_STR_ZLIB_COMPRESS__ */
5090:str_merge.c   **** 
5091:str_merge.c   ****     for(i = 0; i < MAX_STRING_MAP_SIZE; ++i)
 9857              	LM1218:
 9858 7174 C745F000 		movl	$0, -16(%ebp)
 9858      000000
 9859              	L565:
 9860 717b 817DF0FE 		cmpl	$65534, -16(%ebp)
 9860      FF0000
 9861 7182 7E05     		jle	L568
 9862 7184 E9AF0100 		jmp	L566
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 274


 9862      00
 9863              	L568:
5092:str_merge.c   ****     {
5093:str_merge.c   ****         if(StrIsPopulate[i] && fixed->fixed_id_flag[i] == NO_TRANSLATE_FLAG)
 9865              	LM1219:
 9866 7189 8B45F0   		movl	-16(%ebp), %eax
 9867 718c 05000000 		addl	$_StrIsPopulate, %eax
 9867      00
 9868 7191 803800   		cmpb	$0, (%eax)
 9869 7194 0F849401 		je	L567
 9869      0000
 9870 719a 8B4518   		movl	24(%ebp), %eax
 9871 719d 8B55F0   		movl	-16(%ebp), %edx
 9872 71a0 8B4004   		movl	4(%eax), %eax
 9873 71a3 01D0     		addl	%edx, %eax
 9874 71a5 803801   		cmpb	$1, (%eax)
 9875 71a8 0F858001 		jne	L567
 9875      0000
5094:str_merge.c   ****         {
5095:str_merge.c   ****             fixed->id_count += 1;
 9877              	LM1220:
 9878 71ae 8B5518   		movl	24(%ebp), %edx
 9879 71b1 8B4518   		movl	24(%ebp), %eax
 9880 71b4 0FB700   		movzwl	(%eax), %eax
 9881 71b7 40       		incl	%eax
 9882 71b8 668902   		movw	%ax, (%edx)
5096:str_merge.c   ****             node = hash_search(fixed->str_id_tb, Str[i]);
 9884              	LM1221:
 9885 71bb 8B45F0   		movl	-16(%ebp), %eax
 9886 71be 8B048500 		movl	_Str(,%eax,4), %eax
 9886      000000
 9887 71c5 89442404 		movl	%eax, 4(%esp)
 9888 71c9 8B4518   		movl	24(%ebp), %eax
 9889 71cc 8B400C   		movl	12(%eax), %eax
 9890 71cf 890424   		movl	%eax, (%esp)
 9891 71d2 E8E590FF 		call	_hash_search
 9891      FF
 9892 71d7 8945D8   		movl	%eax, -40(%ebp)
5097:str_merge.c   ****             if(node == 0)
 9894              	LM1222:
 9895 71da 837DD800 		cmpl	$0, -40(%ebp)
 9896 71de 0F85D800 		jne	L570
 9896      0000
5098:str_merge.c   ****             {        
5099:str_merge.c   ****                 if(Str[i][0] != '\0') /* string has default value */
 9898              	LM1223:
 9899 71e4 8B45F0   		movl	-16(%ebp), %eax
 9900 71e7 8B048500 		movl	_Str(,%eax,4), %eax
 9900      000000
 9901 71ee 803800   		cmpb	$0, (%eax)
 9902 71f1 0F848D00 		je	L571
 9902      0000
5100:str_merge.c   ****                 {
5101:str_merge.c   ****                     //str_count++;
5102:str_merge.c   ****                     fixed_result.nTotalStrRes += 1;
 9904              	LM1224:
 9905 71f7 0FB70500 		movzwl	_fixed_result, %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 275


 9905      000000
 9906 71fe 40       		incl	%eax
 9907 71ff 66A30000 		movw	%ax, _fixed_result
 9907      0000
5103:str_merge.c   **** 
5104:str_merge.c   ****                     /* initialize node */
5105:str_merge.c   ****                     tmp.str = Str[i];
 9909              	LM1225:
 9910 7205 8B45F0   		movl	-16(%ebp), %eax
 9911 7208 8B048500 		movl	_Str(,%eax,4), %eax
 9911      000000
 9912 720f 8945C8   		movl	%eax, -56(%ebp)
5106:str_merge.c   ****                     tmp.id = i;
 9914              	LM1226:
 9915 7212 8B45F0   		movl	-16(%ebp), %eax
 9916 7215 668945CC 		movw	%ax, -52(%ebp)
5107:str_merge.c   ****                     tmp.next = 0;
 9918              	LM1227:
 9919 7219 C745D000 		movl	$0, -48(%ebp)
 9919      000000
5108:str_merge.c   **** 
5109:str_merge.c   ****                     /* add new node into hash table */
5110:str_merge.c   ****                     hash_add(fixed->str_id_tb, &tmp);
 9921              	LM1228:
 9922 7220 8D45C8   		leal	-56(%ebp), %eax
 9923 7223 89442404 		movl	%eax, 4(%esp)
 9924 7227 8B4518   		movl	24(%ebp), %eax
 9925 722a 8B400C   		movl	12(%eax), %eax
 9926 722d 890424   		movl	%eax, (%esp)
 9927 7230 E80E8FFF 		call	_hash_add
 9927      FF
5111:str_merge.c   ****                     
5112:str_merge.c   ****                 #if defined(__MMI_RESOURCE_STR_ZLIB_COMPRESS__)
5113:str_merge.c   ****                     curr_pos += write_fixed_str_mem(&p, Str[i], curr_pos, offset, i);
5114:str_merge.c   ****                 #else /* __MMI_RESOURCE_STR_ZLIB_COMPRESS__ */
5115:str_merge.c   ****                     /* write StrRes & StrMap into file */
5116:str_merge.c   ****                     curr_pos += write_fixed_str_offset(res, map, resMeta, mapMeta, Str[i], curr_pos
 9929              	LM1229:
 9930 7235 8B45F0   		movl	-16(%ebp), %eax
 9931 7238 8944241C 		movl	%eax, 28(%esp)
 9932 723c 8B45E0   		movl	-32(%ebp), %eax
 9933 723f 89442418 		movl	%eax, 24(%esp)
 9934 7243 8B45DC   		movl	-36(%ebp), %eax
 9935 7246 89442414 		movl	%eax, 20(%esp)
 9936 724a 8B45F0   		movl	-16(%ebp), %eax
 9937 724d 8B048500 		movl	_Str(,%eax,4), %eax
 9937      000000
 9938 7254 89442410 		movl	%eax, 16(%esp)
 9939 7258 8B4514   		movl	20(%ebp), %eax
 9940 725b 8944240C 		movl	%eax, 12(%esp)
 9941 725f 8B4510   		movl	16(%ebp), %eax
 9942 7262 89442408 		movl	%eax, 8(%esp)
 9943 7266 8B450C   		movl	12(%ebp), %eax
 9944 7269 89442404 		movl	%eax, 4(%esp)
 9945 726d 8B4508   		movl	8(%ebp), %eax
 9946 7270 890424   		movl	%eax, (%esp)
 9947 7273 E8F40200 		call	_write_fixed_str_offset
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 276


 9947      00
 9948 7278 89C2     		movl	%eax, %edx
 9949 727a 8D45DC   		leal	-36(%ebp), %eax
 9950 727d 0110     		addl	%edx, (%eax)
 9951 727f E9890000 		jmp	L573
 9951      00
 9952              	L571:
5117:str_merge.c   ****                 #endif /* __MMI_RESOURCE_STR_ZLIB_COMPRESS__ */
5118:str_merge.c   ****                 }
5119:str_merge.c   ****                 else /* string has not default value */
5120:str_merge.c   ****                 {
5121:str_merge.c   ****                 #if defined(__MMI_RESOURCE_STR_ZLIB_COMPRESS__)
5122:str_merge.c   ****                     offset[i] = 0;
5123:str_merge.c   ****                 #else /* __MMI_RESOURCE_STR_ZLIB_COMPRESS__ */
5124:str_merge.c   ****                     write_fixed_offset(res, map, resMeta, mapMeta, 0, offset, i);
 9954              	LM1230:
 9955 7284 8B45F0   		movl	-16(%ebp), %eax
 9956 7287 89442418 		movl	%eax, 24(%esp)
 9957 728b 8B45E0   		movl	-32(%ebp), %eax
 9958 728e 89442414 		movl	%eax, 20(%esp)
 9959 7292 C7442410 		movl	$0, 16(%esp)
 9959      00000000 
 9960 729a 8B4514   		movl	20(%ebp), %eax
 9961 729d 8944240C 		movl	%eax, 12(%esp)
 9962 72a1 8B4510   		movl	16(%ebp), %eax
 9963 72a4 89442408 		movl	%eax, 8(%esp)
 9964 72a8 8B450C   		movl	12(%ebp), %eax
 9965 72ab 89442404 		movl	%eax, 4(%esp)
 9966 72af 8B4508   		movl	8(%ebp), %eax
 9967 72b2 890424   		movl	%eax, (%esp)
 9968 72b5 E8220300 		call	_write_fixed_offset
 9968      00
 9969 72ba EB51     		jmp	L573
 9970              	L570:
5125:str_merge.c   ****                 #endif /* __MMI_RESOURCE_STR_ZLIB_COMPRESS__ */
5126:str_merge.c   ****                 }
5127:str_merge.c   ****             }
5128:str_merge.c   ****             else /* duplicate string */
5129:str_merge.c   ****             {
5130:str_merge.c   ****                 did = node->id;
 9972              	LM1231:
 9973 72bc 8B45D8   		movl	-40(%ebp), %eax
 9974 72bf 0FB74004 		movzwl	4(%eax), %eax
 9975 72c3 668945F6 		movw	%ax, -10(%ebp)
5131:str_merge.c   ****             #if defined(__MMI_RESOURCE_STR_ZLIB_COMPRESS__)
5132:str_merge.c   ****                 offset[i] = offset[node->id];
5133:str_merge.c   ****             #else /* __MMI_RESOURCE_STR_ZLIB_COMPRESS__ */
5134:str_merge.c   ****                 /* only need to update StrMap */
5135:str_merge.c   ****                 write_fixed_offset(res, map, resMeta, mapMeta, offset[node->id], offset, i);
 9977              	LM1232:
 9978 72c7 8B45F0   		movl	-16(%ebp), %eax
 9979 72ca 89442418 		movl	%eax, 24(%esp)
 9980 72ce 8B45E0   		movl	-32(%ebp), %eax
 9981 72d1 89442414 		movl	%eax, 20(%esp)
 9982 72d5 8B45D8   		movl	-40(%ebp), %eax
 9983 72d8 0FB74004 		movzwl	4(%eax), %eax
 9984 72dc 8D148500 		leal	0(,%eax,4), %edx
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 277


 9984      000000
 9985 72e3 8B45E0   		movl	-32(%ebp), %eax
 9986 72e6 8B0410   		movl	(%eax,%edx), %eax
 9987 72e9 89442410 		movl	%eax, 16(%esp)
 9988 72ed 8B4514   		movl	20(%ebp), %eax
 9989 72f0 8944240C 		movl	%eax, 12(%esp)
 9990 72f4 8B4510   		movl	16(%ebp), %eax
 9991 72f7 89442408 		movl	%eax, 8(%esp)
 9992 72fb 8B450C   		movl	12(%ebp), %eax
 9993 72fe 89442404 		movl	%eax, 4(%esp)
 9994 7302 8B4508   		movl	8(%ebp), %eax
 9995 7305 890424   		movl	%eax, (%esp)
 9996 7308 E8CF0200 		call	_write_fixed_offset
 9996      00
 9997              	L573:
5136:str_merge.c   ****             #endif /* __MMI_RESOURCE_STR_ZLIB_COMPRESS__ */
5137:str_merge.c   ****             }
5138:str_merge.c   **** 
5139:str_merge.c   ****             /* record log */
5140:str_merge.c   ****             write_fixed_string_log(log, i, did);
 9999              	LM1233:
 10000 730d 0FB745F6 		movzwl	-10(%ebp), %eax
 10001 7311 89442408 		movl	%eax, 8(%esp)
 10002 7315 0FB745F0 		movzwl	-16(%ebp), %eax
 10003 7319 89442404 		movl	%eax, 4(%esp)
 10004 731d 8B45E8   		movl	-24(%ebp), %eax
 10005 7320 890424   		movl	%eax, (%esp)
 10006 7323 E8820300 		call	_write_fixed_string_log
 10006      00
5141:str_merge.c   ****             did = 0;
 10008              	LM1234:
 10009 7328 66C745F6 		movw	$0, -10(%ebp)
 10009      0000
 10011              	LM1235:
 10012              	L567:
 10013 732e 8D45F0   		leal	-16(%ebp), %eax
 10014 7331 FF00     		incl	(%eax)
 10015 7333 E943FEFF 		jmp	L565
 10015      FF
 10016              	L566:
5142:str_merge.c   ****         }
5143:str_merge.c   ****     }
5144:str_merge.c   ****     
5145:str_merge.c   **** #if defined(__MMI_RESOURCE_STR_ZLIB_COMPRESS__)
5146:str_merge.c   ****     write_compressed_fixed_data(res, map, data, curr_pos, offset, fixed);
5147:str_merge.c   **** #else /* __MMI_RESOURCE_STR_ZLIB_COMPRESS__ */
5148:str_merge.c   ****     /* write the tail of the data and map array */
5149:str_merge.c   ****     fprintf(res, "};\n\n");
 10018              	LM1236:
 10019 7338 C7442404 		movl	$LC141, 4(%esp)
 10019      EC6D0000 
 10020 7340 8B4508   		movl	8(%ebp), %eax
 10021 7343 890424   		movl	%eax, (%esp)
 10022 7346 E8000000 		call	_fprintf
 10022      00
5150:str_merge.c   ****     fprintf(map, "};\n\n");
 10024              	LM1237:
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 278


 10025 734b C7442404 		movl	$LC141, 4(%esp)
 10025      EC6D0000 
 10026 7353 8B450C   		movl	12(%ebp), %eax
 10027 7356 890424   		movl	%eax, (%esp)
 10028 7359 E8000000 		call	_fprintf
 10028      00
5151:str_merge.c   ****     fprintf(resMeta, "};\n\n");
 10030              	LM1238:
 10031 735e C7442404 		movl	$LC141, 4(%esp)
 10031      EC6D0000 
 10032 7366 8B4510   		movl	16(%ebp), %eax
 10033 7369 890424   		movl	%eax, (%esp)
 10034 736c E8000000 		call	_fprintf
 10034      00
5152:str_merge.c   ****     fprintf(mapMeta, "};\n\n");
 10036              	LM1239:
 10037 7371 C7442404 		movl	$LC141, 4(%esp)
 10037      EC6D0000 
 10038 7379 8B4514   		movl	20(%ebp), %eax
 10039 737c 890424   		movl	%eax, (%esp)
 10040 737f E8000000 		call	_fprintf
 10040      00
5153:str_merge.c   ****     
5154:str_merge.c   ****     if(fixed_result.is16bit){
 10042              	LM1240:
 10043 7384 833D0400 		cmpl	$0, _fixed_result+4
 10043      000000
 10044 738b 7415     		je	L574
5155:str_merge.c   ****         fprintf(res, "extern const CUSTOM_STRING_MAP_16 StrMap_Fixed[];\n");
 10046              	LM1241:
 10047 738d C7442404 		movl	$LC142, 4(%esp)
 10047      006E0000 
 10048 7395 8B4508   		movl	8(%ebp), %eax
 10049 7398 890424   		movl	%eax, (%esp)
 10050 739b E8000000 		call	_fprintf
 10050      00
 10051 73a0 EB13     		jmp	L575
 10052              	L574:
5156:str_merge.c   ****     }
5157:str_merge.c   ****     else{
5158:str_merge.c   ****         fprintf(res, "extern const CUSTOM_STRING_MAP StrMap_Fixed[];\n");
 10054              	LM1242:
 10055 73a2 C7442404 		movl	$LC143, 4(%esp)
 10055      406E0000 
 10056 73aa 8B4508   		movl	8(%ebp), %eax
 10057 73ad 890424   		movl	%eax, (%esp)
 10058 73b0 E8000000 		call	_fprintf
 10058      00
 10059              	L575:
5159:str_merge.c   ****     }
5160:str_merge.c   **** #endif /* __MMI_RESOURCE_STR_ZLIB_COMPRESS__ */
5161:str_merge.c   ****     fprintf(resMeta, "MAXNUM: %d\n", fixed_result.nTotalStrRes -1);
 10061              	LM1243:
 10062 73b5 0FB70500 		movzwl	_fixed_result, %eax
 10062      000000
 10063 73bc 48       		decl	%eax
 10064 73bd 89442408 		movl	%eax, 8(%esp)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 279


 10065 73c1 C7442404 		movl	$LC87, 4(%esp)
 10065      F0460000 
 10066 73c9 8B4510   		movl	16(%ebp), %eax
 10067 73cc 890424   		movl	%eax, (%esp)
 10068 73cf E8000000 		call	_fprintf
 10068      00
5162:str_merge.c   ****     fprintf(resMeta, "MAXID: %d\n", fixed_id.id_count -1);
 10070              	LM1244:
 10071 73d4 0FB70500 		movzwl	_fixed_id, %eax
 10071      000000
 10072 73db 48       		decl	%eax
 10073 73dc 89442408 		movl	%eax, 8(%esp)
 10074 73e0 C7442404 		movl	$LC88, 4(%esp)
 10074      FC460000 
 10075 73e8 8B4510   		movl	16(%ebp), %eax
 10076 73eb 890424   		movl	%eax, (%esp)
 10077 73ee E8000000 		call	_fprintf
 10077      00
5163:str_merge.c   **** 
5164:str_merge.c   ****     /* free hash table */
5165:str_merge.c   ****     hash_free(fixed->enum_id_tb);
 10079              	LM1245:
 10080 73f3 8B4518   		movl	24(%ebp), %eax
 10081 73f6 8B4008   		movl	8(%eax), %eax
 10082 73f9 890424   		movl	%eax, (%esp)
 10083 73fc E85E8FFF 		call	_hash_free
 10083      FF
5166:str_merge.c   ****     hash_free(fixed->str_id_tb);
 10085              	LM1246:
 10086 7401 8B4518   		movl	24(%ebp), %eax
 10087 7404 8B400C   		movl	12(%eax), %eax
 10088 7407 890424   		movl	%eax, (%esp)
 10089 740a E8508FFF 		call	_hash_free
 10089      FF
5167:str_merge.c   ****     fclose(log);
 10091              	LM1247:
 10092 740f 8B45E8   		movl	-24(%ebp), %eax
 10093 7412 890424   		movl	%eax, (%esp)
 10094 7415 E8000000 		call	_fclose
 10094      00
5168:str_merge.c   ****     free(offset);
 10096              	LM1248:
 10097 741a 8B45E0   		movl	-32(%ebp), %eax
 10098 741d 890424   		movl	%eax, (%esp)
 10099 7420 E8000000 		call	_free
 10099      00
5169:str_merge.c   ****     
5170:str_merge.c   ****     return 1;
 10101              	LM1249:
 10102 7425 C745C401 		movl	$1, -60(%ebp)
 10102      000000
5171:str_merge.c   **** }
 10104              	LM1250:
 10105              	L551:
 10106              	LBE62:
 10107 742c 8B45C4   		movl	-60(%ebp), %eax
 10108 742f C9       		leave
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 280


 10109 7430 C3       		ret
 10121              	Lscope41:
 10133              	_write_fixed_str:
5172:str_merge.c   **** 
5173:str_merge.c   **** 
5174:str_merge.c   **** #if defined(__MMI_RESOURCE_STR_ZLIB_COMPRESS__)
5175:str_merge.c   **** /*****************************************************************************
5176:str_merge.c   ****  * FUNCTION
5177:str_merge.c   ****  *  write_fixed_str_mem
5178:str_merge.c   ****  * DESCRIPTION
5179:str_merge.c   ****  *  write fixed string id's data into memory
5180:str_merge.c   ****  * PARAMETERS
5181:str_merge.c   ****  *  mem    :[IN/OUT] CustStrRes.c file handle
5182:str_merge.c   ****  *  map   :[IN] CustStrMap.c file handle
5183:str_merge.c   ****  *  data  :[IN] string data will be write to CustStrRes.c
5184:str_merge.c   ****  *  len    :[IN] data total length
5185:str_merge.c   ****  *  offs   :[IN]  offset array of all string ids
5186:str_merge.c   ****  *  fixed  :[IN]  the id will be processed
5187:str_merge.c   ****  * RETURNS
5188:str_merge.c   ****  *   return 1 means success, return -1 if input is invalid, return-2 if malloc faileds, return -3 i
5189:str_merge.c   ****  *****************************************************************************/
5190:str_merge.c   **** static int write_fixed_str_mem(U8** mem, U8* s, int pos, int *offs, int id)
5191:str_merge.c   **** {
5192:str_merge.c   ****     int i = 0;
5193:str_merge.c   ****     int len = 0;
5194:str_merge.c   **** 
5195:str_merge.c   ****     if(mem == 0 || s == 0 || pos < 0 || offs == 0 || id < 0 || id >= MAX_STRING_MAP_SIZE)
5196:str_merge.c   ****     {
5197:str_merge.c   ****         return -1;
5198:str_merge.c   ****     }
5199:str_merge.c   **** 
5200:str_merge.c   ****     /* record offset */
5201:str_merge.c   ****     offs[id] = pos;
5202:str_merge.c   **** 
5203:str_merge.c   ****     /* record data */
5204:str_merge.c   ****     if(s[0] != '\0')
5205:str_merge.c   ****     {
5206:str_merge.c   ****         len = (wcslen((wchar_t*)s) + 1) * 2;
5207:str_merge.c   ****         memcpy(*mem, s, len);
5208:str_merge.c   **** 
5209:str_merge.c   ****         *mem += len;
5210:str_merge.c   ****     }
5211:str_merge.c   **** 
5212:str_merge.c   ****     return len;
5213:str_merge.c   **** }
5214:str_merge.c   **** 
5215:str_merge.c   **** 
5216:str_merge.c   **** /*****************************************************************************
5217:str_merge.c   ****  * FUNCTION
5218:str_merge.c   ****  *  write_fixed_str
5219:str_merge.c   ****  * DESCRIPTION
5220:str_merge.c   ****  *  write compressed data into CustStrRes & CustStrmap.c
5221:str_merge.c   ****  * PARAMETERS
5222:str_merge.c   ****  *  res    :[IN] CustStrRes.c file handle
5223:str_merge.c   ****  *  map   :[IN] CustStrMap.c file handle
5224:str_merge.c   ****  *  data  :[IN] string data will be write to CustStrRes.c
5225:str_merge.c   ****  *  len    :[IN] data total length
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 281


5226:str_merge.c   ****  *  offs   :[IN]  offset array of all string ids
5227:str_merge.c   ****  *  fixed  :[IN]  the id will be processed
5228:str_merge.c   ****  * RETURNS
5229:str_merge.c   ****  *   return 1 means success, return -1 if input is invalid, return-2 if malloc faileds, return -3 i
5230:str_merge.c   ****  *****************************************************************************/
5231:str_merge.c   **** static int write_compressed_fixed_data(FILE *res, FILE *map, U8 *data, int len, int *offs, FixedID 
5232:str_merge.c   **** {
5233:str_merge.c   ****     // The dest parameter of compress2 must be ulong type
5234:str_merge.c   ****     unsigned long res_len = 0, map_len = 0;
5235:str_merge.c   ****     U8 *res_buff = 0, *map_buff = 0;
5236:str_merge.c   ****     U8 *p = 0;
5237:str_merge.c   ****     int ret = Z_OK, i = 0, j = 0;
5238:str_merge.c   ****     int map_arr_len = 0;
5239:str_merge.c   ****     U32 *offst = 0;
5240:str_merge.c   **** 
5241:str_merge.c   ****     if(res == 0 || map == 0 || data == 0 || offs == 0 || len <= 0 || fixed == 0)
5242:str_merge.c   ****     {
5243:str_merge.c   ****         return -1; /* invalid input */
5244:str_merge.c   ****     }
5245:str_merge.c   **** 
5246:str_merge.c   ****     /* caculate and malloc StrRes_zip size */
5247:str_merge.c   ****     res_len = compressBound(len);
5248:str_merge.c   ****     res_buff = (U8*) malloc(sizeof(U8) * res_len);
5249:str_merge.c   ****     if(res_buff == 0)
5250:str_merge.c   ****     {
5251:str_merge.c   ****         fprintf(stderr, "ERROR: malloc compress buffer failed, LINE:%d;\tFILE:%s\n", __LINE__, __FI
5252:str_merge.c   ****         return -2; /* memry malloc failed */
5253:str_merge.c   ****     }
5254:str_merge.c   **** 
5255:str_merge.c   ****     /* caculate string map size  and malloc buffer */
5256:str_merge.c   ****     map_len = compressBound(fixed->id_count * sizeof(U32));
5257:str_merge.c   ****     map_buff = (U8*)malloc(sizeof(U8) * map_len);
5258:str_merge.c   ****     if(fixed_result.is16bit){
5259:str_merge.c   ****         map_arr_len = fixed->id_count * sizeof(U16);
5260:str_merge.c   ****     }
5261:str_merge.c   ****     else{
5262:str_merge.c   ****         map_arr_len = fixed->id_count * sizeof(U32);
5263:str_merge.c   ****     }
5264:str_merge.c   ****     offst = (U32*)malloc(fixed->id_count * sizeof(U32));
5265:str_merge.c   ****     if(map_buff == 0 || offst == 0)
5266:str_merge.c   ****     {
5267:str_merge.c   ****         free(res_buff);
5268:str_merge.c   ****         if(map_buff != 0)
5269:str_merge.c   ****             free(map_buff);
5270:str_merge.c   ****         if(offst != 0)
5271:str_merge.c   ****             free(offst);
5272:str_merge.c   **** 
5273:str_merge.c   ****         fprintf(stderr, "ERROR: malloc compress buffer failed, LINE:%d;\tFILE:%s\n", __LINE__, __FI
5274:str_merge.c   ****         return -2;
5275:str_merge.c   ****     }
5276:str_merge.c   **** 
5277:str_merge.c   ****     /* compress string data */
5278:str_merge.c   ****     STRMERG_LOG_V("StrMap_Fixed compress2 input: res_len=%lu, len =%d, level = %d",res_len, len, Z_
5279:str_merge.c   ****     ret = compress2(res_buff, &res_len, data, len, Z_BEST_COMPRESSION);
5280:str_merge.c   ****     STRMERG_LOG_V("StrMap_Fixed compress2 output: res_len=%lu, len =%lu ",res_len, len);
5281:str_merge.c   **** 
5282:str_merge.c   ****     if(ret != Z_OK)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 282


5283:str_merge.c   ****     {
5284:str_merge.c   ****         free(res_buff);
5285:str_merge.c   ****         free(map_buff);
5286:str_merge.c   ****         free(offst);
5287:str_merge.c   ****         fprintf(stderr, "fatel error: compress failed, LINE:%d;\tFILE:%s\n", __LINE__, __FILE__);
5288:str_merge.c   ****         return -3; /* compress failed */
5289:str_merge.c   ****     }
5290:str_merge.c   ****     // TODO:it seems not good
5291:str_merge.c   ****     fixed_result.nResSize = len;
5292:str_merge.c   ****     fixed_result.nResZipSize = res_len;
5293:str_merge.c   **** 
5294:str_merge.c   ****     /* write CustStrRes.c */
5295:str_merge.c   ****     STRMERG_LOG_V("StrRes_zip_fixed[%lu]: Started res output",res_len);
5296:str_merge.c   ****     fprintf(res, "//__align(4) CUSTOM_STRING StrRes_Fixed[%d];\n", len);
5297:str_merge.c   ****     fprintf(res, "// StrRes_zip_fixed, DATA SIZE = %lu \n", res_len);
5298:str_merge.c   ****     fprintf(res, "__align(4) const CUSTOM_STRING StrRes_zip_fixed[] = {\n");
5299:str_merge.c   ****     for(i = 0; i < res_len; ++i)
5300:str_merge.c   ****     {
5301:str_merge.c   ****         fprintf(res, "0x%02X, ", res_buff[i]);
5302:str_merge.c   ****         if(i % 16 == 0)
5303:str_merge.c   ****         {
5304:str_merge.c   ****             fprintf(res, "\n");
5305:str_merge.c   ****         }
5306:str_merge.c   ****     }
5307:str_merge.c   ****     
5308:str_merge.c   ****     append_cat_padding_bytes(res, res_len);
5309:str_merge.c   ****     
5310:str_merge.c   ****     fprintf(res, "};\n");
5311:str_merge.c   ****     STRMERG_LOG_V("StrRes_zip_fixed[%lu]: Finished res output",res_len);
5312:str_merge.c   ****     
5313:str_merge.c   ****     fprintf(res, "extern const U8 StrMap_zip_fixed[];\n");
5314:str_merge.c   ****     if(fixed_result.is16bit)
5315:str_merge.c   ****     {
5316:str_merge.c   ****         fprintf(res, "//extern CUSTOM_STRING_MAP_16 StrMap_Fixed[];\n");
5317:str_merge.c   ****     }
5318:str_merge.c   ****     else
5319:str_merge.c   ****     {
5320:str_merge.c   ****         fprintf(res, "//extern CUSTOM_STRING_MAP StrMap_Fixed[];\n");
5321:str_merge.c   ****     }
5322:str_merge.c   ****     
5323:str_merge.c   ****     /* compress string map */
5324:str_merge.c   ****     /* here we need to record log information of offset */
5325:str_merge.c   ****     j = 0;
5326:str_merge.c   ****     if(fixed_result.is16bit)
5327:str_merge.c   ****     {
5328:str_merge.c   ****         U16 *mp = (U16*)offst;
5329:str_merge.c   ****         for(i = 0; i < MAX_STRING_MAP_SIZE; ++i)
5330:str_merge.c   ****         {
5331:str_merge.c   ****             if(StrIsPopulate[i] && fixed->fixed_id_flag[i] == NO_TRANSLATE_FLAG)
5332:str_merge.c   ****             {
5333:str_merge.c   ****                 mp[j++] = (U16)offs[i]/2;
5334:str_merge.c   ****             }
5335:str_merge.c   ****         }            
5336:str_merge.c   ****         STRMERG_LOG_V(STRMERG_SUB_TAG_MEM "StrMap_Fixed: Total size of compressing data= %d bytes, 
5337:str_merge.c   **** 
5338:str_merge.c   ****     }
5339:str_merge.c   ****     else
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 283


5340:str_merge.c   ****     {
5341:str_merge.c   ****         U32 *mp = (U32*)offst;
5342:str_merge.c   ****         for(i = 0; i < MAX_STRING_MAP_SIZE; ++i)
5343:str_merge.c   ****         {
5344:str_merge.c   ****             if(StrIsPopulate[i] && fixed->fixed_id_flag[i] == NO_TRANSLATE_FLAG)
5345:str_merge.c   ****             {
5346:str_merge.c   ****                 mp[j++] = (U32)offs[i]/2;
5347:str_merge.c   ****             }
5348:str_merge.c   ****         }    
5349:str_merge.c   ****         STRMERG_LOG_D("[MEM] StrMap_Fixed: Total size of compressing data= %d bytes, size calculate
5350:str_merge.c   ****     }
5351:str_merge.c   **** 
5352:str_merge.c   ****     STRMERG_LOG_V("StrMap_Fixed compress2 input: map_len=%lu, map_arr_len =%d, level = %d",map_len,
5353:str_merge.c   ****     ret = compress2(map_buff, &map_len, (U8*)offst, map_arr_len, Z_BEST_COMPRESSION);
5354:str_merge.c   ****     STRMERG_LOG_V("StrMap_Fixed compress2 output: map_len=%lu, map_arr_len =%d",map_len, map_arr_le
5355:str_merge.c   **** 
5356:str_merge.c   ****     if(ret != Z_OK)
5357:str_merge.c   ****     {
5358:str_merge.c   ****         free(res_buff);
5359:str_merge.c   ****         free(map_buff);
5360:str_merge.c   ****         free(offst);
5361:str_merge.c   ****         fprintf(stderr, "fatel error: compress failed, LINE:%d;\tFILE:%s\n", __LINE__, __FILE__);
5362:str_merge.c   ****         return -3; /* compress failed */
5363:str_merge.c   ****     }
5364:str_merge.c   ****     //TODO:it seems not good
5365:str_merge.c   ****     fixed_result.nMapSize = map_arr_len;
5366:str_merge.c   ****     fixed_result.nMapZipSize = map_len;
5367:str_merge.c   ****     
5368:str_merge.c   ****     /* write CustStrMap.c */
5369:str_merge.c   ****     if(fixed_result.is16bit)
5370:str_merge.c   ****     {
5371:str_merge.c   ****         fprintf(map, "//__align(4) CUSTOM_STRING_MAP_16 StrMap_Fixed[%d];\n", map_arr_len);
5372:str_merge.c   ****     }
5373:str_merge.c   ****     else
5374:str_merge.c   ****     {
5375:str_merge.c   ****         fprintf(map, "//__align(4) CUSTOM_STRING_MAP StrMap_Fixed[%d];\n", map_arr_len);
5376:str_merge.c   ****     }
5377:str_merge.c   **** 
5378:str_merge.c   ****     STRMERG_LOG_V("StrMap_zip_fixed[%lu]: Started fout_res output",map_len);
5379:str_merge.c   ****     fprintf(map, "//StrMap_zip_fixed, DATA SIZE = %lu\n", map_len);
5380:str_merge.c   ****     fprintf(map, "__align(4) const U8 StrMap_zip_fixed[] = {\n");
5381:str_merge.c   ****     
5382:str_merge.c   ****     for(i = 0; i < map_len; ++i)
5383:str_merge.c   ****     {
5384:str_merge.c   ****         if(i % 16 == 0)
5385:str_merge.c   ****         {
5386:str_merge.c   ****             fprintf(map, "\n");
5387:str_merge.c   ****         }
5388:str_merge.c   ****         fprintf(map, "0x%02X, ", map_buff[i]);
5389:str_merge.c   **** 
5390:str_merge.c   ****     }
5391:str_merge.c   ****     
5392:str_merge.c   ****     append_cat_padding_bytes(map, map_len);
5393:str_merge.c   ****     
5394:str_merge.c   ****     fprintf(map, "};\n");
5395:str_merge.c   ****     
5396:str_merge.c   ****     STRMERG_LOG_V("StrMap_zip_fixed[%lu]: Finished fout_res output",map_len);
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 284


5397:str_merge.c   ****     
5398:str_merge.c   ****     free(res_buff);
5399:str_merge.c   ****     free(map_buff);
5400:str_merge.c   ****     free(offst);
5401:str_merge.c   **** 
5402:str_merge.c   ****     return 1; /* success */
5403:str_merge.c   **** }
5404:str_merge.c   **** #endif /* __MMI_RESOURCE_STR_ZLIB_COMPRESS__ */
5405:str_merge.c   **** 
5406:str_merge.c   **** 
5407:str_merge.c   **** /*****************************************************************************
5408:str_merge.c   ****  * FUNCTION
5409:str_merge.c   ****  *  write_fixed_str
5410:str_merge.c   ****  * DESCRIPTION
5411:str_merge.c   ****  *  write CustStrRes & CustStrmap.c
5412:str_merge.c   ****  * PARAMETERS
5413:str_merge.c   ****  *  res    :[IN] CustStrRes.c file handle
5414:str_merge.c   ****  *  map   :[IN] CustStrMap.c file handle
5415:str_merge.c   ****  *  s       :[IN] string data will be write to CustStrRes.c
5416:str_merge.c   ****  *  pos    :[IN] offset of duplicate string
5417:str_merge.c   ****  *  offs   :[IN]  offset array of all string ids
5418:str_merge.c   ****  *  id      :[IN]  the id will be processed
5419:str_merge.c   ****  * RETURNS
5420:str_merge.c   ****  *   return -1 if input is invalid, return-2 if malloc faileds, else returen string lenth
5421:str_merge.c   ****  *****************************************************************************/
5422:str_merge.c   **** static int write_fixed_str(FILE *res, FILE *map, FILE *resMeta, FILE *mapMeta,  U8 *s, int pos, int
5423:str_merge.c   **** {
 10135              	LM1251:
 10136 7431 55       		pushl	%ebp
 10137 7432 89E5     		movl	%esp, %ebp
 10138 7434 83EC18   		subl	$24, %esp
5424:str_merge.c   ****     /*----------------------------------------------------------------*/
5425:str_merge.c   ****     /* Local Variables                                                */
5426:str_merge.c   ****     /*----------------------------------------------------------------*/
5427:str_merge.c   ****     int i = 0;
 10140              	LM1252:
 10141              	LBB63:
 10142 7437 C745FC00 		movl	$0, -4(%ebp)
 10142      000000
5428:str_merge.c   ****     int len = 0;
 10144              	LM1253:
 10145 743e C745F800 		movl	$0, -8(%ebp)
 10145      000000
5429:str_merge.c   ****     
5430:str_merge.c   ****     /*----------------------------------------------------------------*/
5431:str_merge.c   ****     /* Code Body                                                      */
5432:str_merge.c   ****     /*----------------------------------------------------------------*/
5433:str_merge.c   ****     if(res == 0 || map == 0)
 10147              	LM1254:
 10148 7445 837D0800 		cmpl	$0, 8(%ebp)
 10149 7449 7406     		je	L578
 10150 744b 837D0C00 		cmpl	$0, 12(%ebp)
 10151 744f 750C     		jne	L577
 10152              	L578:
5434:str_merge.c   ****     {
5435:str_merge.c   ****         return -1;
 10154              	LM1255:
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 285


 10155 7451 C745F4FF 		movl	$-1, -12(%ebp)
 10155      FFFFFF
 10156 7458 E90A0100 		jmp	L576
 10156      00
 10157              	L577:
5436:str_merge.c   ****     }
5437:str_merge.c   **** 
5438:str_merge.c   ****     /* write custstrmap.c */
5439:str_merge.c   ****     offs[id] = pos;
 10159              	LM1256:
 10160 745d 8B4524   		movl	36(%ebp), %eax
 10161 7460 8D0C8500 		leal	0(,%eax,4), %ecx
 10161      000000
 10162 7467 8B5520   		movl	32(%ebp), %edx
 10163 746a 8B451C   		movl	28(%ebp), %eax
 10164 746d 89040A   		movl	%eax, (%edx,%ecx)
5440:str_merge.c   ****     fprintf(map, "\t%ld,\n", pos/2);
 10166              	LM1257:
 10167 7470 8B551C   		movl	28(%ebp), %edx
 10168 7473 89D0     		movl	%edx, %eax
 10169 7475 C1F81F   		sarl	$31, %eax
 10170 7478 C1E81F   		shrl	$31, %eax
 10171 747b 8D0410   		leal	(%eax,%edx), %eax
 10172 747e D1F8     		sarl	%eax
 10173 7480 89442408 		movl	%eax, 8(%esp)
 10174 7484 C7442404 		movl	$LC105, 4(%esp)
 10174      D7490000 
 10175 748c 8B450C   		movl	12(%ebp), %eax
 10176 748f 890424   		movl	%eax, (%esp)
 10177 7492 E8000000 		call	_fprintf
 10177      00
5441:str_merge.c   ****     fprintf(mapMeta, "\t%ld,\n", pos/2);
 10179              	LM1258:
 10180 7497 8B551C   		movl	28(%ebp), %edx
 10181 749a 89D0     		movl	%edx, %eax
 10182 749c C1F81F   		sarl	$31, %eax
 10183 749f C1E81F   		shrl	$31, %eax
 10184 74a2 8D0410   		leal	(%eax,%edx), %eax
 10185 74a5 D1F8     		sarl	%eax
 10186 74a7 89442408 		movl	%eax, 8(%esp)
 10187 74ab C7442404 		movl	$LC105, 4(%esp)
 10187      D7490000 
 10188 74b3 8B4514   		movl	20(%ebp), %eax
 10189 74b6 890424   		movl	%eax, (%esp)
 10190 74b9 E8000000 		call	_fprintf
 10190      00
5442:str_merge.c   **** 
5443:str_merge.c   ****     if(s != 0) /* write_fixed_str_offset case */
 10192              	LM1259:
 10193 74be 837D1800 		cmpl	$0, 24(%ebp)
 10194 74c2 0F849900 		je	L579
 10194      0000
5444:str_merge.c   ****     {
5445:str_merge.c   ****         len = wcslen((wchar_t*)s);
 10196              	LM1260:
 10197 74c8 8B4518   		movl	24(%ebp), %eax
 10198 74cb 890424   		movl	%eax, (%esp)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 286


 10199 74ce E8000000 		call	_wcslen
 10199      00
 10200 74d3 8945F8   		movl	%eax, -8(%ebp)
5446:str_merge.c   **** 
5447:str_merge.c   ****         for(i = 0; i < len*2; ++i)
 10202              	LM1261:
 10203 74d6 C745FC00 		movl	$0, -4(%ebp)
 10203      000000
 10204              	L580:
 10205 74dd 8B45F8   		movl	-8(%ebp), %eax
 10206 74e0 01C0     		addl	%eax, %eax
 10207 74e2 3945FC   		cmpl	%eax, -4(%ebp)
 10208 74e5 7C02     		jl	L583
 10209 74e7 EB47     		jmp	L581
 10210              	L583:
5448:str_merge.c   ****         {
5449:str_merge.c   ****             fprintf(res, "0x%X, ", s[i]);
 10212              	LM1262:
 10213 74e9 8B45FC   		movl	-4(%ebp), %eax
 10214 74ec 034518   		addl	24(%ebp), %eax
 10215 74ef 0FB600   		movzbl	(%eax), %eax
 10216 74f2 89442408 		movl	%eax, 8(%esp)
 10217 74f6 C7442404 		movl	$LC91, 4(%esp)
 10217      64470000 
 10218 74fe 8B4508   		movl	8(%ebp), %eax
 10219 7501 890424   		movl	%eax, (%esp)
 10220 7504 E8000000 		call	_fprintf
 10220      00
5450:str_merge.c   ****             fprintf(resMeta, "0x%X, ", s[i]);
 10222              	LM1263:
 10223 7509 8B45FC   		movl	-4(%ebp), %eax
 10224 750c 034518   		addl	24(%ebp), %eax
 10225 750f 0FB600   		movzbl	(%eax), %eax
 10226 7512 89442408 		movl	%eax, 8(%esp)
 10227 7516 C7442404 		movl	$LC91, 4(%esp)
 10227      64470000 
 10228 751e 8B4510   		movl	16(%ebp), %eax
 10229 7521 890424   		movl	%eax, (%esp)
 10230 7524 E8000000 		call	_fprintf
 10230      00
 10232              	LM1264:
 10233 7529 8D45FC   		leal	-4(%ebp), %eax
 10234 752c FF00     		incl	(%eax)
 10235 752e EBAD     		jmp	L580
 10236              	L581:
5451:str_merge.c   ****         }
5452:str_merge.c   ****         fprintf(res, "0x00, 0x00,\n");
 10238              	LM1265:
 10239 7530 C7442404 		movl	$LC90, 4(%esp)
 10239      57470000 
 10240 7538 8B4508   		movl	8(%ebp), %eax
 10241 753b 890424   		movl	%eax, (%esp)
 10242 753e E8000000 		call	_fprintf
 10242      00
5453:str_merge.c   ****         fprintf(resMeta, "0x00, 0x00,\n");
 10244              	LM1266:
 10245 7543 C7442404 		movl	$LC90, 4(%esp)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 287


 10245      57470000 
 10246 754b 8B4510   		movl	16(%ebp), %eax
 10247 754e 890424   		movl	%eax, (%esp)
 10248 7551 E8000000 		call	_fprintf
 10248      00
5454:str_merge.c   **** 
5455:str_merge.c   ****         len = (len + 1)*2;
 10250              	LM1267:
 10251 7556 8B45F8   		movl	-8(%ebp), %eax
 10252 7559 01C0     		addl	%eax, %eax
 10253 755b 83C002   		addl	$2, %eax
 10254 755e 8945F8   		movl	%eax, -8(%ebp)
 10255              	L579:
5456:str_merge.c   ****     }
5457:str_merge.c   **** 
5458:str_merge.c   ****     return len;
 10257              	LM1268:
 10258 7561 8B45F8   		movl	-8(%ebp), %eax
 10259 7564 8945F4   		movl	%eax, -12(%ebp)
5459:str_merge.c   **** }
 10261              	LM1269:
 10262              	L576:
 10263              	LBE63:
 10264 7567 8B45F4   		movl	-12(%ebp), %eax
 10265 756a C9       		leave
 10266 756b C3       		ret
 10271              	Lscope42:
 10283              	_write_fixed_str_offset:
5460:str_merge.c   **** 
5461:str_merge.c   **** 
5462:str_merge.c   **** /*****************************************************************************
5463:str_merge.c   ****  * FUNCTION
5464:str_merge.c   ****  *  write_fixed_str_offset
5465:str_merge.c   ****  * DESCRIPTION
5466:str_merge.c   ****  *  write CustStrRes & CustStrmap.c, for parameter check
5467:str_merge.c   ****  * PARAMETERS
5468:str_merge.c   ****  *  pease refer write_fixed_str's description
5469:str_merge.c   ****  * RETURNS
5470:str_merge.c   ****  *  return -1 if input is invalid, return-2 if malloc faileds, else return string length
5471:str_merge.c   ****  *****************************************************************************/
5472:str_merge.c   **** static int write_fixed_str_offset(FILE *res, FILE *map, FILE *resMeta, FILE *mapMeta,U8 *s, int pos
5473:str_merge.c   **** {
 10285              	LM1270:
 10286 756c 55       		pushl	%ebp
 10287 756d 89E5     		movl	%esp, %ebp
 10288 756f 83EC28   		subl	$40, %esp
5474:str_merge.c   ****     /*----------------------------------------------------------------*/
5475:str_merge.c   ****     /* Local Variables                                                */
5476:str_merge.c   ****     /*----------------------------------------------------------------*/
5477:str_merge.c   ****     if(s == 0 || offs == 0 || id < 0 || id >= MAX_STRING_MAP_SIZE)
 10290              	LM1271:
 10291 7572 837D1800 		cmpl	$0, 24(%ebp)
 10292 7576 7417     		je	L586
 10293 7578 837D2000 		cmpl	$0, 32(%ebp)
 10294 757c 7411     		je	L586
 10295 757e 837D2400 		cmpl	$0, 36(%ebp)
 10296 7582 780B     		js	L586
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 288


 10297 7584 817D24FE 		cmpl	$65534, 36(%ebp)
 10297      FF0000
 10298 758b 7F02     		jg	L586
 10299 758d EB09     		jmp	L585
 10300              	L586:
5478:str_merge.c   ****     {
5479:str_merge.c   ****         return -1; /* invalid input */
 10302              	LM1272:
 10303 758f C745FCFF 		movl	$-1, -4(%ebp)
 10303      FFFFFF
 10304 7596 EB3F     		jmp	L584
 10305              	L585:
5480:str_merge.c   ****     }
5481:str_merge.c   **** 
5482:str_merge.c   ****     /*----------------------------------------------------------------*/
5483:str_merge.c   ****     /* Code Body                                                      */
5484:str_merge.c   ****     /*----------------------------------------------------------------*/
5485:str_merge.c   ****     return write_fixed_str(res, map,resMeta, mapMeta, s, pos, offs, id);
 10307              	LM1273:
 10308 7598 8B4524   		movl	36(%ebp), %eax
 10309 759b 8944241C 		movl	%eax, 28(%esp)
 10310 759f 8B4520   		movl	32(%ebp), %eax
 10311 75a2 89442418 		movl	%eax, 24(%esp)
 10312 75a6 8B451C   		movl	28(%ebp), %eax
 10313 75a9 89442414 		movl	%eax, 20(%esp)
 10314 75ad 8B4518   		movl	24(%ebp), %eax
 10315 75b0 89442410 		movl	%eax, 16(%esp)
 10316 75b4 8B4514   		movl	20(%ebp), %eax
 10317 75b7 8944240C 		movl	%eax, 12(%esp)
 10318 75bb 8B4510   		movl	16(%ebp), %eax
 10319 75be 89442408 		movl	%eax, 8(%esp)
 10320 75c2 8B450C   		movl	12(%ebp), %eax
 10321 75c5 89442404 		movl	%eax, 4(%esp)
 10322 75c9 8B4508   		movl	8(%ebp), %eax
 10323 75cc 890424   		movl	%eax, (%esp)
 10324 75cf E85DFEFF 		call	_write_fixed_str
 10324      FF
 10325 75d4 8945FC   		movl	%eax, -4(%ebp)
5486:str_merge.c   **** }
 10327              	LM1274:
 10328              	L584:
 10329 75d7 8B45FC   		movl	-4(%ebp), %eax
 10330 75da C9       		leave
 10331 75db C3       		ret
 10332              	Lscope43:
 10343              	_write_fixed_offset:
5487:str_merge.c   **** 
5488:str_merge.c   **** 
5489:str_merge.c   **** /*****************************************************************************
5490:str_merge.c   ****  * FUNCTION
5491:str_merge.c   ****  *  write_fixed_offset
5492:str_merge.c   ****  * DESCRIPTION
5493:str_merge.c   ****  *  write CustStrmap.c, for parameter check
5494:str_merge.c   ****  * PARAMETERS
5495:str_merge.c   ****  *  pease refer write_fixed_str's description
5496:str_merge.c   ****  * RETURNS
5497:str_merge.c   ****  *  return -1 if input is invalid, return-2 if malloc faileds, else return string length
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 289


5498:str_merge.c   ****  *****************************************************************************/
5499:str_merge.c   **** static int write_fixed_offset(FILE *res, FILE *map, FILE *resMeta, FILE *mapMeta,int pos, int *offs
5500:str_merge.c   **** {
 10345              	LM1275:
 10346 75dc 55       		pushl	%ebp
 10347 75dd 89E5     		movl	%esp, %ebp
 10348 75df 83EC28   		subl	$40, %esp
5501:str_merge.c   ****     /*----------------------------------------------------------------*/
5502:str_merge.c   ****     /* Local Variables                                                */
5503:str_merge.c   ****     /*----------------------------------------------------------------*/
5504:str_merge.c   ****     if(pos < 0 || offs == 0 || id < 0 || id >= MAX_STRING_MAP_SIZE)
 10350              	LM1276:
 10351 75e2 837D1800 		cmpl	$0, 24(%ebp)
 10352 75e6 7817     		js	L589
 10353 75e8 837D1C00 		cmpl	$0, 28(%ebp)
 10354 75ec 7411     		je	L589
 10355 75ee 837D2000 		cmpl	$0, 32(%ebp)
 10356 75f2 780B     		js	L589
 10357 75f4 817D20FE 		cmpl	$65534, 32(%ebp)
 10357      FF0000
 10358 75fb 7F02     		jg	L589
 10359 75fd EB09     		jmp	L588
 10360              	L589:
5505:str_merge.c   ****     {
5506:str_merge.c   ****         return -1; /* invalid input */
 10362              	LM1277:
 10363 75ff C745FCFF 		movl	$-1, -4(%ebp)
 10363      FFFFFF
 10364 7606 EB40     		jmp	L587
 10365              	L588:
5507:str_merge.c   ****     }
5508:str_merge.c   **** 
5509:str_merge.c   ****     /*----------------------------------------------------------------*/
5510:str_merge.c   ****     /* Code Body                                                      */
5511:str_merge.c   ****     /*----------------------------------------------------------------*/
5512:str_merge.c   ****     return write_fixed_str(res, map, resMeta, mapMeta, 0, pos, offs, id);
 10367              	LM1278:
 10368 7608 8B4520   		movl	32(%ebp), %eax
 10369 760b 8944241C 		movl	%eax, 28(%esp)
 10370 760f 8B451C   		movl	28(%ebp), %eax
 10371 7612 89442418 		movl	%eax, 24(%esp)
 10372 7616 8B4518   		movl	24(%ebp), %eax
 10373 7619 89442414 		movl	%eax, 20(%esp)
 10374 761d C7442410 		movl	$0, 16(%esp)
 10374      00000000 
 10375 7625 8B4514   		movl	20(%ebp), %eax
 10376 7628 8944240C 		movl	%eax, 12(%esp)
 10377 762c 8B4510   		movl	16(%ebp), %eax
 10378 762f 89442408 		movl	%eax, 8(%esp)
 10379 7633 8B450C   		movl	12(%ebp), %eax
 10380 7636 89442404 		movl	%eax, 4(%esp)
 10381 763a 8B4508   		movl	8(%ebp), %eax
 10382 763d 890424   		movl	%eax, (%esp)
 10383 7640 E8ECFDFF 		call	_write_fixed_str
 10383      FF
 10384 7645 8945FC   		movl	%eax, -4(%ebp)
5513:str_merge.c   **** }
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 290


 10386              	LM1279:
 10387              	L587:
 10388 7648 8B45FC   		movl	-4(%ebp), %eax
 10389 764b C9       		leave
 10390 764c C3       		ret
 10391              	Lscope44:
 10396              	.globl _ucs2toasc
 10398              	_ucs2toasc:
5514:str_merge.c   **** 
5515:str_merge.c   **** /*****************************************************************************
5516:str_merge.c   ****  * FUNCTION
5517:str_merge.c   ****  *  ucs2toasc
5518:str_merge.c   ****  * DESCRIPTION
5519:str_merge.c   ****  *  simple ucs2 to asc
5520:str_merge.c   ****  * PARAMETERS
5521:str_merge.c   ****  *  
5522:str_merge.c   ****  * RETURNS
5523:str_merge.c   ****  *  
5524:str_merge.c   ****  *****************************************************************************/
5525:str_merge.c   **** int ucs2toasc(U8* pOutBuff, U8 *pInBuff)
5526:str_merge.c   **** {
 10400              	LM1280:
 10401 764d 55       		pushl	%ebp
 10402 764e 89E5     		movl	%esp, %ebp
 10403 7650 83EC04   		subl	$4, %esp
5527:str_merge.c   ****     int count = 0;
 10405              	LM1281:
 10406              	LBB64:
 10407 7653 C745FC00 		movl	$0, -4(%ebp)
 10407      000000
5528:str_merge.c   **** 
5529:str_merge.c   ****     if(pInBuff != 0)
 10409              	LM1282:
 10410 765a 837D0C00 		cmpl	$0, 12(%ebp)
 10411 765e 742E     		je	L591
5530:str_merge.c   ****     {
5531:str_merge.c   ****         while(!(*pInBuff == 0 && *(pInBuff + 1) == 0))
 10413              	LM1283:
 10414              	L592:
 10415 7660 8B450C   		movl	12(%ebp), %eax
 10416 7663 803800   		cmpb	$0, (%eax)
 10417 7666 750B     		jne	L594
 10418 7668 8B450C   		movl	12(%ebp), %eax
 10419 766b 40       		incl	%eax
 10420 766c 803800   		cmpb	$0, (%eax)
 10421 766f 7502     		jne	L594
 10422 7671 EB1B     		jmp	L591
 10423              	L594:
5532:str_merge.c   ****         {
5533:str_merge.c   ****             *pOutBuff = *pInBuff;
 10425              	LM1284:
 10426 7673 8B5508   		movl	8(%ebp), %edx
 10427 7676 8B450C   		movl	12(%ebp), %eax
 10428 7679 0FB600   		movzbl	(%eax), %eax
 10429 767c 8802     		movb	%al, (%edx)
5534:str_merge.c   ****             pOutBuff += 1;
 10431              	LM1285:
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 291


 10432 767e FF4508   		incl	8(%ebp)
5535:str_merge.c   ****             pInBuff += 2;
 10434              	LM1286:
 10435 7681 8D450C   		leal	12(%ebp), %eax
 10436 7684 830002   		addl	$2, (%eax)
5536:str_merge.c   ****             count++;
 10438              	LM1287:
 10439 7687 8D45FC   		leal	-4(%ebp), %eax
 10440 768a FF00     		incl	(%eax)
 10441 768c EBD2     		jmp	L592
 10442              	L591:
5537:str_merge.c   ****         }
5538:str_merge.c   ****     }
5539:str_merge.c   **** 
5540:str_merge.c   ****     *pOutBuff = '\0';
 10444              	LM1288:
 10445 768e 8B4508   		movl	8(%ebp), %eax
 10446 7691 C60000   		movb	$0, (%eax)
5541:str_merge.c   **** 
5542:str_merge.c   ****     return count;
 10448              	LM1289:
 10449 7694 8B45FC   		movl	-4(%ebp), %eax
5543:str_merge.c   **** }
 10451              	LM1290:
 10452 7697 C9       		leave
 10453 7698 C3       		ret
 10454              	LBE64:
 10458              	Lscope45:
 10460              	LC144:
 10461 7699 00       		.ascii "\0"
 10462              	LC145:
 10463 769a 25730925 		.ascii "%s\11%d\11%s\11%d\11%s\12\0"
 10463      64092573 
 10463      09256409 
 10463      25730A00 
 10469              	_write_fixed_string_log:
5544:str_merge.c   **** 
5545:str_merge.c   **** /*****************************************************************************
5546:str_merge.c   ****  * FUNCTION
5547:str_merge.c   ****  *  write_fixed_string_log
5548:str_merge.c   ****  * DESCRIPTION
5549:str_merge.c   ****  *  write fixed string id's log into fixed_string.txt
5550:str_merge.c   ****  * PARAMETERS
5551:str_merge.c   ****  *  pease refer write_fixed_str's description
5552:str_merge.c   ****  * RETURNS
5553:str_merge.c   ****  *  return -1 if input is invalid, return-2 if malloc faileds, else return string length
5554:str_merge.c   ****  *****************************************************************************/
5555:str_merge.c   **** /* id_enum | id_value | data | len | duplicate id */
5556:str_merge.c   **** static MMI_BOOL write_fixed_string_log(FILE *log, U16 id, U16 dup_id)
5557:str_merge.c   **** {
 10471              	LM1291:
 10472 76aa 55       		pushl	%ebp
 10473 76ab 89E5     		movl	%esp, %ebp
 10474 76ad 81EC5806 		subl	$1624, %esp
 10474      0000
 10475 76b3 8B450C   		movl	12(%ebp), %eax
 10476 76b6 8B5510   		movl	16(%ebp), %edx
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 292


 10477 76b9 668945F6 		movw	%ax, -10(%ebp)
 10478 76bd 668955F4 		movw	%dx, -12(%ebp)
5558:str_merge.c   ****     char *id_enum = "", *did_enum = "", *id_str = "";
 10480              	LM1292:
 10481              	LBB65:
 10482 76c1 C745F099 		movl	$LC144, -16(%ebp)
 10482      760000
 10483 76c8 C745EC99 		movl	$LC144, -20(%ebp)
 10483      760000
 10484 76cf C745E899 		movl	$LC144, -24(%ebp)
 10484      760000
5559:str_merge.c   ****     int len = 0;
 10486              	LM1293:
 10487 76d6 C745E400 		movl	$0, -28(%ebp)
 10487      000000
5560:str_merge.c   ****     U8 enum_buff[MAX_LENGTH]; /* ascii data out buffer */
5561:str_merge.c   ****     U8 str_buff[MAX_LENGTH]; /* default string data bffer */
5562:str_merge.c   ****     U8 denum_buff[MAX_LENGTH]; /* duplicate id enum */
5563:str_merge.c   ****     enum_buff[0] = '\0';
 10489              	LM1294:
 10490 76dd C685D8FD 		movb	$0, -552(%ebp)
 10490      FFFF00
5564:str_merge.c   ****     str_buff[0] = '\0';
 10492              	LM1295:
 10493 76e4 C685D8FB 		movb	$0, -1064(%ebp)
 10493      FFFF00
5565:str_merge.c   ****     denum_buff[0] = '\0';
 10495              	LM1296:
 10496 76eb C685D8F9 		movb	$0, -1576(%ebp)
 10496      FFFF00
5566:str_merge.c   ****     
5567:str_merge.c   ****     if(log == 0 || id <= 0 || id > MAX_STRING_MAP_SIZE)
 10498              	LM1297:
 10499 76f2 837D0800 		cmpl	$0, 8(%ebp)
 10500 76f6 7407     		je	L597
 10501 76f8 66837DF6 		cmpw	$0, -10(%ebp)
 10501      00
 10502 76fd 750F     		jne	L596
 10503              	L597:
5568:str_merge.c   ****     {
5569:str_merge.c   ****         return MMI_FALSE;
 10505              	LM1298:
 10506 76ff C785D4F9 		movl	$0, -1580(%ebp)
 10506      FFFF0000 
 10506      0000
 10507 7709 E9CE0000 		jmp	L595
 10507      00
 10508              	L596:
5570:str_merge.c   ****     }
5571:str_merge.c   **** 
5572:str_merge.c   ****     ucs2toasc(enum_buff, StrEnum[id]);
 10510              	LM1299:
 10511 770e 0FB745F6 		movzwl	-10(%ebp), %eax
 10512 7712 8B048500 		movl	_StrEnum(,%eax,4), %eax
 10512      000000
 10513 7719 89442404 		movl	%eax, 4(%esp)
 10514 771d 8D85D8FD 		leal	-552(%ebp), %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 293


 10514      FFFF
 10515 7723 890424   		movl	%eax, (%esp)
 10516 7726 E822FFFF 		call	_ucs2toasc
 10516      FF
5573:str_merge.c   ****     ucs2toasc(str_buff, Str[id]);
 10518              	LM1300:
 10519 772b 0FB745F6 		movzwl	-10(%ebp), %eax
 10520 772f 8B048500 		movl	_Str(,%eax,4), %eax
 10520      000000
 10521 7736 89442404 		movl	%eax, 4(%esp)
 10522 773a 8D85D8FB 		leal	-1064(%ebp), %eax
 10522      FFFF
 10523 7740 890424   		movl	%eax, (%esp)
 10524 7743 E805FFFF 		call	_ucs2toasc
 10524      FF
5574:str_merge.c   ****     
5575:str_merge.c   ****     if(str_buff[0] != '\0')
 10526              	LM1301:
 10527 7748 80BDD8FB 		cmpb	$0, -1064(%ebp)
 10527      FFFF00
 10528 774f 7416     		je	L598
5576:str_merge.c   ****         len = (strlen(str_buff) + 1) * 2;
 10530              	LM1302:
 10531 7751 8D85D8FB 		leal	-1064(%ebp), %eax
 10531      FFFF
 10532 7757 890424   		movl	%eax, (%esp)
 10533 775a E8000000 		call	_strlen
 10533      00
 10534 775f 01C0     		addl	%eax, %eax
 10535 7761 83C002   		addl	$2, %eax
 10536 7764 8945E4   		movl	%eax, -28(%ebp)
 10537              	L598:
5577:str_merge.c   ****     
5578:str_merge.c   ****     if(dup_id != 0 && dup_id < MAX_STRING_MAP_SIZE)
 10539              	LM1303:
 10540 7767 66837DF4 		cmpw	$0, -12(%ebp)
 10540      00
 10541 776c 7424     		je	L599
 10542 776e 66837DF4 		cmpw	$-1, -12(%ebp)
 10542      FF
 10543 7773 741D     		je	L599
5579:str_merge.c   ****     {
5580:str_merge.c   ****         ucs2toasc(denum_buff, StrEnum[dup_id]);
 10545              	LM1304:
 10546 7775 0FB745F4 		movzwl	-12(%ebp), %eax
 10547 7779 8B048500 		movl	_StrEnum(,%eax,4), %eax
 10547      000000
 10548 7780 89442404 		movl	%eax, 4(%esp)
 10549 7784 8D85D8F9 		leal	-1576(%ebp), %eax
 10549      FFFF
 10550 778a 890424   		movl	%eax, (%esp)
 10551 778d E8BBFEFF 		call	_ucs2toasc
 10551      FF
 10552              	L599:
5581:str_merge.c   ****     }
5582:str_merge.c   **** 
5583:str_merge.c   ****     fprintf(log, "%s\t%d\t%s\t%d\t%s\n", enum_buff, id, str_buff, len, denum_buff);
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 294


 10554              	LM1305:
 10555 7792 8D85D8F9 		leal	-1576(%ebp), %eax
 10555      FFFF
 10556 7798 89442418 		movl	%eax, 24(%esp)
 10557 779c 8B45E4   		movl	-28(%ebp), %eax
 10558 779f 89442414 		movl	%eax, 20(%esp)
 10559 77a3 8D85D8FB 		leal	-1064(%ebp), %eax
 10559      FFFF
 10560 77a9 89442410 		movl	%eax, 16(%esp)
 10561 77ad 0FB745F6 		movzwl	-10(%ebp), %eax
 10562 77b1 8944240C 		movl	%eax, 12(%esp)
 10563 77b5 8D85D8FD 		leal	-552(%ebp), %eax
 10563      FFFF
 10564 77bb 89442408 		movl	%eax, 8(%esp)
 10565 77bf C7442404 		movl	$LC145, 4(%esp)
 10565      9A760000 
 10566 77c7 8B4508   		movl	8(%ebp), %eax
 10567 77ca 890424   		movl	%eax, (%esp)
 10568 77cd E8000000 		call	_fprintf
 10568      00
5584:str_merge.c   **** 
5585:str_merge.c   ****     return MMI_TRUE;
 10570              	LM1306:
 10571 77d2 C785D4F9 		movl	$1, -1580(%ebp)
 10571      FFFF0100 
 10571      0000
5586:str_merge.c   **** }
 10573              	LM1307:
 10574              	L595:
 10575              	LBE65:
 10576 77dc 8B85D4F9 		movl	-1580(%ebp), %eax
 10576      FFFF
 10577 77e2 C9       		leave
 10578 77e3 C3       		ret
 10590              	Lscope46:
 10592 77e4 90909090 		.align 32
 10592      90909090 
 10592      90909090 
 10592      90909090 
 10592      90909090 
 10593              	LC146:
 10594 7800 5B4D454D 		.ascii "[MEM]Create list of size %d in CreateRefList()\0"
 10594      5D437265 
 10594      61746520 
 10594      6C697374 
 10594      206F6620 
 10595              	LC147:
 10596 782f 43616E27 		.ascii "Can't create list of size %d\0"
 10596      74206372 
 10596      65617465 
 10596      206C6973 
 10596      74206F66 
 10600              	_CreateRefList:
5587:str_merge.c   **** #endif /* __MMI_RESOURCE_ENFB_SUPPORT__ */
5588:str_merge.c   **** 
5589:str_merge.c   **** #ifdef MEM_REF_LIST_OPT
5590:str_merge.c   **** /* Create RefList */
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 295


5591:str_merge.c   **** static RefList* CreateRefList(int listSize)
5592:str_merge.c   **** {
 10602              	LM1308:
 10603 784c 55       		pushl	%ebp
 10604 784d 89E5     		movl	%esp, %ebp
 10605 784f 53       		pushl	%ebx
 10606 7850 83EC14   		subl	$20, %esp
5593:str_merge.c   ****     STRMERG_LOG_V(STRMERG_SUB_TAG_MEM "Create list of size %d in CreateRefList()",listSize);
 10608              	LM1309:
 10609              	LBB66:
 10610 7853 8B4508   		movl	8(%ebp), %eax
 10611 7856 8944240C 		movl	%eax, 12(%esp)
 10612 785a C7442408 		movl	$LC146, 8(%esp)
 10612      00780000 
 10613 7862 C7442404 		movl	$LC3, 4(%esp)
 10613      4B040000 
 10614 786a C7042401 		movl	$1, (%esp)
 10614      000000
 10615 7871 E8000000 		call	_reslog_adaptor_log
 10615      00
5594:str_merge.c   ****     RefList* newList = (RefList*) malloc( sizeof(RefList) );
 10617              	LM1310:
 10618 7876 C7042410 		movl	$16, (%esp)
 10618      000000
 10619 787d E8000000 		call	_malloc
 10619      00
 10620 7882 8945F8   		movl	%eax, -8(%ebp)
5595:str_merge.c   ****     memset(newList,0,sizeof(RefList));
 10622              	LM1311:
 10623 7885 C7442408 		movl	$16, 8(%esp)
 10623      10000000 
 10624 788d C7442404 		movl	$0, 4(%esp)
 10624      00000000 
 10625 7895 8B45F8   		movl	-8(%ebp), %eax
 10626 7898 890424   		movl	%eax, (%esp)
 10627 789b E8000000 		call	_memset
 10627      00
5596:str_merge.c   ****     newList->ListItems = (RefListItem**) malloc( sizeof(RefListItem*) * listSize);
 10629              	LM1312:
 10630 78a0 8B5DF8   		movl	-8(%ebp), %ebx
 10631 78a3 8B4508   		movl	8(%ebp), %eax
 10632 78a6 C1E002   		sall	$2, %eax
 10633 78a9 890424   		movl	%eax, (%esp)
 10634 78ac E8000000 		call	_malloc
 10634      00
 10635 78b1 8903     		movl	%eax, (%ebx)
5597:str_merge.c   ****     if(newList->ListItems == NULL)
 10637              	LM1313:
 10638 78b3 8B45F8   		movl	-8(%ebp), %eax
 10639 78b6 833800   		cmpl	$0, (%eax)
 10640 78b9 7523     		jne	L601
5598:str_merge.c   ****     {
5599:str_merge.c   ****         STRMERG_LOG_E("Can't create list of size %d", listSize); 
 10642              	LM1314:
 10643 78bb 8B4508   		movl	8(%ebp), %eax
 10644 78be 8944240C 		movl	%eax, 12(%esp)
 10645 78c2 C7442408 		movl	$LC147, 8(%esp)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 296


 10645      2F780000 
 10646 78ca C7442404 		movl	$LC3, 4(%esp)
 10646      4B040000 
 10647 78d2 C7042403 		movl	$3, (%esp)
 10647      000000
 10648 78d9 E8000000 		call	_reslog_adaptor_log
 10648      00
 10649              	L601:
5600:str_merge.c   ****     }
5601:str_merge.c   ****   
5602:str_merge.c   ****     memset(newList->ListItems,0,sizeof(RefListItem*) * listSize);
 10651              	LM1315:
 10652 78de 8B4508   		movl	8(%ebp), %eax
 10653 78e1 C1E002   		sall	$2, %eax
 10654 78e4 89442408 		movl	%eax, 8(%esp)
 10655 78e8 C7442404 		movl	$0, 4(%esp)
 10655      00000000 
 10656 78f0 8B45F8   		movl	-8(%ebp), %eax
 10657 78f3 8B00     		movl	(%eax), %eax
 10658 78f5 890424   		movl	%eax, (%esp)
 10659 78f8 E8000000 		call	_memset
 10659      00
5603:str_merge.c   ****     newList->ListLength = 0;
 10661              	LM1316:
 10662 78fd 8B45F8   		movl	-8(%ebp), %eax
 10663 7900 C7400400 		movl	$0, 4(%eax)
 10663      000000
5604:str_merge.c   ****     newList->Size = listSize;
 10665              	LM1317:
 10666 7907 8B55F8   		movl	-8(%ebp), %edx
 10667 790a 8B4508   		movl	8(%ebp), %eax
 10668 790d 894208   		movl	%eax, 8(%edx)
5605:str_merge.c   ****     newList->AllocatedSize =0;
 10670              	LM1318:
 10671 7910 8B45F8   		movl	-8(%ebp), %eax
 10672 7913 C7400C00 		movl	$0, 12(%eax)
 10672      000000
5606:str_merge.c   ****     return newList;
 10674              	LM1319:
 10675 791a 8B45F8   		movl	-8(%ebp), %eax
5607:str_merge.c   **** }
 10677              	LM1320:
 10678 791d 83C414   		addl	$20, %esp
 10679 7920 5B       		popl	%ebx
 10680 7921 5D       		popl	%ebp
 10681 7922 C3       		ret
 10682              	LBE66:
 10686              	Lscope47:
 10688 7923 90909090 		.align 32
 10688      90909090 
 10688      90909090 
 10688      90909090 
 10688      90909090 
 10689              	LC148:
 10690 7940 5B4D454D 		.ascii "[MEM]Free list of size %d, %d items in CreateRefList()\0"
 10690      5D467265 
 10690      65206C69 
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 297


 10690      7374206F 
 10690      66207369 
 10691 7977 89F68DBC 		.align 32
 10691      27000000 
 10691      00
 10692              	LC149:
 10693 7980 5B4D454D 		.ascii "[MEM]DeleteRefList Finished ... %d items have been free\0"
 10693      5D44656C 
 10693      65746552 
 10693      65664C69 
 10693      73742046 
 10697              	_DeleteRefList:
5608:str_merge.c   **** 
5609:str_merge.c   **** /* Delete RefList */
5610:str_merge.c   **** static void DeleteRefList(RefList * list)
5611:str_merge.c   **** {
 10699              	LM1321:
 10700 79b8 55       		pushl	%ebp
 10701 79b9 89E5     		movl	%esp, %ebp
 10702 79bb 83EC28   		subl	$40, %esp
5612:str_merge.c   ****   STRMERG_LOG_V(STRMERG_SUB_TAG_MEM "Free list of size %d, %d items in CreateRefList()", list->List
 10704              	LM1322:
 10705              	LBB67:
 10706 79be 8B4508   		movl	8(%ebp), %eax
 10707 79c1 8B4008   		movl	8(%eax), %eax
 10708 79c4 89442410 		movl	%eax, 16(%esp)
 10709 79c8 8B4508   		movl	8(%ebp), %eax
 10710 79cb 8B4004   		movl	4(%eax), %eax
 10711 79ce 8944240C 		movl	%eax, 12(%esp)
 10712 79d2 C7442408 		movl	$LC148, 8(%esp)
 10712      40790000 
 10713 79da C7442404 		movl	$LC3, 4(%esp)
 10713      4B040000 
 10714 79e2 C7042401 		movl	$1, (%esp)
 10714      000000
 10715 79e9 E8000000 		call	_reslog_adaptor_log
 10715      00
5613:str_merge.c   ****   int i=0;
 10717              	LM1323:
 10718 79ee C745FC00 		movl	$0, -4(%ebp)
 10718      000000
5614:str_merge.c   ****   RefListItem * item = NULL;
 10720              	LM1324:
 10721 79f5 C745F800 		movl	$0, -8(%ebp)
 10721      000000
5615:str_merge.c   ****   for(i=0;i< list->ListLength;i++)
 10723              	LM1325:
 10724 79fc C745FC00 		movl	$0, -4(%ebp)
 10724      000000
 10725              	L603:
 10726 7a03 8B5508   		movl	8(%ebp), %edx
 10727 7a06 8B45FC   		movl	-4(%ebp), %eax
 10728 7a09 3B4204   		cmpl	4(%edx), %eax
 10729 7a0c 7C02     		jl	L606
 10730 7a0e EB42     		jmp	L604
 10731              	L606:
5616:str_merge.c   ****   {
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 298


5617:str_merge.c   ****     item = *(list->ListItems+i);
 10733              	LM1326:
 10734 7a10 8B4D08   		movl	8(%ebp), %ecx
 10735 7a13 8B45FC   		movl	-4(%ebp), %eax
 10736 7a16 8D148500 		leal	0(,%eax,4), %edx
 10736      000000
 10737 7a1d 8B01     		movl	(%ecx), %eax
 10738 7a1f 8B0410   		movl	(%eax,%edx), %eax
 10739 7a22 8945F8   		movl	%eax, -8(%ebp)
5618:str_merge.c   ****     if(item!=NULL)
 10741              	LM1327:
 10742 7a25 837DF800 		cmpl	$0, -8(%ebp)
 10743 7a29 7420     		je	L605
5619:str_merge.c   ****     {
5620:str_merge.c   ****       if(item->ItemData !=NULL){
 10745              	LM1328:
 10746 7a2b 8B45F8   		movl	-8(%ebp), %eax
 10747 7a2e 833800   		cmpl	$0, (%eax)
 10748 7a31 740D     		je	L608
5621:str_merge.c   ****         free(item->ItemData);
 10750              	LM1329:
 10751 7a33 8B45F8   		movl	-8(%ebp), %eax
 10752 7a36 8B00     		movl	(%eax), %eax
 10753 7a38 890424   		movl	%eax, (%esp)
 10754 7a3b E8000000 		call	_free
 10754      00
 10755              	L608:
5622:str_merge.c   ****       }
5623:str_merge.c   ****       free(item);
 10757              	LM1330:
 10758 7a40 8B45F8   		movl	-8(%ebp), %eax
 10759 7a43 890424   		movl	%eax, (%esp)
 10760 7a46 E8000000 		call	_free
 10760      00
 10762              	LM1331:
 10763              	L605:
 10764 7a4b 8D45FC   		leal	-4(%ebp), %eax
 10765 7a4e FF00     		incl	(%eax)
 10766 7a50 EBB1     		jmp	L603
 10767              	L604:
5624:str_merge.c   ****     }
5625:str_merge.c   ****   }
5626:str_merge.c   ****   free(list);
 10769              	LM1332:
 10770 7a52 8B4508   		movl	8(%ebp), %eax
 10771 7a55 890424   		movl	%eax, (%esp)
 10772 7a58 E8000000 		call	_free
 10772      00
5627:str_merge.c   ****   STRMERG_LOG_V(STRMERG_SUB_TAG_MEM "DeleteRefList Finished ... %d items have been free",i);
 10774              	LM1333:
 10775 7a5d 8B45FC   		movl	-4(%ebp), %eax
 10776 7a60 8944240C 		movl	%eax, 12(%esp)
 10777 7a64 C7442408 		movl	$LC149, 8(%esp)
 10777      80790000 
 10778 7a6c C7442404 		movl	$LC3, 4(%esp)
 10778      4B040000 
 10779 7a74 C7042401 		movl	$1, (%esp)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 299


 10779      000000
 10780 7a7b E8000000 		call	_reslog_adaptor_log
 10780      00
5628:str_merge.c   **** }
 10782              	LM1334:
 10783 7a80 C9       		leave
 10784 7a81 C3       		ret
 10785              	LBE67:
 10790              	Lscope48:
 10792              	LC150:
 10793 7a82 43616E27 		.ascii "Can't allocate item for %s\0"
 10793      7420616C 
 10793      6C6F6361 
 10793      74652069 
 10793      74656D20 
 10794 7a9d 8D7600   		.align 32
 10795              	LC151:
 10796 7aa0 43616E27 		.ascii "Can't allocate item ItemData for %s\0"
 10796      7420616C 
 10796      6C6F6361 
 10796      74652069 
 10796      74656D20 
 10800              	_CreateListItemFromStr:
5629:str_merge.c   **** 
5630:str_merge.c   **** 
5631:str_merge.c   **** /* Create a ref item object with a string line */
5632:str_merge.c   **** static RefListItem* CreateListItemFromStr(wchar_t * str)
5633:str_merge.c   **** {
 10802              	LM1335:
 10803 7ac4 55       		pushl	%ebp
 10804 7ac5 89E5     		movl	%esp, %ebp
 10805 7ac7 53       		pushl	%ebx
 10806 7ac8 83EC24   		subl	$36, %esp
5634:str_merge.c   ****     RefListItem* newItem = NULL;
 10808              	LM1336:
 10809              	LBB68:
 10810 7acb C745F800 		movl	$0, -8(%ebp)
 10810      000000
5635:str_merge.c   ****     newItem = malloc(sizeof(RefListItem));
 10812              	LM1337:
 10813 7ad2 C7042408 		movl	$8, (%esp)
 10813      000000
 10814 7ad9 E8000000 		call	_malloc
 10814      00
 10815 7ade 8945F8   		movl	%eax, -8(%ebp)
5636:str_merge.c   ****     /* Allocate list item */
5637:str_merge.c   ****     if(newItem == NULL)
 10817              	LM1338:
 10818 7ae1 837DF800 		cmpl	$0, -8(%ebp)
 10819 7ae5 753A     		jne	L610
5638:str_merge.c   ****     {
5639:str_merge.c   ****         STRMERG_LOG_E("Can't allocate item for %s",str);
 10821              	LM1339:
 10822 7ae7 8B4508   		movl	8(%ebp), %eax
 10823 7aea 8944240C 		movl	%eax, 12(%esp)
 10824 7aee C7442408 		movl	$LC150, 8(%esp)
 10824      827A0000 
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 300


 10825 7af6 C7442404 		movl	$LC3, 4(%esp)
 10825      4B040000 
 10826 7afe C7042403 		movl	$3, (%esp)
 10826      000000
 10827 7b05 E8000000 		call	_reslog_adaptor_log
 10827      00
5640:str_merge.c   ****         free(newItem);
 10829              	LM1340:
 10830 7b0a 8B45F8   		movl	-8(%ebp), %eax
 10831 7b0d 890424   		movl	%eax, (%esp)
 10832 7b10 E8000000 		call	_free
 10832      00
5641:str_merge.c   ****         return NULL;
 10834              	LM1341:
 10835 7b15 C745F400 		movl	$0, -12(%ebp)
 10835      000000
 10836 7b1c E9C00000 		jmp	L609
 10836      00
 10837              	L610:
5642:str_merge.c   ****     }
5643:str_merge.c   ****     memset(newItem,sizeof(RefListItem),0);
 10839              	LM1342:
 10840 7b21 C7442408 		movl	$0, 8(%esp)
 10840      00000000 
 10841 7b29 C7442404 		movl	$8, 4(%esp)
 10841      08000000 
 10842 7b31 8B45F8   		movl	-8(%ebp), %eax
 10843 7b34 890424   		movl	%eax, (%esp)
 10844 7b37 E8000000 		call	_memset
 10844      00
5644:str_merge.c   ****     newItem->ItemSize = (wcslen(str)+1) * sizeof(wchar_t) ;
 10846              	LM1343:
 10847 7b3c 8B5DF8   		movl	-8(%ebp), %ebx
 10848 7b3f 8B4508   		movl	8(%ebp), %eax
 10849 7b42 890424   		movl	%eax, (%esp)
 10850 7b45 E8000000 		call	_wcslen
 10850      00
 10851 7b4a 01C0     		addl	%eax, %eax
 10852 7b4c 83C002   		addl	$2, %eax
 10853 7b4f 894304   		movl	%eax, 4(%ebx)
5645:str_merge.c   ****     newItem->ItemData = malloc(newItem->ItemSize);
 10855              	LM1344:
 10856 7b52 8B5DF8   		movl	-8(%ebp), %ebx
 10857 7b55 8B45F8   		movl	-8(%ebp), %eax
 10858 7b58 8B4004   		movl	4(%eax), %eax
 10859 7b5b 890424   		movl	%eax, (%esp)
 10860 7b5e E8000000 		call	_malloc
 10860      00
 10861 7b63 8903     		movl	%eax, (%ebx)
5646:str_merge.c   ****     /* Allocate string data */
5647:str_merge.c   ****     if(newItem->ItemData == NULL)
 10863              	LM1345:
 10864 7b65 8B45F8   		movl	-8(%ebp), %eax
 10865 7b68 833800   		cmpl	$0, (%eax)
 10866 7b6b 753B     		jne	L611
5648:str_merge.c   ****     {
5649:str_merge.c   ****         STRMERG_LOG_E("Can't allocate item ItemData for %s",newItem->ItemData);
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 301


 10868              	LM1346:
 10869 7b6d 8B45F8   		movl	-8(%ebp), %eax
 10870 7b70 8B00     		movl	(%eax), %eax
 10871 7b72 8944240C 		movl	%eax, 12(%esp)
 10872 7b76 C7442408 		movl	$LC151, 8(%esp)
 10872      A07A0000 
 10873 7b7e C7442404 		movl	$LC3, 4(%esp)
 10873      4B040000 
 10874 7b86 C7042403 		movl	$3, (%esp)
 10874      000000
 10875 7b8d E8000000 		call	_reslog_adaptor_log
 10875      00
5650:str_merge.c   ****         free(newItem->ItemData);
 10877              	LM1347:
 10878 7b92 8B45F8   		movl	-8(%ebp), %eax
 10879 7b95 8B00     		movl	(%eax), %eax
 10880 7b97 890424   		movl	%eax, (%esp)
 10881 7b9a E8000000 		call	_free
 10881      00
5651:str_merge.c   ****         return NULL;
 10883              	LM1348:
 10884 7b9f C745F400 		movl	$0, -12(%ebp)
 10884      000000
 10885 7ba6 EB39     		jmp	L609
 10886              	L611:
5652:str_merge.c   ****     }
5653:str_merge.c   ****     memset(newItem->ItemData,newItem->ItemSize,0);
 10888              	LM1349:
 10889 7ba8 C7442408 		movl	$0, 8(%esp)
 10889      00000000 
 10890 7bb0 8B45F8   		movl	-8(%ebp), %eax
 10891 7bb3 8B4004   		movl	4(%eax), %eax
 10892 7bb6 89442404 		movl	%eax, 4(%esp)
 10893 7bba 8B45F8   		movl	-8(%ebp), %eax
 10894 7bbd 8B00     		movl	(%eax), %eax
 10895 7bbf 890424   		movl	%eax, (%esp)
 10896 7bc2 E8000000 		call	_memset
 10896      00
5654:str_merge.c   ****     wcscpy(newItem->ItemData,str);
 10898              	LM1350:
 10899 7bc7 8B4508   		movl	8(%ebp), %eax
 10900 7bca 89442404 		movl	%eax, 4(%esp)
 10901 7bce 8B45F8   		movl	-8(%ebp), %eax
 10902 7bd1 8B00     		movl	(%eax), %eax
 10903 7bd3 890424   		movl	%eax, (%esp)
 10904 7bd6 E8000000 		call	_wcscpy
 10904      00
5655:str_merge.c   ****     return newItem;
 10906              	LM1351:
 10907 7bdb 8B45F8   		movl	-8(%ebp), %eax
 10908 7bde 8945F4   		movl	%eax, -12(%ebp)
5656:str_merge.c   **** }
 10910              	LM1352:
 10911              	L609:
 10912              	LBE68:
 10913 7be1 8B45F4   		movl	-12(%ebp), %eax
 10914 7be4 83C424   		addl	$36, %esp
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 302


 10915 7be7 5B       		popl	%ebx
 10916 7be8 5D       		popl	%ebp
 10917 7be9 C3       		ret
 10921              	Lscope49:
 10923 7bea 90909090 		.align 32
 10923      90909090 
 10923      90909090 
 10923      90909090 
 10923      90909090 
 10924              	LC152:
 10925 7c00 4C697374 		.ascii "List can't not be null in AddRefListItem()\0"
 10925      2063616E 
 10925      2774206E 
 10925      6F742062 
 10925      65206E75 
 10926 7c2b 90909090 		.align 32
 10926      90909090 
 10926      90909090 
 10926      90909090 
 10926      90909090 
 10927              	LC153:
 10928 7c40 52657369 		.ascii "Resize list from %d to %d in AddRefListItem()\0"
 10928      7A65206C 
 10928      69737420 
 10928      66726F6D 
 10928      20256420 
 10929 7c6e 90909090 		.align 32
 10929      90909090 
 10929      90909090 
 10929      90909090 
 10929      9090
 10930              	LC154:
 10931 7c80 4F757420 		.ascii "Out of memory. Can't resize list in AddRefListItem().\0"
 10931      6F66206D 
 10931      656D6F72 
 10931      792E2043 
 10931      616E2774 
 10936              	_AddRefListItem:
5657:str_merge.c   **** 
5658:str_merge.c   **** /* Add an item form a ref list */
5659:str_merge.c   **** static int AddRefListItem(RefList * list, RefListItem* item)
5660:str_merge.c   **** {
 10938              	LM1353:
 10939 7cb6 55       		pushl	%ebp
 10940 7cb7 89E5     		movl	%esp, %ebp
 10941 7cb9 83EC38   		subl	$56, %esp
5661:str_merge.c   ****     int newSize = 0;
 10943              	LM1354:
 10944              	LBB69:
 10945 7cbc C745FC00 		movl	$0, -4(%ebp)
 10945      000000
5662:str_merge.c   ****     int indx = 0;
 10947              	LM1355:
 10948 7cc3 C745F800 		movl	$0, -8(%ebp)
 10948      000000
5663:str_merge.c   ****     RefListItem* tmpItem = NULL;
 10950              	LM1356:
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 303


 10951 7cca C745F400 		movl	$0, -12(%ebp)
 10951      000000
5664:str_merge.c   ****     RefListItem** tmpItemList = NULL;
 10953              	LM1357:
 10954 7cd1 C745F000 		movl	$0, -16(%ebp)
 10954      000000
5665:str_merge.c   ****   
5666:str_merge.c   ****     /* Null pointer check */
5667:str_merge.c   ****     if(list == NULL)
 10956              	LM1358:
 10957 7cd8 837D0800 		cmpl	$0, 8(%ebp)
 10958 7cdc 7528     		jne	L613
5668:str_merge.c   ****     {
5669:str_merge.c   ****         STRMERG_LOG_E("List can't not be null in AddRefListItem()");
 10960              	LM1359:
 10961 7cde C7442408 		movl	$LC152, 8(%esp)
 10961      007C0000 
 10962 7ce6 C7442404 		movl	$LC3, 4(%esp)
 10962      4B040000 
 10963 7cee C7042403 		movl	$3, (%esp)
 10963      000000
 10964 7cf5 E8000000 		call	_reslog_adaptor_log
 10964      00
5670:str_merge.c   ****         return -1;
 10966              	LM1360:
 10967 7cfa C745E8FF 		movl	$-1, -24(%ebp)
 10967      FFFFFF
 10968 7d01 E9250100 		jmp	L612
 10968      00
 10969              	L613:
5671:str_merge.c   ****     }
5672:str_merge.c   ****     /* Size check */
5673:str_merge.c   ****     /* If the size is not enough, adjust it. */
5674:str_merge.c   ****     if( (list->ListLength)+1 > list->Size )
 10971              	LM1361:
 10972 7d06 8B4508   		movl	8(%ebp), %eax
 10973 7d09 8B5004   		movl	4(%eax), %edx
 10974 7d0c 42       		incl	%edx
 10975 7d0d 8B4508   		movl	8(%ebp), %eax
 10976 7d10 3B5008   		cmpl	8(%eax), %edx
 10977 7d13 0F8EDC00 		jle	L614
 10977      0000
5675:str_merge.c   ****     {
5676:str_merge.c   ****         newSize =  list->Size + REF_LIST_SIZE_INCREMENT;
 10979              	LM1362:
 10980              	LBB70:
 10981 7d19 8B4508   		movl	8(%ebp), %eax
 10982 7d1c 8B4008   		movl	8(%eax), %eax
 10983 7d1f 05F40100 		addl	$500, %eax
 10983      00
 10984 7d24 8945FC   		movl	%eax, -4(%ebp)
5677:str_merge.c   ****         STRMERG_LOG_E("Resize list from %d to %d in AddRefListItem()",list->Size, newSize);
 10986              	LM1363:
 10987 7d27 8B45FC   		movl	-4(%ebp), %eax
 10988 7d2a 89442410 		movl	%eax, 16(%esp)
 10989 7d2e 8B4508   		movl	8(%ebp), %eax
 10990 7d31 8B4008   		movl	8(%eax), %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 304


 10991 7d34 8944240C 		movl	%eax, 12(%esp)
 10992 7d38 C7442408 		movl	$LC153, 8(%esp)
 10992      407C0000 
 10993 7d40 C7442404 		movl	$LC3, 4(%esp)
 10993      4B040000 
 10994 7d48 C7042403 		movl	$3, (%esp)
 10994      000000
 10995 7d4f E8000000 		call	_reslog_adaptor_log
 10995      00
5678:str_merge.c   ****         /* Allocated items*/
5679:str_merge.c   ****         RefListItem **newList =  (RefList**)malloc( sizeof(RefListItem*) * newSize);
 10997              	LM1364:
 10998 7d54 8B45FC   		movl	-4(%ebp), %eax
 10999 7d57 C1E002   		sall	$2, %eax
 11000 7d5a 890424   		movl	%eax, (%esp)
 11001 7d5d E8000000 		call	_malloc
 11001      00
 11002 7d62 8945EC   		movl	%eax, -20(%ebp)
5680:str_merge.c   ****         if(newList==NULL)
 11004              	LM1365:
 11005 7d65 837DEC00 		cmpl	$0, -20(%ebp)
 11006 7d69 7528     		jne	L615
5681:str_merge.c   ****         {
5682:str_merge.c   ****             STRMERG_LOG_E("Out of memory. Can't resize list in AddRefListItem().");
 11008              	LM1366:
 11009 7d6b C7442408 		movl	$LC154, 8(%esp)
 11009      807C0000 
 11010 7d73 C7442404 		movl	$LC3, 4(%esp)
 11010      4B040000 
 11011 7d7b C7042403 		movl	$3, (%esp)
 11011      000000
 11012 7d82 E8000000 		call	_reslog_adaptor_log
 11012      00
5683:str_merge.c   ****             return -1;
 11014              	LM1367:
 11015 7d87 C745E8FF 		movl	$-1, -24(%ebp)
 11015      FFFFFF
 11016 7d8e E9980000 		jmp	L612
 11016      00
 11017              	L615:
5684:str_merge.c   ****         }
5685:str_merge.c   ****         tmpItemList = list->ListItems;
 11019              	LM1368:
 11020 7d93 8B4508   		movl	8(%ebp), %eax
 11021 7d96 8B00     		movl	(%eax), %eax
 11022 7d98 8945F0   		movl	%eax, -16(%ebp)
5686:str_merge.c   ****         memset(newList, 0, sizeof(RefListItem*) * newSize);
 11024              	LM1369:
 11025 7d9b 8B45FC   		movl	-4(%ebp), %eax
 11026 7d9e C1E002   		sall	$2, %eax
 11027 7da1 89442408 		movl	%eax, 8(%esp)
 11028 7da5 C7442404 		movl	$0, 4(%esp)
 11028      00000000 
 11029 7dad 8B45EC   		movl	-20(%ebp), %eax
 11030 7db0 890424   		movl	%eax, (%esp)
 11031 7db3 E8000000 		call	_memset
 11031      00
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 305


5687:str_merge.c   ****         memcpy(newList ,list->ListItems, sizeof(RefListItem*) * list->Size) ;
 11033              	LM1370:
 11034 7db8 8B4508   		movl	8(%ebp), %eax
 11035 7dbb 8B4008   		movl	8(%eax), %eax
 11036 7dbe C1E002   		sall	$2, %eax
 11037 7dc1 89442408 		movl	%eax, 8(%esp)
 11038 7dc5 8B4508   		movl	8(%ebp), %eax
 11039 7dc8 8B00     		movl	(%eax), %eax
 11040 7dca 89442404 		movl	%eax, 4(%esp)
 11041 7dce 8B45EC   		movl	-20(%ebp), %eax
 11042 7dd1 890424   		movl	%eax, (%esp)
 11043 7dd4 E8000000 		call	_memcpy
 11043      00
5688:str_merge.c   ****         list->Size = newSize;
 11045              	LM1371:
 11046 7dd9 8B5508   		movl	8(%ebp), %edx
 11047 7ddc 8B45FC   		movl	-4(%ebp), %eax
 11048 7ddf 894208   		movl	%eax, 8(%edx)
5689:str_merge.c   ****         list->ListItems = newList;
 11050              	LM1372:
 11051 7de2 8B5508   		movl	8(%ebp), %edx
 11052 7de5 8B45EC   		movl	-20(%ebp), %eax
 11053 7de8 8902     		movl	%eax, (%edx)
5690:str_merge.c   ****         /* Release the original items*/
5691:str_merge.c   ****         free(tmpItemList);
 11055              	LM1373:
 11056 7dea 8B45F0   		movl	-16(%ebp), %eax
 11057 7ded 890424   		movl	%eax, (%esp)
 11058 7df0 E8000000 		call	_free
 11058      00
 11059              	L614:
5692:str_merge.c   ****     }
5693:str_merge.c   ****     indx = list->ListLength;
 11061              	LM1374:
 11062              	LBE70:
 11063 7df5 8B4508   		movl	8(%ebp), %eax
 11064 7df8 8B4004   		movl	4(%eax), %eax
 11065 7dfb 8945F8   		movl	%eax, -8(%ebp)
5694:str_merge.c   ****     *(list->ListItems + indx) = item;
 11067              	LM1375:
 11068 7dfe 8B5508   		movl	8(%ebp), %edx
 11069 7e01 8B45F8   		movl	-8(%ebp), %eax
 11070 7e04 8D0C8500 		leal	0(,%eax,4), %ecx
 11070      000000
 11071 7e0b 8B12     		movl	(%edx), %edx
 11072 7e0d 8B450C   		movl	12(%ebp), %eax
 11073 7e10 89040A   		movl	%eax, (%edx,%ecx)
5695:str_merge.c   ****     list->ListLength++;
 11075              	LM1376:
 11076 7e13 8B4508   		movl	8(%ebp), %eax
 11077 7e16 FF4004   		incl	4(%eax)
5696:str_merge.c   ****     list->AllocatedSize += item->ItemSize;
 11079              	LM1377:
 11080 7e19 8B4D08   		movl	8(%ebp), %ecx
 11081 7e1c 8B5508   		movl	8(%ebp), %edx
 11082 7e1f 8B450C   		movl	12(%ebp), %eax
 11083 7e22 8B4004   		movl	4(%eax), %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 306


 11084 7e25 03420C   		addl	12(%edx), %eax
 11085 7e28 89410C   		movl	%eax, 12(%ecx)
5697:str_merge.c   **** }
 11087              	LM1378:
 11088              	L612:
 11089              	LBE69:
 11090 7e2b 8B45E8   		movl	-24(%ebp), %eax
 11091 7e2e C9       		leave
 11092 7e2f C3       		ret
 11102              	Lscope50:
 11104 7e30 90909090 		.align 32
 11104      90909090 
 11104      90909090 
 11104      90909090 
 11105              	LC155:
 11106 7e40 5B4D454D 		.ascii "[MEM]GetRefListItem overflow: idx =%d, len = %d\0"
 11106      5D476574 
 11106      5265664C 
 11106      69737449 
 11106      74656D20 
 11107              	LC156:
 11108 7e70 0A455252 		.ascii "\12ERROR, tmp == NULL\0"
 11108      4F522C20 
 11108      746D7020 
 11108      3D3D204E 
 11108      554C4C00 
 11113              	_GetRefListItem:
5698:str_merge.c   **** 
5699:str_merge.c   **** /* Get an item from a ref list */
5700:str_merge.c   **** static RefListItem* GetRefListItem(RefList * list, int index)
5701:str_merge.c   **** {
 11115              	LM1379:
 11116 7e84 55       		pushl	%ebp
 11117 7e85 89E5     		movl	%esp, %ebp
 11118 7e87 83EC28   		subl	$40, %esp
5702:str_merge.c   ****     /* size check */
5703:str_merge.c   ****     RefListItem** tmp = NULL;
 11120              	LM1380:
 11121              	LBB71:
 11122 7e8a C745FC00 		movl	$0, -4(%ebp)
 11122      000000
5704:str_merge.c   ****     if(index >= list->ListLength){
 11124              	LM1381:
 11125 7e91 8B5508   		movl	8(%ebp), %edx
 11126 7e94 8B450C   		movl	12(%ebp), %eax
 11127 7e97 3B4204   		cmpl	4(%edx), %eax
 11128 7e9a 7C36     		jl	L617
5705:str_merge.c   ****         STRMERG_LOG_E("[MEM]GetRefListItem overflow: idx =%d, len = %d", index, list->ListLength);
 11130              	LM1382:
 11131 7e9c 8B4508   		movl	8(%ebp), %eax
 11132 7e9f 8B4004   		movl	4(%eax), %eax
 11133 7ea2 89442410 		movl	%eax, 16(%esp)
 11134 7ea6 8B450C   		movl	12(%ebp), %eax
 11135 7ea9 8944240C 		movl	%eax, 12(%esp)
 11136 7ead C7442408 		movl	$LC155, 8(%esp)
 11136      407E0000 
 11137 7eb5 C7442404 		movl	$LC3, 4(%esp)
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 307


 11137      4B040000 
 11138 7ebd C7042403 		movl	$3, (%esp)
 11138      000000
 11139 7ec4 E8000000 		call	_reslog_adaptor_log
 11139      00
5706:str_merge.c   ****         return NULL;
 11141              	LM1383:
 11142 7ec9 C745F800 		movl	$0, -8(%ebp)
 11142      000000
 11143 7ed0 EB41     		jmp	L616
 11144              	L617:
5707:str_merge.c   ****     }
5708:str_merge.c   ****     else
5709:str_merge.c   ****     {
5710:str_merge.c   ****         tmp = list->ListItems + index;
 11146              	LM1384:
 11147 7ed2 8B5508   		movl	8(%ebp), %edx
 11148 7ed5 8B450C   		movl	12(%ebp), %eax
 11149 7ed8 C1E002   		sall	$2, %eax
 11150 7edb 0302     		addl	(%edx), %eax
 11151 7edd 8945FC   		movl	%eax, -4(%ebp)
5711:str_merge.c   ****         if(tmp==NULL)
 11153              	LM1385:
 11154 7ee0 837DFC00 		cmpl	$0, -4(%ebp)
 11155 7ee4 7525     		jne	L619
5712:str_merge.c   ****         {
5713:str_merge.c   ****             STRMERG_LOG_E("\nERROR, tmp == NULL");
 11157              	LM1386:
 11158 7ee6 C7442408 		movl	$LC156, 8(%esp)
 11158      707E0000 
 11159 7eee C7442404 		movl	$LC3, 4(%esp)
 11159      4B040000 
 11160 7ef6 C7042403 		movl	$3, (%esp)
 11160      000000
 11161 7efd E8000000 		call	_reslog_adaptor_log
 11161      00
5714:str_merge.c   ****             return NULL;
 11163              	LM1387:
 11164 7f02 C745F800 		movl	$0, -8(%ebp)
 11164      000000
 11165 7f09 EB08     		jmp	L616
 11166              	L619:
5715:str_merge.c   **** 	}
5716:str_merge.c   **** 	return *(tmp);
 11168              	LM1388:
 11169 7f0b 8B45FC   		movl	-4(%ebp), %eax
 11170 7f0e 8B00     		movl	(%eax), %eax
 11171 7f10 8945F8   		movl	%eax, -8(%ebp)
5717:str_merge.c   ****     }
5718:str_merge.c   **** }
 11173              	LM1389:
 11174              	L616:
 11175              	LBE71:
 11176 7f13 8B45F8   		movl	-8(%ebp), %eax
 11177 7f16 C9       		leave
 11178 7f17 C3       		ret
 11182              	Lscope51:
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 308


 11184              	LC157:
 11185 7f18 46726565 		.ascii "Free old item%d\0"
 11185      206F6C64 
 11185      20697465 
 11185      6D256400 
 11191              	_SetRefListItem:
5719:str_merge.c   **** 
5720:str_merge.c   **** /* Set a list item, the old item is free by this function automatically */
5721:str_merge.c   **** static int SetRefListItem(RefList * list,int index,RefListItem* item)
5722:str_merge.c   **** {
 11193              	LM1390:
 11194 7f28 55       		pushl	%ebp
 11195 7f29 89E5     		movl	%esp, %ebp
 11196 7f2b 83EC18   		subl	$24, %esp
5723:str_merge.c   ****     RefListItem* oldItem = GetRefListItem(list,index);
 11198              	LM1391:
 11199              	LBB72:
 11200 7f2e 8B450C   		movl	12(%ebp), %eax
 11201 7f31 89442404 		movl	%eax, 4(%esp)
 11202 7f35 8B4508   		movl	8(%ebp), %eax
 11203 7f38 890424   		movl	%eax, (%esp)
 11204 7f3b E844FFFF 		call	_GetRefListItem
 11204      FF
 11205 7f40 8945FC   		movl	%eax, -4(%ebp)
5724:str_merge.c   ****     if(oldItem!=NULL)
 11207              	LM1392:
 11208 7f43 837DFC00 		cmpl	$0, -4(%ebp)
 11209 7f47 7443     		je	L621
5725:str_merge.c   ****     {
5726:str_merge.c   ****         STRMERG_LOG_V("Free old item%d", index);
 11211              	LM1393:
 11212 7f49 8B450C   		movl	12(%ebp), %eax
 11213 7f4c 8944240C 		movl	%eax, 12(%esp)
 11214 7f50 C7442408 		movl	$LC157, 8(%esp)
 11214      187F0000 
 11215 7f58 C7442404 		movl	$LC3, 4(%esp)
 11215      4B040000 
 11216 7f60 C7042401 		movl	$1, (%esp)
 11216      000000
 11217 7f67 E8000000 		call	_reslog_adaptor_log
 11217      00
5727:str_merge.c   ****         if(oldItem->ItemData != NULL)
 11219              	LM1394:
 11220 7f6c 8B45FC   		movl	-4(%ebp), %eax
 11221 7f6f 833800   		cmpl	$0, (%eax)
 11222 7f72 740D     		je	L622
5728:str_merge.c   ****         {
5729:str_merge.c   ****             free(oldItem->ItemData);
 11224              	LM1395:
 11225 7f74 8B45FC   		movl	-4(%ebp), %eax
 11226 7f77 8B00     		movl	(%eax), %eax
 11227 7f79 890424   		movl	%eax, (%esp)
 11228 7f7c E8000000 		call	_free
 11228      00
 11229              	L622:
5730:str_merge.c   ****         }
5731:str_merge.c   ****         free(oldItem);
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 309


 11231              	LM1396:
 11232 7f81 8B45FC   		movl	-4(%ebp), %eax
 11233 7f84 890424   		movl	%eax, (%esp)
 11234 7f87 E8000000 		call	_free
 11234      00
 11235              	L621:
5732:str_merge.c   ****     }
5733:str_merge.c   ****     if( list!=NULL && list->ListItems !=NULL)
 11237              	LM1397:
 11238 7f8c 837D0800 		cmpl	$0, 8(%ebp)
 11239 7f90 741F     		je	L623
 11240 7f92 8B4508   		movl	8(%ebp), %eax
 11241 7f95 833800   		cmpl	$0, (%eax)
 11242 7f98 7417     		je	L623
5734:str_merge.c   ****     {
5735:str_merge.c   ****         *(list->ListItems + index) = item;
 11244              	LM1398:
 11245 7f9a 8B5508   		movl	8(%ebp), %edx
 11246 7f9d 8B450C   		movl	12(%ebp), %eax
 11247 7fa0 8D0C8500 		leal	0(,%eax,4), %ecx
 11247      000000
 11248 7fa7 8B12     		movl	(%edx), %edx
 11249 7fa9 8B4510   		movl	16(%ebp), %eax
 11250 7fac 89040A   		movl	%eax, (%edx,%ecx)
 11251 7faf EB09     		jmp	L624
 11252              	L623:
5736:str_merge.c   ****     }
5737:str_merge.c   **** 	else
5738:str_merge.c   **** 	{
5739:str_merge.c   ****         return -1;
 11254              	LM1399:
 11255 7fb1 C745F8FF 		movl	$-1, -8(%ebp)
 11255      FFFFFF
 11256 7fb8 EB07     		jmp	L620
 11257              	L624:
5740:str_merge.c   **** 	}
5741:str_merge.c   ****     
5742:str_merge.c   ****     return 0;
 11259              	LM1400:
 11260 7fba C745F800 		movl	$0, -8(%ebp)
 11260      000000
5743:str_merge.c   **** }
 11262              	LM1401:
 11263              	L620:
 11264              	LBE72:
 11265 7fc1 8B45F8   		movl	-8(%ebp), %eax
 11266 7fc4 C9       		leave
 11267 7fc5 C3       		ret
 11271              	Lscope52:
 11273              	LC158:
 11274 7fc6 44554D50 		.ascii "DUMP REF LIST to %s\0"
 11274      20524546 
 11274      204C4953 
 11274      5420746F 
 11274      20257300 
 11275              	LC159:
 11276 7fda 4F70656E 		.ascii "Open file suceess!!\0"
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 310


 11276      2066696C 
 11276      65207375 
 11276      63656573 
 11276      73212100 
 11277              		.align 2
 11278              	LC160:
 11279 7fee 0D000A00 		.ascii "\15\0\12\0\0\0"
 11279      0000
 11284              	_DumpRefList:
5744:str_merge.c   **** #endif /* MEM_REF_LIST_OPT*/
5745:str_merge.c   **** 
5746:str_merge.c   **** #ifdef STR_MERGE_DEBUG
5747:str_merge.c   **** #ifndef MEM_REF_LIST_OPT
5748:str_merge.c   **** static void DumpRefList(const char* filename, wchar_t *list,const int itemSize, int count)
5749:str_merge.c   **** {
5750:str_merge.c   ****     int i=0;
5751:str_merge.c   ****     wchar_t *tmp = list;	
5752:str_merge.c   ****     FILE * outputfile;
5753:str_merge.c   ****     outputfile = fopen(filename,"w");
5754:str_merge.c   ****     for(i=0;i< count;i++)
5755:str_merge.c   ****     {
5756:str_merge.c   ****         fputws(tmp,outputfile);
5757:str_merge.c   ****         fputws(L"\r\n", outputfile);
5758:str_merge.c   ****         tmp += itemSize;
5759:str_merge.c   ****     }
5760:str_merge.c   ****     fclose(outputfile);
5761:str_merge.c   **** }
5762:str_merge.c   **** 
5763:str_merge.c   **** 
5764:str_merge.c   **** #else /*MEM_REF_LIST_OPT*/
5765:str_merge.c   **** 
5766:str_merge.c   **** static void DumpRefList(const char* filename, RefList *list)
5767:str_merge.c   **** {
 11286              	LM1402:
 11287 7ff4 55       		pushl	%ebp
 11288 7ff5 89E5     		movl	%esp, %ebp
 11289 7ff7 83EC28   		subl	$40, %esp
5768:str_merge.c   ****     int i = 0;
 11291              	LM1403:
 11292              	LBB73:
 11293 7ffa C745FC00 		movl	$0, -4(%ebp)
 11293      000000
5769:str_merge.c   ****     FILE * outputfile;
5770:str_merge.c   ****     int length =0;
 11295              	LM1404:
 11296 8001 C745F400 		movl	$0, -12(%ebp)
 11296      000000
5771:str_merge.c   ****     STRMERG_LOG_V("DUMP REF LIST to %s", filename);
 11298              	LM1405:
 11299 8008 8B4508   		movl	8(%ebp), %eax
 11300 800b 8944240C 		movl	%eax, 12(%esp)
 11301 800f C7442408 		movl	$LC158, 8(%esp)
 11301      C67F0000 
 11302 8017 C7442404 		movl	$LC3, 4(%esp)
 11302      4B040000 
 11303 801f C7042401 		movl	$1, (%esp)
 11303      000000
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 311


 11304 8026 E8000000 		call	_reslog_adaptor_log
 11304      00
5772:str_merge.c   ****     outputfile = fopen(filename,"w");
 11306              	LM1406:
 11307 802b C7442404 		movl	$LC26, 4(%esp)
 11307      7F150000 
 11308 8033 8B4508   		movl	8(%ebp), %eax
 11309 8036 890424   		movl	%eax, (%esp)
 11310 8039 E8000000 		call	_fopen
 11310      00
 11311 803e 8945F8   		movl	%eax, -8(%ebp)
5773:str_merge.c   ****     STRMERG_LOG_V("Open file suceess!!");
 11313              	LM1407:
 11314 8041 C7442408 		movl	$LC159, 8(%esp)
 11314      DA7F0000 
 11315 8049 C7442404 		movl	$LC3, 4(%esp)
 11315      4B040000 
 11316 8051 C7042401 		movl	$1, (%esp)
 11316      000000
 11317 8058 E8000000 		call	_reslog_adaptor_log
 11317      00
5774:str_merge.c   ****     for(i=0;i< list->ListLength;i++)
 11319              	LM1408:
 11320 805d C745FC00 		movl	$0, -4(%ebp)
 11320      000000
 11321              	L626:
 11322 8064 8B550C   		movl	12(%ebp), %edx
 11323 8067 8B45FC   		movl	-4(%ebp), %eax
 11324 806a 3B4204   		cmpl	4(%edx), %eax
 11325 806d 7C02     		jl	L629
 11326 806f EB62     		jmp	L627
 11327              	L629:
5775:str_merge.c   ****     {
5776:str_merge.c   ****         length= wcslen((*(list->ListItems+i))->ItemData);
 11329              	LM1409:
 11330 8071 8B4D0C   		movl	12(%ebp), %ecx
 11331 8074 8B45FC   		movl	-4(%ebp), %eax
 11332 8077 8D148500 		leal	0(,%eax,4), %edx
 11332      000000
 11333 807e 8B01     		movl	(%ecx), %eax
 11334 8080 8B0410   		movl	(%eax,%edx), %eax
 11335 8083 8B00     		movl	(%eax), %eax
 11336 8085 890424   		movl	%eax, (%esp)
 11337 8088 E8000000 		call	_wcslen
 11337      00
 11338 808d 8945F4   		movl	%eax, -12(%ebp)
5777:str_merge.c   ****         if(length >0 )
 11340              	LM1410:
 11341 8090 837DF400 		cmpl	$0, -12(%ebp)
 11342 8094 7E36     		jle	L628
5778:str_merge.c   ****         {
5779:str_merge.c   ****             fputws((*(list->ListItems+i))->ItemData, outputfile);
 11344              	LM1411:
 11345 8096 8B45F8   		movl	-8(%ebp), %eax
 11346 8099 89442404 		movl	%eax, 4(%esp)
 11347 809d 8B4D0C   		movl	12(%ebp), %ecx
 11348 80a0 8B45FC   		movl	-4(%ebp), %eax
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 312


 11349 80a3 8D148500 		leal	0(,%eax,4), %edx
 11349      000000
 11350 80aa 8B01     		movl	(%ecx), %eax
 11351 80ac 8B0410   		movl	(%eax,%edx), %eax
 11352 80af 8B00     		movl	(%eax), %eax
 11353 80b1 890424   		movl	%eax, (%esp)
 11354 80b4 E8000000 		call	_fputws
 11354      00
5780:str_merge.c   ****             fputws(L"\r\n", outputfile);
 11356              	LM1412:
 11357 80b9 8B45F8   		movl	-8(%ebp), %eax
 11358 80bc 89442404 		movl	%eax, 4(%esp)
 11359 80c0 C70424EE 		movl	$LC160, (%esp)
 11359      7F0000
 11360 80c7 E8000000 		call	_fputws
 11360      00
 11362              	LM1413:
 11363              	L628:
 11364 80cc 8D45FC   		leal	-4(%ebp), %eax
 11365 80cf FF00     		incl	(%eax)
 11366 80d1 EB91     		jmp	L626
 11367              	L627:
5781:str_merge.c   ****         }
5782:str_merge.c   ****     }
5783:str_merge.c   ****     fclose(outputfile);
 11369              	LM1414:
 11370 80d3 8B45F8   		movl	-8(%ebp), %eax
 11371 80d6 890424   		movl	%eax, (%esp)
 11372 80d9 E8000000 		call	_fclose
 11372      00
5784:str_merge.c   **** }
 11374              	LM1415:
 11375 80de C9       		leave
 11376 80df C3       		ret
 11377              	LBE73:
 11383              	Lscope53:
 11385              		.comm	_fixed_id, 16	 # 16
 11386              		.comm	_fixed_result, 16	 # 8
 11387              	.lcomm _mtk_gLanguageFlag,16
 11388              	.lcomm _is16bit,16
 11389              	.lcomm _StrLine,131072
 11390              	.lcomm _StrSize,131072
 11412              		.text
 11414              	Letext:
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 313


DEFINED SYMBOLS
                            *ABS*:00000000 str_merge.c
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:371    .bss:00000000 _CurrMaxTransStrId
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:373    .bss:00000008 _str_merge_err_code
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:376    .data:00000000 _str_merge_err_msg
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:385    .text:00000000 _str_merge_set_err
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:412    .text:0000002b _str_merge_get_err
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:440    .data:00000194 _DELIMETER
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:448    .data:00000198 _EOS
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:450    .bss:00000018 _StrID
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:451    .bss:00000028 _g_line_buf_length
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:452    .bss:00000038 _g_line_buf_act_length
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:453    .bss:00000048 _ref_all_list
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:454    .bss:00000058 _ref_ssc
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:455    .bss:00000068 _ref_tmp
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:456    .bss:00000078 _nLang
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:457    .bss:00000088 _filter_ref_ssc
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:458    .bss:00000098 _nUsedLang
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:459    .bss:000000a8 _line_offset
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:464    .text:00000050 _CreateHashTable
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:549    .text:000000e1 _DJBHash
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:615    .text:00000143 _hash_add
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:827    .text:000002bc _hash_search
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:926    .text:0000035f _hash_free
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:1017   .text:000003e3 _UCS2ASCII
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:1083   .text:00000455 _GetItem
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:1264   .text:000005b8 _OutputFixColumns
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:1374   .text:000006e8 _GetLineBufLength
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:1478   .text:000007aa _en_language_is_open
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:1553   .text:00000824 _get_language_in_ssc_index
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:1862   .text:00000ac4 _filter_raw_string
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:2099   .text:00000d8d _check_ref_list_item
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:2205   .text:000010ce _load_ref_list_to_mem
                            *COM*:00000010 _fixed_id
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:2493   .text:0000138b _get_ref_count
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:2568   .text:00001402 _get_filter_used_language_count
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:2685   .text:00001892 _MergeStrRes
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:11390  .bss:000200d8 _StrSize
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:11389  .bss:000000d8 _StrLine
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:3921   .text:000027ad _mask_length
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:3980   .text:000027f4 _pow
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:4028   .text:00002828 _fmod
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:4071   .text:0000284d _GetHashValue
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:4160   .text:000028e9 _Trans
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:4262   .text:0000299a _UCS2ASCII_CR
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:4358   .text:00002a1d _ifLanguageUsed
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:4433   .text:00002a90 _GetStrByRef
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:4494   .text:00002afc _LookupDupStr
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:11387  .bss:000000b8 _mtk_gLanguageFlag
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:4872   .text:00003068 _GetStrResList
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:6276   .text:00004041 _print_language_usage
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:6465   .text:000041e7 _GetItemAsc
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:6585   .text:0000429a _append_cat_padding_bytes
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:6826   .text:00004cab _GenerateStrResFile
                            *COM*:00000010 _fixed_result
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:11388  .bss:000000c8 _is16bit
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:8499   .text:00005fe7 _generate_map2
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 314


f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:8802   .text:00006281 _generate_strmap_search
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:8919   .text:000065f6 _generate_language_list_array
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:9142   .text:000068ac _init_fixed_id
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:9274   .text:000069b9 _set_fixed_str_flag
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:9353   .text:00006a40 _generate_enum_hash
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:9450   .text:00006ae4 _get_fixed_string_total_len
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:9578   .text:00006e70 _generate_fixed_str
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:10133  .text:00007431 _write_fixed_str
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:10283  .text:0000756c _write_fixed_str_offset
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:10343  .text:000075dc _write_fixed_offset
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:10398  .text:0000764d _ucs2toasc
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:10469  .text:000076aa _write_fixed_string_log
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:10600  .text:0000784c _CreateRefList
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:10697  .text:000079b8 _DeleteRefList
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:10800  .text:00007ac4 _CreateListItemFromStr
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:10936  .text:00007cb6 _AddRefListItem
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:11113  .text:00007e84 _GetRefListItem
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:11191  .text:00007f28 _SetRefListItem
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:11284  .text:00007ff4 _DumpRefList
f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s:6617   .text:000042cd _str_add_pedding_bytes

UNDEFINED SYMBOLS
_mtk_gMaxDeployedLangs
_mtk_gLanguageArray
__alloca
__imp___iob
_CurrMaxStringId
_StrEnum
_StrIsPopulate
_Str
_fputws
_memcpy
_ResgenCATGetRegionEndStatment
_fputs
_ResgenCATGetRegionStartStatment
_strncpy
_strstr
_strlen
_fwprintf
__wtoi
_fclose
_fopen
_fprintf
_reslog_adaptor_fatal_error_pending_wlog
_swprintf
_fflush
_reslog_adaptor_wlog
_rewind
_wcstok
_strcmp
_fgetws
_feof
_wcscat
_wcscpy
_exit
_reslog_adaptor_log
_wcsstr
GAS LISTING f:/K7_TOUR/CODE/plutommi/Customer/ResGenerator/gcctmp/ccWKcaaa.s 			page 315


_free
_wcscmp
_wcslen
_memset
_malloc
_wcsncpy
