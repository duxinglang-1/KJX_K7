/*****************************************************************************
*  Copyright Statement:
*  --------------------
*  This software is protected by Copyright and the information contained
*  herein is confidential. The software may not be copied and the information
*  contained herein may not be used or disclosed except with the written
*  permission of MediaTek Inc. (C) 2005
*
*  BY OPENING THIS FILE, BUYER HEREBY UNEQUIVOCALLY ACKNOWLEDGES AND AGREES
*  THAT THE SOFTWARE/FIRMWARE AND ITS DOCUMENTATIONS ("MEDIATEK SOFTWARE")
*  RECEIVED FROM MEDIATEK AND/OR ITS REPRESENTATIVES ARE PROVIDED TO BUYER ON
*  AN "AS-IS" BASIS ONLY. MEDIATEK EXPRESSLY DISCLAIMS ANY AND ALL WARRANTIES,
*  EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE IMPLIED WARRANTIES OF
*  MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE OR NONINFRINGEMENT.
*  NEITHER DOES MEDIATEK PROVIDE ANY WARRANTY WHATSOEVER WITH RESPECT TO THE
*  SOFTWARE OF ANY THIRD PARTY WHICH MAY BE USED BY, INCORPORATED IN, OR
*  SUPPLIED WITH THE MEDIATEK SOFTWARE, AND BUYER AGREES TO LOOK ONLY TO SUCH
*  THIRD PARTY FOR ANY WARRANTY CLAIM RELATING THERETO. MEDIATEK SHALL ALSO
*  NOT BE RESPONSIBLE FOR ANY MEDIATEK SOFTWARE RELEASES MADE TO BUYER'S
*  SPECIFICATION OR TO CONFORM TO A PARTICULAR STANDARD OR OPEN FORUM.
*
*  BUYER'S SOLE AND EXCLUSIVE REMEDY AND MEDIATEK'S ENTIRE AND CUMULATIVE
*  LIABILITY WITH RESPECT TO THE MEDIATEK SOFTWARE RELEASED HEREUNDER WILL BE,
*  AT MEDIATEK'S OPTION, TO REVISE OR REPLACE THE MEDIATEK SOFTWARE AT ISSUE,
*  OR REFUND ANY SOFTWARE LICENSE FEES OR SERVICE CHARGE PAID BY BUYER TO
*  MEDIATEK FOR SUCH MEDIATEK SOFTWARE AT ISSUE. 
*
*  THE TRANSACTION CONTEMPLATED HEREUNDER SHALL BE CONSTRUED IN ACCORDANCE
*  WITH THE LAWS OF THE STATE OF CALIFORNIA, USA, EXCLUDING ITS CONFLICT OF
*  LAWS PRINCIPLES.  ANY DISPUTES, CONTROVERSIES OR CLAIMS ARISING THEREOF AND
*  RELATED THERETO SHALL BE SETTLED BY ARBITRATION IN SAN FRANCISCO, CA, UNDER
*  THE RULES OF THE INTERNATIONAL CHAMBER OF COMMERCE (ICC).
*
*****************************************************************************/

/*******************************************************************************
 * Filename:
 * ---------
 *  gui_effect_oem.h
 *
 * Project:
 * --------
 *  PlutoMMI
 *
 * Description:
 * ------------
 *  GUI Effect Engine Header
 *
 * Author:
 * -------
 * -------
 *
 *============================================================================
 *             HISTORY
 * Below this line, this part is controlled by PVCS VM. DO NOT MODIFY!!
 *------------------------------------------------------------------------------
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 * removed!
 * removed!
 * removed!
 *
 *------------------------------------------------------------------------------
 * Upper this line, this part is controlled by PVCS VM. DO NOT MODIFY!!
 *============================================================================
 ****************************************************************************/

#ifndef __GUI_EFFECT_OEM_H__
#define __GUI_EFFECT_OEM_H__

/***************************************************************************** 
 * Include
 *****************************************************************************/
#include "gdi_const.h"
#include "Gui_Setting.h"
#include "lcd_sw_inc.h"
#include "MMI_features_type.h"
#include "MMI_features.h"
#include "MMIDataType.h"
#include "gui_data_types.h"
#include "gdi_datatype.h"
#include "kal_general_types.h"
#include "gdi_features.h"
#include "gui_main_menu_post_oem.h"
#include "gui_menu_post_oem.h"

#include "gui_sse_ui_buffer.h"

/***************************************************************************** 
 * Define
 *****************************************************************************/
#if defined(__MMI_UI_MATRIX_MAIN_MENU_SLIDE_EFFECT__) || defined(__MMI_UI_LIST_SLIDE_EFFECT__)
#define __MMI_UI_EFFECT_ENGINE__
#endif /* defined(__MMI_UI_MATRIX_MAIN_MENU_SLIDE_EFFECT__) || defined(__MMI_UI_LIST_SLIDE_EFFECT__) */
 
#define GUI_EFFECT_MAX(a, b)   ((a) > (b) ? (a) : (b))
#define GUI_EFFECT_MIN(a, b)   ((a) < (b) ? (a) : (b))

#define GUI_EFFECT_LAYER_COLOR_FORMAT       GDI_COLOR_FORMAT_16
#define GUI_EFFECT_LAYER_BYTE_PER_PIXEL     GUI_EFFECT_LAYER_COLOR_FORMAT

/* rectangle helper macros */
#define GUI_RECT_TO_POINT(rect, x1, y1, x2, y2) \
    do                                  \
    {                                   \
        x1 = (rect).x;                  \
        y1 = (rect).y;                  \
        x2 = (x1) + (rect).width - 1;     \
        y2 = (y1) + (rect).height - 1;    \
    }                                   \
    while (0)

#define GUI_RECT(rect, _x, _y, _w, _h) \
    do \
    { \
        (rect).x = _x; \
        (rect).y = _y; \
        (rect).width = _w; \
        (rect).height = _h; \
    } while (0)

/* effect parameters */
#define GUI_EFFECT_LIST_SLIDE_DURATION                  150
#define GUI_EFFECT_MAIN_MENU_MATRIX_SLIDE_DURATION      150

/* GUI effect time resolution unit */
#define GUI_EFFECT_TIME_UNIT                            50  

/* Scaling Effect */
#define GUI_MATRIX_MAIN_MENU_SCALING_FRAME_FIRST          7
#define GUI_MATRIX_MAIN_MENU_SCALING_FRAME_SECOND         8
#define GUI_MATRIX_MAIN_MENU_SCALING_FRAME_THIRD          9
#define GUI_MATRIX_MAIN_MENU_SCALING_FRAME_LAST          10


/*
 * screen switch effect
 */
/* fixed point */
#define GUI_SCREEN_SWITCH_EFFECT_FIXED_POINT_PRECISION           12
#define GUI_SCREEN_SWITCH_EFFECT_FIXED_POINT(x)                  ((S32)((float)(x) * (float)(1 << GUI_SCREEN_SWITCH_EFFECT_FIXED_POINT_PRECISION)))
#define GUI_SCREEN_SWITCH_EFFECT_FIXED_POINT_TO_ROUND_INT(x)     (((x) + (1 << (GUI_SCREEN_SWITCH_EFFECT_FIXED_POINT_PRECISION - 1))) >> GUI_SCREEN_SWITCH_EFFECT_FIXED_POINT_PRECISION)
#define GUI_SCREEN_SWITCH_EFFECT_FIXED_POINT_MUL(a, b)           (((a) * (b)) >> GUI_SCREEN_SWITCH_EFFECT_FIXED_POINT_PRECISION)
#define GUI_EFFECT_ABS(x)  (((x) > 0) ? (x) : -(x))

#define GUI_SCREEN_SWITCH_EFFECT_TIMER_UNIT    33
#define GUI_SCREEN_SWITCH_EFFECT_FRAMES         6

/* number of objects dependent on the number of HW layers */
#ifdef GDI_6_LAYERS
#define GUI_SCREEN_SWITCH_EFFECT_MAX_OBJECT_NUM     6
#else /* GDI_6_LAYERS */
#define GUI_SCREEN_SWITCH_EFFECT_MAX_OBJECT_NUM     4
#endif /* GDI_6_LAYERS */

#define GUI_SCREEN_SWITCH_EFFECT_MAX_FRAME_NUM      20

#define GUI_SCREEN_SWITCH_EFFECT_SET_DEFAULT_PARAM(x) \
do \
{ \
    x.scale_x = x.scale_y = GUI_SCREEN_SWITCH_EFFECT_FIXED_POINT(1.0); \
    x.offset_x = x.offset_y = 0; \
    x.opacity = 255; \
    x.rotation = 0; \
    x.transform_matrix = NULL; \
    x.bg_color = 0; \
    x.z = 0; \
} while (0)

#define GUI_SSE_GET_ERROR_CODE()    g_gui_screen_switch_effect_error_code
#define GUI_SSE_SET_ERROR_CODE(x)    g_gui_screen_switch_effect_error_code = x

#define GUI_SSE_EFFECT_SELECTION_INVALID_SCREEN_ID   0xFFFF
#define GUI_SSE_EFFECT_SELECTION_DONT_CARE_SCREEN_ID    0xFFFE
#define GUI_SSE_EFFECT_SELECTION_END    {GUI_SSE_EFFECT_SELECTION_INVALID_SCREEN_ID, GUI_SSE_EFFECT_SELECTION_INVALID_SCREEN_ID, 0}
#define GUI_SSE_EFFECT_SELECTION(from, to, effect)  {(U16)(from), (U16)(to), (S16)(effect)}

/* list menu smooth scrolling by key on/off */
#if defined(__MMI_UI_LIST_SLIDE_EFFECT__) && \
    !(defined(__COSMOS_MMI_PACKAGE__) && defined(LOW_COST_SUPPORT)) && \
    (defined(__MMI_LIST_MENU_SMOOTH_SCROLLING__) && \
     ((__MMI_LIST_MENU_SMOOTH_SCROLLING__ == MENU_SMOOTH_SCROLLING_PEN_AND_KEY) || (__MMI_LIST_MENU_SMOOTH_SCROLLING__ == MENU_SMOOTH_SCROLLING_KEY)))
#define GUI_LIST_MENU_SMOOTH_SCROLLING_BY_KEY
#endif

#if defined(GUI_LIST_MENU_SMOOTH_SCROLLING_BY_KEY)
#define GUI_LIST_MENU_SMOOTH_SCROLLING_BY_NUMBER_KEY
#endif

#define GUI_LIST_MENU_SMOOTH_SCROLLING_BY_KEY_FRAME_NUM 5


/* list menu smooth scrolling by pen on/off */
#if defined(__MMI_UI_LIST_SLIDE_EFFECT__) && \
    defined(__MMI_TOUCH_SCREEN__) && \
    !(defined(__COSMOS_MMI_PACKAGE__) && defined(LOW_COST_SUPPORT)) && \
    (defined(__CPU_ARM7EJ_S__) || defined(__CPU_ARM9EJ_S__) || defined(__MMI_FTE_SUPPORT__)) && \
    (defined(__MMI_LIST_MENU_SMOOTH_SCROLLING__) && \
     ((__MMI_LIST_MENU_SMOOTH_SCROLLING__ == MENU_SMOOTH_SCROLLING_PEN_AND_KEY) || (__MMI_LIST_MENU_SMOOTH_SCROLLING__ == MENU_SMOOTH_SCROLLING_PEN)))
#define GUI_LIST_MENU_SMOOTH_SCROLLING_BY_PEN
#define __MMI_UI_LIST_SMOOTH_SCROLLING_BY_PEN__
#endif

#if defined(__MMI_TOUCH_SCREEN__) && (!defined(GUI_LIST_MENU_SMOOTH_SCROLLING_BY_PEN)) && defined(GUI_LIST_MENU_SMOOTH_SCROLLING_BY_KEY)
#define GUI_LIST_MENU_SSK_EFFECT_BY_PEN
#endif

#if defined(__MMI_TOUCH_SCREEN__) && \
    (defined(__MMI_FTE_SUPPORT__) || defined(MT6250)) && \
    defined(LOW_COST_SUPPORT)//!(defined(__COSMOS_MMI_PACKAGE__) &&) 
#define GUI_LIST_MENU_SMOOTH_SCROLLING_BY_PEN
#define __MMI_UI_LIST_SMOOTH_SCROLLING_BY_PEN__
#endif

/*
 * SSP parameters
 */
#define GUI_MENU_SSP_POS_DELTA_MIN  1
#define GUI_MENU_SSP_POS_DELTA_MAX  10
#define GUI_MENU_SSP_POS_DELTA_STEP 1
#ifdef __MMI_FTE_SUPPORT__
#define GUI_MENU_SSP_POS_DELTA      3
#else
#define GUI_MENU_SSP_POS_DELTA      8
#endif

#define GUI_SSP_FRAME_UPDATE_INTERVAL_MIN       0
#define GUI_SSP_FRAME_UPDATE_INTERVAL_MAX       10
#define GUI_SSP_FRAME_UPDATE_INTERVAL_STEP      1
#define GUI_SSP_FRAME_UPDATE_INTERVAL           0   /* SSP frame update interval in ms */

#define GUI_SSP_FREE_RUN_THRESHOLD_TIME_MIN     100
#define GUI_SSP_FREE_RUN_THRESHOLD_TIME_MAX     1000
#define GUI_SSP_FREE_RUN_THRESHOLD_TIME_STEP    50
#define GUI_SSP_FREE_RUN_THRESHOLD_TIME         400 /* free run state duration threshold between pen down and up in ms */

#define GUI_SSP_FREE_RUN_MOVEMENT_Y_THRESOLD_MIN    5
#define GUI_SSP_FREE_RUN_MOVEMENT_Y_THRESOLD_MAX    30
#define GUI_SSP_FREE_RUN_MOVEMENT_Y_THRESOLD_STEP   1
#define GUI_SSP_FREE_RUN_MOVEMENT_Y_THRESOLD    10  /* free run state y absolute movement threshold between pen down and up */

#define GUI_SSP_FREE_RUN_SCROLL_COEFFICIENT_MIN     0.5F
#define GUI_SSP_FREE_RUN_SCROLL_COEFFICIENT_MAX     0.99F
#define GUI_SSP_FREE_RUN_SCROLL_COEFFICIENT_STEP    0.01F
#ifdef __MMI_FTE_SUPPORT__
#define GUI_SSP_FREE_RUN_SCROLL_COEFFICIENT     0.99F
#else
#define GUI_SSP_FREE_RUN_SCROLL_COEFFICIENT     0.95F
#endif

#define GUI_SSP_FREE_RUN_RECOVER_COEFFICIENT_MIN    0.5F
#define GUI_SSP_FREE_RUN_RECOVER_COEFFICIENT_MAX    0.99F
#define GUI_SSP_FREE_RUN_RECOVER_COEFFICIENT_STEP   0.01F
#define GUI_SSP_FREE_RUN_RECOVER_COEFFICIENT    0.6F

#define GUI_SSP_FREE_RUN_SENSITIVITY_MIN        0.01F
#define GUI_SSP_FREE_RUN_SENSITIVITY_MAX        0.10F
#define GUI_SSP_FREE_RUN_SENSITIVITY_STEP       0.01F
#define GUI_SSP_FREE_RUN_SENSITIVITY            0.05F

#define GUI_SSP_FOCUS_TO_HOLD_STATE_Y_THRESHOLD_MIN     3
#define GUI_SSP_FOCUS_TO_HOLD_STATE_Y_THRESHOLD_MAX     40
#define GUI_SSP_FOCUS_TO_HOLD_STATE_Y_THRESHOLD_STEP    1

#ifdef __TOUCH_PANEL_CAPACITY__
#define GUI_SSP_FOCUS_TO_HOLD_STATE_Y_THRESHOLD 17   /* focus to hold state y absolute movement threshold */
#else /* __TOUCH_PANEL_CAPACITY__ */
#ifdef __MMI_FTE_SUPPORT__
#if defined(__MMI_MAINLCD_240X320__)
#define GUI_SSP_FOCUS_TO_HOLD_STATE_Y_THRESHOLD 20    /* focus to hold state y absolute movement threshold */
#elif defined(__MMI_MAINLCD_240X400__)
#define GUI_SSP_FOCUS_TO_HOLD_STATE_Y_THRESHOLD 25    /* focus to hold state y absolute movement threshold */
#elif defined(__MMI_MAINLCD_320X480__)
#define GUI_SSP_FOCUS_TO_HOLD_STATE_Y_THRESHOLD 28    /* focus to hold state y absolute movement threshold */
#else
#define GUI_SSP_FOCUS_TO_HOLD_STATE_Y_THRESHOLD 40    /* focus to hold state y absolute movement threshold */
#endif
#else /* __MMI_FTE_SUPPORT__ */
#define GUI_SSP_FOCUS_TO_HOLD_STATE_Y_THRESHOLD 5   /* focus to hold state y absolute movement threshold */
#endif /* __MMI_FTE_SUPPORT__ */
#endif /* __TOUCH_PANEL_CAPACITY__ */

#define GUI_SSP_MENU_OVER_LIMIT_COEFFICIENT_MIN     0.0F
#define GUI_SSP_MENU_OVER_LIMIT_COEFFICIENT_MAX     1.0F
#define GUI_SSP_MENU_OVER_LIMIT_COEFFICIENT_STEP    0.1F
#define GUI_SSP_MENU_OVER_LIMIT_COEFFICIENT     0//0.5F /* menu height ratio for over limit operation */

#if defined(GUI_LIST_MENU_SMOOTH_SCROLLING_BY_PEN) || defined(GUI_MATRIX_MENU_SMOOTH_SCROLLING_BY_PEN)
typedef struct _gui_list_ssp_parameter_struct
{
    U8 gui_menu_ssp_pos_delta;  
    // the total distance of ssp
    // range: [1, 10], step: 1

    U8 gui_ssp_frame_update_interval;
    // the time interval to update ssp frame
    // range: [0, 10], step: 1, unit: ms

    U8 gui_ssp_focus_to_hold_state_y_threshold;
    // the threshold time to trigger ssp
    // range: [100, 1000], step: 50, unit: ms

    U8 gui_ssp_free_run_movement_y_thresold;
    // the y threshold offset to trigger ssp
    // range: [5, 30], step: 1

    float gui_ssp_free_run_scroll_coefficient;
    // the slow down speed of ssp
    // range: [0.5F, 0.99F], step: 0.01

    float gui_ssp_free_run_recover_coefficient;
    // the slow down speed of ssp in recover mode
    // range: [0.5F, 0.99F], step: 0.01

    float gui_ssp_free_run_sensitivity;
    // the sensitivity of ssp, ssp move longer distance when the value is more bigger
    // range: [0.01F, 0.10F], step: 0.01

    float gui_ssp_menu_over_limit_coefficient;
    // the distance of recover ssp
    // range: [0.0F, 1.0F], step: 0.1F

    U16 gui_ssp_free_run_threshold_time;
    // the y offset threshold to trigger ssp move
    // range: [3, 40], step: 1
} gui_list_ssp_parameter_struct;
#endif  /* GUI_LIST_MENU_SMOOTH_SCROLLING_BY_PEN */

#ifdef  GUI_MATRIX_MENU_SMOOTH_SCROLLING_BY_PEN
#define GUI_MATRIX_SSP_FOCUS_TO_HOLD_STATE_X_THRESHOLD GUI_SSP_FOCUS_TO_HOLD_STATE_Y_THRESHOLD
#define GUI_MATRIX_SSP_FOCUS_TO_HOLD_STATE_Y_THRESHOLD GUI_SSP_FOCUS_TO_HOLD_STATE_Y_THRESHOLD
#endif  /* GUI_MATRIX_MENU_SMOOTH_SCROLLING_BY_PEN */

/* integer range */
#define GUI_EFFECT_INT_VALUE_MAX   0x7FFFFFFF
#define GUI_EFFECT_INT_VALUE_MIN   0x80000000

/* pi */
#define GUI_EFFECT_PI   3.14159265358979323846

#define GUI_EFFECT_SET_POINT(p, _x, _y)   do { (p).x = _x; (p).y = _y; } while (0)

/* fixed point transform related */
#define GUI_EFFECT_TRANSFORM_PRECISION_BITS  16
#define GUI_EFFECT_TRANSFORM_ROUNDING_VALUE  (1 << (GUI_EFFECT_TRANSFORM_PRECISION_BITS - 1))
#define GUI_EFFECT_TRANSFORM_BILINEAR_INTERPOLATE_BITS   7   /* max 7 */

#define GUI_EFFECT_TRANSFORM_FP(x)  ((int)((float)(x) * (float)(1 << GUI_EFFECT_TRANSFORM_PRECISION_BITS)))
#define GUI_EFFECT_TRANSFORM_INT(x) ((x) << GUI_EFFECT_TRANSFORM_PRECISION_BITS)
#define GUI_EFFECT_TRANSFORM_INV_DIV_PRECISION_BITS   28

/* for conversation box, default threshold for highlight half item when ssp stop */
#if defined(__MMI_UI_LIST_SCROLL_BY_PIXEL__)
#define GUI_SSP_DEFAULT_HIGHLIGHT_THRESHOLD 0xFFFF
#endif

/***************************************************************************** 
 * Typedef
 *****************************************************************************/
typedef struct
{
    S32 x, y;
    S32 width, height;
} gui_rect;

typedef struct
{
    gui_rect    rect;
    PU8         image;
} gui_image_rect;

typedef struct
{
    gui_rect    rect;
    gui_rect    rect_text;
    PU8         image;
    UI_string_type text;
} gui_image_text_rect;

typedef enum
{
    GUI_EFFECT_FRAME_FIRST = 0,
    GUI_EFFECT_FRAME_LAST = -1
} gui_effect_frame_enum;

typedef enum
{
    GUI_EFFECT_STATE_READY,
    GUI_EFFECT_STATE_RUNNING,
    GUI_EFFECT_STATE_CANCEL,
    GUI_EFFECT_STATE_DONE
} gui_effect_state_enum;

typedef void (*gui_effect_funcptr_type)(S32, S32, S32, S32);

typedef struct
{
    S32 start_x, start_y, end_x, end_y;
    S32 old_x, old_y;
    S32 width, height;
    S32 frame_count;
    S32 current_frame_index;
    
    gui_effect_state_enum   state;

    S32 is_executed;
    S32 in_flatten;

    gui_effect_funcptr_type finish_callback;
    gui_effect_funcptr_type show_callback;
    gui_effect_funcptr_type hide_callback;
} gui_effect_struct;


/*
 * screen switch effect
 */
typedef enum
{
    GUI_SCREEN_SWITCH_EFFECT_NONE,
    GUI_SCREEN_SWITCH_EFFECT_KEEP_ORIGINAL, /* This is not an effect! */

    GUI_SCREEN_SWITCH_EFFECT_SLIDE_LEFT,
    GUI_SCREEN_SWITCH_EFFECT_SLIDE_RIGHT,
    GUI_SCREEN_SWITCH_EFFECT_SLIDE_UP,
    GUI_SCREEN_SWITCH_EFFECT_SLIDE_DOWN,    
    GUI_SCREEN_SWITCH_EFFECT_SLIDE_AND_BLEND_IN,
    GUI_SCREEN_SWITCH_EFFECT_SLIDE_AND_BLEND_OUT,
    GUI_SCREEN_SWITCH_EFFECT_ZOOM_IN,
    GUI_SCREEN_SWITCH_EFFECT_ZOOM_OUT,
    GUI_SCREEN_SWITCH_EFFECT_BLEND_IN,
    GUI_SCREEN_SWITCH_EFFECT_BLEND_OUT,    
    GUI_SCREEN_SWITCH_EFFECT_SUBMENU_SLIDE_LEFT,
    GUI_SCREEN_SWITCH_EFFECT_SUBMENU_SLIDE_RIGHT,    
    GUI_SCREEN_SWITCH_EFFECT_ZOOM_AND_BLEND_IN,
    GUI_SCREEN_SWITCH_EFFECT_ZOOM_AND_BLEND_OUT,

    GUI_SCREEN_SWITCH_EFFECT_FLIP_CLOCK_WISE,
    GUI_SCREEN_SWITCH_EFFECT_FLIP_COUNTERCLOCK_WISE,
    GUI_SCREEN_SWITCH_EFFECT_ROTATE_IN,    
    GUI_SCREEN_SWITCH_EFFECT_ROTATE_OUT,
    
    GUI_SCREEN_SWITCH_EFFECT_CUBE_CLOCK_WISE,
    GUI_SCREEN_SWITCH_EFFECT_CUBE_COUNTERCLOCK_WISE,    
    
    /* 08B SSEv2 effects */
    GUI_SCREEN_SWITCH_EFFECT_PAGE_TURN_LEFT,
    GUI_SCREEN_SWITCH_EFFECT_PAGE_TURN_RIGHT,
    GUI_SCREEN_SWITCH_EFFECT_MOVE_IN_LEFT,      /* new screen move left */
    GUI_SCREEN_SWITCH_EFFECT_MOVE_IN_RIGHT,     /* new screen move right */
    GUI_SCREEN_SWITCH_EFFECT_MOVE_IN_DOWN,      /* new screen move down */
    GUI_SCREEN_SWITCH_EFFECT_MOVE_IN_UP,        /* new screen move up */
    GUI_SCREEN_SWITCH_EFFECT_MOVE_OUT_LEFT,     /* old screen move left */
    GUI_SCREEN_SWITCH_EFFECT_MOVE_OUT_RIGHT,    /* old screen move right */ 
    GUI_SCREEN_SWITCH_EFFECT_MOVE_OUT_DOWN,     /* old screen move down */
    GUI_SCREEN_SWITCH_EFFECT_MOVE_OUT_UP,       /* old screen move up */

    GUI_SCREEN_SWITCH_EFFECT_MATRIX_MAIN_MENU_ICON_EXPAND,
    GUI_SCREEN_SWITCH_EFFECT_BI_DEGREE_MAIN_MENU_SLIDING,
    
    GUI_SCREEN_SWITCH_EEFECT_OWNER_DRAW1,       /* owner draw 1 */
    GUI_SCREEN_SWITCH_EEFECT_OWNER_DRAW2,       /* owner draw 2 */
    GUI_SCREEN_SWITCH_EEFECT_OWNER_DRAW3,       /* owner draw 3 */

    GUI_SCREEN_SWITCH_EEFECT_CALENDAR_PAGE_UP,      /* next month */
    GUI_SCREEN_SWITCH_EEFECT_CALENDAR_PAGE_DOWN,    /* prev month */

    GUI_SCREEN_SWITCH_EEFECT_REVOLVING_GATE_TURN_LEFT,
    GUI_SCREEN_SWITCH_EEFECT_REVOLVING_GATE_TURN_RIGHT,

    GUI_SCREEN_SWITCH_EEFECT_DIAGONAL_FLIP_TURN_LEFT,
    GUI_SCREEN_SWITCH_EEFECT_DIAGONAL_FLIP_TURN_RIGHT,

    GUI_SCREEN_SWITCH_EEFECT_INDIVIDUAL_FLIP_DOWN,
    GUI_SCREEN_SWITCH_EEFECT_INDIVIDUAL_FLIP_UP,

    GUI_SCREEN_SWITCH_EEFECT_OBLIQUE_FLY_OUT,
    GUI_SCREEN_SWITCH_EEFECT_OBLIQUE_FLY_IN,

    GUI_SCREEN_SWITCH_EEFECT_ICON_FLIP,

    GUI_SCREEN_SWITCH_EFFECT_OP11_HS_SLIDING,
    GUI_SCREEN_SWITCH_EFFECT_OP11_HS_FADEIN,

    GUI_SCREEN_SWITCH_EFFECT_COSMOS_APP_ENTRY,
    GUI_SCREEN_SWITCH_EFFECT_COSMOS_APP_EXIT,

    GUI_SCREEN_SWITCH_EFFECT_COSMOS_PAGE_ENTRY,
    GUI_SCREEN_SWITCH_EFFECT_COSMOS_PAGE_EXIT,

    /* add new effects below */
    GUI_SCREEN_SWITCH_EFFECT_CUSTOM,
        
    GUI_SCREEN_SWITCH_EFFECT_NUM
} gui_screen_switch_effect_type_enum;

typedef enum
{
    GUI_SSE_CUSTOM_RETURN_CODE_DEFAULT,
    GUI_SSE_CUSTOM_RETURN_CODE_NO_EFFECT,
    GUI_SSE_CUSTOM_RETURN_CODE_CUSTOM_EFFECT,
    GUI_SSE_CUSTOM_RETURN_CODE_END_OF_ENUM
} gui_screen_switch_effect_custom_return_code_enum;

typedef enum
{
    GUI_SSE_STAGE_PRE_SETUP,
    GUI_SSE_STAGE_POST_SETUP,
    GUI_SSE_STAGE_PRE_RUN,
    GUI_SSE_STAGE_POST_RUN,
    GUI_SSE_STAGE_EXIT,
    GUI_SSE_STAGE_END_OF_ENUM
} gui_screen_switch_effect_stage_enum;

typedef struct
{
    gui_screen_switch_effect_type_enum effect_type;
    S32 previous_screen_id;
    S32 previous_category_id;    
} gui_screen_switch_effect_custom_param_struct;


/* screen switch effect error code */
typedef enum
{
    GUI_SSE_ERROR_NONE = 0,
    GUI_SSE_ERROR_SUBMENU_SLIDE = 0x1000
} gui_screen_switch_effect_error_enum;

typedef enum
{
    GUI_SSE_SCENARIO_NONE = 0,

    GUI_SSE_SCENARIO_NO_EFFECT,

    /* idle screen */
    GUI_SSE_SCENARIO_ENTER_IDLE,
    GUI_SSE_SCENARIO_FROM_IDLE,
    GUI_SSE_SCENARIO_FROM_IDLE_SHORTCUT,

    GUI_SSE_SCENARIO_FROM_VENUS_HS_WIDGET,
    GUI_SSE_SCENARIO_FROM_VENUS_HS_SHORTCUT,

    GUI_SSE_SCENARIO_FROM_OP11_HS,
    GUI_SSE_SCENARIO_FROM_OP11_HS_POPUP,

    /* main menu */
    GUI_SSE_SCENARIO_IDLE_SHORTCUT_TO_MAINMENU,
    GUI_SSE_SCENARIO_ENTER_MAINMENU,
    GUI_SSE_SCENARIO_FROM_MAINMENU,

    /* photowall */
    GUI_SSE_SCENARIO_FROM_PHOTOWALL_TO_IMGVIEWER,

    /* small screen */
    GUI_SSE_SCENARIO_SMALL_SCREEN_IN,
    GUI_SSE_SCENARIO_SMALL_SCREEN_OUT,

    /* calendar */
    GUI_SSE_SCENARIO_CALENDAR_PAGE_UP,
    GUI_SSE_SCENARIO_CALENDAR_PAGE_DOWN,

    /* Cosmos */
    GUI_SSE_SCENARIO_COSMOS_APP_ENTRY,
    GUI_SSE_SCENARIO_COSMOS_APP_EXIT,
    GUI_SSE_SCENARIO_COSMOS_PAGE_ENTRY,
    GUI_SSE_SCENARIO_COSMOS_PAGE_EXIT,
    GUI_SSE_SCENARIO_COSMOS_MOVE_ENTRY,
    GUI_SSE_SCENARIO_COSMOS_MOVE_EXIT,

    /* Cosmos 3D */
    GUI_SSE_SCENARIO_COSMOS_3D_TRIANGLE_ENTER,
    GUI_SSE_SCENARIO_COSMOS_3D_TRIANGLE_EXIT,
    GUI_SSE_SCENARIO_COSMOS_3D_CIRCLE_ENTER,
    GUI_SSE_SCENARIO_COSMOS_3D_CIRCLE_EXIT,   
    GUI_SSE_SCENARIO_COSMOS_3D_CUBE_ENTER,
    GUI_SSE_SCENARIO_COSMOS_3D_CUBE_EXIT,
    GUI_SSE_SCENARIO_COSMOS_3D_BRICK_ENTER,
    GUI_SSE_SCENARIO_COSMOS_3D_BRICK_EXIT,
    GUI_SSE_SCENARIO_COSMOS_3D_TWIST_ENTER,
    GUI_SSE_SCENARIO_COSMOS_3D_TWIST_EXIT,

    /* FTE Full Default */
    GUI_SSE_SCENARIO_FTE_DEFAULT_ENTER,
    GUI_SSE_SCENARIO_FTE_DEFAULT_EXIT,


    GUI_SSE_SCENARIO_END
} gui_sse_scenario_enum;

typedef struct
{
    S32 offset_x, offset_y;
    S32 scale_x, scale_y; 
    S32 opacity;    
    S32 rotation;
    float *transform_matrix;
    gdi_color bg_color;
    S32 z;
} gui_screen_switch_effect_param_struct;

struct _gui_screen_switch_effect_object_struct
{
    S32     id;
    S32     width, height;
    S32     bpp;
    S32     z;      /* z order */
    MMI_BOOL enable_source_key;
    PU8     buf;
    PU8     buf2;   /* buffer for double buffering */

    void (*get_param_callback)(struct _gui_screen_switch_effect_object_struct *object, gui_screen_switch_effect_param_struct *param, S32 time);
    void (*draw_callback)(struct _gui_screen_switch_effect_object_struct *object, gui_screen_switch_effect_param_struct *param, S32 time, gdi_handle *layers);
};


/* SSE world struct */
// TODO: should move all world variables here
typedef struct
{
    /* enable non-blocking blt to speed up MCU-rendering frames */
    MMI_BOOL enable_non_blocking_blt;

    S32 tmp_buffer_size;
    PU8 tmp_buffer_p;
} gui_screen_switch_effect_world_struct;

/* SSE effect selection entry */
typedef struct
{
    U16 from_scr_id;    /* from the screen id */
    U16 to_scr_id;      /* to the screen id */
    S16 effect_type;    /* chosen effect type (use S16 to reduce the array size) */
} gui_sse_effect_selection_struct;

typedef struct _gui_screen_switch_effect_object_struct gui_screen_switch_effect_object_struct;
typedef void (*gui_screen_switch_effect_object_get_param_funcptr)(gui_screen_switch_effect_object_struct *object, gui_screen_switch_effect_param_struct *param, S32 time);
typedef void (*gui_screen_switch_effect_finish_callback_funcptr_type)(S32 frame_index);

typedef MMI_BOOL (*gui_sse_owner_draw_frame_callback_funcptr_type)(gui_screen_switch_effect_type_enum effect_type, S32 current_frame_index, S32 total_frame_num);
typedef gui_screen_switch_effect_custom_return_code_enum (*gui_sse_custom_callback_funcptr_type)(gui_screen_switch_effect_stage_enum stage_type, gui_screen_switch_effect_custom_param_struct *param);


/* menu smooth scrolling */
typedef enum
{
    GUI_MENU_SMOOTH_SCROLL_UP,
    GUI_MENU_SMOOTH_SCROLL_DOWN,
    GUI_MENU_SMOOTH_SCROLL_END
} gui_menu_scroll_direction_enum;

typedef struct
{
    S32 allocated_size;
    S32 free_size;
    void *buf;
} gui_effect_memory_manager_struct;


/*
 * transformation
 */
typedef enum
{
    GUI_EFFECT_AFFINE_TRANSFORM_SUBSAMPLE_MODE_NEAREST,
    GUI_EFFECT_AFFINE_TRANSFORM_SUBSAMPLE_MODE_BILINEAR,
    GUI_EFFECT_AFFINE_TRANSFORM_SUBSAMPLE_MODE_END
} gui_effect_affine_transform_subsample_mode_enum;

typedef enum
{
    GUI_EFFECT_PROJECTIVE_TRANSFORM_SUBSAMPLE_MODE_NEAREST,
    GUI_EFFECT_PROJECTIVE_TRANSFORM_SUBSAMPLE_MODE_BILINEAR,
    GUI_EFFECT_PROJECTIVE_TRANSFORM_SUBSAMPLE_MODE_END
} gui_effect_projective_transform_subsample_mode_enum;

typedef struct
{
    S32 x;
    S32 y;
} gui_effect_point_struct;

typedef struct
{
    S32 m[6];
} gui_effect_affine_transform_matrix_struct;

typedef struct
{
    S32 m[9];
} gui_effect_projective_transform_matrix_struct;

typedef struct
{
    float m[8];
} gui_sse_projective_transform_matrix_struct;

/*
 * Smooth Scrolling by Pen (SSP)
 */
typedef enum
{
    GUI_LIST_SMOOTH_SCROLLING_BY_PEN_STATE_UNFOCUS,
    GUI_LIST_SMOOTH_SCROLLING_BY_PEN_STATE_FOCUS,
    GUI_LIST_SMOOTH_SCROLLING_BY_PEN_STATE_HOLD,
    GUI_LIST_SMOOTH_SCROLLING_BY_PEN_STATE_FREE_RUN,
    GUI_LIST_SMOOTH_SCROLLING_BY_PEN_STATE_TOTAL
} gui_list_smooth_scrolling_by_pen_state_enum;

#ifdef  GUI_MATRIX_MENU_SMOOTH_SCROLLING_BY_PEN
/*
 * Matrix Smooth Scrolling by Pen (SSP)
 */
typedef enum
{
    GUI_MATRIX_SMOOTH_SCROLLING_BY_PEN_STATE_UNFOCUS,
    GUI_MATRIX_SMOOTH_SCROLLING_BY_PEN_STATE_FOCUS,
    GUI_MATRIX_SMOOTH_SCROLLING_BY_PEN_STATE_HOLD,
    GUI_MATRIX_SMOOTH_SCROLLING_BY_PEN_STATE_FREE_RUN,
    GUI_MATRIX_SMOOTH_SCROLLING_BY_PEN_STATE_TOTAL
} gui_matrix_smooth_scrolling_by_pen_state_enum;
#endif  /* GUI_MATRIX_MENU_SMOOTH_SCROLLING_BY_PEN */

typedef enum
{
    GUI_SSP_FREE_RUN_MODE_RECOVER,
    GUI_SSP_FREE_RUN_MODE_RUN,
    GUI_SSP_FREE_RUN_MODE_TOTAL
} gui_ssp_free_run_mode_enum;

/***************************************************************************** 
 * Global Function
 *****************************************************************************/
extern S32 gui_rect_get_intersection(gui_rect *rect1, gui_rect *rect2, gui_rect *result_rect);
extern void gui_draw_image_with_alpha(S32 x, S32 y, gui_rect *out_rect, PU8 image, gui_rect *text_out, UI_string_type string, gdi_handle output_layer);

extern void gui_effect_set_blt_layer(void);
#ifdef __MMI_UI_MATRIX_MAIN_MENU_SCALING_EFFECT__
extern void gui_effect_scaling_set_blt_layer(void);
#endif /* __MMI_UI_MATRIX_MAIN_MENU_SCALING_EFFECT__ */
extern void gui_effect_restore_blt_layer(void);
extern void gui_effect_register_hide_callback(gui_effect_funcptr_type hide_cb);

extern void gui_effect_slide_create(S32 start_x, S32 start_y, S32 end_x, S32 end_y, S32 width, S32 height, S32 duration, gui_effect_funcptr_type show_cb, gui_effect_funcptr_type finish_cb, S32 start_frame_index);
#ifndef __MMI_UI_MENU_SLIM__
extern void gui_effect_slide_close(void);
extern void gui_effect_close(void);
void gui_smooth_scrolling_effect_post_exit_category(void);

#else
#define gui_effect_slide_close() 
#define gui_effect_close() 
#define gui_smooth_scrolling_effect_post_exit_category()
#endif
extern void gui_effect_slide_draw_last_frame(void);

extern void gui_effect_create(void);

extern S32 gui_list_effect_slide_is_highlight_item_two_line(void);
extern S32 gui_list_menu_is_highlight_item_two_line(void);



extern MMI_BOOL gui_screen_smooth_scrolling_by_pen(void);
//extern MMI_BOOL gui_screen_matrix_smooth_scrolling_by_pen(void);
extern MMI_BOOL gui_screen_smooth_scrolling_in_freerun(void);
extern void gui_ssp_sync_list_menu_display(void);
#ifdef GUI_LIST_MENU_SMOOTH_SCROLLING_BY_PEN
extern void gui_ssp_update_frame(void);
extern void gui_ssp_pen_up_dummy(void);
extern void gui_ssp_reset_state(void);
extern MMI_BOOL gui_ssp_pos_in_menu(S32 x, S32 y);
#endif

#ifdef GUI_MATRIX_MENU_SMOOTH_SCROLLING_BY_PEN
void gui_matrix_ssp_update_frame (void);
void gui_matrix_ssp_pen_up_dummy(void);
void gui_ssp_sync_matrix_menu_display (void);
void gui_matrix_menu_enable_ssp(MMI_BOOL enable_ssp);
#endif


/*
 * screen switch effect
 */
extern void gui_sse_set_is_dummy_screen(MMI_BOOL is_dummy);
extern void gui_sse_set_is_small_screen(MMI_BOOL is_dummy);

extern void gui_sse_setup_scenario(gui_sse_scenario_enum scenario);
extern void gui_sse_scenario_begion(gui_sse_scenario_enum scenario);
extern void gui_sse_scenario_commit(void);

#ifdef __MMI_SCREEN_SWITCH_EFFECT__
extern void gui_screen_switch_effect_pre_exit_screen(void);
extern void gui_screen_switch_effect_pre_exit_category(void);

extern void gui_screen_switch_effect_block(MMI_BOOL enable);
extern void gui_screen_switch_effect_force_enable(MMI_BOOL enable);
extern void gui_screen_switch_effect_force_block(MMI_BOOL is_force_block);
extern MMI_BOOL gui_screen_switch_effect_is_enabled(void);

/* get SSE frame buffer information */
extern void gui_screen_switch_effect_get_frame_buffer_info(U32 frame_buf_index, PU8 *buf_p, S32 *buf_size);
/* get SSE frame buffer count */
extern S32 gui_screen_switch_effect_get_frame_buffer_count(void);
#endif /* __MMI_SCREEN_SWITCH_EFFECT__ */

#if defined(__MMI_SCREEN_SWITCH_EFFECT__) || defined(GUI_LIST_MENU_SMOOTH_SCROLLING_BY_KEY) || defined(GUI_LIST_MENU_SMOOTH_SCROLLING_BY_PEN)
extern void gui_screen_switch_effect_setup(S32 category_id, S32 category_flag, S32 category_redraw);
extern void gui_screen_switch_effect_post_exit_category(void);

#ifdef __MMI_VUI_ENGINE__
#ifdef __PLUTO_3D_V10__
#define gui_screen_switch_effect_v2p_setup_widget()     gui_sse_setup_scenario(GUI_SSE_SCENARIO_COSMOS_3D_CIRCLE_ENTER);
#else
#define gui_screen_switch_effect_v2p_setup_widget()     gui_sse_setup_scenario(GUI_SSE_SCENARIO_FROM_VENUS_HS_WIDGET);
#endif
#define gui_screen_switch_effect_v2p_setup_shortcut()   gui_sse_setup_scenario(GUI_SSE_SCENARIO_FROM_VENUS_HS_SHORTCUT);
#endif /* __MMI_VUI_ENGINE__ */

void gui_screen_switch_effect_setup_MM(void);
extern U8* gui_effect_get_buf_b(void);
extern void gui_effect_cpy_buf_a2b(void);

#endif /* defined(__MMI_SCREEN_SWITCH_EFFECT__) || defined(GUI_LIST_MENU_SMOOTH_SCROLLING_BY_KEY) */

#if defined(__MMI_SCREEN_SWITCH_EFFECT__) || defined(GUI_LIST_MENU_SMOOTH_SCROLLING_BY_PEN)
extern void gui_screen_switch_effect_register_owner_draw_frame_callback(gui_sse_owner_draw_frame_callback_funcptr_type draw_frame_callback);
extern void gui_screen_switch_effect_register_custom_callback(gui_sse_custom_callback_funcptr_type custom_callback);

extern void gui_screen_switch_effect_setup_effect(gui_screen_switch_effect_type_enum effect_type, S32 total_frame_num, S32 frame_duration);
extern void gui_screen_switch_effect_run_effect(gui_screen_switch_effect_type_enum effect_type);
extern void gui_screen_switch_effect_run(void);
#endif

#if defined(GUI_LIST_MENU_SMOOTH_SCROLLING_BY_KEY) || defined(GUI_LIST_MENU_SMOOTH_SCROLLING_BY_PEN)
extern void gui_list_menu_smooth_scrolling_register_stop_callback(FuncPtr stop_callback);
#endif

#ifdef GUI_LIST_MENU_SMOOTH_SCROLLING_BY_KEY
extern MMI_BOOL gui_list_menu_is_support_smooth_scrolling(void);
#endif

extern MMI_BOOL gui_screen_smooth_scrolling_in_freerun(void);

extern void gui_effect_register_query_enable_draw_last_frame(MMI_BOOL(*f)(void));
extern void gui_ssp_set_static_layer(gdi_handle layer);
#ifndef __MMI_UI_MENU_SLIM__
extern void gui_ssp_reset_static_layer(void);
extern MMI_BOOL gui_screen_smooth_scrolling_moved_by_pen(void);
#else
  #define gui_screen_smooth_scrolling_moved_by_pen() 0
  #define gui_ssp_reset_static_layer() 
#endif
#if defined(GUI_LIST_MENU_SMOOTH_SCROLLING_BY_PEN) || defined(GUI_MATRIX_MENU_SMOOTH_SCROLLING_BY_PEN)
extern void gui_list_ssp_set_parameter(gui_list_ssp_parameter_struct *ssp_parameter);
extern void gui_list_ssp_reset_parameter(void);
extern void gui_list_ssp_init_parameter(void);
extern void gui_list_ssp_get_parameter(gui_list_ssp_parameter_struct *a);
#endif

#if defined(GUI_LIST_MENU_SMOOTH_SCROLLING_BY_PEN) && defined(__MMI_UI_LIST_SCROLL_BY_PIXEL__)
extern void gui_ssp_set_highlight_threshold(U16 highlight_first_threshold, U16 hilight_last_threshold);
#endif

#if defined(GUI_MATRIX_MENU_SMOOTH_SCROLLING_BY_PEN)
extern MMI_BOOL gui_matrix_screen_smooth_scrolling_moved_by_pen(void);
extern void gui_matrix_ssp_reset_state(void);
#endif
#endif /* __GUI_EFFECT_OEM_H__ */



